{"version":3,"file":"static/js/681.17bc3da3.chunk.js","mappings":"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","sources":["webpack://SUBRIVA-BILLING/./src/pages/Reports/Reports.module.css?8987","pages/Reports/hooks/useReportData.ts","pages/Reports/hooks/useReportExport.ts","pages/Reports/utils/exportHelpers.ts","pages/Reports/context/ReportDataContext.tsx","pages/Reports/components/ComprehensiveReport.tsx","pages/Reports/components/FinancialReport.tsx","pages/Reports/components/SalesReport.tsx","pages/Reports/components/CustomerReport.tsx","pages/Reports/components/InventoryReport.tsx","pages/Reports/components/StaffReport.tsx","pages/Reports/components/PaymentReport.tsx","pages/Reports/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Reports_container__+ISRf\",\"header\":\"Reports_header__+QbJp\",\"title\":\"Reports_title__oKRYF\",\"subtitle\":\"Reports_subtitle__O1oJS\",\"filters\":\"Reports_filters__e9hnV\",\"metrics\":\"Reports_metrics__jawXv\",\"metricCard\":\"Reports_metricCard__8L57y\",\"charts\":\"Reports_charts__qH60B\",\"chartCard\":\"Reports_chartCard__O8Elt\",\"tableCard\":\"Reports_tableCard__cseHD\",\"tableHeader\":\"Reports_tableHeader__k2LsJ\",\"tableTitle\":\"Reports_tableTitle__KfP1F\",\"tableActions\":\"Reports_tableActions__kaRky\",\"tabs\":\"Reports_tabs__eVhVz\",\"chartContainer\":\"Reports_chartContainer__hfUi6\"};","import { useState, useCallback, useEffect, useRef, useMemo } from 'react';\r\nimport { message } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport { apiSlice } from '../../../services/redux/api/apiSlice';\r\n\r\nexport type ReportType = 'comprehensive' | 'financial' | 'sales' | 'customer' | 'inventory' | 'staff' | 'payment';\r\n\r\ninterface UseReportDataProps {\r\n  activeTab: string;\r\n  selectedTenant: string;\r\n  selectedOrganisation: string;\r\n  selectedBranch: string;\r\n  dateRange: [dayjs.Dayjs, dayjs.Dayjs] | null;\r\n  isSuperAdmin: boolean;\r\n}\r\n\r\n// Map tab keys to report types\r\nexport const getReportTypeFromTab = (tabKey: string): ReportType => {\r\n  switch (tabKey) {\r\n    case '1': return 'comprehensive';\r\n    case '2': return 'financial';\r\n    case '3': return 'sales';\r\n    case '4': return 'customer';\r\n    case '5': return 'inventory';\r\n    case '6': return 'staff';\r\n    case '7': return 'payment';\r\n    default: return 'comprehensive';\r\n  }\r\n};\r\n\r\nexport const useReportData = (props: UseReportDataProps) => {\r\n  const { activeTab, selectedTenant, selectedOrganisation, selectedBranch, dateRange } = props;\r\n  const [loading, setLoading] = useState(false);\r\n  const [reportCache, setReportCache] = useState<{[key: string]: any}>({});\r\n  const loadingTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n  \r\n  // Prepare API filters - memoized to prevent unnecessary refetches\r\n  const apiFilters = useMemo(() => ({\r\n    start_date: dateRange?.[0]?.format('YYYY-MM-DD'),\r\n    end_date: dateRange?.[1]?.format('YYYY-MM-DD'),\r\n  }), [dateRange]);\r\n  \r\n  // Memoize additional filter objects to prevent recreation on every render\r\n  const topProductsFilters = useMemo(() => ({\r\n    ...apiFilters,\r\n    limit: 10,\r\n  }), [apiFilters]);\r\n  \r\n  const topCustomersFilters = useMemo(() => ({\r\n    ...apiFilters,\r\n    limit: 10,\r\n  }), [apiFilters]);\r\n  \r\n  const stockExpiryFilters = useMemo(() => ({\r\n    days_threshold: 30,\r\n  }), []);\r\n  \r\n  const emptyFilters = useMemo(() => ({}), []);\r\n  \r\n  // Use RTK Query for all report types\r\n  const reportType = getReportTypeFromTab(activeTab);\r\n  \r\n  // Conditionally fetch reports based on ONLY the active tab (no comprehensive fetching all)\r\n  const shouldFetchSales = reportType === 'sales';\r\n  const shouldFetchProductSales = reportType === 'sales';\r\n  const shouldFetchTopProducts = reportType === 'sales';\r\n  \r\n  const shouldFetchCustomer = reportType === 'customer';\r\n  const shouldFetchTopCustomers = reportType === 'customer';\r\n  \r\n  const shouldFetchInventory = reportType === 'inventory';\r\n  const shouldFetchStockExpiry = reportType === 'inventory';\r\n  \r\n  const shouldFetchFinancial = reportType === 'financial';\r\n  const shouldFetchExpense = reportType === 'financial';\r\n  const shouldFetchGST = reportType === 'financial';\r\n  \r\n  const shouldFetchPayment = reportType === 'payment';\r\n  const shouldFetchOutstanding = reportType === 'payment';\r\n  \r\n  // For Comprehensive tab, fetch minimal summary data only\r\n  const shouldFetchComprehensive = reportType === 'comprehensive';\r\n  const shouldFetchSalesForComp = shouldFetchComprehensive;\r\n  const shouldFetchProfitLossForComp = shouldFetchComprehensive;\r\n  const shouldFetchCustomerForComp = shouldFetchComprehensive;\r\n  const shouldFetchStockForComp = shouldFetchComprehensive;\r\n  const shouldFetchPaymentForComp = shouldFetchComprehensive;\r\n  \r\n  const { data: salesReportResponse, refetch: refetchSales } = apiSlice.useGetSalesReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchSales && !shouldFetchSalesForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: productSalesResponse, refetch: refetchProductSales } = apiSlice.useGetProductSalesReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchProductSales && !shouldFetchSalesForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: customerSalesResponse, refetch: refetchCustomerSales } = apiSlice.useGetCustomerSalesReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchCustomer && !shouldFetchCustomerForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: stockReportResponse, refetch: refetchStock } = apiSlice.useGetStockReportQuery(\r\n    emptyFilters,\r\n    { \r\n      skip: !shouldFetchInventory && !shouldFetchStockForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: profitLossResponse, refetch: refetchProfitLoss } = apiSlice.useGetProfitLossReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchFinancial && !shouldFetchProfitLossForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: outstandingPaymentsResponse, refetch: refetchOutstanding } = apiSlice.useGetOutstandingPaymentsReportQuery(\r\n    emptyFilters,\r\n    { \r\n      skip: !shouldFetchOutstanding,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: paymentCollectionResponse, refetch: refetchPaymentCollection } = apiSlice.useGetPaymentCollectionReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchPayment && !shouldFetchPaymentForComp,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: expenseResponse, refetch: refetchExpense } = apiSlice.useGetExpenseReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchExpense,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: gstResponse, refetch: refetchGST } = apiSlice.useGetGSTReportQuery(\r\n    apiFilters,\r\n    { \r\n      skip: !shouldFetchGST,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: topProductsResponse, refetch: refetchTopProducts } = apiSlice.useGetTopProductsReportQuery(\r\n    topProductsFilters,\r\n    { \r\n      skip: !shouldFetchTopProducts,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: topCustomersResponse, refetch: refetchTopCustomers } = apiSlice.useGetTopCustomersReportQuery(\r\n    topCustomersFilters,\r\n    { \r\n      skip: !shouldFetchTopCustomers,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  const { data: stockExpiryResponse, refetch: refetchStockExpiry } = apiSlice.useGetStockExpiryReportQuery(\r\n    stockExpiryFilters,\r\n    { \r\n      skip: !shouldFetchStockExpiry,\r\n      refetchOnMountOrArgChange: false,\r\n      refetchOnFocus: false,\r\n      refetchOnReconnect: false,\r\n    }\r\n  );\r\n  \r\n  // Extract result from responses\r\n  const salesReportData = useMemo(() => ({\r\n    result: (salesReportResponse as any)?.result || salesReportResponse,\r\n    loading: false,\r\n  }), [salesReportResponse]);\r\n  \r\n  const productSalesData = useMemo(() => ({\r\n    result: (productSalesResponse as any)?.result || productSalesResponse,\r\n    loading: false,\r\n  }), [productSalesResponse]);\r\n  \r\n  const customerSalesData = useMemo(() => ({\r\n    result: (customerSalesResponse as any)?.result || customerSalesResponse,\r\n    loading: false,\r\n  }), [customerSalesResponse]);\r\n  \r\n  const stockReportData = useMemo(() => ({\r\n    result: (stockReportResponse as any)?.result || stockReportResponse,\r\n    loading: false,\r\n  }), [stockReportResponse]);\r\n  \r\n  const profitLossData = useMemo(() => ({\r\n    result: (profitLossResponse as any)?.result || profitLossResponse,\r\n    loading: false,\r\n  }), [profitLossResponse]);\r\n  \r\n  const outstandingPaymentsData = useMemo(() => ({\r\n    result: (outstandingPaymentsResponse as any)?.result || outstandingPaymentsResponse,\r\n    loading: false,\r\n  }), [outstandingPaymentsResponse]);\r\n  \r\n  const paymentCollectionData = useMemo(() => ({\r\n    result: (paymentCollectionResponse as any)?.result || paymentCollectionResponse,\r\n    loading: false,\r\n  }), [paymentCollectionResponse]);\r\n  \r\n  const expenseData = useMemo(() => ({\r\n    result: (expenseResponse as any)?.result || expenseResponse,\r\n    loading: false,\r\n  }), [expenseResponse]);\r\n  \r\n  const gstData = useMemo(() => ({\r\n    result: (gstResponse as any)?.result || gstResponse,\r\n    loading: false,\r\n  }), [gstResponse]);\r\n  \r\n  const topProductsData = useMemo(() => ({\r\n    result: (topProductsResponse as any)?.result || topProductsResponse,\r\n    loading: false,\r\n  }), [topProductsResponse]);\r\n  \r\n  const topCustomersData = useMemo(() => ({\r\n    result: (topCustomersResponse as any)?.result || topCustomersResponse,\r\n    loading: false,\r\n  }), [topCustomersResponse]);\r\n  \r\n  const stockExpiryData = useMemo(() => ({\r\n    result: (stockExpiryResponse as any)?.result || stockExpiryResponse,\r\n    loading: false,\r\n  }), [stockExpiryResponse]);\r\n\r\n  // Update cache when data changes\r\n  useEffect(() => {\r\n    const reportType = getReportTypeFromTab(activeTab);\r\n    const cacheKey = `${reportType}_${selectedTenant}_${selectedOrganisation}_${selectedBranch}_${dateRange?.[0]?.format('YYYY-MM-DD')}_${dateRange?.[1]?.format('YYYY-MM-DD')}`;\r\n    \r\n    let newData: any = null;\r\n    \r\n    switch (reportType) {\r\n      case 'sales':\r\n        if (salesReportData?.result || productSalesData?.result || topProductsData?.result) {\r\n          newData = {\r\n            salesReport: salesReportData?.result,\r\n            productSales: productSalesData?.result,\r\n            topProducts: topProductsData?.result,\r\n          };\r\n        }\r\n        break;\r\n      case 'customer':\r\n        if (customerSalesData?.result || topCustomersData?.result) {\r\n          newData = {\r\n            customerSales: customerSalesData?.result,\r\n            topCustomers: topCustomersData?.result,\r\n          };\r\n        }\r\n        break;\r\n      case 'inventory':\r\n        if (stockReportData?.result || stockExpiryData?.result) {\r\n          newData = {\r\n            stock: stockReportData?.result,\r\n            expiry: stockExpiryData?.result,\r\n          };\r\n        }\r\n        break;\r\n      case 'financial':\r\n        if (profitLossData?.result || expenseData?.result || gstData?.result) {\r\n          newData = {\r\n            profitLoss: profitLossData?.result,\r\n            expenses: expenseData?.result,\r\n            gst: gstData?.result,\r\n          };\r\n        }\r\n        break;\r\n      case 'payment':\r\n        if (paymentCollectionData?.result || outstandingPaymentsData?.result) {\r\n          newData = {\r\n            collections: paymentCollectionData?.result,\r\n            outstanding: outstandingPaymentsData?.result,\r\n          };\r\n        }\r\n        break;\r\n      case 'comprehensive':\r\n        if (salesReportData?.result || profitLossData?.result) {\r\n          newData = {\r\n            sales: salesReportData?.result,\r\n            profitLoss: profitLossData?.result,\r\n            customers: customerSalesData?.result,\r\n            stock: stockReportData?.result,\r\n            payments: paymentCollectionData?.result,\r\n          };\r\n        }\r\n        break;\r\n    }\r\n    \r\n    if (newData) {\r\n      setReportCache(prev => ({\r\n        ...prev,\r\n        [cacheKey]: newData\r\n      }));\r\n    }\r\n  }, [\r\n    activeTab, selectedTenant, selectedOrganisation, selectedBranch, dateRange,\r\n    salesReportData, productSalesData, customerSalesData, stockReportData,\r\n    profitLossData, outstandingPaymentsData, paymentCollectionData,\r\n    expenseData, gstData, topProductsData, topCustomersData, stockExpiryData\r\n  ]);\r\n\r\n  const fetchReportData = useCallback(() => {\r\n    const reportType = getReportTypeFromTab(activeTab);\r\n    \r\n    // Create cache key based on filters\r\n    const cacheKey = `${reportType}_${selectedTenant}_${selectedOrganisation}_${selectedBranch}_${dateRange?.[0]?.format('YYYY-MM-DD')}_${dateRange?.[1]?.format('YYYY-MM-DD')}`;\r\n    \r\n    // Check if data is already cached\r\n    if (reportCache[cacheKey]) {\r\n      message.success('Report data loaded from cache');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    if (loadingTimeoutRef.current) {\r\n      clearTimeout(loadingTimeoutRef.current);\r\n      loadingTimeoutRef.current = null;\r\n    }\r\n    \r\n    // Refetch data based on report type using RTK Query refetch functions\r\n    try {\r\n      switch (reportType) {\r\n        case 'sales':\r\n          refetchSales();\r\n          refetchProductSales();\r\n          refetchTopProducts();\r\n          break;\r\n        case 'customer':\r\n          refetchCustomerSales();\r\n          refetchTopCustomers();\r\n          break;\r\n        case 'inventory':\r\n          refetchStock();\r\n          refetchStockExpiry();\r\n          break;\r\n        case 'financial':\r\n          refetchProfitLoss();\r\n          refetchExpense();\r\n          refetchGST();\r\n          break;\r\n        case 'payment':\r\n          refetchPaymentCollection();\r\n          refetchOutstanding();\r\n          break;\r\n        case 'comprehensive':\r\n          // Fetch all necessary reports for comprehensive view\r\n          refetchSales();\r\n          refetchProfitLoss();\r\n          refetchCustomerSales();\r\n          refetchStock();\r\n          refetchPaymentCollection();\r\n          break;\r\n      }\r\n      \r\n      // Set loading to false after a short delay to allow API calls to start\r\n      loadingTimeoutRef.current = setTimeout(() => {\r\n        setLoading(false);\r\n        loadingTimeoutRef.current = null;\r\n      }, 500);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      message.error('Failed to fetch report data');\r\n      console.error('Report fetch error:', error);\r\n    }\r\n  }, [activeTab, selectedTenant, selectedOrganisation, selectedBranch, dateRange, reportCache, \r\n      refetchSales, refetchProductSales, refetchTopProducts, refetchCustomerSales, refetchTopCustomers,\r\n      refetchStock, refetchStockExpiry, refetchProfitLoss, refetchExpense, refetchGST,\r\n      refetchPaymentCollection, refetchOutstanding]);\r\n\r\n  // Cleanup any pending loading timers on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (loadingTimeoutRef.current) {\r\n        clearTimeout(loadingTimeoutRef.current);\r\n        loadingTimeoutRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    loading,\r\n    reportCache,\r\n    fetchReportData,\r\n    // Expose individual report data for easy access\r\n    salesReportData,\r\n    productSalesData,\r\n    customerSalesData,\r\n    stockReportData,\r\n    profitLossData,\r\n    outstandingPaymentsData,\r\n    paymentCollectionData,\r\n    expenseData,\r\n    gstData,\r\n    topProductsData,\r\n    topCustomersData,\r\n    stockExpiryData,\r\n  };\r\n};\r\n\r\n","import { useState } from 'react';\r\nimport dayjs from 'dayjs';\r\nimport { message } from 'antd';\r\nimport { exportToExcel, exportToPDF, exportToCSV } from '../utils/exportHelpers';\r\nimport { getReportTypeFromTab } from './useReportData';\r\n\r\ninterface UseReportExportProps {\r\n  activeTab: string;\r\n  reportCache: {[key: string]: any};\r\n  selectedTenant: string;\r\n  selectedOrganisation: string;\r\n  selectedBranch: string;\r\n  dateRange: [dayjs.Dayjs, dayjs.Dayjs] | null;\r\n  tenantOptions: any[];\r\n  organisationOptions: any[];\r\n  branchOptions: any[];\r\n  isSuperAdmin: boolean;\r\n  isTenant: boolean;\r\n}\r\n\r\nexport const useReportExport = (props: UseReportExportProps) => {\r\n  const [exportModalVisible, setExportModalVisible] = useState(false);\r\n  const [exportFormat, setExportFormat] = useState<'pdf' | 'excel' | 'csv'>('excel');\r\n  const [exportOptions, setExportOptions] = useState<string[]>(['summary', 'charts', 'tables']);\r\n\r\n  const handleExport = () => {\r\n    const reportType = getReportTypeFromTab(props.activeTab);\r\n    const cacheKey = `${reportType}_${props.selectedTenant}_${props.selectedOrganisation}_${props.selectedBranch}_${props.dateRange?.[0]?.format('YYYY-MM-DD')}_${props.dateRange?.[1]?.format('YYYY-MM-DD')}`;\r\n    const reportData = props.reportCache[cacheKey];\r\n    \r\n    if (!reportData) {\r\n      message.error('No data available to export. Please apply filters first.');\r\n      return;\r\n    }\r\n    \r\n    const exportOpts = {\r\n      tenantOptions: props.tenantOptions,\r\n      organisationOptions: props.organisationOptions,\r\n      branchOptions: props.branchOptions,\r\n      selectedTenant: props.selectedTenant,\r\n      selectedOrganisation: props.selectedOrganisation,\r\n      selectedBranch: props.selectedBranch,\r\n      dateRange: props.dateRange,\r\n      isSuperAdmin: props.isSuperAdmin,\r\n      isTenant: props.isTenant,\r\n    };\r\n    \r\n    // Export based on active tab (report type)\r\n    if (exportFormat === 'excel') {\r\n      exportToExcel(reportData, reportType, exportOpts);\r\n    } else if (exportFormat === 'pdf') {\r\n      exportToPDF(reportData, reportType);\r\n    } else {\r\n      exportToCSV(reportData, reportType);\r\n    }\r\n    \r\n    setExportModalVisible(false);\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    message.info('Preparing report for printing...');\r\n    window.print();\r\n  };\r\n\r\n  return {\r\n    exportModalVisible,\r\n    setExportModalVisible,\r\n    exportFormat,\r\n    setExportFormat,\r\n    exportOptions,\r\n    setExportOptions,\r\n    handleExport,\r\n    handlePrint,\r\n  };\r\n};\r\n\r\n","import dayjs from 'dayjs';\r\nimport { message } from 'antd';\r\n\r\ninterface ExportOptions {\r\n  tenantOptions: any[];\r\n  organisationOptions: any[];\r\n  branchOptions: any[];\r\n  selectedTenant: string;\r\n  selectedOrganisation: string;\r\n  selectedBranch: string;\r\n  dateRange: [dayjs.Dayjs, dayjs.Dayjs] | null;\r\n  isSuperAdmin: boolean;\r\n  isTenant: boolean;\r\n}\r\n\r\n// Helper to get filter labels\r\nexport const getFilterLabels = (options: ExportOptions) => {\r\n  const getTenantLabel = () => {\r\n    if (options.selectedTenant === 'all') return 'All Tenants';\r\n    const tenant = options.tenantOptions.find((t: any) => t.value === options.selectedTenant);\r\n    return tenant?.label || options.selectedTenant;\r\n  };\r\n  \r\n  const getOrganisationLabel = () => {\r\n    if (options.selectedOrganisation === 'all') return 'All Organisations';\r\n    const org = options.organisationOptions.find((o: any) => o.value === options.selectedOrganisation);\r\n    return org?.label || options.selectedOrganisation;\r\n  };\r\n  \r\n  const getBranchLabel = () => {\r\n    if (options.selectedBranch === 'all') return 'All Branches';\r\n    const branch = options.branchOptions.find((b: any) => b.value === options.selectedBranch);\r\n    return branch?.label || options.selectedBranch;\r\n  };\r\n\r\n  return { getTenantLabel, getOrganisationLabel, getBranchLabel };\r\n};\r\n\r\n// Excel export function\r\nexport const exportToExcel = (data: any, reportType: string, options: ExportOptions) => {\r\n  let excelData: any[] = [];\r\n  const fileName = `${reportType}_report_${dayjs().format('YYYY-MM-DD')}`;\r\n  \r\n  const { getTenantLabel, getOrganisationLabel, getBranchLabel } = getFilterLabels(options);\r\n  \r\n  switch (reportType) {\r\n    case 'inventory':\r\n      excelData = [\r\n        ['Inventory Report', '', '', ''],\r\n        ['Date Range:', options.dateRange?.[0]?.format('YYYY-MM-DD'), 'to', options.dateRange?.[1]?.format('YYYY-MM-DD')],\r\n        ...(options.isSuperAdmin ? [['Tenant:', getTenantLabel(), '', '']] : []),\r\n        ...((options.isSuperAdmin || options.isTenant) ? [['Organisation:', getOrganisationLabel(), '', '']] : []),\r\n        ['Branch:', getBranchLabel(), '', ''],\r\n        ['', '', '', ''],\r\n        ['Total Products', 'Stock Value', 'Low Stock Items', 'Out of Stock'],\r\n        [data.totalProducts, `${data.stockValue.toLocaleString()}`, data.lowStockItems, data.outOfStock],\r\n        ['', '', '', ''],\r\n        ['Category', 'Sales', 'Profit', 'Margin'],\r\n        ...data.categoryData.map((item: any) => [\r\n          item.name, \r\n          `${item.sales.toLocaleString()}`, \r\n          `${item.profit.toLocaleString()}`, \r\n          `${item.margin}%`\r\n        ])\r\n      ];\r\n      break;\r\n    case 'sales':\r\n      excelData = [\r\n        ['Sales Report', '', '', ''],\r\n        ['Date Range:', options.dateRange?.[0]?.format('YYYY-MM-DD'), 'to', options.dateRange?.[1]?.format('YYYY-MM-DD')],\r\n        ...(options.isSuperAdmin ? [['Tenant:', getTenantLabel(), '', '']] : []),\r\n        ...((options.isSuperAdmin || options.isTenant) ? [['Organisation:', getOrganisationLabel(), '', '']] : []),\r\n        ['Branch:', getBranchLabel(), '', ''],\r\n        ['', '', '', ''],\r\n        ['Total Sales', 'Avg Order Value', 'Conversion Rate', ''],\r\n        [`${data.totalSales.toLocaleString()}`, `${data.avgOrderValue}`, `${data.conversionRate}%`, ''],\r\n        ['', '', '', ''],\r\n        ['Customer Name', 'Total Purchase', 'Orders', 'Outstanding'],\r\n        ...data.topCustomers.map((customer: any) => [\r\n          customer.name,\r\n          `${customer.totalPurchase.toLocaleString()}`,\r\n          customer.orders,\r\n          `${customer.outstanding.toLocaleString()}`\r\n        ])\r\n      ];\r\n      break;\r\n    default:\r\n      excelData = [\r\n        ['Report Data', '', '', ''],\r\n        ['Date Range:', options.dateRange?.[0]?.format('YYYY-MM-DD'), 'to', options.dateRange?.[1]?.format('YYYY-MM-DD')],\r\n        ...(options.isSuperAdmin ? [['Tenant:', getTenantLabel(), '', '']] : []),\r\n        ...((options.isSuperAdmin || options.isTenant) ? [['Organisation:', getOrganisationLabel(), '', '']] : []),\r\n        ['Branch:', getBranchLabel(), '', ''],\r\n        ['', '', '', ''],\r\n        ...Object.entries(data).map(([key, value]) => [key, value, '', ''])\r\n      ];\r\n  }\r\n  \r\n  // Convert to CSV format for download\r\n  const csvContent = excelData.map(row => row.join(',')).join('\\n');\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  const url = URL.createObjectURL(blob);\r\n  link.setAttribute('href', url);\r\n  link.setAttribute('download', `${fileName}.csv`);\r\n  link.style.visibility = 'hidden';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  \r\n  message.success(`${reportType} report exported to Excel successfully!`);\r\n};\r\n\r\n// PDF export function\r\nexport const exportToPDF = (data: any, reportType: string) => {\r\n  message.info('PDF export functionality will be implemented with a PDF library');\r\n};\r\n\r\n// CSV export function\r\nexport const exportToCSV = (data: any, reportType: string) => {\r\n  const csvData = Object.entries(data).map(([key, value]) => `${key},${value}`).join('\\n');\r\n  const blob = new Blob([csvData], { type: 'text/csv;charset=utf-8;' });\r\n  const link = document.createElement('a');\r\n  const url = URL.createObjectURL(blob);\r\n  link.setAttribute('href', url);\r\n  link.setAttribute('download', `${reportType}_report_${dayjs().format('YYYY-MM-DD')}.csv`);\r\n  link.style.visibility = 'hidden';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  \r\n  message.success(`${reportType} report exported to CSV successfully!`);\r\n};\r\n\r\n","import React, { createContext, useContext } from 'react';\r\n\r\ninterface ReportDataContextType {\r\n  salesReportData: any;\r\n  productSalesData: any;\r\n  customerSalesData: any;\r\n  stockReportData: any;\r\n  profitLossData: any;\r\n  outstandingPaymentsData: any;\r\n  paymentCollectionData: any;\r\n  expenseData: any;\r\n  gstData: any;\r\n  topProductsData: any;\r\n  topCustomersData: any;\r\n  stockExpiryData: any;\r\n  loading: boolean;\r\n}\r\n\r\nconst ReportDataContext = createContext<ReportDataContextType | undefined>(undefined);\r\n\r\nexport const ReportDataProvider: React.FC<{ value: ReportDataContextType; children: React.ReactNode }> = ({ value, children }) => {\r\n  return <ReportDataContext.Provider value={value}>{children}</ReportDataContext.Provider>;\r\n};\r\n\r\nexport const useReportDataContext = () => {\r\n  const context = useContext(ReportDataContext);\r\n  if (!context) {\r\n    throw new Error('useReportDataContext must be used within ReportDataProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n","import React from 'react';\r\nimport { Card, Row, Col, Typography, Statistic, Empty } from 'antd';\r\nimport {\r\n  DollarOutlined,\r\n  FundOutlined,\r\n  ShoppingCartOutlined,\r\n  UserOutlined,\r\n  BarChartOutlined,\r\n  LineChartOutlined,\r\n  PieChartOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip as RechartsTooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  LineChart,\r\n  Line,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  ComposedChart,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\n\r\nconst { Text } = Typography;\r\nconst COLORS = ['#1890ff', '#52c41a', '#722ed1', '#fa8c16', '#13c2c2', '#eb2f96'];\r\n\r\nconst ComprehensiveReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    salesReportData: salesReportDataContext,\r\n    profitLossData: profitLossDataContext,\r\n    customerSalesData: customerSalesDataContext,\r\n    stockReportData: stockReportDataContext,\r\n    paymentCollectionData: paymentCollectionDataContext,\r\n    productSalesData: productSalesDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const salesReportData = salesReportDataContext?.result || {};\r\n  const profitLossData = profitLossDataContext?.result || {};\r\n  const customerSalesData = customerSalesDataContext?.result || {};\r\n  const stockReportData = stockReportDataContext?.result || {};\r\n  const paymentCollectionData = paymentCollectionDataContext?.result || {};\r\n  const productSalesData = productSalesDataContext?.result || {};\r\n  \r\n  // Extract data\r\n  const salesSummary = salesReportData?.summary || {};\r\n  const profitLoss = profitLossData || {};\r\n  const customers = customerSalesData?.customers || [];\r\n  const stockSummary = stockReportData?.summary || {};\r\n  const collectionSummary = paymentCollectionData?.summary || {};\r\n  const productSales = productSalesData?.products || [];\r\n  const salesData = salesReportData?.sales || [];\r\n  \r\n  // Calculate metrics\r\n  const totalRevenue = parseFloat(salesSummary.total_revenue) || 0;\r\n  const netProfit = parseFloat(profitLoss.profit?.net_profit) || 0;\r\n  const totalBills = parseInt(salesSummary.total_bills) || 0;\r\n  const totalCustomers = customers.length;\r\n  const avgBillValue = parseFloat(salesSummary.average_bill_value) || 0;\r\n  const profitMargin = parseFloat(profitLoss.profit?.profit_margin_percentage) || 0;\r\n  const stockValue = parseFloat(stockSummary.total_stock_value) || 0;\r\n  const totalCollected = parseFloat(collectionSummary.total_collected) || 0;\r\n  \r\n  // Prepare customer segments\r\n  const activeCustomers = customers.filter((c: any) => parseFloat(c.total_purchase) > 0);\r\n  const avgLifetimeValue = activeCustomers.length > 0 \r\n    ? activeCustomers.reduce((sum: number, c: any) => sum + parseFloat(c.total_purchase), 0) / activeCustomers.length \r\n    : 0;\r\n  \r\n  const customerSegments = [\r\n    { \r\n      name: 'High Value', \r\n      value: activeCustomers.filter((c: any) => parseFloat(c.total_purchase) > avgLifetimeValue * 1.5).length, \r\n      color: '#52c41a',\r\n      percentage: activeCustomers.length > 0 ? ((activeCustomers.filter((c: any) => parseFloat(c.total_purchase) > avgLifetimeValue * 1.5).length / activeCustomers.length) * 100).toFixed(1) : 0\r\n    },\r\n    { \r\n      name: 'Medium Value', \r\n      value: activeCustomers.filter((c: any) => {\r\n        const purchase = parseFloat(c.total_purchase);\r\n        return purchase >= avgLifetimeValue * 0.7 && purchase <= avgLifetimeValue * 1.5;\r\n      }).length,\r\n      color: '#1890ff',\r\n      percentage: activeCustomers.length > 0 ? ((activeCustomers.filter((c: any) => {\r\n        const purchase = parseFloat(c.total_purchase);\r\n        return purchase >= avgLifetimeValue * 0.7 && purchase <= avgLifetimeValue * 1.5;\r\n      }).length / activeCustomers.length) * 100).toFixed(1) : 0\r\n    },\r\n    { \r\n      name: 'Low Value', \r\n      value: activeCustomers.filter((c: any) => parseFloat(c.total_purchase) < avgLifetimeValue * 0.7 && parseFloat(c.total_purchase) > 0).length,\r\n      color: '#fa8c16',\r\n      percentage: activeCustomers.length > 0 ? ((activeCustomers.filter((c: any) => parseFloat(c.total_purchase) < avgLifetimeValue * 0.7 && parseFloat(c.total_purchase) > 0).length / activeCustomers.length) * 100).toFixed(1) : 0\r\n    },\r\n  ].filter(s => s.value > 0);\r\n  \r\n  // Top products for chart\r\n  const topProductsChart = productSales.slice(0, 6).map((product: any) => ({\r\n    name: (product.name || 'Unknown').substring(0, 20),\r\n    sales: parseFloat(product.total_revenue) || 0,\r\n    quantity: parseInt(product.total_quantity_sold) || 0,\r\n  }));\r\n  \r\n  // Payment method breakdown\r\n  const paymentMethods = (collectionSummary.payment_mode_breakdown || []).map((item: any) => ({\r\n    method: item.payment_mode || 'Cash',\r\n    amount: parseFloat(item.total_amount) || 0,\r\n    percentage: totalCollected > 0 ? ((parseFloat(item.total_amount) / totalCollected) * 100).toFixed(1) : 0,\r\n  }));\r\n  \r\n  // Sales trend data (if grouped data available)\r\n  const trendData = Array.isArray(salesData) && salesData.length > 0 && salesData[0]?.period\r\n    ? salesData.map((item: any) => ({\r\n        period: item.period,\r\n        sales: parseFloat(item.total_sales) || 0,\r\n        transactions: parseInt(item.total_transactions) || 0,\r\n      }))\r\n    : [];\r\n\r\n  return (\r\n    <div>\r\n      {/* Key Performance Indicators */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: '#fff' }}>\r\n            <DollarOutlined style={{ fontSize: 32, marginBottom: 8 }} />\r\n            <Statistic\r\n              title={<Text style={{ color: '#fff' }}>Total Revenue</Text>}\r\n              value={totalRevenue}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#fff', fontSize: 24 }}\r\n            />\r\n            <Text style={{ color: '#fff', fontSize: 12 }}>\r\n              {totalBills} Bills  Avg: {avgBillValue.toFixed(2)}\r\n            </Text>\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', color: '#fff' }}>\r\n            <FundOutlined style={{ fontSize: 32, marginBottom: 8 }} />\r\n            <Statistic\r\n              title={<Text style={{ color: '#fff' }}>Net Profit</Text>}\r\n              value={netProfit}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#fff', fontSize: 24 }}\r\n            />\r\n            <Text style={{ color: '#fff', fontSize: 12 }}>\r\n              Margin: {profitMargin}%\r\n            </Text>\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', color: '#fff' }}>\r\n            <ShoppingCartOutlined style={{ fontSize: 32, marginBottom: 8 }} />\r\n            <Statistic\r\n              title={<Text style={{ color: '#fff' }}>Stock Value</Text>}\r\n              value={stockValue}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#fff', fontSize: 24 }}\r\n            />\r\n            <Text style={{ color: '#fff', fontSize: 12 }}>\r\n              {parseInt(stockSummary.total_items) || 0} Items in stock\r\n            </Text>\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)', color: '#fff' }}>\r\n            <UserOutlined style={{ fontSize: 32, marginBottom: 8 }} />\r\n            <Statistic\r\n              title={<Text style={{ color: '#fff' }}>Customers</Text>}\r\n              value={totalCustomers}\r\n              valueStyle={{ color: '#fff', fontSize: 24 }}\r\n            />\r\n            <Text style={{ color: '#fff', fontSize: 12 }}>\r\n              {activeCustomers.length} Active customers\r\n            </Text>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Sales Trend & Customer Segments */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={16}>\r\n          <Card title={<><LineChartOutlined /> Sales Trend</>} style={{ borderRadius: 12 }}>\r\n            {trendData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <ComposedChart data={trendData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"period\" />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"transactions\" fill=\"#8884d8\" name=\"Transactions\" />\r\n                  <Line type=\"monotone\" dataKey=\"sales\" stroke=\"#82ca9d\" strokeWidth={3} name=\"Sales ()\" />\r\n                </ComposedChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"(daily/monthly/yearly) to see trends\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={8}>\r\n          <Card title={<><PieChartOutlined /> Customer Segments</>} style={{ borderRadius: 12 }}>\r\n            {customerSegments.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={customerSegments}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ name, percentage }) => `${name}: ${percentage}%`}\r\n                    outerRadius={80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {customerSegments.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No customer data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Product Performance & Payment Methods */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title={<><BarChartOutlined /> Top Products</>} style={{ borderRadius: 12 }}>\r\n            {topProductsChart.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={topProductsChart} layout=\"vertical\">\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis type=\"number\" />\r\n                  <YAxis dataKey=\"name\" type=\"category\" width={120} />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"sales\" fill=\"#8884d8\" name=\"Revenue ()\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No product data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Payment Method Distribution\" style={{ borderRadius: 12 }}>\r\n            {paymentMethods.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={paymentMethods}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ method, percentage }) => `${method}: ${percentage}%`}\r\n                    outerRadius={80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"amount\"\r\n                  >\r\n                    {paymentMethods.map((entry: any, index: number) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip formatter={(value: number) => `${value.toLocaleString()}`} />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No payment data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComprehensiveReport;\r\n","import React from 'react';\r\nimport { Card, Row, Col, Statistic, Table, Typography, Empty } from 'antd';\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip as RechartsTooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  BarChart,\r\n  Bar,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst FinancialReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    profitLossData: profitLossDataContext,\r\n    expenseData: expenseDataContext,\r\n    gstData: gstDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const profitLoss = profitLossDataContext?.result || {};\r\n  const expenseData = expenseDataContext?.result || {};\r\n  const gstData = gstDataContext?.result || {};\r\n  \r\n  const expenses = expenseData?.expenses || [];\r\n  const expenseSummary = expenseData?.summary || {};\r\n  const gstSummary = gstData?.summary || {};\r\n  \r\n  // Calculate metrics\r\n  const totalRevenue = parseFloat(profitLoss.revenue?.total_sales_revenue) || 0;\r\n  const totalDiscount = parseFloat(profitLoss.revenue?.total_discount_given) || 0;\r\n  const netRevenue = parseFloat(profitLoss.revenue?.net_revenue) || totalRevenue - totalDiscount;\r\n  const cogs = parseFloat(profitLoss.costs?.cost_of_goods_sold) || 0;\r\n  const operatingExpenses = parseFloat(profitLoss.costs?.operating_expenses) || 0;\r\n  const totalCosts = parseFloat(profitLoss.costs?.total_costs) || 0;\r\n  const grossProfit = parseFloat(profitLoss.profit?.gross_profit) || 0;\r\n  const netProfit = parseFloat(profitLoss.profit?.net_profit) || 0;\r\n  const profitMargin = parseFloat(profitLoss.profit?.profit_margin_percentage) || 0;\r\n  const gstCollected = parseFloat(gstSummary.total_gst_collected) || 0;\r\n  \r\n  // Prepare P&L statement data\r\n  const plStatementData = [\r\n    { category: 'Total Revenue', amount: totalRevenue, type: 'income' },\r\n    { category: 'Discount Given', amount: -totalDiscount, type: 'expense' },\r\n    { category: 'Net Revenue', amount: netRevenue, type: 'income' },\r\n    { category: 'Cost of Goods Sold', amount: -cogs, type: 'expense' },\r\n    { category: 'Gross Profit', amount: grossProfit, type: 'income' },\r\n    { category: 'Operating Expenses', amount: -operatingExpenses, type: 'expense' },\r\n    { category: 'Net Profit', amount: netProfit, type: 'profit' },\r\n  ];\r\n  \r\n  // Prepare expense breakdown chart\r\n  const expenseBreakdown = (expenseSummary.category_breakdown || []).map((item: any) => ({\r\n    category: item.category || 'Other',\r\n    amount: parseFloat(item.total_amount) || 0,\r\n    count: parseInt(item.expense_count) || 0,\r\n  }));\r\n\r\n  return (\r\n    <div>\r\n      {/* P&L Summary */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} md={6}>\r\n          <Card style={{ borderRadius: 12, textAlign: 'center', background: '#f6ffed' }}>\r\n            <Statistic\r\n              title=\"Total Revenue\"\r\n              value={totalRevenue}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#52c41a' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} md={6}>\r\n          <Card style={{ borderRadius: 12, textAlign: 'center', background: '#fff7e6' }}>\r\n            <Statistic\r\n              title=\"Total Costs\"\r\n              value={totalCosts}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#fa8c16' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} md={6}>\r\n          <Card style={{ borderRadius: 12, textAlign: 'center', background: '#e6f7ff' }}>\r\n            <Statistic\r\n              title=\"Net Profit\"\r\n              value={netProfit}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: netProfit >= 0 ? '#1890ff' : '#ff4d4f' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} md={6}>\r\n          <Card style={{ borderRadius: 12, textAlign: 'center', background: '#f9f0ff' }}>\r\n            <Statistic\r\n              title=\"Profit Margin\"\r\n              value={profitMargin}\r\n              suffix=\"%\"\r\n              precision={2}\r\n              valueStyle={{ color: '#722ed1' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Detailed Breakdown */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Profit & Loss Statement\" style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={plStatementData}\r\n              columns={[\r\n                { \r\n                  title: 'Category', \r\n                  dataIndex: 'category', \r\n                  key: 'category',\r\n                  render: (text: string, record: any) => (\r\n                    <Text strong={record.type === 'profit'}>{text}</Text>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Amount',\r\n                  dataIndex: 'amount',\r\n                  key: 'amount',\r\n                  align: 'right',\r\n                  render: (amt: number, record: any) => (\r\n                    <Text\r\n                      strong={record.type === 'profit'}\r\n                      style={{\r\n                        color: record.type === 'income' || record.type === 'profit' \r\n                          ? amt >= 0 ? '#52c41a' : '#ff4d4f'\r\n                          : '#ff4d4f',\r\n                      }}\r\n                    >\r\n                      {Math.abs(amt).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </Text>\r\n                  ),\r\n                },\r\n              ]}\r\n              pagination={false}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No financial data available' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Expense Breakdown by Category\" style={{ borderRadius: 12 }}>\r\n            {expenseBreakdown.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={350}>\r\n                <BarChart data={expenseBreakdown}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"category\" angle={-45} textAnchor=\"end\" height={100} />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"amount\" fill=\"#ff7a45\" name=\"Amount ()\" />\r\n                  <Bar dataKey=\"count\" fill=\"#1890ff\" name=\"Count\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No expense data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Additional Metrics */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} md={12}>\r\n          <Card title=\"Revenue & Cost Breakdown\" style={{ borderRadius: 12 }}>\r\n            <Row gutter={16}>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Gross Profit\" \r\n                  value={grossProfit} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#52c41a', fontSize: '20px' }} \r\n                />\r\n              </Col>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"COGS\" \r\n                  value={cogs} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#ff4d4f', fontSize: '20px' }} \r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Row gutter={16} style={{ marginTop: 16 }}>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"GST Collected\" \r\n                  value={gstCollected} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#1890ff', fontSize: '18px' }} \r\n                />\r\n              </Col>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Discount Given\" \r\n                  value={totalDiscount} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#fa8c16', fontSize: '18px' }} \r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n        \r\n        <Col xs={24} md={12}>\r\n          <Card title=\"Expense Summary\" style={{ borderRadius: 12 }}>\r\n            <Row gutter={16}>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Total Expenses\" \r\n                  value={parseFloat(expenseSummary.total_expense_amount) || 0} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#ff4d4f', fontSize: '20px' }} \r\n                />\r\n              </Col>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Expense Count\" \r\n                  value={parseInt(expenseSummary.total_expense_count) || 0}\r\n                  valueStyle={{ color: '#1890ff', fontSize: '20px' }} \r\n                />\r\n              </Col>\r\n            </Row>\r\n            <Row gutter={16} style={{ marginTop: 16 }}>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Avg Expense\" \r\n                  value={parseFloat(expenseSummary.average_expense) || 0} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#722ed1', fontSize: '18px' }} \r\n                />\r\n              </Col>\r\n              <Col xs={12}>\r\n                <Statistic \r\n                  title=\"Operating Exp\" \r\n                  value={operatingExpenses} \r\n                  prefix=\"\" \r\n                  precision={2}\r\n                  valueStyle={{ color: '#fa8c16', fontSize: '18px' }} \r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancialReport;\r\n","import React from 'react';\r\nimport { Card, Row, Col, Statistic, Progress, Table, Tag, Empty } from 'antd';\r\nimport { TrophyOutlined } from '@ant-design/icons';\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip as RechartsTooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  AreaChart,\r\n  Area,\r\n  LineChart,\r\n  Line,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\n\r\nconst SalesReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    salesReportData: salesReportDataContext,\r\n    productSalesData: productSalesDataContext,\r\n    topProductsData: topProductsDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const salesReportData = salesReportDataContext?.result || {};\r\n  const productSalesData = productSalesDataContext?.result || {};\r\n  const topProductsData = topProductsDataContext?.result || {};\r\n  \r\n  const salesSummary = salesReportData?.summary || {};\r\n  const productSales = productSalesData?.products || [];\r\n  const topProducts = topProductsData?.top_products || [];\r\n  const salesData = salesReportData?.sales || [];\r\n  \r\n  // Calculate average bill value and prepare chart data\r\n  const avgBillValue = salesSummary.average_bill_value || 0;\r\n  const totalRevenue = salesSummary.total_revenue || 0;\r\n  const totalBills = salesSummary.total_bills || 0;\r\n  const totalCollected = salesSummary.total_collected || 0;\r\n  const totalOutstanding = salesSummary.total_outstanding || 0;\r\n  \r\n  // Calculate percentages for progress bars\r\n  const revenuePercent = totalRevenue > 0 ? Math.min((totalRevenue / (totalRevenue * 1.2)) * 100, 100) : 0;\r\n  const collectionPercent = totalRevenue > 0 ? Math.min((totalCollected / totalRevenue) * 100, 100) : 0;\r\n  const outstandingPercent = totalRevenue > 0 ? Math.min((totalOutstanding / totalRevenue) * 100, 100) : 0;\r\n  \r\n  // Prepare product category data for chart\r\n  const categoryChartData = productSales.slice(0, 10).map((product: any) => ({\r\n    name: product.name || 'Unknown',\r\n    sales: parseFloat(product.total_revenue) || 0,\r\n    quantity: parseInt(product.total_quantity_sold) || 0,\r\n  }));\r\n  \r\n  // Prepare sales trend data (if grouped data available)\r\n  const trendData = Array.isArray(salesData) && salesData.length > 0 && salesData[0]?.period\r\n    ? salesData.map((item: any) => ({\r\n        period: item.period,\r\n        revenue: parseFloat(item.total_sales) || 0,\r\n        transactions: parseInt(item.total_transactions) || 0,\r\n      }))\r\n    : [];\r\n\r\n  return (\r\n    <div>\r\n      {/* Sales Metrics */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={12} md={6}>\r\n          <Card bordered={false} style={{ borderRadius: 12 }}>\r\n            <Statistic \r\n              title=\"Total Revenue\" \r\n              value={totalRevenue} \r\n              prefix=\"\" \r\n              precision={2}\r\n              valueStyle={{ color: '#1890ff' }} \r\n            />\r\n            <Progress percent={Math.round(revenuePercent)} size=\"small\" />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <Card bordered={false} style={{ borderRadius: 12 }}>\r\n            <Statistic \r\n              title=\"Avg Bill Value\" \r\n              value={avgBillValue} \r\n              prefix=\"\" \r\n              precision={2}\r\n              valueStyle={{ color: '#52c41a' }} \r\n            />\r\n            <Progress percent={Math.round(revenuePercent * 0.8)} size=\"small\" strokeColor=\"#52c41a\" />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <Card bordered={false} style={{ borderRadius: 12 }}>\r\n            <Statistic \r\n              title=\"Total Collected\" \r\n              value={totalCollected} \r\n              prefix=\"\" \r\n              precision={2}\r\n              valueStyle={{ color: '#722ed1' }} \r\n            />\r\n            <Progress percent={Math.round(collectionPercent)} size=\"small\" strokeColor=\"#722ed1\" />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <Card bordered={false} style={{ borderRadius: 12 }}>\r\n            <Statistic \r\n              title=\"Outstanding\" \r\n              value={totalOutstanding} \r\n              prefix=\"\" \r\n              precision={2}\r\n              valueStyle={{ color: '#fa8c16' }} \r\n            />\r\n            <Progress percent={Math.round(outstandingPercent)} size=\"small\" strokeColor=\"#fa8c16\" />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Sales by Product & Trend */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Top Products by Revenue\" style={{ borderRadius: 12 }}>\r\n            {categoryChartData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={categoryChartData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"name\" angle={-45} textAnchor=\"end\" height={100} />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"sales\" fill=\"#1890ff\" name=\"Revenue ()\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No product sales data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Sales Trend\" style={{ borderRadius: 12 }}>\r\n            {trendData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart data={trendData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"period\" />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Line type=\"monotone\" dataKey=\"revenue\" stroke=\"#1890ff\" name=\"Revenue ()\" />\r\n                  <Line type=\"monotone\" dataKey=\"transactions\" stroke=\"#52c41a\" name=\"Transactions\" />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No trend data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Top Products Table */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24}>\r\n          <Card title={<><TrophyOutlined /> Top 10 Products</>} style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={topProducts}\r\n              rowKey=\"_id\"\r\n              columns={[\r\n                {\r\n                  title: 'Rank',\r\n                  key: 'rank',\r\n                  width: 70,\r\n                  render: (_: any, __: any, index: number) => (\r\n                    <Tag color={index === 0 ? 'gold' : index === 1 ? 'silver' : index === 2 ? 'bronze' : 'default'}>\r\n                      #{index + 1}\r\n                    </Tag>\r\n                  ),\r\n                },\r\n                { \r\n                  title: 'Product Name', \r\n                  dataIndex: 'name', \r\n                  key: 'name',\r\n                  render: (name: string, record: any) => (\r\n                    <div>\r\n                      <div style={{ fontWeight: 500 }}>{name}</div>\r\n                      {record.VariantItem && (\r\n                        <div style={{ fontSize: '12px', color: '#888' }}>\r\n                          {record.VariantItem.variant_name}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Total Revenue',\r\n                  dataIndex: 'total_revenue',\r\n                  key: 'total_revenue',\r\n                  render: (val: string) => `${parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                  sorter: (a: any, b: any) => parseFloat(a.total_revenue) - parseFloat(b.total_revenue),\r\n                },\r\n                {\r\n                  title: 'Quantity Sold',\r\n                  dataIndex: 'total_quantity_sold',\r\n                  key: 'total_quantity_sold',\r\n                  render: (val: string) => parseInt(val || '0').toLocaleString(),\r\n                  sorter: (a: any, b: any) => parseInt(a.total_quantity_sold) - parseInt(b.total_quantity_sold),\r\n                },\r\n                {\r\n                  title: 'Orders',\r\n                  dataIndex: 'total_orders',\r\n                  key: 'total_orders',\r\n                  render: (val: string) => parseInt(val || '0').toLocaleString(),\r\n                  sorter: (a: any, b: any) => parseInt(a.total_orders) - parseInt(b.total_orders),\r\n                },\r\n              ]}\r\n              pagination={{ pageSize: 10 }}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No product data available' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesReport;\r\n\r\n","import React from 'react';\r\nimport { Card, Row, Col, Statistic, Table, Tag, Empty } from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  RiseOutlined,\r\n  TeamOutlined,\r\n  DollarOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip as RechartsTooltip,\r\n  ResponsiveContainer,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Legend,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\n\r\nconst CustomerReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    customerSalesData: customerSalesDataContext,\r\n    topCustomersData: topCustomersDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const customerSalesData = customerSalesDataContext?.result || {};\r\n  const topCustomersData = topCustomersDataContext?.result || {};\r\n  \r\n  const customers = customerSalesData?.customers || [];\r\n  const topCustomers = topCustomersData?.top_customers || [];\r\n  \r\n  // Calculate metrics\r\n  const totalCustomers = customers.length;\r\n  const customersWithData = customers.filter((c: any) => parseFloat(c.total_purchase) > 0);\r\n  const avgLifetimeValue = customersWithData.length > 0 \r\n    ? customersWithData.reduce((sum: number, c: any) => sum + parseFloat(c.total_purchase), 0) / customersWithData.length \r\n    : 0;\r\n  \r\n  // VIP customers (customers with purchase > average * 1.5)\r\n  const vipCustomers = customersWithData.filter((c: any) => parseFloat(c.total_purchase) > avgLifetimeValue * 1.5);\r\n  \r\n  // Segment customers by purchase value\r\n  const segmentCustomers = () => {\r\n    const segments = [\r\n      { name: 'High Value', value: 0, color: '#52c41a', min: avgLifetimeValue * 1.5 },\r\n      { name: 'Medium Value', value: 0, color: '#1890ff', min: avgLifetimeValue * 0.7, max: avgLifetimeValue * 1.5 },\r\n      { name: 'Low Value', value: 0, color: '#fa8c16', max: avgLifetimeValue * 0.7 },\r\n      { name: 'Inactive', value: 0, color: '#d9d9d9', max: 0 },\r\n    ];\r\n    \r\n    customers.forEach((c: any) => {\r\n      const purchase = parseFloat(c.total_purchase);\r\n      if (purchase > avgLifetimeValue * 1.5) segments[0].value++;\r\n      else if (purchase >= avgLifetimeValue * 0.7) segments[1].value++;\r\n      else if (purchase > 0) segments[2].value++;\r\n      else segments[3].value++;\r\n    });\r\n    \r\n    return segments.filter(s => s.value > 0);\r\n  };\r\n  \r\n  const customerSegments = segmentCustomers();\r\n  \r\n  // Top 10 customers for chart\r\n  const top10Chart = topCustomers.slice(0, 10).map((c: any) => ({\r\n    name: c.name?.substring(0, 15) || 'Unknown',\r\n    purchase: parseFloat(c.total_purchase) || 0,\r\n    bills: parseInt(c.total_bills) || 0,\r\n  }));\r\n\r\n  return (\r\n    <div>\r\n      {/* Customer Metrics */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <UserOutlined style={{ fontSize: 32, color: '#1890ff', marginBottom: 8 }} />\r\n            <Statistic title=\"Total Customers\" value={totalCustomers} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <RiseOutlined style={{ fontSize: 32, color: '#52c41a', marginBottom: 8 }} />\r\n            <Statistic title=\"Active Customers\" value={customersWithData.length} valueStyle={{ color: '#52c41a' }} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <TeamOutlined style={{ fontSize: 32, color: '#722ed1', marginBottom: 8 }} />\r\n            <Statistic title=\"VIP Customers\" value={vipCustomers.length} valueStyle={{ color: '#722ed1' }} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <DollarOutlined style={{ fontSize: 32, color: '#fa8c16', marginBottom: 8 }} />\r\n            <Statistic title=\"Avg Lifetime Value\" value={avgLifetimeValue} prefix=\"\" precision={2} valueStyle={{ color: '#fa8c16' }} />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Customer Segmentation */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Customer Segmentation\" style={{ borderRadius: 12 }}>\r\n            {customerSegments.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={customerSegments}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={true}\r\n                    label={({ name, value }) => `${name}: ${value}`}\r\n                    outerRadius={100}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {customerSegments.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No customer data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Top 10 Customers by Purchase\" style={{ borderRadius: 12 }}>\r\n            {top10Chart.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={top10Chart}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"name\" angle={-45} textAnchor=\"end\" height={100} />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"purchase\" fill=\"#1890ff\" name=\"Purchase ()\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No customer data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Top Customers Table */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24}>\r\n          <Card title=\"Customer Details\" style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={topCustomers}\r\n              rowKey=\"_id\"\r\n              columns={[\r\n                { \r\n                  title: 'Customer Name', \r\n                  dataIndex: 'name', \r\n                  key: 'name',\r\n                  render: (name: string, record: any) => (\r\n                    <div>\r\n                      <div style={{ fontWeight: 500 }}>{name || 'Unknown'}</div>\r\n                      {record.phone && (\r\n                        <div style={{ fontSize: '12px', color: '#888' }}>\r\n                          {record.phone}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Total Purchase',\r\n                  dataIndex: 'total_purchase',\r\n                  key: 'total_purchase',\r\n                  render: (val: string) => `${parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                  sorter: (a: any, b: any) => parseFloat(a.total_purchase) - parseFloat(b.total_purchase),\r\n                },\r\n                {\r\n                  title: 'Bills',\r\n                  dataIndex: 'total_bills',\r\n                  key: 'total_bills',\r\n                  render: (val: string) => parseInt(val || '0').toLocaleString(),\r\n                  sorter: (a: any, b: any) => parseInt(a.total_bills) - parseInt(b.total_bills),\r\n                },\r\n                {\r\n                  title: 'Avg Bill Value',\r\n                  dataIndex: 'average_bill_value',\r\n                  key: 'average_bill_value',\r\n                  render: (val: string) => `${parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                  sorter: (a: any, b: any) => parseFloat(a.average_bill_value) - parseFloat(b.average_bill_value),\r\n                },\r\n                {\r\n                  title: 'Outstanding',\r\n                  dataIndex: 'outstanding_amount',\r\n                  key: 'outstanding_amount',\r\n                  render: (val: string) => {\r\n                    const amount = parseFloat(val || '0');\r\n                    return (\r\n                      <Tag color={amount > 0 ? 'orange' : 'green'}>\r\n                        {amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                      </Tag>\r\n                    );\r\n                  },\r\n                  sorter: (a: any, b: any) => parseFloat(a.outstanding_amount) - parseFloat(b.outstanding_amount),\r\n                },\r\n                {\r\n                  title: 'Status',\r\n                  key: 'status',\r\n                  render: (_: any, record: any) => {\r\n                    const outstanding = parseFloat(record.outstanding_amount || '0');\r\n                    return (\r\n                      <Tag color={outstanding === 0 ? 'success' : outstanding > 0 ? 'warning' : 'default'}>\r\n                        {outstanding === 0 ? 'Clear' : 'Pending'}\r\n                      </Tag>\r\n                    );\r\n                  },\r\n                },\r\n              ]}\r\n              pagination={{ pageSize: 10 }}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No customer data available' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerReport;\r\n\r\n","import React from 'react';\r\nimport { Card, Row, Col, Statistic, Table, Tag, Progress, Empty } from 'antd';\r\nimport {\r\n  StockOutlined,\r\n  DollarOutlined,\r\n  FallOutlined,\r\n  WarningOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip as RechartsTooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\nimport dayjs from 'dayjs';\r\n\r\nconst COLORS = ['#1890ff', '#52c41a', '#722ed1', '#fa8c16', '#13c2c2', '#eb2f96'];\r\n\r\nconst InventoryReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    stockReportData: stockReportDataContext,\r\n    stockExpiryData: stockExpiryDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const stockReportData = stockReportDataContext?.result || {};\r\n  const stockExpiryData = stockExpiryDataContext?.result || {};\r\n  \r\n  const stockDetails = stockReportData?.stock_details || [];\r\n  const stockSummary = stockReportData?.summary || {};\r\n  const lowStockItems = stockReportData?.low_stock_items || [];\r\n  const expiringStock = stockExpiryData?.expiring_stock || [];\r\n  const expirySummary = stockExpiryData?.summary || {};\r\n  const expiryBreakdown = stockExpiryData?.result?.expiry_breakdown || {};\r\n  \r\n  // Calculate metrics\r\n  const totalProducts = parseInt(stockSummary.total_items) || 0;\r\n  const stockValue = parseFloat(stockSummary.total_stock_value) || 0;\r\n  const lowStock = parseInt(stockSummary.low_stock_count) || 0;\r\n  const expiredCount = parseInt(expirySummary.expired_count) || 0;\r\n  const within7Days = parseInt(expirySummary.within_7_days_count) || 0;\r\n  \r\n  // Group stock by category\r\n  const categoryStockMap = new Map<string, { value: number; count: number }>();\r\n  stockDetails.forEach((item: any) => {\r\n    const categoryName = item.ProductItem?.CategoryItem?.category_name || 'Uncategorized';\r\n    const qty = parseInt(item.available_quantity) || 0;\r\n    const price = parseFloat(item.buy_price) || 0;\r\n    const value = qty * price;\r\n    \r\n    if (categoryStockMap.has(categoryName)) {\r\n      const existing = categoryStockMap.get(categoryName)!;\r\n      categoryStockMap.set(categoryName, {\r\n        value: existing.value + value,\r\n        count: existing.count + 1,\r\n      });\r\n    } else {\r\n      categoryStockMap.set(categoryName, { value, count: 1 });\r\n    }\r\n  });\r\n  \r\n  // Convert to array for chart\r\n  const categoryData = Array.from(categoryStockMap.entries()).map(([name, data]) => ({\r\n    name,\r\n    value: data.value,\r\n    count: data.count,\r\n  }));\r\n  \r\n  // Expiry timeline data\r\n  const expiryTimelineData = [\r\n    { name: 'Expired', count: (expiryBreakdown.expired || []).length, color: '#ff4d4f' },\r\n    { name: 'Within 7 days', count: (expiryBreakdown.within_7_days || []).length, color: '#ff7a45' },\r\n    { name: 'Within 30 days', count: (expiryBreakdown.within_30_days || []).length, color: '#ffa940' },\r\n    { name: 'Within 90 days', count: (expiryBreakdown.within_90_days || []).length, color: '#ffc53d' },\r\n  ].filter(item => item.count > 0);\r\n\r\n  return (\r\n    <div>\r\n      {/* Inventory Metrics */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <StockOutlined style={{ fontSize: 32, color: '#1890ff', marginBottom: 8 }} />\r\n            <Statistic title=\"Total Items\" value={totalProducts} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <DollarOutlined style={{ fontSize: 32, color: '#52c41a', marginBottom: 8 }} />\r\n            <Statistic title=\"Stock Value\" value={stockValue} prefix=\"\" precision={2} valueStyle={{ color: '#52c41a' }} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <FallOutlined style={{ fontSize: 32, color: '#ff4d4f', marginBottom: 8 }} />\r\n            <Statistic title=\"Low Stock Items\" value={lowStock} valueStyle={{ color: '#ff4d4f' }} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12 }}>\r\n            <WarningOutlined style={{ fontSize: 32, color: '#fa8c16', marginBottom: 8 }} />\r\n            <Statistic title=\"Expiring Soon (7d)\" value={within7Days} valueStyle={{ color: '#fa8c16' }} />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Stock Distribution & Expiry */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Category-wise Stock Value\" style={{ borderRadius: 12 }}>\r\n            {categoryData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={categoryData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                    outerRadius={100}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {categoryData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip formatter={(value: number) => `${value.toLocaleString()}`} />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No stock data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Stock Expiry Timeline\" style={{ borderRadius: 12 }}>\r\n            {expiryTimelineData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={expiryTimelineData}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"name\" />\r\n                  <YAxis />\r\n                  <RechartsTooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"count\" fill=\"#ff7a45\" name=\"Items Count\">\r\n                    {expiryTimelineData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Bar>\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No expiry data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Low Stock Items Table */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title={<><FallOutlined style={{ color: '#ff4d4f' }} /> Low Stock Items</>} style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={lowStockItems}\r\n              rowKey={(record: any) => `${record.product}-${record.variant}`}\r\n              columns={[\r\n                { \r\n                  title: 'Product', \r\n                  dataIndex: 'product', \r\n                  key: 'product',\r\n                  render: (product: string, record: any) => (\r\n                    <div>\r\n                      <div style={{ fontWeight: 500 }}>{product || 'Unknown'}</div>\r\n                      {record.variant && (\r\n                        <div style={{ fontSize: '12px', color: '#888' }}>{record.variant}</div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Available',\r\n                  dataIndex: 'available_quantity',\r\n                  key: 'available_quantity',\r\n                  render: (qty: number, record: any) => (\r\n                    <Tag color=\"red\">\r\n                      {qty} {record.available_loose_quantity > 0 && `+ ${record.available_loose_quantity} loose`}\r\n                    </Tag>\r\n                  ),\r\n                },\r\n              ]}\r\n              pagination={{ pageSize: 5 }}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No low stock items' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        \r\n        <Col xs={24} lg={12}>\r\n          <Card title={<><WarningOutlined style={{ color: '#fa8c16' }} /> Expiring Soon</>} style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={expiringStock.slice(0, 10)}\r\n              rowKey=\"_id\"\r\n              columns={[\r\n                { \r\n                  title: 'Product', \r\n                  key: 'product',\r\n                  render: (record: any) => (\r\n                    <div>\r\n                      <div style={{ fontWeight: 500 }}>{record.ProductItem?.name || 'Unknown'}</div>\r\n                      {record.ProductItem?.VariantItem && (\r\n                        <div style={{ fontSize: '12px', color: '#888' }}>\r\n                          {record.ProductItem.VariantItem.variant_name}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Expiry Date',\r\n                  dataIndex: 'expiry_date',\r\n                  key: 'expiry_date',\r\n                  render: (date: string) => {\r\n                    const daysToExpiry = dayjs(date).diff(dayjs(), 'day');\r\n                    const color = daysToExpiry < 0 ? 'red' : daysToExpiry <= 7 ? 'orange' : 'yellow';\r\n                    return (\r\n                      <Tag color={color}>\r\n                        {dayjs(date).format('DD MMM YYYY')}\r\n                        {daysToExpiry < 0 && ' (Expired)'}\r\n                        {daysToExpiry >= 0 && ` (${daysToExpiry}d)`}\r\n                      </Tag>\r\n                    );\r\n                  },\r\n                },\r\n                {\r\n                  title: 'Qty',\r\n                  dataIndex: 'available_quantity',\r\n                  key: 'available_quantity',\r\n                },\r\n              ]}\r\n              pagination={{ pageSize: 5 }}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No expiring items' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Category Analysis Table */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24}>\r\n          <Card title=\"Category-wise Stock Analysis\" style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={categoryData}\r\n              rowKey=\"name\"\r\n              columns={[\r\n                { title: 'Category', dataIndex: 'name', key: 'name' },\r\n                {\r\n                  title: 'Items Count',\r\n                  dataIndex: 'count',\r\n                  key: 'count',\r\n                  sorter: (a: any, b: any) => a.count - b.count,\r\n                },\r\n                {\r\n                  title: 'Stock Value',\r\n                  dataIndex: 'value',\r\n                  key: 'value',\r\n                  render: (val: number) => `${val.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                  sorter: (a: any, b: any) => a.value - b.value,\r\n                },\r\n                {\r\n                  title: 'Percentage',\r\n                  key: 'percentage',\r\n                  render: (_: any, record: any) => {\r\n                    const percent = (record.value / stockValue) * 100;\r\n                    return (\r\n                      <Progress\r\n                        percent={Math.round(percent)}\r\n                        size=\"small\"\r\n                        status={percent > 20 ? 'success' : 'normal'}\r\n                      />\r\n                    );\r\n                  },\r\n                },\r\n              ]}\r\n              pagination={false}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No category data available' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryReport;\r\n\r\n","import React from 'react';\r\nimport { Card, Result, Typography } from 'antd';\r\nimport {\r\n  ExperimentOutlined,\r\n  ClockCircleOutlined,\r\n} from '@ant-design/icons';\r\n\r\nconst { Paragraph, Text } = Typography;\r\n\r\nconst StaffReport: React.FC = () => {\r\n  return (\r\n    <Card \r\n      style={{ \r\n        borderRadius: 12, \r\n        minHeight: 400,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}\r\n    >\r\n      <Result\r\n        icon={<ExperimentOutlined style={{ color: '#1890ff' }} />}\r\n        title={<Text strong style={{ fontSize: 24 }}>Staff Performance Report</Text>}\r\n        subTitle={\r\n          <div style={{ marginTop: 16 }}>\r\n            <ClockCircleOutlined style={{ fontSize: 48, color: '#faad14', marginBottom: 16 }} />\r\n            <Paragraph style={{ fontSize: 16, color: '#595959' }}>\r\n              This feature is currently under development\r\n            </Paragraph>\r\n            <Paragraph style={{ fontSize: 14, color: '#8c8c8c' }}>\r\n              We're working on bringing you comprehensive staff performance analytics including:\r\n            </Paragraph>\r\n            <ul style={{ textAlign: 'left', display: 'inline-block', color: '#595959' }}>\r\n              <li>Individual staff sales performance metrics</li>\r\n              <li>Target achievement tracking</li>\r\n              <li>Conversion rate analysis</li>\r\n              <li>Performance comparison charts</li>\r\n              <li>Staff productivity reports</li>\r\n            </ul>\r\n            <Paragraph style={{ fontSize: 14, color: '#8c8c8c', marginTop: 16 }}>\r\n              Stay tuned for updates!\r\n            </Paragraph>\r\n          </div>\r\n        }\r\n        status=\"info\"\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default StaffReport;\r\n\r\n","import React from 'react';\r\nimport { Card, Row, Col, Statistic, Table, Tag, Progress, Typography, Empty } from 'antd';\r\nimport {\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  Tooltip as RechartsTooltip,\r\n  ResponsiveContainer,\r\n} from 'recharts';\r\nimport { useReportDataContext } from '../context/ReportDataContext';\r\nimport dayjs from 'dayjs';\r\n\r\nconst { Text } = Typography;\r\nconst COLORS = ['#1890ff', '#52c41a', '#722ed1', '#fa8c16', '#13c2c2', '#eb2f96'];\r\n\r\nconst PaymentReport: React.FC = () => {\r\n  // Get data from context instead of making API calls\r\n  const {\r\n    paymentCollectionData: paymentCollectionDataContext,\r\n    outstandingPaymentsData: outstandingPaymentsDataContext,\r\n  } = useReportDataContext();\r\n  \r\n  // Extract data from context\r\n  const paymentCollectionData = paymentCollectionDataContext?.result || {};\r\n  const outstandingPaymentsData = outstandingPaymentsDataContext?.result || {};\r\n  \r\n  const collectionSummary = paymentCollectionData?.summary || {};\r\n  const paymentModeBreakdown = collectionSummary.payment_mode_breakdown || [];\r\n  const outstandingBills = outstandingPaymentsData?.outstanding_bills || [];\r\n  const outstandingSummary = outstandingPaymentsData?.summary || {};\r\n  \r\n  // Calculate metrics\r\n  const totalCollected = parseFloat(collectionSummary.total_collected) || 0;\r\n  const totalOutstanding = parseFloat(outstandingSummary.total_outstanding_amount) || 0;\r\n  const totalBills = parseInt(outstandingSummary.total_outstanding_bills) || 0;\r\n  const collectionRate = totalCollected > 0 && totalOutstanding > 0 \r\n    ? ((totalCollected / (totalCollected + totalOutstanding)) * 100).toFixed(2)\r\n    : 0;\r\n  \r\n  // Prepare payment method chart data\r\n  const paymentMethodData = paymentModeBreakdown.map((item: any) => ({\r\n    method: item.payment_mode || 'Cash',\r\n    amount: parseFloat(item.total_amount) || 0,\r\n    transactions: parseInt(item.transaction_count) || 0,\r\n  }));\r\n  \r\n  // Calculate percentages for payment methods\r\n  const paymentMethodsWithPercentage = paymentMethodData.map((item: any) => ({\r\n    ...item,\r\n    percentage: totalCollected > 0 ? ((item.amount / totalCollected) * 100).toFixed(1) : 0,\r\n  }));\r\n  \r\n  // Separate overdue bills (example: > 30 days)\r\n  const overdueAmount = outstandingBills\r\n    .filter((bill: any) => {\r\n      const billDate = dayjs(bill.date);\r\n      const daysOld = dayjs().diff(billDate, 'day');\r\n      return daysOld > 30;\r\n    })\r\n    .reduce((sum: number, bill: any) => sum + parseFloat(bill.outstanding_amount || 0), 0);\r\n\r\n  return (\r\n    <div>\r\n      {/* Payment Metrics */}\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: '#f6ffed' }}>\r\n            <Statistic\r\n              title=\"Total Collected\"\r\n              value={totalCollected}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#52c41a' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: '#fff7e6' }}>\r\n            <Statistic\r\n              title=\"Outstanding\"\r\n              value={totalOutstanding}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#fa8c16' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: '#fff1f0' }}>\r\n            <Statistic\r\n              title=\"Overdue (>30d)\"\r\n              value={overdueAmount}\r\n              prefix=\"\"\r\n              precision={2}\r\n              valueStyle={{ color: '#ff4d4f' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={6}>\r\n          <Card style={{ textAlign: 'center', borderRadius: 12, background: '#e6f7ff' }}>\r\n            <Statistic\r\n              title=\"Collection Rate\"\r\n              value={collectionRate}\r\n              suffix=\"%\"\r\n              valueStyle={{ color: '#1890ff' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Payment Method Analysis */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Payment Method Distribution\" style={{ borderRadius: 12 }}>\r\n            {paymentMethodData.length > 0 ? (\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={paymentMethodData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={true}\r\n                    label={({ method, percentage }) => `${method}: ${percentage}%`}\r\n                    outerRadius={100}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"amount\"\r\n                  >\r\n                    {paymentMethodData.map((entry: any, index: number) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip formatter={(value: number) => `${value.toLocaleString()}`} />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <Empty description=\"No payment method data available\" />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} lg={12}>\r\n          <Card title=\"Payment Method Breakdown\" style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={paymentMethodsWithPercentage}\r\n              rowKey=\"method\"\r\n              columns={[\r\n                { title: 'Method', dataIndex: 'method', key: 'method' },\r\n                {\r\n                  title: 'Amount',\r\n                  dataIndex: 'amount',\r\n                  key: 'amount',\r\n                  render: (val: number) => `${val.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                },\r\n                {\r\n                  title: 'Transactions',\r\n                  dataIndex: 'transactions',\r\n                  key: 'transactions',\r\n                },\r\n                {\r\n                  title: 'Share',\r\n                  dataIndex: 'percentage',\r\n                  key: 'percentage',\r\n                  render: (val: number) => (\r\n                    <span>\r\n                      {val}%\r\n                      <Progress percent={parseFloat(val.toString())} size=\"small\" style={{ marginTop: 4 }} />\r\n                    </span>\r\n                  ),\r\n                },\r\n              ]}\r\n              pagination={false}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No payment data available' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Outstanding Receivables */}\r\n      <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n        <Col xs={24}>\r\n          <Card title={`Outstanding Receivables (${totalBills} Bills)`} style={{ borderRadius: 12 }}>\r\n            <Table\r\n              dataSource={outstandingBills}\r\n              rowKey=\"_id\"\r\n              columns={[\r\n                { \r\n                  title: 'Invoice No', \r\n                  dataIndex: 'invoice_no', \r\n                  key: 'invoice_no',\r\n                  render: (invoice: string) => <Text strong>{invoice}</Text>\r\n                },\r\n                { \r\n                  title: 'Customer', \r\n                  key: 'customer',\r\n                  render: (record: any) => (\r\n                    <div>\r\n                      <div>{record.customerDetails?.name || 'Unknown'}</div>\r\n                      {record.customerDetails?.phone && (\r\n                        <div style={{ fontSize: '12px', color: '#888' }}>\r\n                          {record.customerDetails.phone}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                },\r\n                {\r\n                  title: 'Bill Date',\r\n                  dataIndex: 'date',\r\n                  key: 'date',\r\n                  render: (date: string) => dayjs(date).format('DD MMM YYYY'),\r\n                },\r\n                {\r\n                  title: 'Total Amount',\r\n                  dataIndex: 'total_amount',\r\n                  key: 'total_amount',\r\n                  render: (val: string) => `${parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n                },\r\n                {\r\n                  title: 'Paid',\r\n                  dataIndex: 'paid_amount',\r\n                  key: 'paid_amount',\r\n                  render: (val: string) => (\r\n                    <Text style={{ color: '#52c41a' }}>\r\n                      {parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </Text>\r\n                  ),\r\n                },\r\n                {\r\n                  title: 'Outstanding',\r\n                  dataIndex: 'outstanding_amount',\r\n                  key: 'outstanding_amount',\r\n                  render: (val: string) => (\r\n                    <Text strong style={{ color: '#ff4d4f' }}>\r\n                      {parseFloat(val || '0').toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                    </Text>\r\n                  ),\r\n                  sorter: (a: any, b: any) => parseFloat(a.outstanding_amount) - parseFloat(b.outstanding_amount),\r\n                },\r\n                {\r\n                  title: 'Days Old',\r\n                  key: 'daysOld',\r\n                  render: (record: any) => {\r\n                    const daysOld = dayjs().diff(dayjs(record.date), 'day');\r\n                    return (\r\n                      <Tag color={daysOld > 60 ? 'red' : daysOld > 30 ? 'orange' : 'default'}>\r\n                        {daysOld} days\r\n                      </Tag>\r\n                    );\r\n                  },\r\n                  sorter: (a: any, b: any) => {\r\n                    const daysA = dayjs().diff(dayjs(a.date), 'day');\r\n                    const daysB = dayjs().diff(dayjs(b.date), 'day');\r\n                    return daysA - daysB;\r\n                  },\r\n                },\r\n                {\r\n                  title: 'Priority',\r\n                  key: 'priority',\r\n                  render: (_: any, record: any) => {\r\n                    const outstanding = parseFloat(record.outstanding_amount || 0);\r\n                    const daysOld = dayjs().diff(dayjs(record.date), 'day');\r\n                    const priority = outstanding > 5000 && daysOld > 30 ? 'High' : outstanding > 2000 || daysOld > 45 ? 'Medium' : 'Low';\r\n                    const color = priority === 'High' ? 'red' : priority === 'Medium' ? 'orange' : 'default';\r\n                    return <Tag color={color}>{priority}</Tag>;\r\n                  },\r\n                },\r\n              ]}\r\n              pagination={{ pageSize: 10 }}\r\n              size=\"small\"\r\n              locale={{ emptyText: 'No outstanding bills' }}\r\n            />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentReport;\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport { getCurrentUser } from '../../helpers/auth';\r\nimport SessionStorageEncryption from '../../helpers/encryption';\r\nimport {\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Typography,\r\n  DatePicker,\r\n  Select,\r\n  Button,\r\n  Space,\r\n  Tabs,\r\n  Modal,\r\n  Radio,\r\n  Checkbox,\r\n  Form,\r\n  Tooltip,\r\n  Tag,\r\n} from 'antd';\r\nimport {\r\n  BarChartOutlined,\r\n  DownloadOutlined,\r\n  PrinterOutlined,\r\n  FileExcelOutlined,\r\n  FilePdfOutlined,\r\n  ReloadOutlined,\r\n  FilterOutlined,\r\n  FundOutlined,\r\n  DollarOutlined,\r\n  ShoppingCartOutlined,\r\n  UserOutlined,\r\n  StockOutlined,\r\n  TeamOutlined,\r\n  CalendarOutlined,\r\n  SettingOutlined,\r\n} from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\nimport styles from './Reports.module.css';\r\nimport {\r\n  useGetTenantAccountsQuery,\r\n  useGetOrganisationsQuery,\r\n  useGetBranchesQuery,\r\n} from '../../services/redux/api/apiSlice';\r\nimport { useReportData } from './hooks/useReportData';\r\nimport { useReportExport } from './hooks/useReportExport';\r\nimport { ReportDataProvider } from './context/ReportDataContext';\r\n\r\n// Import report components\r\nimport ComprehensiveReport from './components/ComprehensiveReport';\r\nimport FinancialReport from './components/FinancialReport';\r\nimport SalesReport from './components/SalesReport';\r\nimport CustomerReport from './components/CustomerReport';\r\nimport InventoryReport from './components/InventoryReport';\r\nimport StaffReport from './components/StaffReport';\r\nimport PaymentReport from './components/PaymentReport';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { RangePicker } = DatePicker;\r\nconst { Option } = Select;\r\n\r\nconst Reports: React.FC = () => {\r\n  const [dateRange, setDateRange] = useState<[dayjs.Dayjs, dayjs.Dayjs] | null>([\r\n    dayjs().subtract(30, 'days'),\r\n    dayjs(),\r\n  ]);\r\n  const [selectedTenant, setSelectedTenant] = useState<string>('all');\r\n  const [selectedOrganisation, setSelectedOrganisation] = useState<string>('all');\r\n  const [selectedBranch, setSelectedBranch] = useState<string>('all');\r\n  const [activeTab, setActiveTab] = useState('1');\r\n  const [form] = Form.useForm();\r\n\r\n  // Get user role\r\n  const userItem = useMemo(() => {\r\n    return getCurrentUser();\r\n  }, []);\r\n\r\n  // Get user type from scope first (preferred), fallback to user_type\r\n  const scopeData = SessionStorageEncryption.getItem('scope');\r\n  const userRole = scopeData?.userType || userItem?.user_type || userItem?.usertype || userItem?.user_role || '';\r\n  const isSuperAdmin = userRole.toLowerCase() === 'superadmin';\r\n  const isTenant = userRole.toLowerCase() === 'tenant';\r\n  const isOrganisationUser = userRole.toLowerCase() === 'organisationuser';\r\n  const isBranchUser = userRole.toLowerCase() === 'branchuser';\r\n\r\n  // Use RTK Query for dropdowns data - conditionally based on user role\r\n  // Only fetch tenants for SuperAdmin\r\n  const { data: tenantsData } = useGetTenantAccountsQuery({}, { skip: !isSuperAdmin });\r\n  \r\n  // Only fetch organisations for SuperAdmin and Tenant (not for OrganisationUser or BranchUser)\r\n  const { data: organisationsData } = useGetOrganisationsQuery({}, { \r\n    skip: !isSuperAdmin && !isTenant \r\n  });\r\n  \r\n  // Only fetch branches for SuperAdmin, Tenant, and OrganisationUser (not for BranchUser)\r\n  const { data: branchesData } = useGetBranchesQuery({}, { \r\n    skip: isBranchUser \r\n  });\r\n\r\n  const tenantsItems = (tenantsData as any)?.result || [];\r\n  const organisationsItems = (organisationsData as any)?.result || [];\r\n  const branchesItems = (branchesData as any)?.result || [];\r\n\r\n  // RTK Query automatically fetches data on mount, no manual fetch needed\r\n\r\n  // Prepare dropdown options\r\n  const tenantOptions = useMemo(() => {\r\n    return (Array.isArray(tenantsItems) ? tenantsItems : []).map((tenant: any) => ({\r\n      label: tenant.organization_name || tenant.contact_name || tenant.username,\r\n      value: tenant._id,\r\n    }));\r\n  }, [tenantsItems]);\r\n\r\n  const organisationOptions = useMemo(() => {\r\n    let orgs = Array.isArray(organisationsItems) ? organisationsItems : [];\r\n    // Filter by selected tenant if applicable\r\n    if (isSuperAdmin && selectedTenant !== 'all') {\r\n      orgs = orgs.filter((org: any) => org.tenant_id === selectedTenant);\r\n    }\r\n    return orgs.map((org: any) => ({\r\n      label: org.org_name || org.name,\r\n      value: org._id,\r\n    }));\r\n  }, [organisationsItems, selectedTenant, isSuperAdmin]);\r\n\r\n  const branchOptions = useMemo(() => {\r\n    let branches = Array.isArray(branchesItems) ? branchesItems : [];\r\n    // Filter by selected organisation if applicable\r\n    if (selectedOrganisation !== 'all') {\r\n      branches = branches.filter((branch: any) => \r\n        branch.organisation_id === selectedOrganisation || branch.org_id === selectedOrganisation\r\n      );\r\n    }\r\n    return branches.map((branch: any) => ({\r\n      label: branch.branch_name || branch.name,\r\n      value: branch._id,\r\n    }));\r\n  }, [branchesItems, selectedOrganisation]);\r\n\r\n  // Handle tenant change - reset dependent filters\r\n  const handleTenantChange = (value: string) => {\r\n    setSelectedTenant(value);\r\n    setSelectedOrganisation('all');\r\n    setSelectedBranch('all');\r\n    // RTK Query will automatically refetch organisations when filters change\r\n    // Filtering is handled client-side in organisationOptions useMemo\r\n  };\r\n\r\n  // Handle organisation change - reset branch filter\r\n  const handleOrganisationChange = (value: string) => {\r\n    setSelectedOrganisation(value);\r\n    setSelectedBranch('all');\r\n    // RTK Query will automatically refetch branches when filters change\r\n    // Filtering is handled client-side in branchOptions useMemo\r\n  };\r\n\r\n  // Use custom hooks\r\n  const {\r\n    loading,\r\n    reportCache,\r\n    fetchReportData,\r\n    salesReportData,\r\n    productSalesData,\r\n    customerSalesData,\r\n    stockReportData,\r\n    profitLossData,\r\n    outstandingPaymentsData,\r\n    paymentCollectionData,\r\n    expenseData,\r\n    gstData,\r\n    topProductsData,\r\n    topCustomersData,\r\n    stockExpiryData,\r\n  } = useReportData({\r\n    activeTab,\r\n    selectedTenant,\r\n    selectedOrganisation,\r\n    selectedBranch,\r\n    dateRange,\r\n    isSuperAdmin,\r\n  });\r\n\r\n  const {\r\n    exportModalVisible,\r\n    setExportModalVisible,\r\n    exportFormat,\r\n    setExportFormat,\r\n    exportOptions,\r\n    setExportOptions,\r\n    handleExport,\r\n    handlePrint,\r\n  } = useReportExport({\r\n    activeTab,\r\n    reportCache,\r\n    selectedTenant,\r\n    selectedOrganisation,\r\n    selectedBranch,\r\n    dateRange,\r\n    tenantOptions,\r\n    organisationOptions,\r\n    branchOptions,\r\n    isSuperAdmin,\r\n    isTenant,\r\n  });\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyPress = (e: KeyboardEvent) => {\r\n      if (e.ctrlKey) {\r\n        switch(e.key) {\r\n          case '1': case '2': case '3': case '4': case '5': case '6': case '7':\r\n            e.preventDefault();\r\n            setActiveTab(e.key);\r\n            break;\r\n          case 'r': case 'R':\r\n            e.preventDefault();\r\n            fetchReportData();\r\n            break;\r\n          case 'e': case 'E':\r\n            e.preventDefault();\r\n            setExportModalVisible(true);\r\n            break;\r\n          case 'p': case 'P':\r\n            e.preventDefault();\r\n            handlePrint();\r\n            break;\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => window.removeEventListener('keydown', handleKeyPress);\r\n  }, [fetchReportData, handlePrint, setExportModalVisible]);\r\n\r\n  // Note: RTK Query automatically fetches data on mount when skip=false\r\n  // Only manually refetch when user clicks \"Apply Filters\" or \"Refresh\" buttons\r\n  // Removing automatic fetch on mount to prevent duplicate API calls\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {/* Header Section */}\r\n      <Card style={{ marginBottom: 24, borderRadius: 12, boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\r\n        <Row justify=\"space-between\" align=\"middle\" style={{ marginBottom: 16 }}>\r\n          <Col>\r\n            <Title level={2} style={{ margin: 0, color: '#1890ff' }}>\r\n              <BarChartOutlined style={{ marginRight: 8 }} />\r\n              Advanced Business Reports\r\n            </Title>\r\n            <Text type=\"secondary\">Comprehensive analytics & insights with advanced reporting</Text>\r\n          </Col>\r\n          <Col>\r\n            <Space wrap>\r\n              <Tooltip title=\"Refresh Data (Ctrl+R)\">\r\n                <Button\r\n                  icon={<ReloadOutlined />}\r\n                  onClick={fetchReportData}\r\n                  loading={loading}\r\n                >\r\n                  Refresh\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Export Report (Ctrl+E)\">\r\n                <Button\r\n                  icon={<DownloadOutlined />}\r\n                  onClick={() => setExportModalVisible(true)}\r\n                  type=\"primary\"\r\n                >\r\n                  Export\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Print Report (Ctrl+P)\">\r\n                <Button\r\n                  icon={<PrinterOutlined />}\r\n                  onClick={handlePrint}\r\n                >\r\n                  Print\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Settings\">\r\n                <Button\r\n                  icon={<SettingOutlined />}\r\n                  type=\"dashed\"\r\n                />\r\n              </Tooltip>\r\n            </Space>\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Filters */}\r\n        <Row gutter={16} align=\"middle\">\r\n          <Col xs={24} sm={12} md={6}>\r\n            <Space direction=\"vertical\" size={2} style={{ width: '100%' }}>\r\n              <Text strong><CalendarOutlined /> Date Range:</Text>\r\n              <RangePicker\r\n                value={dateRange}\r\n                onChange={(dates) => setDateRange(dates as [dayjs.Dayjs, dayjs.Dayjs] | null)}\r\n                style={{ width: '100%' }}\r\n              />\r\n            </Space>\r\n          </Col>\r\n\r\n          {/* Tenant Dropdown - Only for SuperAdmin */}\r\n          {isSuperAdmin && (\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Space direction=\"vertical\" size={2} style={{ width: '100%' }}>\r\n                <Text strong>Tenant:</Text>\r\n                <Select\r\n                  value={selectedTenant}\r\n                  onChange={handleTenantChange}\r\n                  style={{ width: '100%' }}\r\n                  showSearch\r\n                  optionFilterProp=\"children\"\r\n                  filterOption={(input, option: any) =>\r\n                    String(option?.label ?? '').toLowerCase().includes(input.toLowerCase())\r\n                  }\r\n                >\r\n                  <Option value=\"all\">All Tenants</Option>\r\n                  {tenantOptions.map((option: any) => (\r\n                    <Option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Space>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Organisation Dropdown - For SuperAdmin and Tenant only (not OrganisationUser or BranchUser) */}\r\n          {(isSuperAdmin || isTenant) && !isOrganisationUser && !isBranchUser && (\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Space direction=\"vertical\" size={2} style={{ width: '100%' }}>\r\n                <Text strong>Organisation:</Text>\r\n                <Select\r\n                  value={selectedOrganisation}\r\n                  onChange={handleOrganisationChange}\r\n                  style={{ width: '100%' }}\r\n                  showSearch\r\n                  optionFilterProp=\"children\"\r\n                  filterOption={(input, option: any) =>\r\n                    String(option?.label ?? '').toLowerCase().includes(input.toLowerCase())\r\n                  }\r\n                  disabled={isSuperAdmin && selectedTenant === 'all'}\r\n                  placeholder={isSuperAdmin && selectedTenant === 'all' ? 'Select tenant first' : 'Select organisation'}\r\n                >\r\n                  <Option value=\"all\">All Organisations</Option>\r\n                  {organisationOptions.map((option: any) => (\r\n                    <Option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Space>\r\n            </Col>\r\n          )}\r\n\r\n          {/* Branch Dropdown - For SuperAdmin, Tenant, and OrganisationUser (not BranchUser) */}\r\n          {(isSuperAdmin || isTenant || isOrganisationUser) && !isBranchUser && (\r\n            <Col xs={24} sm={12} md={6}>\r\n              <Space direction=\"vertical\" size={2} style={{ width: '100%' }}>\r\n                <Text strong>Branch:</Text>\r\n                <Select\r\n                  value={selectedBranch}\r\n                  onChange={setSelectedBranch}\r\n                  style={{ width: '100%' }}\r\n                  showSearch\r\n                  optionFilterProp=\"children\"\r\n                  filterOption={(input, option: any) =>\r\n                    String(option?.label ?? '').toLowerCase().includes(input.toLowerCase())\r\n                  }\r\n                  disabled={(isSuperAdmin || isTenant) && selectedOrganisation === 'all'}\r\n                  placeholder={(isSuperAdmin || isTenant) && selectedOrganisation === 'all' ? 'Select organisation first' : 'Select branch'}\r\n                >\r\n                  <Option value=\"all\">All Branches</Option>\r\n                  {branchOptions.map((option: any) => (\r\n                    <Option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </Option>\r\n                  ))}\r\n                </Select>\r\n              </Space>\r\n            </Col>\r\n          )}\r\n\r\n          <Col xs={24} sm={24} md={6}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<FilterOutlined />}\r\n              onClick={fetchReportData}\r\n              loading={loading}\r\n              style={{ marginTop: 22, width: '100%' }}\r\n              size=\"large\"\r\n            >\r\n              Apply Filters\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Card>\r\n\r\n      {/* Report Content Tabs */}\r\n      <ReportDataProvider\r\n        value={{\r\n          salesReportData,\r\n          productSalesData,\r\n          customerSalesData,\r\n          stockReportData,\r\n          profitLossData,\r\n          outstandingPaymentsData,\r\n          paymentCollectionData,\r\n          expenseData,\r\n          gstData,\r\n          topProductsData,\r\n          topCustomersData,\r\n          stockExpiryData,\r\n          loading,\r\n        }}\r\n      >\r\n        <Tabs \r\n          activeKey={activeTab}\r\n          onChange={setActiveTab}\r\n          type=\"card\" \r\n          size=\"large\"\r\n          style={{ backgroundColor: '#fff', padding: 16, borderRadius: 12, boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}\r\n          items={[\r\n            {\r\n              key: '1',\r\n              label: (\r\n                <Tooltip title=\"Comprehensive Overview (Ctrl+1)\">\r\n                  <span><BarChartOutlined /> Comprehensive</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <ComprehensiveReport />,\r\n            },\r\n            {\r\n              key: '2',\r\n              label: (\r\n                <Tooltip title=\"Financial Analysis (Ctrl+2)\">\r\n                  <span><FundOutlined /> Financial</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <FinancialReport />,\r\n            },\r\n            {\r\n              key: '3',\r\n              label: (\r\n                <Tooltip title=\"Sales Analytics (Ctrl+3)\">\r\n                  <span><ShoppingCartOutlined /> Sales</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <SalesReport />,\r\n            },\r\n            {\r\n              key: '4',\r\n              label: (\r\n                <Tooltip title=\"Customer Analytics (Ctrl+4)\">\r\n                  <span><UserOutlined /> Customers</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <CustomerReport />,\r\n            },\r\n            {\r\n              key: '5',\r\n              label: (\r\n                <Tooltip title=\"Inventory Report (Ctrl+5)\">\r\n                  <span><StockOutlined /> Inventory</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <InventoryReport />,\r\n            },\r\n          {\r\n            key: '6',\r\n            label: (\r\n              <Tooltip title=\"Staff Performance (Under Development)\">\r\n                <span>\r\n                  <TeamOutlined /> Staff \r\n                  <Tag color=\"orange\" style={{ marginLeft: 8, fontSize: 10 }}>Dev</Tag>\r\n                </span>\r\n              </Tooltip>\r\n            ),\r\n            children: <StaffReport />,\r\n          },\r\n            {\r\n              key: '7',\r\n              label: (\r\n                <Tooltip title=\"Payment Analysis (Ctrl+7)\">\r\n                  <span><DollarOutlined /> Payments</span>\r\n                </Tooltip>\r\n              ),\r\n              children: <PaymentReport />,\r\n            },\r\n          ]}\r\n        />\r\n      </ReportDataProvider>\r\n\r\n      {/* Export Modal */}\r\n      <Modal\r\n        title={<><DownloadOutlined /> Export Report</>}\r\n        open={exportModalVisible}\r\n        onCancel={() => setExportModalVisible(false)}\r\n        onOk={handleExport}\r\n        okText=\"Export\"\r\n        cancelText=\"Cancel\"\r\n        width={500}\r\n      >\r\n        <Form form={form} layout=\"vertical\">\r\n          <Form.Item label=\"Export Format\">\r\n            <Radio.Group \r\n              value={exportFormat} \r\n              onChange={(e) => setExportFormat(e.target.value)}\r\n              buttonStyle=\"solid\"\r\n            >\r\n              <Radio.Button value=\"pdf\"><FilePdfOutlined /> PDF</Radio.Button>\r\n              <Radio.Button value=\"excel\"><FileExcelOutlined /> Excel</Radio.Button>\r\n              <Radio.Button value=\"csv\">CSV</Radio.Button>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n          <Form.Item label=\"Include in Export\">\r\n            <Checkbox.Group \r\n              value={exportOptions}\r\n              onChange={(values) => setExportOptions(values as string[])}\r\n              style={{ width: '100%' }}\r\n            >\r\n              <Row>\r\n                <Col span={24}><Checkbox value=\"summary\">Summary Statistics</Checkbox></Col>\r\n                <Col span={24}><Checkbox value=\"charts\">Charts & Graphs</Checkbox></Col>\r\n                <Col span={24}><Checkbox value=\"tables\">Detailed Tables</Checkbox></Col>\r\n                <Col span={24}><Checkbox value=\"trends\">Trend Analysis</Checkbox></Col>\r\n              </Row>\r\n            </Checkbox.Group>\r\n          </Form.Item>\r\n          <Form.Item label=\"Date Range\">\r\n            <RangePicker style={{ width: '100%' }} value={dateRange} />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n"],"names":["getReportTypeFromTab","tabKey","useReportExport","props","exportModalVisible","setExportModalVisible","useState","exportFormat","setExportFormat","exportOptions","setExportOptions","handleExport","_props$dateRange","_props$dateRange$","_props$dateRange2","_props$dateRange2$","reportType","activeTab","cacheKey","concat","selectedTenant","selectedOrganisation","selectedBranch","dateRange","format","reportData","reportCache","message","error","exportOpts","tenantOptions","organisationOptions","branchOptions","isSuperAdmin","isTenant","exportToExcel","data","options","_options$dateRange","_options$dateRange$","_options$dateRange2","_options$dateRange2$","_options$dateRange3","_options$dateRange3$","_options$dateRange4","_options$dateRange4$","_options$dateRange5","_options$dateRange5$","_options$dateRange6","_options$dateRange6$","excelData","fileName","dayjs","getTenantLabel","getOrganisationLabel","getBranchLabel","tenant","find","t","value","label","org","o","branch","b","getFilterLabels","totalProducts","stockValue","toLocaleString","lowStockItems","outOfStock","categoryData","map","item","name","sales","profit","margin","totalSales","avgOrderValue","conversionRate","topCustomers","customer","totalPurchase","orders","outstanding","Object","entries","_ref","key","csvContent","row","join","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","success","info","exportToCSV","csvData","_ref2","handlePrint","window","print","ReportDataContext","createContext","undefined","ReportDataProvider","children","_jsx","Provider","useReportDataContext","context","useContext","Error","Text","Typography","COLORS","ComprehensiveReport","_profitLoss$profit","_profitLoss$profit2","_salesData$","salesReportData","salesReportDataContext","profitLossData","profitLossDataContext","customerSalesData","customerSalesDataContext","stockReportData","stockReportDataContext","paymentCollectionData","paymentCollectionDataContext","productSalesData","productSalesDataContext","result","salesSummary","summary","profitLoss","customers","stockSummary","collectionSummary","productSales","products","salesData","totalRevenue","parseFloat","total_revenue","netProfit","net_profit","totalBills","parseInt","total_bills","totalCustomers","length","avgBillValue","average_bill_value","profitMargin","profit_margin_percentage","total_stock_value","totalCollected","total_collected","activeCustomers","filter","c","total_purchase","avgLifetimeValue","reduce","sum","customerSegments","color","percentage","toFixed","purchase","s","topProductsChart","slice","product","substring","quantity","total_quantity_sold","paymentMethods","payment_mode_breakdown","method","payment_mode","amount","total_amount","trendData","Array","isArray","period","total_sales","transactions","total_transactions","_jsxs","Row","gutter","Col","xs","sm","md","Card","textAlign","borderRadius","background","DollarOutlined","fontSize","marginBottom","Statistic","title","prefix","precision","valueStyle","FundOutlined","ShoppingCartOutlined","total_items","UserOutlined","marginTop","lg","_Fragment","LineChartOutlined","ResponsiveContainer","width","height","ComposedChart","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","RechartsTooltip","Legend","Bar","fill","Line","stroke","strokeWidth","Empty","description","PieChartOutlined","PieChart","Pie","cx","cy","labelLine","outerRadius","entry","index","Cell","BarChartOutlined","BarChart","layout","formatter","FinancialReport","_profitLoss$revenue","_profitLoss$revenue2","_profitLoss$revenue3","_profitLoss$costs","_profitLoss$costs2","_profitLoss$costs3","_profitLoss$profit3","expenseData","expenseDataContext","gstData","gstDataContext","expenseSummary","expenses","gstSummary","revenue","total_sales_revenue","totalDiscount","total_discount_given","netRevenue","net_revenue","cogs","costs","cost_of_goods_sold","operatingExpenses","operating_expenses","totalCosts","total_costs","grossProfit","gross_profit","gstCollected","total_gst_collected","plStatementData","category","expenseBreakdown","category_breakdown","count","expense_count","suffix","Table","dataSource","columns","dataIndex","render","text","record","strong","align","amt","Math","abs","minimumFractionDigits","maximumFractionDigits","pagination","size","locale","emptyText","angle","textAnchor","total_expense_amount","total_expense_count","average_expense","SalesReport","topProductsData","topProductsDataContext","topProducts","top_products","totalOutstanding","total_outstanding","revenuePercent","min","collectionPercent","outstandingPercent","categoryChartData","bordered","Progress","percent","round","strokeColor","LineChart","TrophyOutlined","rowKey","_","__","Tag","fontWeight","VariantItem","variant_name","val","sorter","a","total_orders","pageSize","CustomerReport","topCustomersData","topCustomersDataContext","top_customers","customersWithData","vipCustomers","segmentCustomers","segments","max","forEach","top10Chart","_c$name","bills","RiseOutlined","TeamOutlined","phone","outstanding_amount","InventoryReport","_stockExpiryData$resu","stockExpiryData","stockExpiryDataContext","stockDetails","stock_details","low_stock_items","expiringStock","expiring_stock","expirySummary","expiryBreakdown","expiry_breakdown","lowStock","low_stock_count","within7Days","expired_count","within_7_days_count","categoryStockMap","Map","_item$ProductItem","_item$ProductItem$Cat","categoryName","ProductItem","CategoryItem","category_name","available_quantity","buy_price","has","existing","get","set","from","expiryTimelineData","expired","within_7_days","within_30_days","within_90_days","StockOutlined","FallOutlined","WarningOutlined","variant","qty","available_loose_quantity","_record$ProductItem","_record$ProductItem2","date","daysToExpiry","diff","status","Paragraph","StaffReport","minHeight","display","alignItems","justifyContent","Result","icon","ExperimentOutlined","subTitle","ClockCircleOutlined","PaymentReport","outstandingPaymentsData","outstandingPaymentsDataContext","paymentModeBreakdown","outstandingBills","outstanding_bills","outstandingSummary","total_outstanding_amount","total_outstanding_bills","collectionRate","paymentMethodData","transaction_count","paymentMethodsWithPercentage","_objectSpread","overdueAmount","bill","billDate","toString","invoice","_record$customerDetai","_record$customerDetai2","customerDetails","daysOld","priority","Title","RangePicker","DatePicker","Option","Select","Reports","setDateRange","subtract","setSelectedTenant","setSelectedOrganisation","setSelectedBranch","setActiveTab","form","Form","useForm","userItem","useMemo","getCurrentUser","scopeData","SessionStorageEncryption","getItem","userRole","userType","user_type","usertype","user_role","toLowerCase","isOrganisationUser","isBranchUser","tenantsData","useGetTenantAccountsQuery","skip","organisationsData","useGetOrganisationsQuery","branchesData","useGetBranchesQuery","tenantsItems","organisationsItems","branchesItems","organization_name","contact_name","username","_id","orgs","tenant_id","org_name","branches","organisation_id","org_id","branch_name","loading","fetchReportData","setLoading","setReportCache","loadingTimeoutRef","useRef","apiFilters","_dateRange$","_dateRange$2","start_date","end_date","topProductsFilters","limit","topCustomersFilters","stockExpiryFilters","days_threshold","emptyFilters","shouldFetchSales","shouldFetchProductSales","shouldFetchTopProducts","shouldFetchCustomer","shouldFetchTopCustomers","shouldFetchInventory","shouldFetchStockExpiry","shouldFetchFinancial","shouldFetchExpense","shouldFetchGST","shouldFetchPayment","shouldFetchOutstanding","shouldFetchComprehensive","shouldFetchSalesForComp","shouldFetchProfitLossForComp","shouldFetchCustomerForComp","shouldFetchStockForComp","shouldFetchPaymentForComp","salesReportResponse","refetch","refetchSales","apiSlice","useGetSalesReportQuery","refetchOnMountOrArgChange","refetchOnFocus","refetchOnReconnect","productSalesResponse","refetchProductSales","useGetProductSalesReportQuery","customerSalesResponse","refetchCustomerSales","useGetCustomerSalesReportQuery","stockReportResponse","refetchStock","useGetStockReportQuery","profitLossResponse","refetchProfitLoss","useGetProfitLossReportQuery","outstandingPaymentsResponse","refetchOutstanding","useGetOutstandingPaymentsReportQuery","paymentCollectionResponse","refetchPaymentCollection","useGetPaymentCollectionReportQuery","expenseResponse","refetchExpense","useGetExpenseReportQuery","gstResponse","refetchGST","useGetGSTReportQuery","topProductsResponse","refetchTopProducts","useGetTopProductsReportQuery","topCustomersResponse","refetchTopCustomers","useGetTopCustomersReportQuery","stockExpiryResponse","refetchStockExpiry","useGetStockExpiryReportQuery","useEffect","_dateRange$3","_dateRange$4","newData","salesReport","customerSales","stock","expiry","gst","collections","payments","prev","useCallback","_dateRange$5","_dateRange$6","current","clearTimeout","setTimeout","console","useReportData","handleKeyPress","e","ctrlKey","preventDefault","addEventListener","removeEventListener","className","styles","boxShadow","justify","level","marginRight","Space","wrap","Tooltip","Button","ReloadOutlined","onClick","DownloadOutlined","PrinterOutlined","SettingOutlined","direction","CalendarOutlined","onChange","dates","showSearch","optionFilterProp","filterOption","input","option","_option$label","String","includes","_option$label2","disabled","placeholder","_option$label3","FilterOutlined","Tabs","activeKey","backgroundColor","padding","items","marginLeft","Modal","open","onCancel","onOk","okText","cancelText","Item","Radio","target","buttonStyle","FilePdfOutlined","FileExcelOutlined","Checkbox","Group","values","span"],"sourceRoot":""}