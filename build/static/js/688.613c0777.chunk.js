/*! For license information please see 688.613c0777.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[688],{11688:(e,s,r)=>{r.r(s),r.d(s,{default:()=>H});var l=r(89379),i=r(65043),a=r(83833),n=r(62305),o=r(16569),d=r(47419),t=r(11645),c=r(89073),m=r(45964),u=r(76399),h=r(8354),x=r(20691),v=r(95206),j=r(36621),p=r(6051),A=r(62751),f=r(53722),y=r(61831),g=r(33359),w=r(75388),_=r(87534),b=r(88143),P=r(15615),U=r(98617),I=r(22115),C=r(89472),z=r(98350);const N="UserProfile_userProfileContainer__XwCLZ",F="UserProfile_userProfileHeader__Y56wV",V="UserProfile_profileCard__1Unoq",E="UserProfile_profileOverview__UF9E+",k="UserProfile_profileAvatarSection__XRZX6",S="UserProfile_profileAvatar__LXaoj",B="UserProfile_profileDetails__RVszn",L="UserProfile_securityCard__GTvZJ",T="UserProfile_securitySection__Cdg-f",q="UserProfile_securityItem__5y8Cl",M="UserProfile_securityItemContent__Ui8X7";var O=r(70579);const{Title:X,Text:R}=a.A,H=()=>{var e,s,r,a,H;const D=(0,I.J)(),[G,Z]=(0,i.useState)(!1),[J,Y]=(0,i.useState)(!1),[$]=n.A.useForm(),[K]=n.A.useForm(),[Q,{isLoading:W}]=z.lh.useUpdateBillingUsersMutation();(0,i.useEffect)((()=>{D&&$.setFieldsValue({name:D.name,email:D.email,mobile:D.mobile,user_name:D.username||""})}),[D,$]);const ee=(null===D||void 0===D||null===(e=D.roleItems)||void 0===e?void 0:e.name)||(null===D||void 0===D?void 0:D.usertype)||(null===D||void 0===D?void 0:D.user_role)||"User",se=(null===D||void 0===D||null===(s=D.organisationItems)||void 0===s?void 0:s.org_name)||(null===D||void 0===D||null===(r=D.organisationItems)||void 0===r?void 0:r.name)||"N/A",re=(null===D||void 0===D||null===(a=D.branchItems)||void 0===a?void 0:a.branch_name)||(null===D||void 0===D||null===(H=D.branchItems)||void 0===H?void 0:H.name)||"N/A";return(0,O.jsxs)("div",{className:N,children:[(0,O.jsxs)("div",{className:F,children:[(0,O.jsxs)(X,{level:2,children:[(0,O.jsx)(f.A,{})," My Profile"]}),(0,O.jsx)(R,{type:"secondary",children:"View and manage your account information"})]}),(0,O.jsxs)(d.A,{gutter:[24,24],children:[(0,O.jsx)(t.A,{xs:24,lg:8,children:(0,O.jsxs)(c.A,{className:"".concat(V," ").concat(E),children:[(0,O.jsxs)("div",{className:k,children:[(0,O.jsx)(m.A,{size:120,className:S,children:(le=null===D||void 0===D?void 0:D.name,le?le.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2):"U")}),(0,O.jsx)(X,{level:4,style:{marginTop:16,marginBottom:4},children:(null===D||void 0===D?void 0:D.name)||"User Name"}),(0,O.jsxs)(R,{type:"secondary",children:["@",(null===D||void 0===D?void 0:D.username)||(null===D||void 0===D?void 0:D.name)||"username"]}),(0,O.jsx)("div",{style:{marginTop:16},children:(0,O.jsx)(u.A,{color:"blue",style:{fontSize:14,padding:"4px 12px"},children:ee})})]}),(0,O.jsx)(h.A,{}),(0,O.jsxs)(x.A,{column:1,size:"small",children:[(0,O.jsx)(x.A.Item,{label:(0,O.jsxs)("span",{children:[(0,O.jsx)(y.A,{})," Organisation"]}),children:(0,O.jsx)(R,{strong:!0,children:se})}),(0,O.jsx)(x.A.Item,{label:(0,O.jsxs)("span",{children:[(0,O.jsx)(y.A,{})," Branch"]}),children:(0,O.jsx)(R,{strong:!0,children:re})})]})]})}),(0,O.jsxs)(t.A,{xs:24,lg:16,children:[(0,O.jsx)(c.A,{className:"".concat(V," ").concat(B),title:"Personal Information",extra:!G&&(0,O.jsx)(v.Ay,{type:"primary",icon:(0,O.jsx)(g.A,{}),onClick:()=>Z(!0),children:"Edit Profile"}),children:(0,O.jsxs)(n.A,{form:$,layout:"vertical",onFinish:async e=>{if(null!==D&&void 0!==D&&D._id)try{const s={name:e.name,email:e.email,mobile:e.mobile},r=await Q((0,l.A)({id:D._id},s)).unwrap();o.Ay.success("Profile updated successfully"),Z(!1);const i=(null===r||void 0===r?void 0:r.result)||r;i&&(0,C.sX)(i),window.location.reload()}catch(r){var s;o.Ay.error((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to update profile")}else o.Ay.error("User ID not found")},disabled:!G,children:[(0,O.jsxs)(d.A,{gutter:16,children:[(0,O.jsx)(t.A,{xs:24,md:12,children:(0,O.jsx)(n.A.Item,{label:"Full Name",name:"name",rules:[{required:!0,message:"Please enter your full name"}],children:(0,O.jsx)(j.A,{prefix:(0,O.jsx)(f.A,{}),placeholder:"Enter full name",size:"large"})})}),(0,O.jsx)(t.A,{xs:24,md:12,children:(0,O.jsx)(n.A.Item,{label:"Username",name:"user_name",children:(0,O.jsx)(j.A,{prefix:(0,O.jsx)(f.A,{}),placeholder:"Username",size:"large",disabled:!0})})})]}),(0,O.jsxs)(d.A,{gutter:16,children:[(0,O.jsx)(t.A,{xs:24,md:12,children:(0,O.jsx)(n.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Enter a valid email"}],children:(0,O.jsx)(j.A,{prefix:(0,O.jsx)(w.A,{}),placeholder:"Enter email",size:"large"})})}),(0,O.jsx)(t.A,{xs:24,md:12,children:(0,O.jsx)(n.A.Item,{label:"Mobile Number",name:"mobile",rules:[{required:!0,message:"Please enter your mobile number"},{pattern:/^[0-9]{10}$/,message:"Enter valid 10-digit mobile number"}],children:(0,O.jsx)(j.A,{prefix:(0,O.jsx)(_.A,{}),placeholder:"Enter mobile number",maxLength:10,size:"large"})})})]}),G&&(0,O.jsx)(n.A.Item,{children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(v.Ay,{type:"primary",htmlType:"submit",icon:(0,O.jsx)(b.A,{}),loading:W,size:"large",children:"Save Changes"}),(0,O.jsx)(v.Ay,{onClick:()=>{Z(!1),$.setFieldsValue({name:null===D||void 0===D?void 0:D.name,email:null===D||void 0===D?void 0:D.email,mobile:null===D||void 0===D?void 0:D.mobile,user_name:(null===D||void 0===D?void 0:D.username)||""})},icon:(0,O.jsx)(P.A,{}),size:"large",children:"Cancel"})]})})]})}),(0,O.jsx)(c.A,{className:"".concat(V," ").concat(L),title:"Security Settings",style:{marginTop:24},children:(0,O.jsx)("div",{className:T,children:(0,O.jsxs)("div",{className:q,children:[(0,O.jsx)(U.A,{style:{fontSize:24,color:"#1890ff"}}),(0,O.jsxs)("div",{className:M,children:[(0,O.jsx)(R,{strong:!0,children:"Password"}),(0,O.jsx)("br",{}),(0,O.jsx)(R,{type:"secondary",children:"Update your password to keep your account secure"})]}),(0,O.jsx)(v.Ay,{type:"default",onClick:()=>Y(!0),children:"Change Password"})]})})})]})]}),(0,O.jsx)(A.A,{title:"Change Password",open:J,onCancel:()=>{Y(!1),K.resetFields()},footer:null,width:500,children:(0,O.jsxs)(n.A,{form:K,layout:"vertical",onFinish:async e=>{if(null!==D&&void 0!==D&&D._id)try{await Q({id:D._id,password:e.new_password}).unwrap(),o.Ay.success("Password changed successfully"),Y(!1),K.resetFields(),window.location.reload()}catch(r){var s;o.Ay.error((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to change password")}else o.Ay.error("User ID not found")},children:[(0,O.jsx)(n.A.Item,{label:"New Password",name:"new_password",rules:[{required:!0,message:"Please enter new password"},{min:6,message:"Password must be at least 6 characters"}],hasFeedback:!0,children:(0,O.jsx)(j.A.Password,{prefix:(0,O.jsx)(U.A,{}),placeholder:"Enter new password",size:"large"})}),(0,O.jsx)(n.A.Item,{label:"Confirm New Password",name:"confirm_password",dependencies:["new_password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password"},e=>{let{getFieldValue:s}=e;return{validator:(e,r)=>r&&s("new_password")!==r?Promise.reject(new Error("The two passwords do not match!")):Promise.resolve()}}],children:(0,O.jsx)(j.A.Password,{prefix:(0,O.jsx)(U.A,{}),placeholder:"Confirm new password",size:"large"})}),(0,O.jsx)(n.A.Item,{style:{marginBottom:0},children:(0,O.jsxs)(p.A,{children:[(0,O.jsx)(v.Ay,{type:"primary",htmlType:"submit",loading:W,size:"large",children:"Update Password"}),(0,O.jsx)(v.Ay,{onClick:()=>{Y(!1),K.resetFields()},size:"large",children:"Cancel"})]})})]})})]});var le}},88143:(e,s,r)=>{r.d(s,{A:()=>d});var l=r(65043);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var a=r(66381);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},n.apply(this,arguments)}const o=(e,s)=>l.createElement(a.A,n({},e,{ref:s,icon:i}));const d=l.forwardRef(o)}}]);
//# sourceMappingURL=688.613c0777.chunk.js.map