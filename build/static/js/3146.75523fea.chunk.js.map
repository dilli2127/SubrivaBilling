{"version":3,"file":"static/js/3146.75523fea.chunk.js","mappings":"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","sources":["components/common/handleApiResponse.ts","hooks/useSuperAdminFilters.ts","components/antd/form/form.jsx","helpers/fieldMetadataUtils.tsx","components/FieldMetadataManager/FieldForm.tsx","components/FieldMetadataManager/FieldsTable.tsx","components/FieldMetadataManager/hooks/useFieldMetadataOperations.ts","components/FieldMetadataManager/FieldMetadataManager.tsx","components/common/GenericCrudPage.tsx","hooks/useFieldMetadata.ts","hooks/useGenericCrud.ts","helpers/columnUtils.tsx","helpers/Common_functions.ts"],"sourcesContent":["import { showToast } from \"../../helpers/Common_functions\";\r\n\r\ntype ActionType = \"create\" | \"update\" | \"delete\";\r\n\r\ninterface ApiResponseHandlerParams {\r\n  action: ActionType;\r\n  success: boolean;\r\n  title: string;\r\n  getAllItems?: () => void;\r\n  resetForm?: () => void;\r\n  errorMessage?: string;\r\n}\r\n\r\nexport const handleApiResponse = ({\r\n  action,\r\n  success,\r\n  title,\r\n  getAllItems,\r\n  resetForm,\r\n  errorMessage,\r\n}: ApiResponseHandlerParams) => {\r\n  if (success) {\r\n    showToast(\"success\", `${title} ${action}d successfully`);\r\n    getAllItems?.();\r\n    resetForm?.();\r\n    // RTK Query handles cache invalidation automatically, no need for manual clearing\r\n  } else {\r\n    showToast(\"error\", errorMessage || `Failed to ${action} ${title}`);\r\n  }\r\n};\r\n","import { useState, useMemo, useCallback } from 'react';\r\nimport { apiSlice } from '../services/redux/api/apiSlice';\r\nimport { getCurrentUser } from '../helpers/auth';\r\nimport SessionStorageEncryption from '../helpers/encryption';\r\n\r\nexport interface SuperAdminFiltersReturn {\r\n  isSuperAdmin: boolean;\r\n  isTenant: boolean;\r\n  isOrganisationUser: boolean;\r\n  isBranchUser: boolean;\r\n  \r\n  // Selected values\r\n  selectedTenant: string;\r\n  selectedOrganisation: string;\r\n  selectedBranch: string;\r\n  \r\n  // Dropdown options\r\n  tenantOptions: Array<{ label: string; value: string }>;\r\n  organisationOptions: Array<{ label: string; value: string }>;\r\n  branchOptions: Array<{ label: string; value: string }>;\r\n  \r\n  // Change handlers\r\n  handleTenantChange: (value: string) => void;\r\n  handleOrganisationChange: (value: string) => void;\r\n  handleBranchChange: (value: string) => void;\r\n  \r\n  // Loading states\r\n  tenantsLoading: boolean;\r\n  organisationsLoading: boolean;\r\n  branchesLoading: boolean;\r\n  \r\n  // Filters object for API calls\r\n  getApiFilters: () => Record<string, any>;\r\n}\r\n\r\nexport const useSuperAdminFilters = (): SuperAdminFiltersReturn => {\r\n  const [selectedTenant, setSelectedTenant] = useState<string>('all');\r\n  const [selectedOrganisation, setSelectedOrganisation] = useState<string>('all');\r\n  const [selectedBranch, setSelectedBranch] = useState<string>('all');\r\n\r\n  // Get user role - memoized to prevent infinite loops\r\n  const userItem = useMemo(() => {\r\n    return getCurrentUser();\r\n  }, []);\r\n\r\n  // Get user type from scope first (preferred), fallback to user_type\r\n  const scopeData = useMemo(() => {\r\n    return SessionStorageEncryption.getItem('scope');\r\n  }, []);\r\n\r\n  const userRole = useMemo(() => {\r\n    return scopeData?.userType || userItem?.user_type || userItem?.usertype || userItem?.user_role || '';\r\n  }, [scopeData, userItem]);\r\n\r\n  const isSuperAdmin = useMemo(() => userRole.toLowerCase() === 'superadmin', [userRole]);\r\n  const isTenant = useMemo(() => userRole.toLowerCase() === 'tenant', [userRole]);\r\n  const isOrganisationUser = useMemo(() => userRole.toLowerCase() === 'organisationuser', [userRole]);\r\n  const isBranchUser = useMemo(() => userRole.toLowerCase() === 'branchuser', [userRole]);\r\n\r\n  // RTK Query hooks for dropdowns data\r\n  const { data: tenantsData, isLoading: tenantsLoading, refetch: refetchTenants } =\r\n    apiSlice.useGetTenantAccountsQuery(\r\n      {},\r\n      { skip: !isSuperAdmin }\r\n    );\r\n\r\n  // Effective tenant id for querying organisations\r\n  const effectiveTenantId = useMemo(() => {\r\n    if (isSuperAdmin) {\r\n      return selectedTenant !== 'all' ? selectedTenant : undefined;\r\n    }\r\n    // For tenant users, backend scopes by token; no need to pass explicit tenant_id\r\n    return undefined;\r\n  }, [isSuperAdmin, selectedTenant]);\r\n\r\n  // Load organisations based on role:\r\n  // - SuperAdmin: Load after tenant selection (lazy load)\r\n  // - Tenant: Load immediately on mount (backend will scope by token)\r\n  const { data: organisationsData, isLoading: organisationsLoading, refetch: refetchOrganisations } =\r\n    apiSlice.useGetOrganisationsQuery(\r\n      effectiveTenantId ? { tenant_id: effectiveTenantId } : {},\r\n      {\r\n        skip: (!isTenant && !isSuperAdmin) || (isSuperAdmin && !effectiveTenantId),\r\n      }\r\n    );\r\n\r\n  // Load branches based on role:\r\n  // - SuperAdmin/Tenant: Load after organisation selection (lazy load)\r\n  // - Organisation user: Load immediately on mount\r\n  const effectiveOrganisationId = useMemo(() => {\r\n    if (isOrganisationUser) {\r\n      // For organisation users, get their org_id from user data\r\n      return userItem?.organisation_id || userItem?.organisationItems?._id;\r\n    }\r\n    return selectedOrganisation !== 'all' ? selectedOrganisation : undefined;\r\n  }, [selectedOrganisation, isOrganisationUser, userItem]);\r\n\r\n  const { data: branchesData, isLoading: branchesLoading, refetch: refetchBranches } =\r\n    apiSlice.useGetBranchesQuery(\r\n      effectiveOrganisationId\r\n        ? { organisation_id: effectiveOrganisationId, org_id: effectiveOrganisationId }\r\n        : {},\r\n      {\r\n        skip:\r\n          (!isSuperAdmin && !isTenant && !isOrganisationUser) ||\r\n          !effectiveOrganisationId,\r\n      }\r\n    );\r\n\r\n  // Extract items from RTK Query data\r\n  const tenantsItems = (tenantsData as any)?.result || [];\r\n  const organisationsItems = (organisationsData as any)?.result || [];\r\n  const branchesItems = (branchesData as any)?.result || [];\r\n\r\n  // Prepare dropdown options\r\n  const tenantOptions = useMemo(() => {\r\n    return tenantsItems?.map((tenant: any) => ({\r\n      label: tenant.organization_name || tenant.contact_name || tenant.username,\r\n      value: tenant._id,\r\n    })) || [];\r\n  }, [tenantsItems]);\r\n\r\n  const organisationOptions = useMemo(() => {\r\n    let orgs = organisationsItems || [];\r\n    // Filter by selected tenant if applicable\r\n    if (isSuperAdmin && selectedTenant !== 'all') {\r\n      orgs = orgs.filter((org: any) => org.tenant_id === selectedTenant);\r\n    }\r\n    return orgs.map((org: any) => ({\r\n      label: org.org_name || org.name,\r\n      value: org._id,\r\n    }));\r\n  }, [organisationsItems, selectedTenant, isSuperAdmin]);\r\n\r\n  const branchOptions = useMemo(() => {\r\n    let branches = branchesItems || [];\r\n    // Filter by selected organisation if applicable\r\n    if (selectedOrganisation !== 'all') {\r\n      branches = branches.filter(\r\n        (branch: any) =>\r\n          branch.organisation_id === selectedOrganisation ||\r\n          branch.org_id === selectedOrganisation\r\n      );\r\n    }\r\n    return branches.map((branch: any) => ({\r\n      label: branch.branch_name || branch.name,\r\n      value: branch._id,\r\n    }));\r\n  }, [branchesItems, selectedOrganisation]);\r\n\r\n  // Handle tenant change - reset dependent filters\r\n  const handleTenantChange = useCallback((value: string) => {\r\n    setSelectedTenant(value);\r\n    setSelectedOrganisation('all');\r\n    setSelectedBranch('all');\r\n    // RTK Query automatically refetches when skip conditions change\r\n    // The filtering is done client-side in organisationOptions useMemo\r\n  }, []);\r\n\r\n  // Handle organisation change - reset branch filter\r\n  const handleOrganisationChange = useCallback((value: string) => {\r\n    setSelectedOrganisation(value);\r\n    setSelectedBranch('all');\r\n    // RTK Query automatically refetches when skip conditions change\r\n    // The filtering is done client-side in branchOptions useMemo\r\n  }, []);\r\n\r\n  // Handle branch change\r\n  const handleBranchChange = useCallback((value: string) => {\r\n    setSelectedBranch(value);\r\n  }, []);\r\n\r\n  // Generate API filters based on selections\r\n  const getApiFilters = useCallback(() => {\r\n    const filters: Record<string, any> = {};\r\n    \r\n    if (isSuperAdmin) {\r\n      if (selectedTenant && selectedTenant !== 'all') {\r\n        filters.tenant_id = selectedTenant;\r\n      }\r\n    }\r\n    \r\n    if ((isSuperAdmin || isTenant) && selectedOrganisation && selectedOrganisation !== 'all') {\r\n      filters.organisation_id = selectedOrganisation;\r\n      filters.org_id = selectedOrganisation; // Some APIs use org_id\r\n    }\r\n    \r\n    if ((isSuperAdmin || isTenant || isOrganisationUser) && selectedBranch && selectedBranch !== 'all') {\r\n      filters.branch_id = selectedBranch;\r\n    }\r\n    \r\n    return filters;\r\n  }, [isSuperAdmin, isTenant, isOrganisationUser, selectedTenant, selectedOrganisation, selectedBranch]);\r\n\r\n  return {\r\n    isSuperAdmin,\r\n    isTenant,\r\n    isOrganisationUser,\r\n    isBranchUser,\r\n    selectedTenant,\r\n    selectedOrganisation,\r\n    selectedBranch,\r\n    tenantOptions,\r\n    organisationOptions,\r\n    branchOptions,\r\n    handleTenantChange,\r\n    handleOrganisationChange,\r\n    handleBranchChange,\r\n    tenantsLoading,\r\n    organisationsLoading,\r\n    branchesLoading,\r\n    getApiFilters,\r\n  };\r\n};\r\n\r\n","import { Form, Button, Typography, Row, Col } from \"antd\";\r\nimport { PlusOutlined, MinusCircleOutlined } from \"@ant-design/icons\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst AntdForm = (props) => {\r\n  const {\r\n    FormValue,\r\n    onSubmit,\r\n    onCancel,\r\n    formItems,\r\n    onChildCancel,\r\n    formColumns,\r\n    splitLabelAndField,\r\n    nested,\r\n    nestedInputs,\r\n    wrapperCol,\r\n    labelCol,\r\n    initialValues,\r\n    loading,\r\n    form,\r\n    onValuesChange,\r\n  } = props;\r\n  const columns = formColumns || 1;\r\n  \r\n  const handleCancel = () => {\r\n    // Support both old and new cancel handlers\r\n    if (onCancel) {\r\n      onCancel();\r\n    } else if (onChildCancel) {\r\n      onChildCancel(false);\r\n    }\r\n    form?.resetFields();\r\n  };\r\n  \r\n  const onFinish = (values) => {\r\n    // Support both old FormValue and new onSubmit\r\n    if (onSubmit) {\r\n      onSubmit(values);\r\n    } else if (FormValue) {\r\n      FormValue(values);\r\n    }\r\n    form?.resetFields();\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      form?.setFieldsValue(initialValues);\r\n    }\r\n  }, [initialValues, form]);\r\n  \r\n  return (\r\n    <div style={{ position: \"relative\", height: \"100%\" }}>\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundRepeat: \"no-repeat\",\r\n          backgroundPosition: \"center\",\r\n          backgroundSize: \"600px 600px\",\r\n          opacity: 0.1,\r\n          zIndex: 0,\r\n        }}\r\n      />\r\n      <Form\r\n        form={form}\r\n        onFinish={onFinish}\r\n        layout=\"vertical\"\r\n        onValuesChange={onValuesChange}\r\n      >\r\n        <Row gutter={[16, 16]}>\r\n          {formItems?.map((item, index) => (\r\n            <Col span={item.colSpan ? (item.colSpan * (24 / columns)) : (24 / columns)} key={index}>\r\n              {splitLabelAndField ? (\r\n                <div>\r\n                  <Typography.Text strong>\r\n                    {item.label}{\" \"}\r\n                    {item.rules?.some((rule) => rule.required) && (\r\n                      <Typography.Text type=\"danger\">*</Typography.Text>\r\n                    )}\r\n                  </Typography.Text>\r\n                  <Form.Item\r\n                    name={item.name}\r\n                    rules={item.rules}\r\n                    style={{ marginTop: \"8px\" }}\r\n                  >\r\n                    {item.component}\r\n                  </Form.Item>\r\n                </div>\r\n              ) : (\r\n                <Form.Item\r\n                  label={<Typography.Text strong>{item.label}</Typography.Text>}\r\n                  name={item.name}\r\n                  rules={item.rules}\r\n                  labelCol={{ span: labelCol }}\r\n                  wrapperCol={{ span: wrapperCol }}\r\n                >\r\n                  {item.component}\r\n                </Form.Item>\r\n              )}\r\n            </Col>\r\n          ))}\r\n\r\n          {nested && (\r\n            <Form.List name=\"nestedItems\">\r\n              {(fields, { add, remove }) => (\r\n                <>\r\n                  {fields.map(({ key, name, fieldKey, ...restField }) => (\r\n                    <Row gutter={[16, 16]} align=\"middle\" key={key}>\r\n                      {nestedInputs.map((input, idx) => (\r\n                        <Col key={idx}>\r\n                          <Form.Item\r\n                            {...restField}\r\n                            name={[name, input.name]}\r\n                            fieldKey={[fieldKey, input.name]}\r\n                            rules={[\r\n                              {\r\n                                required: true,\r\n                                message: `Missing ${input.label}`,\r\n                              },\r\n                            ]}\r\n                            label={input.label}\r\n                          >\r\n                            {input.component}\r\n                          </Form.Item>\r\n                        </Col>\r\n                      ))}\r\n                      <Col>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Col>\r\n                    </Row>\r\n                  ))}\r\n                  <Row justify=\"center\">\r\n                    <Col>\r\n                      <Button\r\n                        type=\"primary\"\r\n                        onClick={() => add()}\r\n                        icon={<PlusOutlined />}\r\n                      >\r\n                        Add More Field\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </>\r\n              )}\r\n            </Form.List>\r\n          )}\r\n        </Row>\r\n\r\n        <Row justify=\"end\" gutter={[16, 16]} style={{padding: \"16px\"}}>\r\n          <Col>\r\n            <Button onClick={handleCancel}>Cancel</Button>\r\n          </Col>\r\n          <Col>\r\n            <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n              Submit\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AntdForm;\r\n","import React from 'react';\r\nimport {\r\n  Input,\r\n  InputNumber,\r\n  Select,\r\n  Switch,\r\n  DatePicker,\r\n  Checkbox,\r\n  Radio,\r\n} from 'antd';\r\nimport type { Rule } from 'antd/es/form';\r\nimport { CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { FieldMetadata } from '../hooks/useFieldMetadata';\r\n\r\nconst { TextArea } = Input;\r\n\r\n/**\r\n * Field type option for dropdown\r\n */\r\nexport interface FieldTypeOption {\r\n  label: string;\r\n  value: string;\r\n  category?: 'text' | 'number' | 'choice' | 'date' | 'other';\r\n}\r\n\r\n/**\r\n * Get field type options for dropdown (categorized)\r\n */\r\nexport const FIELD_TYPE_OPTIONS: FieldTypeOption[] = [\r\n  // Text inputs\r\n  { label: 'Text', value: 'text', category: 'text' },\r\n  { label: 'Text Area', value: 'textarea', category: 'text' },\r\n  { label: 'Email', value: 'email', category: 'text' },\r\n  { label: 'Phone', value: 'phone', category: 'text' },\r\n  { label: 'URL', value: 'url', category: 'text' },\r\n  { label: 'Password', value: 'password', category: 'text' },\r\n  \r\n  // Numbers\r\n  { label: 'Number (Integer)', value: 'number', category: 'number' },\r\n  { label: 'Decimal', value: 'decimal', category: 'number' },\r\n  \r\n  // Choices\r\n  { label: 'Boolean (Yes/No)', value: 'boolean', category: 'choice' },\r\n  { label: 'Checkbox', value: 'checkbox', category: 'choice' },\r\n  { label: 'Select (Dropdown)', value: 'select', category: 'choice' },\r\n  { label: 'Multi-Select', value: 'multiselect', category: 'choice' },\r\n  { label: 'Radio Buttons', value: 'radio', category: 'choice' },\r\n  \r\n  // Date/Time\r\n  { label: 'Date', value: 'date', category: 'date' },\r\n  { label: 'DateTime', value: 'datetime', category: 'date' },\r\n];\r\n\r\n/**\r\n * Get field type category\r\n */\r\nexport const getFieldTypeCategory = (fieldType: string): string => {\r\n  const option = FIELD_TYPE_OPTIONS.find(opt => opt.value === fieldType);\r\n  return option?.category || 'other';\r\n};\r\n\r\n/**\r\n * Build validation rules from field metadata\r\n */\r\nconst buildValidationRules = (metadata: FieldMetadata): Rule[] => {\r\n  const { label, is_required, validation_rules, field_type } = metadata;\r\n  const rules: Rule[] = [];\r\n\r\n  // Required validation\r\n  if (is_required) {\r\n    rules.push({\r\n      required: true,\r\n      message: `Please enter ${label.toLowerCase()}`,\r\n    });\r\n  }\r\n\r\n  // Email validation\r\n  if (field_type === 'email' || validation_rules?.email) {\r\n    rules.push({\r\n      type: 'email',\r\n      message: 'Please enter a valid email address',\r\n    });\r\n  }\r\n\r\n  // URL validation\r\n  if (field_type === 'url') {\r\n    rules.push({\r\n      type: 'url',\r\n      message: 'Please enter a valid URL',\r\n    });\r\n  }\r\n\r\n  // Min/Max validation for numbers\r\n  if (validation_rules?.min !== undefined) {\r\n    rules.push({\r\n      type: 'number',\r\n      min: validation_rules.min,\r\n      message: `Minimum value is ${validation_rules.min}`,\r\n    });\r\n  }\r\n\r\n  if (validation_rules?.max !== undefined) {\r\n    rules.push({\r\n      type: 'number',\r\n      max: validation_rules.max,\r\n      message: `Maximum value is ${validation_rules.max}`,\r\n    });\r\n  }\r\n\r\n  // Pattern validation\r\n  if (validation_rules?.pattern) {\r\n    rules.push({\r\n      pattern: new RegExp(validation_rules.pattern),\r\n      message: validation_rules.patternMessage || 'Invalid format',\r\n    });\r\n  }\r\n\r\n  return rules;\r\n};\r\n\r\n/**\r\n * Generate form component based on field type\r\n */\r\nconst generateComponent = (\r\n  metadata: FieldMetadata\r\n): { component: React.ReactNode; valuePropName?: string } => {\r\n  const { field_type, label, placeholder, validation_rules } = metadata;\r\n  const placeholderText = placeholder || `Enter ${label.toLowerCase()}`;\r\n\r\n  // Parse options if available\r\n  const options: string[] = Array.isArray(validation_rules?.options)\r\n    ? validation_rules.options\r\n    : [];\r\n\r\n  let component: React.ReactNode;\r\n  let valuePropName: string | undefined;\r\n\r\n  switch (field_type.toLowerCase()) {\r\n    // Text inputs\r\n    case 'text':\r\n    case 'string':\r\n      component = <Input placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'textarea':\r\n      component = <TextArea rows={4} placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'email':\r\n      component = <Input type=\"email\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'phone':\r\n    case 'tel':\r\n      component = <Input type=\"tel\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'url':\r\n      component = <Input type=\"url\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'password':\r\n      component = <Input.Password placeholder={placeholderText} />;\r\n      break;\r\n\r\n    // Numbers\r\n    case 'number':\r\n    case 'integer':\r\n      component = (\r\n        <InputNumber\r\n          placeholder={placeholderText}\r\n          style={{ width: '100%' }}\r\n          min={validation_rules?.min}\r\n          max={validation_rules?.max}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'decimal':\r\n    case 'float':\r\n      component = (\r\n        <InputNumber\r\n          placeholder={placeholderText}\r\n          style={{ width: '100%' }}\r\n          min={validation_rules?.min}\r\n          max={validation_rules?.max}\r\n          step={0.01}\r\n          precision={2}\r\n        />\r\n      );\r\n      break;\r\n\r\n    // Boolean/Choice\r\n    case 'boolean':\r\n    case 'switch':\r\n      component = (\r\n        <Switch checkedChildren=\"Yes\" unCheckedChildren=\"No\" defaultChecked={false} />\r\n      );\r\n      valuePropName = 'checked';\r\n      break;\r\n\r\n    case 'checkbox':\r\n      component = <Checkbox>{label}</Checkbox>;\r\n      valuePropName = 'checked';\r\n      break;\r\n\r\n    case 'select':\r\n    case 'dropdown':\r\n      component = (\r\n        <Select\r\n          placeholder={placeholderText}\r\n          allowClear\r\n          showSearch\r\n          optionFilterProp=\"children\"\r\n          options={options.map(opt => ({ label: opt, value: opt }))}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'multiselect':\r\n      component = (\r\n        <Select\r\n          mode=\"multiple\"\r\n          placeholder={placeholderText}\r\n          allowClear\r\n          showSearch\r\n          optionFilterProp=\"children\"\r\n          options={options.map(opt => ({ label: opt, value: opt }))}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'radio':\r\n      component = (\r\n        <Radio.Group>\r\n          {options.map((option) => (\r\n            <Radio key={option} value={option}>\r\n              {option}\r\n            </Radio>\r\n          ))}\r\n        </Radio.Group>\r\n      );\r\n      break;\r\n\r\n    // Date/Time\r\n    case 'date':\r\n      component = (\r\n        <DatePicker\r\n          style={{ width: '100%' }}\r\n          format=\"YYYY-MM-DD\"\r\n          placeholder={placeholderText}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'datetime':\r\n      component = (\r\n        <DatePicker\r\n          showTime\r\n          style={{ width: '100%' }}\r\n          format=\"YYYY-MM-DD HH:mm:ss\"\r\n          placeholder={placeholderText}\r\n        />\r\n      );\r\n      break;\r\n\r\n    // Default fallback\r\n    default:\r\n      component = <Input placeholder={placeholderText} />;\r\n  }\r\n\r\n  return { component, valuePropName };\r\n};\r\n\r\n/**\r\n * Generate an Ant Design form item configuration from field metadata\r\n * @param metadata Field metadata configuration\r\n * @returns CrudFormItem for use in forms\r\n */\r\nexport const generateFormItemFromMetadata = (\r\n  metadata: FieldMetadata\r\n): CrudFormItem => {\r\n  const { field_name, label } = metadata;\r\n\r\n  // Build validation rules\r\n  const rules = buildValidationRules(metadata);\r\n\r\n  // Generate component\r\n  const { component, valuePropName } = generateComponent(metadata);\r\n\r\n  // Build form item\r\n  const formItem: CrudFormItem = {\r\n    label,\r\n    name: field_name,\r\n    rules,\r\n    component,\r\n  };\r\n\r\n  // Add valuePropName if needed (for checkbox, switch, etc.)\r\n  if (valuePropName) {\r\n    formItem.valuePropName = valuePropName;\r\n  }\r\n\r\n  return formItem;\r\n};\r\n\r\n/**\r\n * Validate field metadata before saving\r\n * @param metadata Partial field metadata to validate\r\n * @returns Array of error messages (empty if valid)\r\n */\r\nexport const validateFieldMetadata = (metadata: Partial<FieldMetadata>): string[] => {\r\n  const errors: string[] = [];\r\n\r\n  // Required fields\r\n  if (!metadata.entity_name?.trim()) {\r\n    errors.push('Entity name is required');\r\n  }\r\n\r\n  if (!metadata.field_name?.trim()) {\r\n    errors.push('Field name is required');\r\n  } else {\r\n    // Field name format validation\r\n    if (!/^[a-z_][a-z0-9_]*$/i.test(metadata.field_name)) {\r\n      errors.push(\r\n        'Field name must start with a letter and contain only letters, numbers, and underscores'\r\n      );\r\n    }\r\n  }\r\n\r\n  if (!metadata.field_type?.trim()) {\r\n    errors.push('Field type is required');\r\n  }\r\n\r\n  if (!metadata.label?.trim()) {\r\n    errors.push('Label is required');\r\n  }\r\n\r\n  // Validate options for select/radio/multiselect fields\r\n  const needsOptions = ['select', 'multiselect', 'radio'].includes(\r\n    metadata.field_type || ''\r\n  );\r\n  \r\n  if (needsOptions) {\r\n    const options = metadata.validation_rules?.options;\r\n    if (!options || !Array.isArray(options) || options.length === 0) {\r\n      errors.push(`${metadata.field_type} fields must have at least one option`);\r\n    }\r\n  }\r\n\r\n  // Validate min/max for number fields\r\n  const isNumberField = ['number', 'integer', 'decimal', 'float'].includes(\r\n    metadata.field_type || ''\r\n  );\r\n  \r\n  if (isNumberField && metadata.validation_rules) {\r\n    const { min, max } = metadata.validation_rules;\r\n    if (min !== undefined && max !== undefined && min > max) {\r\n      errors.push('Minimum value cannot be greater than maximum value');\r\n    }\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\n/**\r\n * Check if a field type requires options\r\n */\r\nexport const fieldTypeNeedsOptions = (fieldType: string): boolean => {\r\n  return ['select', 'multiselect', 'radio'].includes(fieldType);\r\n};\r\n\r\n/**\r\n * Check if a field type is numeric\r\n */\r\nexport const isNumericFieldType = (fieldType: string): boolean => {\r\n  return ['number', 'integer', 'decimal', 'float'].includes(fieldType);\r\n};\r\n\r\n/**\r\n * Get default placeholder for a field type\r\n */\r\nexport const getDefaultPlaceholder = (fieldType: string, label: string): string => {\r\n  const lowerLabel = label.toLowerCase();\r\n  \r\n  switch (fieldType) {\r\n    case 'select':\r\n    case 'dropdown':\r\n      return `Select ${lowerLabel}`;\r\n    case 'multiselect':\r\n      return `Select multiple ${lowerLabel}`;\r\n    case 'date':\r\n    case 'datetime':\r\n      return `Select ${lowerLabel}`;\r\n    case 'email':\r\n      return 'Enter email address';\r\n    case 'phone':\r\n    case 'tel':\r\n      return 'Enter phone number';\r\n    case 'url':\r\n      return 'Enter URL';\r\n    case 'password':\r\n      return 'Enter password';\r\n    default:\r\n      return `Enter ${lowerLabel}`;\r\n  }\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport {\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Switch,\r\n  InputNumber,\r\n  Divider,\r\n  Row,\r\n  Col,\r\n} from 'antd';\r\nimport { FIELD_TYPE_OPTIONS } from '../../helpers/fieldMetadataUtils';\r\nimport { FieldFormProps } from './types';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst FieldForm: React.FC<FieldFormProps> = React.memo(({\r\n  form,\r\n  editingField,\r\n  optionsText,\r\n  onOptionsChange,\r\n}) => {\r\n  const selectedFieldType = Form.useWatch('field_type', form);\r\n  \r\n  const needsOptions = useMemo(\r\n    () => ['select', 'multiselect', 'radio'].includes(selectedFieldType),\r\n    [selectedFieldType]\r\n  );\r\n  \r\n  const needsNumberValidation = useMemo(\r\n    () => ['number', 'integer', 'decimal'].includes(selectedFieldType),\r\n    [selectedFieldType]\r\n  );\r\n\r\n  return (\r\n    <Form\r\n      form={form}\r\n      layout=\"vertical\"\r\n      initialValues={{\r\n        is_required: false,\r\n        is_active: true,\r\n        is_global: false,\r\n        display_order: 0,\r\n      }}\r\n    >\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Entity Name\"\r\n            name=\"entity_name\"\r\n            rules={[{ required: true, message: 'Please enter entity name' }]}\r\n          >\r\n            <Input disabled={!!editingField} placeholder=\"e.g., products, customers\" />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Field Name\"\r\n            name=\"field_name\"\r\n            rules={[\r\n              { required: true, message: 'Please enter field name' },\r\n              {\r\n                pattern: /^[a-z_][a-z0-9_]*$/i,\r\n                message: 'Must start with a letter, only letters, numbers, underscores',\r\n              },\r\n            ]}\r\n            extra=\"Use lowercase with underscores (e.g., custom_field_1)\"\r\n          >\r\n            <Input placeholder=\"e.g., custom_field_1\" disabled={!!editingField} />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Field Type\"\r\n            name=\"field_type\"\r\n            rules={[{ required: true, message: 'Please select field type' }]}\r\n          >\r\n            <Select placeholder=\"Select field type\" options={FIELD_TYPE_OPTIONS} />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Label\"\r\n            name=\"label\"\r\n            rules={[{ required: true, message: 'Please enter label' }]}\r\n          >\r\n            <Input placeholder=\"Field label shown to users\" />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Form.Item label=\"Placeholder\" name=\"placeholder\">\r\n        <Input placeholder=\"Placeholder text (optional)\" />\r\n      </Form.Item>\r\n\r\n      {needsOptions && (\r\n        <>\r\n          <Divider>Options Configuration</Divider>\r\n          <Form.Item\r\n            label=\"Options (one per line)\"\r\n            extra=\"Enter each option on a new line\"\r\n            required\r\n          >\r\n            <TextArea\r\n              rows={4}\r\n              value={optionsText}\r\n              onChange={(e) => onOptionsChange(e.target.value)}\r\n              placeholder=\"Option 1&#10;Option 2&#10;Option 3\"\r\n            />\r\n          </Form.Item>\r\n        </>\r\n      )}\r\n\r\n      {needsNumberValidation && (\r\n        <>\r\n          <Divider>Number Validation</Divider>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Min Value\" name=\"min\">\r\n                <InputNumber placeholder=\"Min\" style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Max Value\" name=\"max\">\r\n                <InputNumber placeholder=\"Max\" style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n\r\n      <Divider>Display Settings</Divider>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Display Order\"\r\n            name=\"display_order\"\r\n            extra=\"Lower numbers appear first\"\r\n          >\r\n            <InputNumber min={0} style={{ width: '100%' }} />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item label=\"Business Type\" name=\"business_type\">\r\n            <Input placeholder=\"Business type (optional)\" />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={8}>\r\n          <Form.Item\r\n            label=\"Required Field\"\r\n            name=\"is_required\"\r\n            valuePropName=\"checked\"\r\n          >\r\n            <Switch />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Form.Item label=\"Active\" name=\"is_active\" valuePropName=\"checked\">\r\n            <Switch defaultChecked />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Form.Item label=\"Global Field\" name=\"is_global\" valuePropName=\"checked\">\r\n            <Switch />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n});\r\n\r\nFieldForm.displayName = 'FieldForm';\r\n\r\nexport default FieldForm;\r\n\r\n","import React, { useMemo } from 'react';\r\nimport { Button, Table, Space, Popconfirm, Tag } from 'antd';\r\nimport type { ColumnsType } from 'antd/es/table';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { FieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport { FIELD_TYPE_OPTIONS } from '../../helpers/fieldMetadataUtils';\r\nimport { FieldsTableProps } from './types';\r\n\r\nconst FieldsTable: React.FC<FieldsTableProps> = ({\r\n  data,\r\n  loading,\r\n  deleteLoading,\r\n  onEdit,\r\n  onDelete,\r\n}) => {\r\n  const columns: ColumnsType<FieldMetadata> = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Label',\r\n        dataIndex: 'label',\r\n        key: 'label',\r\n        sorter: (a, b) => a.label.localeCompare(b.label),\r\n      },\r\n      {\r\n        title: 'Field Name',\r\n        dataIndex: 'field_name',\r\n        key: 'field_name',\r\n        render: (text: string) => <Tag color=\"blue\">{text}</Tag>,\r\n      },\r\n      {\r\n        title: 'Type',\r\n        dataIndex: 'field_type',\r\n        key: 'field_type',\r\n        render: (text: string) => <Tag color=\"cyan\">{text}</Tag>,\r\n        filters: FIELD_TYPE_OPTIONS.map(opt => ({ text: opt.label, value: opt.value })),\r\n        onFilter: (value, record) => record.field_type === value,\r\n      },\r\n      {\r\n        title: 'Required',\r\n        dataIndex: 'is_required',\r\n        key: 'is_required',\r\n        render: (value: boolean) => (\r\n          <Tag color={value ? 'red' : 'default'}>{value ? 'Yes' : 'No'}</Tag>\r\n        ),\r\n        filters: [\r\n          { text: 'Required', value: true },\r\n          { text: 'Optional', value: false },\r\n        ],\r\n        onFilter: (value, record) => record.is_required === value,\r\n      },\r\n      {\r\n        title: 'Active',\r\n        dataIndex: 'is_active',\r\n        key: 'is_active',\r\n        render: (value: boolean) => (\r\n          <Tag color={value ? 'green' : 'default'}>{value ? 'Yes' : 'No'}</Tag>\r\n        ),\r\n        filters: [\r\n          { text: 'Active', value: true },\r\n          { text: 'Inactive', value: false },\r\n        ],\r\n        onFilter: (value, record) => record.is_active === value,\r\n      },\r\n      {\r\n        title: 'Order',\r\n        dataIndex: 'display_order',\r\n        key: 'display_order',\r\n        sorter: (a, b) => a.display_order - b.display_order,\r\n        width: 80,\r\n      },\r\n      {\r\n        title: 'Actions',\r\n        key: 'actions',\r\n        width: 120,\r\n        fixed: 'right',\r\n        render: (_: any, record: FieldMetadata) => (\r\n          <Space>\r\n            <Button\r\n              type=\"link\"\r\n              size=\"small\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => onEdit(record)}\r\n            />\r\n            <Popconfirm\r\n              title=\"Delete this field?\"\r\n              description=\"This action cannot be undone.\"\r\n              onConfirm={() => onDelete(record._id)}\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              okButtonProps={{ danger: true }}\r\n            >\r\n              <Button\r\n                type=\"link\"\r\n                size=\"small\"\r\n                danger\r\n                icon={<DeleteOutlined />}\r\n                loading={deleteLoading}\r\n              />\r\n            </Popconfirm>\r\n          </Space>\r\n        ),\r\n      },\r\n    ],\r\n    [onEdit, onDelete, deleteLoading]\r\n  );\r\n\r\n  return (\r\n    <Table\r\n      dataSource={data}\r\n      columns={columns}\r\n      loading={loading}\r\n      rowKey=\"_id\"\r\n      pagination={{ pageSize: 10, showSizeChanger: true }}\r\n      size=\"middle\"\r\n      scroll={{ x: 900 }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(FieldsTable);\r\n\r\n","import { useCallback, useEffect, useMemo } from 'react';\r\nimport { apiSlice } from '../../../services/redux/api/apiSlice';\r\nimport { FieldMetadata } from '../../../hooks/useFieldMetadata';\r\nimport { validateFieldMetadata } from '../../../helpers/fieldMetadataUtils';\r\nimport { showToast } from '../../../helpers/Common_functions';\r\nimport {\r\n  UseFieldMetadataOperationsProps,\r\n  UseFieldMetadataOperationsReturn,\r\n} from '../types';\r\n\r\nexport const useFieldMetadataOperations = ({\r\n  entityName,\r\n  businessType,\r\n  tenantId,\r\n  organisationId,\r\n  onFieldsUpdated,\r\n  enabled = true, // Add enabled parameter to control when query should run\r\n}: UseFieldMetadataOperationsProps & { enabled?: boolean }): UseFieldMetadataOperationsReturn => {\r\n  // Prepare query params - exclude undefined values for proper caching\r\n  const queryParams = useMemo(() => {\r\n    const params: any = {\r\n      entity_name: entityName,\r\n      // Omit is_active to get all fields (active and inactive)\r\n      // Only include it if we want to filter by active status\r\n    };\r\n    return params;\r\n  }, [entityName]);\r\n\r\n  // Use RTK Query for fetching fields - skip query when not enabled\r\n  const { data: fieldsResponse, isLoading: fieldsLoading, refetch: refetchFields } = apiSlice.useGetFieldMetadataQuery(\r\n    queryParams,\r\n    {\r\n      skip: !enabled, // Skip query when modal is not visible\r\n    }\r\n  );\r\n\r\n  // Use RTK Query mutations\r\n  const [createField, { isLoading: createLoading }] = apiSlice.useCreateFieldMetadataMutation();\r\n  const [updateField, { isLoading: updateLoading }] = apiSlice.useUpdateFieldMetadataMutation();\r\n  const [deleteField, { isLoading: deleteLoading }] = apiSlice.useDeleteFieldMetadataMutation();\r\n\r\n  // Fetch field metadata (refetch function)\r\n  const fetchFields = useCallback(() => {\r\n    refetchFields();\r\n  }, [refetchFields]);\r\n\r\n  // Success handling is done in the mutation handlers below\r\n  // RTK Query provides isLoading states for each mutation\r\n\r\n  // Submit field (create or update)\r\n  const handleSubmitField = useCallback(\r\n    async (values: any, optionsText: string, editingField: FieldMetadata | null) => {\r\n      // Build validation rules\r\n      const validationRules: any = {};\r\n      const fieldType = values.field_type;\r\n\r\n      // Handle options for select/radio fields\r\n      if (['select', 'multiselect', 'radio'].includes(fieldType)) {\r\n        const options = optionsText\r\n          .split('\\n')\r\n          .map((opt) => opt.trim())\r\n          .filter((opt) => opt.length > 0);\r\n\r\n        if (options.length === 0) {\r\n          showToast('error', 'Please provide at least one option');\r\n          return;\r\n        }\r\n        validationRules.options = options;\r\n      }\r\n\r\n      // Add number validation rules\r\n      if (values.min !== undefined && values.min !== null) {\r\n        validationRules.min = values.min;\r\n      }\r\n      if (values.max !== undefined && values.max !== null) {\r\n        validationRules.max = values.max;\r\n      }\r\n\r\n      // Build payload\r\n      const payload: any = {\r\n        entity_name: values.entity_name,\r\n        field_name: values.field_name,\r\n        business_type: values.business_type || businessType,\r\n        field_type: values.field_type,\r\n        label: values.label,\r\n        placeholder: values.placeholder,\r\n        is_required: values.is_required || false,\r\n        validation_rules: validationRules,\r\n        display_order: values.display_order || 0,\r\n        is_active: values.is_active !== false,\r\n        is_global: values.is_global || false,\r\n      };\r\n\r\n      if (tenantId) payload.tenant_id = tenantId;\r\n      if (organisationId) payload.organisation_id = organisationId;\r\n\r\n      // Validate before submission\r\n      const errors = validateFieldMetadata(payload);\r\n      if (errors.length > 0) {\r\n        showToast('error', errors[0]); // Show first error\r\n        return;\r\n      }\r\n\r\n      // Submit using RTK Query mutations\r\n      try {\r\n        if (editingField) {\r\n          await updateField({ id: editingField._id, ...payload }).unwrap();\r\n          showToast('success', 'Field updated successfully');\r\n        } else {\r\n          await createField(payload).unwrap();\r\n          showToast('success', 'Field created successfully');\r\n        }\r\n        \r\n        // Refetch fields after successful create/update\r\n        refetchFields();\r\n        if (onFieldsUpdated) {\r\n          onFieldsUpdated();\r\n        }\r\n      } catch (error: any) {\r\n        showToast('error', error?.data?.message || `Failed to ${editingField ? 'update' : 'create'} field`);\r\n      }\r\n    },\r\n    [businessType, tenantId, organisationId, createField, updateField, refetchFields, onFieldsUpdated]\r\n  );\r\n\r\n  // Delete field\r\n  const handleDeleteField = useCallback(\r\n    async (fieldId: string) => {\r\n      try {\r\n        await deleteField(fieldId).unwrap();\r\n        showToast('success', 'Field deleted successfully');\r\n        // Refetch fields after successful delete\r\n        refetchFields();\r\n        if (onFieldsUpdated) {\r\n          onFieldsUpdated();\r\n        }\r\n      } catch (error: any) {\r\n        showToast('error', error?.data?.message || 'Failed to delete field');\r\n      }\r\n    },\r\n    [deleteField, refetchFields, onFieldsUpdated]\r\n  );\r\n\r\n  // Memoized fields data\r\n  const fieldsData = useMemo(() => {\r\n    const data = (fieldsResponse as any)?.result || fieldsResponse || [];\r\n    return Array.isArray(data) ? data : [];\r\n  }, [fieldsResponse]);\r\n\r\n  return {\r\n    fieldsData,\r\n    fieldsLoading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    fetchFields,\r\n    handleSubmitField,\r\n    handleDeleteField,\r\n  };\r\n};\r\n\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { Modal, Form, Button, Space, Alert } from 'antd';\r\nimport { PlusOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport { FieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport FieldForm from './FieldForm';\r\nimport FieldsTable from './FieldsTable';\r\nimport { useFieldMetadataOperations } from './hooks/useFieldMetadataOperations';\r\nimport { FieldMetadataManagerProps } from './types';\r\n\r\nconst FieldMetadataManager: React.FC<FieldMetadataManagerProps> = ({\r\n  entityName,\r\n  businessType = '',\r\n  tenantId,\r\n  organisationId,\r\n  onFieldsUpdated,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [fieldModalVisible, setFieldModalVisible] = useState(false);\r\n  const [editingField, setEditingField] = useState<FieldMetadata | null>(null);\r\n  const [optionsText, setOptionsText] = useState('');\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  // Use custom hook for operations - only fetch when modal is visible\r\n  const {\r\n    fieldsData,\r\n    fieldsLoading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    fetchFields,\r\n    handleSubmitField,\r\n    handleDeleteField,\r\n  } = useFieldMetadataOperations({\r\n    entityName,\r\n    businessType,\r\n    tenantId,\r\n    organisationId,\r\n    onFieldsUpdated,\r\n    enabled: modalVisible, // Only fetch when modal is visible\r\n  });\r\n\r\n  const handleOpenFieldModal = useCallback(\r\n    (field?: FieldMetadata) => {\r\n      if (field) {\r\n        setEditingField(field);\r\n        const options = field.validation_rules?.options || [];\r\n        setOptionsText(options.join('\\n'));\r\n        form.setFieldsValue({\r\n          ...field,\r\n          min: field.validation_rules?.min,\r\n          max: field.validation_rules?.max,\r\n        });\r\n      } else {\r\n        setEditingField(null);\r\n        setOptionsText('');\r\n        form.resetFields();\r\n        form.setFieldsValue({\r\n          entity_name: entityName,\r\n          business_type: businessType,\r\n          is_required: false,\r\n          is_active: true,\r\n          is_global: false,\r\n          display_order: (fieldsData.length || 0) + 1,\r\n        });\r\n      }\r\n      setFieldModalVisible(true);\r\n    },\r\n    [form, entityName, businessType, fieldsData.length]\r\n  );\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      await handleSubmitField(values, optionsText, editingField);\r\n      \r\n      // Mark that changes were made\r\n      setHasChanges(true);\r\n      \r\n      // Close modal and reset form on success\r\n      setFieldModalVisible(false);\r\n      setEditingField(null);\r\n      form.resetFields();\r\n      setOptionsText('');\r\n    } catch (error) {\r\n      console.error('Form validation failed:', error);\r\n    }\r\n  }, [form, optionsText, editingField, handleSubmitField]);\r\n\r\n  const confirmLoading = createLoading || updateLoading;\r\n\r\n  // Handle modal close - notify parent if there were changes\r\n  const handleModalClose = useCallback(() => {\r\n    setModalVisible(false);\r\n    if (hasChanges && onFieldsUpdated) {\r\n      // Notify parent component to refresh its form items\r\n      onFieldsUpdated();\r\n      setHasChanges(false);\r\n    }\r\n  }, [hasChanges, onFieldsUpdated]);\r\n\r\n  // Wrap delete handler to track changes\r\n  const handleDelete = useCallback((fieldId: string) => {\r\n    handleDeleteField(fieldId);\r\n    setHasChanges(true);\r\n  }, [handleDeleteField]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        icon={<SettingOutlined />}\r\n        onClick={() => setModalVisible(true)}\r\n        type=\"default\"\r\n      >\r\n        Manage Fields\r\n      </Button>\r\n\r\n      {/* Fields List Modal */}\r\n      <Modal\r\n        title={`Manage Fields - ${entityName}`}\r\n        open={modalVisible}\r\n        onCancel={handleModalClose}\r\n        width={1000}\r\n        footer={[\r\n          <Button key=\"close\" onClick={handleModalClose}>\r\n            Close\r\n          </Button>,\r\n        ]}\r\n        destroyOnClose\r\n      >\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\r\n          <Alert\r\n            message=\"Dynamic Fields\"\r\n            description=\"Add custom fields to this entity. These fields will be automatically added to the form.\"\r\n            type=\"info\"\r\n            showIcon\r\n          />\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => handleOpenFieldModal()}\r\n            >\r\n              Add New Field\r\n            </Button>\r\n          </div>\r\n\r\n          <FieldsTable\r\n            data={fieldsData}\r\n            loading={fieldsLoading}\r\n            deleteLoading={deleteLoading}\r\n            onEdit={handleOpenFieldModal}\r\n            onDelete={handleDelete}\r\n          />\r\n        </Space>\r\n      </Modal>\r\n\r\n      {/* Field Edit/Create Modal */}\r\n      <Modal\r\n        title={editingField ? 'Edit Field' : 'Add New Field'}\r\n        open={fieldModalVisible}\r\n        onOk={handleSubmit}\r\n        onCancel={() => {\r\n          setFieldModalVisible(false);\r\n          setEditingField(null);\r\n          form.resetFields();\r\n          setOptionsText('');\r\n        }}\r\n        width={700}\r\n        confirmLoading={confirmLoading}\r\n        destroyOnClose\r\n      >\r\n        <FieldForm\r\n          form={form}\r\n          editingField={editingField}\r\n          optionsText={optionsText}\r\n          onOptionsChange={setOptionsText}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(FieldMetadataManager);\r\n\r\n","import React, { useMemo, useCallback, useEffect, useRef } from 'react';\r\nimport {\r\n  Button,\r\n  Row,\r\n  Input,\r\n  Tooltip,\r\n  Select,\r\n  DatePicker,\r\n  Col,\r\n  Popconfirm,\r\n} from 'antd';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { useGenericCrud, CrudConfig } from '../../hooks/useGenericCrud';\r\nimport { BaseEntity } from '../../types/entities';\r\nimport GlobalDrawer from '../antd/GlobalDrawer';\r\nimport AntdForm from '../antd/form/form';\r\nimport GlobalTable from '../antd/GlobalTable';\r\nimport { useSuperAdminFilters } from '../../hooks/useSuperAdminFilters';\r\nimport { useFieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport FieldMetadataManager from '../FieldMetadataManager';\r\n\r\n// Filter and Button Config Types\r\nexport type FilterConfig = {\r\n  key: string;\r\n  label: string;\r\n  type: 'input' | 'select' | 'date';\r\n  options?: { label: string; value: any }[]; // for select\r\n  placeholder?: string;\r\n  width?: string | number;\r\n  disabled?: boolean;\r\n  onChange?: (value: any) => void;\r\n};\r\n\r\nexport type CustomButtonConfig = {\r\n  key: string;\r\n  label: string;\r\n  type?: 'primary' | 'default' | 'dashed' | 'link' | 'text';\r\n  onClick: () => void;\r\n  icon?: React.ReactNode;\r\n};\r\n\r\n// Add type definitions for columns and formItems\r\nexport interface CrudColumn {\r\n  title: string;\r\n  dataIndex?: any;\r\n  key: string;\r\n  render?: (value: any, record: any) => React.ReactNode;\r\n}\r\n\r\nexport interface CrudFormItem {\r\n  label: string;\r\n  name: string;\r\n  rules?: any[];\r\n  component: React.ReactNode;\r\n  valuePropName?: string;\r\n}\r\n\r\ninterface GenericCrudPageProps<T extends BaseEntity> {\r\n  config: Omit<CrudConfig<T>, 'columns' | 'formItems'> & {\r\n    columns: CrudColumn[];\r\n    formItems: CrudFormItem[];\r\n    metadataFieldName?: string; // Field name for metadata (default: 'meta_data_values', can be 'custom_data')\r\n    canCreate?: () => boolean; // Permission check for create action\r\n  };\r\n  filters?: FilterConfig[];\r\n  onFilterChange?: (values: Record<string, any>) => void;\r\n  customButtons?: CustomButtonConfig[];\r\n  onValuesChange?: (changed: any, all: any) => void;\r\n  enableSuperAdminFilters?: boolean; // Enable tenant/org/branch dropdowns for superadmin\r\n  enableDynamicFields?: boolean; // Enable dynamic field metadata in form\r\n  showDynamicColumnsInTable?: boolean; // Show dynamic metadata columns in table (default: false for static CRUDs)\r\n  entityName?: string; // Entity name for dynamic fields (e.g., 'products', 'customers')\r\n}\r\n\r\n// Extract actions column to a helper\r\nfunction getActionsColumn(\r\n  title: string, \r\n  handleEdit: (record: any) => void, \r\n  handleDelete: (record: any) => void,\r\n  deleteLoading: boolean = false,\r\n  canEdit?: (record: any) => boolean,\r\n  canDelete?: (record: any) => boolean\r\n) {\r\n  return {\r\n    title: 'Actions',\r\n    key: 'actions',\r\n    render: (_: any, record: object) => {\r\n      const allowEdit = canEdit ? canEdit(record) : true;\r\n      const allowDelete = canDelete ? canDelete(record) : true;\r\n      \r\n      return (\r\n        <div style={{ \r\n          display: 'flex', \r\n          gap: '16px', \r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }}>\r\n          <Tooltip title={allowEdit ? `Edit ${title}` : 'No permission to edit'}>\r\n            <EditOutlined\r\n              style={{ \r\n                cursor: allowEdit ? 'pointer' : 'not-allowed', \r\n                color: allowEdit ? '#1890ff' : '#d9d9d9',\r\n                opacity: allowEdit ? 1 : 0.5,\r\n                fontSize: '16px',\r\n                padding: '4px'\r\n              }}\r\n              onClick={() => allowEdit && handleEdit(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title={allowDelete ? `Delete ${title}` : 'No permission to delete'}>\r\n            <Popconfirm\r\n              title={`Delete ${title}`}\r\n              description=\"Are you sure you want to delete this item?\"\r\n              onConfirm={() => handleDelete(record)}\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              disabled={deleteLoading || !allowDelete}\r\n            >\r\n              <DeleteOutlined\r\n                style={{ \r\n                  cursor: (deleteLoading || !allowDelete) ? 'not-allowed' : 'pointer', \r\n                  color: (deleteLoading || !allowDelete) ? '#d9d9d9' : '#ff4d4f',\r\n                  opacity: (deleteLoading || !allowDelete) ? 0.5 : 1,\r\n                  fontSize: '16px',\r\n                  padding: '4px'\r\n                }}\r\n              />\r\n            </Popconfirm>\r\n          </Tooltip>\r\n        </div>\r\n      );\r\n    },\r\n  };\r\n}\r\n\r\nconst GenericCrudPageComponent = <T extends BaseEntity>({\r\n  config,\r\n  filters = [],\r\n  onFilterChange,\r\n  customButtons = [],\r\n  onValuesChange,\r\n  enableSuperAdminFilters = true, // Enabled by default\r\n  enableDynamicFields = false,\r\n  showDynamicColumnsInTable = false, // Disabled by default for static CRUDs\r\n  entityName,\r\n}: GenericCrudPageProps<T>) => {\r\n  // Simple shallow equality to prevent redundant state updates\r\n  const shallowEqual = (a: Record<string, any> = {}, b: Record<string, any> = {}) => {\r\n    const aKeys = Object.keys(a);\r\n    const bKeys = Object.keys(b);\r\n    if (aKeys.length !== bKeys.length) return false;\r\n    for (const key of aKeys) {\r\n      if (a[key] !== b[key]) return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // SuperAdmin filters hook\r\n  const superAdminFilters = useSuperAdminFilters();\r\n  const isInitialMount = useRef(true);\r\n  const prevSuperAdminFilters = useRef<Record<string, any>>({});\r\n  \r\n  // Dynamic fields hook - fetch first to get field names\r\n  const {\r\n    formItems: mergedFormItems,\r\n    refresh: refreshMetadata,\r\n    dynamicFields,\r\n  } = useFieldMetadata({\r\n    entityName: entityName || config.title.toLowerCase(),\r\n    staticFormItems: config.formItems,\r\n    enabled: enableDynamicFields,\r\n  });\r\n\r\n  // Extract dynamic field names for payload separation - memoized\r\n  const dynamicFieldNames = useMemo(\r\n    () => enableDynamicFields && dynamicFields ? dynamicFields.map((field) => field.field_name) : [],\r\n    [dynamicFields, enableDynamicFields]\r\n  );\r\n\r\n  // Memoize config with dynamic field names\r\n  const enhancedConfig = useMemo(\r\n    () => ({\r\n      ...config,\r\n      dynamicFieldNames: dynamicFieldNames.length > 0 ? dynamicFieldNames : undefined,\r\n    }),\r\n    [config, dynamicFieldNames]\r\n  );\r\n  \r\n  const {\r\n    loading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    items,\r\n    pagination,\r\n    drawerVisible,\r\n    initialValues,\r\n    form,\r\n    handleEdit,\r\n    handleDelete,\r\n    handleDrawerOpen,\r\n    resetForm,\r\n    handleSubmit,\r\n    handlePaginationChange,\r\n    columns,\r\n    formItems: staticFormItems,\r\n    formColumns = 2,\r\n    drawerWidth,\r\n    filterValues,\r\n    setFilterValues,\r\n  } = useGenericCrud(enhancedConfig);\r\n\r\n  // Use merged form items if dynamic fields are enabled\r\n  const formItems = enableDynamicFields ? mergedFormItems : staticFormItems;\r\n\r\n  // Generate dynamic columns from field metadata if enabled\r\n  const enhancedColumns = useMemo(() => {\r\n    // Only add dynamic columns to table if explicitly enabled\r\n    if (!showDynamicColumnsInTable || !enableDynamicFields || !dynamicFields || dynamicFields.length === 0) {\r\n      return columns;\r\n    }\r\n\r\n    // Import the column generation utility\r\n    const { generateColumnsFromMetadata } = require('../../helpers/columnUtils');\r\n    \r\n    // For normal forms (like Products), combine config.columns with dynamic fields\r\n    // For pure dynamic forms (like DynamicEntity), show only dynamic fields\r\n    const isPureDynamicForm = columns.length <= 3 && \r\n      columns.every((col: any) => ['_id', 'createdAt', 'updatedAt'].includes(col.key));\r\n    \r\n    if (isPureDynamicForm) {\r\n      // Pure dynamic form - show all dynamic fields only\r\n      const allFieldNames = dynamicFields.map(field => field.field_name);\r\n      return generateColumnsFromMetadata(dynamicFields, allFieldNames);\r\n    } else {\r\n      // Normal form - combine existing columns with dynamic fields\r\n      const dynamicFieldNames = dynamicFields.map(field => field.field_name);\r\n      const dynamicColumns = generateColumnsFromMetadata(dynamicFields, dynamicFieldNames);\r\n      \r\n      // Combine existing columns with dynamic columns\r\n      const existingKeys = columns.map((col: any) => col.key);\r\n      const newDynamicColumns = dynamicColumns.filter((col: any) => !existingKeys.includes(col.key));\r\n      \r\n      return [...columns, ...newDynamicColumns];\r\n    }\r\n  }, [columns, showDynamicColumnsInTable, enableDynamicFields, dynamicFields]);\r\n\r\n  // Memoize superadmin filters to prevent unnecessary re-renders\r\n  const superAdminApiFilters = useMemo(() => {\r\n    if (!enableSuperAdminFilters) return {};\r\n    return superAdminFilters.getApiFilters();\r\n  }, [\r\n    enableSuperAdminFilters,\r\n    superAdminFilters.isSuperAdmin,\r\n    superAdminFilters.isTenant,\r\n    superAdminFilters.isOrganisationUser,\r\n    superAdminFilters.selectedTenant,\r\n    superAdminFilters.selectedOrganisation,\r\n    superAdminFilters.selectedBranch,\r\n  ]);\r\n\r\n  const handleFilterChange = useCallback((key: string, value: any) => {\r\n    // Get current filters and update with new value\r\n    const newValues = { ...filterValues, [key]: value };\r\n    // Include superadmin filters if enabled\r\n    const allFilters = enableSuperAdminFilters \r\n      ? { ...newValues, ...superAdminApiFilters }\r\n      : newValues;\r\n    setFilterValues(allFilters);\r\n    if (onFilterChange) onFilterChange(allFilters);\r\n  }, [filterValues, setFilterValues, onFilterChange, enableSuperAdminFilters, superAdminApiFilters]);\r\n\r\n  // Apply superadmin filters whenever they change (without causing loops)\r\n  useEffect(() => {\r\n    if (isInitialMount.current) {\r\n      isInitialMount.current = false;\r\n      prevSuperAdminFilters.current = superAdminApiFilters;\r\n      return;\r\n    }\r\n\r\n    if (!enableSuperAdminFilters) return;\r\n\r\n    // Start from current filters\r\n    const nextFilters: Record<string, any> = { ...filterValues };\r\n    let changed = false;\r\n\r\n    // Remove any previously applied superadmin keys that are no longer present\r\n    Object.keys(prevSuperAdminFilters.current).forEach((key) => {\r\n      if (!(key in superAdminApiFilters) && key in nextFilters) {\r\n        delete nextFilters[key];\r\n        changed = true;\r\n      }\r\n    });\r\n\r\n    // Add/update current superadmin filters\r\n    Object.entries(superAdminApiFilters).forEach(([key, value]) => {\r\n      if (nextFilters[key] !== value) {\r\n        nextFilters[key] = value as any;\r\n        changed = true;\r\n      }\r\n    });\r\n\r\n    prevSuperAdminFilters.current = superAdminApiFilters;\r\n\r\n    if (changed && !shallowEqual(filterValues, nextFilters)) {\r\n      setFilterValues(nextFilters);\r\n    }\r\n  }, [superAdminApiFilters, filterValues, setFilterValues, enableSuperAdminFilters]);\r\n\r\n  const tableColumns = useMemo(() => [\r\n    ...enhancedColumns,\r\n    getActionsColumn(config.title, handleEdit, handleDelete, deleteLoading, config.canEdit, config.canDelete)\r\n  ], [enhancedColumns, config.title, handleEdit, handleDelete, deleteLoading, config.canEdit, config.canDelete]);\r\n\r\n  return (\r\n    <div>\r\n      <Row\r\n        justify=\"end\"\r\n        align=\"bottom\"\r\n        gutter={[16, 16]}\r\n        style={{ marginBottom: 16 }}\r\n      >\r\n        {/* Title aligned left */}\r\n        <Col flex=\"auto\">\r\n          <h1 style={{ margin: 0 }}>{config.title}</h1>\r\n        </Col>\r\n\r\n        {/* Filters + Actions aligned right and bottom */}\r\n        <Col>\r\n          <Row gutter={[12, 12]} align=\"bottom\" justify=\"end\" wrap>\r\n            {/* SuperAdmin Filters */}\r\n            {enableSuperAdminFilters && superAdminFilters.isSuperAdmin && (\r\n              <Col>\r\n                <Select\r\n                  placeholder=\"Select Tenant\"\r\n                  value={superAdminFilters.selectedTenant}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleTenantChange(value);\r\n                    handleFilterChange('tenant_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.tenantsLoading}\r\n                  disabled={createLoading || updateLoading || deleteLoading}\r\n                >\r\n                  <Select.Option value=\"all\">All Tenants</Select.Option>\r\n                  {superAdminFilters.tenantOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n            \r\n            {enableSuperAdminFilters && (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) && !superAdminFilters.isOrganisationUser && !superAdminFilters.isBranchUser && (\r\n              <Col>\r\n                <Select\r\n                  placeholder={\r\n                    superAdminFilters.isSuperAdmin && superAdminFilters.selectedTenant === 'all'\r\n                      ? 'Select tenant first'\r\n                      : 'Select Organisation'\r\n                  }\r\n                  value={superAdminFilters.selectedOrganisation}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleOrganisationChange(value);\r\n                    handleFilterChange('organisation_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.organisationsLoading}\r\n                  disabled={\r\n                    (superAdminFilters.isSuperAdmin && superAdminFilters.selectedTenant === 'all') ||\r\n                    createLoading ||\r\n                    updateLoading ||\r\n                    deleteLoading\r\n                  }\r\n                >\r\n                  <Select.Option value=\"all\">All Organisations</Select.Option>\r\n                  {superAdminFilters.organisationOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n            \r\n            {enableSuperAdminFilters && (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant || superAdminFilters.isOrganisationUser) && !superAdminFilters.isBranchUser && (\r\n              <Col>\r\n                <Select\r\n                  placeholder={\r\n                    (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) &&\r\n                    superAdminFilters.selectedOrganisation === 'all'\r\n                      ? 'Select organisation first'\r\n                      : 'Select Branch'\r\n                  }\r\n                  value={superAdminFilters.selectedBranch}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleBranchChange(value);\r\n                    handleFilterChange('branch_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.branchesLoading}\r\n                  disabled={\r\n                    ((superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) &&\r\n                      superAdminFilters.selectedOrganisation === 'all') ||\r\n                    createLoading ||\r\n                    updateLoading ||\r\n                    deleteLoading\r\n                  }\r\n                >\r\n                  <Select.Option value=\"all\">All Branches</Select.Option>\r\n                  {superAdminFilters.branchOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n\r\n            {/* Filters */}\r\n            {filters.map(filter => (\r\n              <Col key={filter.key}>\r\n                {filter.type === 'input' && (\r\n                  <Input\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={(filterValues[filter.key] as string) || ''}\r\n                    onChange={e =>\r\n                      handleFilterChange(filter.key, e.target.value)\r\n                    }\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={createLoading || updateLoading || deleteLoading}\r\n                  />\r\n                )}\r\n                {filter.type === 'select' && (\r\n                  <Select\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={filterValues[filter.key] as any}\r\n                    onChange={val => {\r\n                      handleFilterChange(filter.key, val);\r\n                      if (filter.onChange) filter.onChange(val);\r\n                    }}\r\n                    allowClear\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={filter.disabled || createLoading || updateLoading || deleteLoading}\r\n                  >\r\n                    {filter.options?.map(opt => (\r\n                      <Select.Option key={opt.value} value={opt.value}>\r\n                        {opt.label}\r\n                      </Select.Option>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                {filter.type === 'date' && (\r\n                  <DatePicker\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={filterValues[filter.key] as any}\r\n                    onChange={date => handleFilterChange(filter.key, date)}\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={createLoading || updateLoading || deleteLoading}\r\n                  />\r\n                )}\r\n              </Col>\r\n            ))}\r\n\r\n            {/* Search */}\r\n            <Col>\r\n              <Input\r\n                placeholder={`Search ${config.title}`}\r\n                value={(filterValues['searchString'] as string) || ''}\r\n                onChange={e => handleFilterChange('searchString', e.target.value)}\r\n                style={{ width: 200 }}\r\n                disabled={createLoading || updateLoading || deleteLoading}\r\n              />\r\n            </Col>\r\n\r\n            {/* Custom Buttons */}\r\n            {customButtons.map(btn => (\r\n              <Col key={btn.key}>\r\n                <Button\r\n                  type={btn.type || 'default'}\r\n                  onClick={btn.onClick}\r\n                  icon={btn.icon}\r\n                  disabled={createLoading || updateLoading || deleteLoading}\r\n                >\r\n                  {btn.label}\r\n                </Button>\r\n              </Col>\r\n            ))}\r\n\r\n            {/* Field Metadata Manager */}\r\n            {enableDynamicFields && (\r\n              <Col>\r\n                <FieldMetadataManager\r\n                  entityName={entityName || config.title.toLowerCase()}\r\n                  onFieldsUpdated={refreshMetadata}\r\n                />\r\n              </Col>\r\n            )}\r\n\r\n\r\n            {/* Add Button */}\r\n            {(() => {\r\n              const canCreateItem = config.canCreate ? config.canCreate() : true;\r\n              return canCreateItem ? (\r\n                <Col>\r\n                  <Tooltip title={!canCreateItem ? 'No permission to create' : ''}>\r\n                    <Button \r\n                      type=\"primary\" \r\n                      onClick={handleDrawerOpen}\r\n                      loading={createLoading}\r\n                      disabled={createLoading || !canCreateItem}\r\n                    >\r\n                      Add {config.title}\r\n                    </Button>\r\n                  </Tooltip>\r\n                </Col>\r\n              ) : null;\r\n            })()}\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n\r\n      <GlobalTable\r\n        columns={tableColumns}\r\n        data={items}\r\n        loading={loading || deleteLoading}\r\n        rowKeyField=\"_id\"\r\n        totalCount={(pagination as any)?.totalCount || pagination?.total || 0}\r\n        pageLimit={pagination?.pageSize || 10}\r\n        onPaginationChange={handlePaginationChange}\r\n      />\r\n\r\n      <GlobalDrawer\r\n        title={`${initialValues._id ? 'Edit' : 'Add'} ${config.title}`}\r\n        open={drawerVisible}\r\n        onClose={createLoading || updateLoading ? () => {} : resetForm}\r\n        width={drawerWidth}\r\n      >\r\n          <AntdForm\r\n          form={form}\r\n          formItems={formItems}\r\n          formColumns={formColumns}\r\n          initialValues={initialValues}\r\n          onSubmit={handleSubmit}\r\n          onCancel={resetForm}\r\n          onValuesChange={(changed: any, all: any) => {\r\n            // Bubble up to consumer\r\n            if (onValuesChange) {\r\n              // Pass form as third arg for advanced scenarios\r\n              (onValuesChange as any)(changed, all, form);\r\n            }\r\n          }}\r\n          loading={createLoading || updateLoading}\r\n        />\r\n      </GlobalDrawer>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Memoize the component to prevent unnecessary re-renders\r\nexport const GenericCrudPage = React.memo(GenericCrudPageComponent) as typeof GenericCrudPageComponent;\r\n","import { useCallback, useEffect, useMemo } from 'react';\r\nimport { apiSlice } from '../services/redux/api/apiSlice';\r\nimport { CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { generateFormItemFromMetadata } from '../helpers/fieldMetadataUtils';\r\n\r\nexport interface FieldMetadata {\r\n  _id: string;\r\n  entity_name: string;\r\n  field_name: string;\r\n  business_type: string;\r\n  field_type: string;\r\n  label: string;\r\n  placeholder?: string;\r\n  is_required: boolean;\r\n  validation_rules?: {\r\n    options?: string[];\r\n    min?: number;\r\n    max?: number;\r\n    pattern?: string;\r\n    patternMessage?: string;\r\n    email?: boolean;\r\n  };\r\n  display_order: number;\r\n  is_active: boolean;\r\n  is_global: boolean;\r\n  tenant_id?: string;\r\n  organisation_id?: string;\r\n  options?: string[]; // For select/radio fields (legacy support)\r\n}\r\n\r\ninterface UseFieldMetadataOptions {\r\n  entityName: string;\r\n  staticFormItems: CrudFormItem[];\r\n  enabled?: boolean;\r\n  businessType?: string;\r\n}\r\n\r\n/**\r\n * Custom hook to fetch and merge dynamic field metadata with static form items\r\n * @param options Configuration options\r\n * @returns Merged form items, loading state, and refresh function\r\n */\r\nexport const useFieldMetadata = ({\r\n  entityName,\r\n  staticFormItems,\r\n  enabled = true,\r\n  businessType,\r\n}: UseFieldMetadataOptions) => {\r\n  // Prepare query parameters\r\n  const queryParams = useMemo(() => {\r\n    const params: any = {\r\n      entity_name: entityName,\r\n      is_active: true, // Only fetch active fields\r\n    };\r\n\r\n    // Add business_type filter if provided\r\n    if (businessType) {\r\n      params.business_type = businessType;\r\n    }\r\n\r\n    return params;\r\n  }, [entityName, businessType]);\r\n\r\n  // Use RTK Query to fetch field metadata\r\n  const { data: metadataResponse, isLoading: loading, refetch: refetchFieldMetadata } = apiSlice.useGetFieldMetadataQuery(\r\n    queryParams,\r\n    { skip: !enabled }\r\n  );\r\n\r\n  /**\r\n   * Memoized dynamic fields - sorted and filtered\r\n   */\r\n  const dynamicFields = useMemo<FieldMetadata[]>(() => {\r\n    const fieldsData = (metadataResponse as any)?.result || metadataResponse || [];\r\n    const fields: FieldMetadata[] = Array.isArray(fieldsData) ? fieldsData : [];\r\n\r\n    // Filter active fields and sort by display_order\r\n    return fields\r\n      .filter((field) => field.is_active)\r\n      .sort((a, b) => a.display_order - b.display_order);\r\n  }, [metadataResponse]);\r\n\r\n  /**\r\n   * Convert dynamic fields to form items\r\n   */\r\n  const dynamicFormItems = useMemo<CrudFormItem[]>(() => {\r\n    return dynamicFields.map((field) => generateFormItemFromMetadata(field));\r\n  }, [dynamicFields]);\r\n\r\n  /**\r\n   * Merge static and dynamic form items\r\n   * Strategy: Static items first, then dynamic items (can be customized)\r\n   */\r\n  const mergedFormItems = useMemo<CrudFormItem[]>(() => {\r\n    // If no dynamic fields, return static items as-is\r\n    if (dynamicFormItems.length === 0) {\r\n      return staticFormItems;\r\n    }\r\n\r\n    // Merge: static items first, then dynamic items\r\n    // You can customize this logic based on your needs\r\n    return [...staticFormItems, ...dynamicFormItems];\r\n  }, [staticFormItems, dynamicFormItems]);\r\n\r\n  // RTK Query automatically fetches when enabled changes\r\n  // No manual useEffect needed\r\n\r\n  return {\r\n    /** Merged form items (static + dynamic) */\r\n    formItems: mergedFormItems,\r\n    \r\n    /** Loading state */\r\n    loading,\r\n    \r\n    /** Refresh/refetch function */\r\n    refresh: refetchFieldMetadata,\r\n    \r\n    /** Raw dynamic fields metadata */\r\n    dynamicFields,\r\n    \r\n    /** Dynamic form items only (without static) */\r\n    dynamicFormItems,\r\n    \r\n    /** Static form items only */\r\n    staticFormItems,\r\n  };\r\n};\r\n\r\n/**\r\n * Hook to fetch field metadata without merging with static items\r\n * Useful for standalone field metadata management\r\n */\r\nexport const useFieldMetadataOnly = (entityName: string, enabled = true) => {\r\n  // Use RTK Query to fetch field metadata\r\n  const { data: metadataResponse, isLoading: loading, refetch: refetchFieldMetadata } = apiSlice.useGetFieldMetadataQuery(\r\n    { entity_name: entityName },\r\n    { skip: !enabled }\r\n  );\r\n\r\n  const fields = useMemo<FieldMetadata[]>(() => {\r\n    const fieldsData = (metadataResponse as any)?.result || metadataResponse || [];\r\n    return Array.isArray(fieldsData) ? fieldsData : [];\r\n  }, [metadataResponse]);\r\n\r\n  return {\r\n    fields,\r\n    loading,\r\n    refresh: refetchFieldMetadata,\r\n  };\r\n};\r\n","import { useCallback, useState, useMemo, useRef, useEffect } from 'react';\r\nimport { Form } from 'antd';\r\nimport { getEntityHooks } from '../services/redux/api/apiSlice';\r\nimport { CrudColumn, CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { showToast } from '../helpers/Common_functions';\r\nimport { handleApiResponse } from '../components/common/handleApiResponse';\r\nimport { BaseEntity } from '../types/entities';\r\nimport dayjs from 'dayjs';\r\n\r\nexport interface CrudConfig<T extends BaseEntity> {\r\n  title: string;\r\n  entityName: string; // Entity name for RTK Query (e.g., 'Product', 'Customer')\r\n  columns: CrudColumn[];\r\n  formItems: CrudFormItem[];\r\n  formColumns?: number;\r\n  drawerWidth?: number;\r\n  canEdit?: (record: T) => boolean;\r\n  canDelete?: (record: T) => boolean;\r\n  dynamicFieldNames?: string[]; // Names of dynamic metadata fields\r\n  metadataFieldName?: string; // Field name for storing metadata (default: 'meta_data_values', can be 'custom_data')\r\n  skipMetadataWrapping?: boolean; // If true, send fields directly without any wrapping\r\n  beforeSave?: (\r\n    values: Partial<T>\r\n  ) => Partial<T> | Promise<Partial<T>>; // Optional hook to transform payload before submit\r\n}\r\n\r\nexport interface CrudReturn<T extends BaseEntity> {\r\n  // State\r\n  loading: boolean;\r\n  createLoading: boolean;\r\n  updateLoading: boolean;\r\n  deleteLoading: boolean;\r\n  items: T[];\r\n  pagination?: {\r\n    current: number;\r\n    pageSize: number;\r\n    total?: number;\r\n    totalCount?: number; // Some APIs return totalCount instead of total\r\n  };\r\n  drawerVisible: boolean;\r\n  initialValues: Partial<T>;\r\n  form: ReturnType<typeof Form.useForm>[0];\r\n  filterValues: Record<string, unknown>;\r\n  setFilterValues: (values: Record<string, unknown>) => void;\r\n\r\n  // Actions\r\n  handleEdit: (record: T) => void;\r\n  handleDelete: (record: T) => void;\r\n  handleDrawerOpen: () => void;\r\n  resetForm: () => void;\r\n  handleSubmit: (values: Partial<T>) => Promise<void>;\r\n  handlePaginationChange: (pageNumber: number, pageLimit: number) => void;\r\n\r\n  // Config\r\n  title: string;\r\n  entityName: string;\r\n  columns: CrudColumn[];\r\n  formItems: CrudFormItem[];\r\n  formColumns?: number;\r\n  drawerWidth?: number;\r\n  canEdit?: (record: T) => boolean;\r\n  canDelete?: (record: T) => boolean;\r\n  dynamicFieldNames?: string[];\r\n  metadataFieldName?: string;\r\n  skipMetadataWrapping?: boolean;\r\n}\r\n\r\nexport const useGenericCrud = <T extends BaseEntity>(\r\n  config: CrudConfig<T>\r\n): CrudReturn<T> => {\r\n  const [form] = Form.useForm();\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [initialValues, setInitialValues] = useState<Partial<T>>({});\r\n  const [filterValues, setFilterValues] = useState<Record<string, unknown>>({});\r\n  const [debouncedFilters, setDebouncedFilters] = useState<Record<string, unknown>>({});\r\n  const debounceTimerRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const setFilterValuesDebounced = useCallback((values: Record<string, unknown>) => {\r\n    if (debounceTimerRef.current) {\r\n      clearTimeout(debounceTimerRef.current);\r\n    }\r\n    debounceTimerRef.current = setTimeout(() => {\r\n      setDebouncedFilters(values);\r\n    }, 300);\r\n    setFilterValues(values);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n  });\r\n\r\n  // Reset pagination to page 1 when filters change\r\n  useEffect(() => {\r\n    setPagination(prev => ({ ...prev, current: 1 }));\r\n  }, [debouncedFilters]);\r\n\r\n  // Get RTK Query hooks for this entity\r\n  const entityHooks = getEntityHooks(config.entityName);\r\n\r\n  // Memoize query parameters to prevent unnecessary re-renders\r\n  const queryParams = useMemo(\r\n    () => ({\r\n      pageNumber: pagination.current,\r\n      pageLimit: pagination.pageSize,\r\n      ...debouncedFilters,\r\n    }),\r\n    [pagination, debouncedFilters]\r\n  );\r\n\r\n  // RTK Query hooks\r\n  const {\r\n    data: queryData,\r\n    isLoading: loading,\r\n  } = entityHooks.useGetQuery(queryParams);\r\n\r\n  const [createMutation, { isLoading: createLoading }] =\r\n    entityHooks.useCreateMutation();\r\n  const [updateMutation, { isLoading: updateLoading }] =\r\n    entityHooks.useUpdateMutation();\r\n  const [deleteMutation, { isLoading: deleteLoading }] =\r\n    entityHooks.useDeleteMutation();\r\n\r\n  // Memoize data extraction to prevent unnecessary re-renders\r\n  const items = useMemo(() => queryData?.result || [], [queryData?.result]);\r\n  const paginationData = useMemo(\r\n    () => queryData?.pagination,\r\n    [queryData?.pagination]\r\n  );\r\n  // Data refetching is managed by RTK Query via tag invalidation\r\n\r\n  const create = useCallback(\r\n    async (data: Partial<T>) => {\r\n      try {\r\n        const result = await createMutation(data).unwrap();\r\n        \r\n        // Check if the response indicates an error (statusCode !== 200/201)\r\n        if (result?.statusCode && result.statusCode !== 200 && result.statusCode !== 201) {\r\n          // Extract error message from response (only use message field)\r\n          const errorMessage = result?.message || '';\r\n          \r\n          // Use handleApiResponse with proper message handling\r\n          handleApiResponse({\r\n            action: 'create',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n          \r\n          // Mark error as already shown to prevent duplicate message\r\n          const error = new Error(errorMessage || 'Something went wrong');\r\n          (error as any).alreadyShown = true;\r\n          throw error;\r\n        }\r\n        \r\n        // Success case\r\n        handleApiResponse({\r\n          action: 'create',\r\n          title: config.title,\r\n          success: true,\r\n        });\r\n        \r\n        return result;\r\n      } catch (error: unknown) {\r\n        // Only show error if it hasn't been shown already\r\n        if (!(error as any)?.alreadyShown) {\r\n          const errorMessage =\r\n            (error as { data?: { message?: string } })?.data?.message ||\r\n            (error as { message?: string })?.message ||\r\n            '';\r\n          \r\n          handleApiResponse({\r\n            action: 'create',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n        }\r\n        throw error;\r\n      }\r\n    },\r\n    [createMutation, config.title]\r\n  );\r\n\r\n  const update = useCallback(\r\n    async (id: string, data: Partial<T>) => {\r\n      try {\r\n        const result = await updateMutation({ id, data }).unwrap();\r\n        \r\n        // Check if the response indicates an error (statusCode !== 200)\r\n        if (result?.statusCode && result.statusCode !== 200) {\r\n          // Extract error message from response (only use message field)\r\n          const errorMessage = result?.message || '';\r\n          \r\n          // Use handleApiResponse with proper message handling\r\n          handleApiResponse({\r\n            action: 'update',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n          \r\n          // Mark error as already shown to prevent duplicate message\r\n          const error = new Error(errorMessage || 'Something went wrong');\r\n          (error as any).alreadyShown = true;\r\n          throw error;\r\n        }\r\n        \r\n        // Success case\r\n        handleApiResponse({\r\n          action: 'update',\r\n          title: config.title,\r\n          success: true,\r\n        });\r\n        \r\n        return result;\r\n      } catch (error: unknown) {\r\n        // Only show error if it hasn't been shown already\r\n        if (!(error as any)?.alreadyShown) {\r\n          const errorMessage =\r\n            (error as { data?: { message?: string } })?.data?.message ||\r\n            (error as { message?: string })?.message ||\r\n            '';\r\n          \r\n          handleApiResponse({\r\n            action: 'update',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n        }\r\n        throw error;\r\n      }\r\n    },\r\n    [updateMutation, config.title]\r\n  );\r\n\r\n  const remove = useCallback(\r\n    async (id: string) => {\r\n      try {\r\n        const result = await deleteMutation(id).unwrap();\r\n        \r\n        // Check if the response indicates an error (statusCode !== 200)\r\n        if (result?.statusCode && result.statusCode !== 200) {\r\n          // Extract error message from response (only use message field)\r\n          const errorMessage = result?.message || '';\r\n          \r\n          // Use handleApiResponse with proper message handling\r\n          handleApiResponse({\r\n            action: 'delete',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n          \r\n          // Mark error as already shown to prevent duplicate message\r\n          const error = new Error(errorMessage || 'Something went wrong');\r\n          (error as any).alreadyShown = true;\r\n          throw error;\r\n        }\r\n        \r\n        // Success case\r\n        handleApiResponse({\r\n          action: 'delete',\r\n          title: config.title,\r\n          success: true,\r\n        });\r\n        \r\n        return result;\r\n      } catch (error: unknown) {\r\n        // Only show error if it hasn't been shown already\r\n        if (!(error as any)?.alreadyShown) {\r\n          const errorMessage =\r\n            (error as { data?: { message?: string } })?.data?.message ||\r\n            (error as { message?: string })?.message ||\r\n            '';\r\n          \r\n          handleApiResponse({\r\n            action: 'delete',\r\n            title: config.title,\r\n            success: false,\r\n            errorMessage: errorMessage || 'Something went wrong. Please try again.',\r\n          });\r\n        }\r\n        throw error;\r\n      }\r\n    },\r\n    [deleteMutation, config.title]\r\n  );\r\n\r\n  const handlePaginationChange = useCallback(\r\n    (pageNumber: number, pageLimit: number) => {\r\n      setPagination({ current: pageNumber, pageSize: pageLimit });\r\n    },\r\n    []\r\n  );\r\n\r\n  // Memoize date validation regex to prevent recreation\r\n  const dateRegex = useMemo(\r\n    () =>\r\n      /^\\d{4}-\\d{2}-\\d{2}(T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[+-]\\d{2}:\\d{2})?)?$/,\r\n    []\r\n  );\r\n\r\n  const isStrictDate = useCallback(\r\n    (value: string): boolean => {\r\n      return dateRegex.test(value);\r\n    },\r\n    [dateRegex]\r\n  );\r\n\r\n  // Optimized date parsing function\r\n  const parseDateValue = useCallback(\r\n    (value: unknown): unknown => {\r\n      if (typeof value === 'string' && isStrictDate(value)) {\r\n        const parsedDate = dayjs(value, undefined, true);\r\n        return parsedDate.isValid() ? parsedDate : value;\r\n      }\r\n      return value;\r\n    },\r\n    [isStrictDate]\r\n  );\r\n\r\n  // Event handlers\r\n  const handleEdit = useCallback(\r\n    (record: T) => {\r\n      const newRecord: Record<string, unknown> = {};\r\n      const metadataFieldName = config.metadataFieldName || 'meta_data_values';\r\n\r\n      // Process main record fields\r\n      Object.entries(record).forEach(([key, value]) => {\r\n        // Skip metadata field - we'll handle it separately\r\n        if (\r\n          key === metadataFieldName ||\r\n          key === 'meta_data_values' ||\r\n          key === 'custom_data'\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        newRecord[key] = parseDateValue(value);\r\n      });\r\n\r\n      // If metadata field exists, flatten it into the record\r\n      const metaDataValues = (record as Record<string, unknown>)[\r\n        metadataFieldName\r\n      ];\r\n      if (\r\n        metaDataValues &&\r\n        typeof metaDataValues === 'object' &&\r\n        metaDataValues !== null\r\n      ) {\r\n        Object.entries(metaDataValues).forEach(([key, value]) => {\r\n          // Skip if value is null or undefined\r\n          if (value === null || value === undefined) {\r\n            return;\r\n          }\r\n\r\n          newRecord[key] = parseDateValue(value);\r\n        });\r\n      }\r\n\r\n      setInitialValues(newRecord as Partial<T>);\r\n      setDrawerVisible(true);\r\n    },\r\n    [config.metadataFieldName, parseDateValue]\r\n  );\r\n\r\n  const handleDelete = useCallback(\r\n    (record: T) => {\r\n      remove(record._id);\r\n    },\r\n    [remove]\r\n  );\r\n\r\n  const handleDrawerOpen = useCallback(() => {\r\n    setDrawerVisible(true);\r\n  }, []);\r\n\r\n  const resetForm = useCallback(() => {\r\n    setDrawerVisible(false);\r\n    setInitialValues({});\r\n    form.resetFields();\r\n  }, [form]);\r\n\r\n  // Optimized payload processing function\r\n  const processPayload = useCallback(\r\n    (values: Partial<T>): Record<string, unknown> => {\r\n      if (!config.dynamicFieldNames || config.dynamicFieldNames.length === 0) {\r\n        // Ensure date-like values (e.g., Dayjs) are serialized for transport/cache safety\r\n        const serialized: Record<string, unknown> = {};\r\n        Object.entries(values).forEach(([key, value]) => {\r\n          // dayjs exposes an isDayjs guard\r\n          const isDayjsValue = (dayjs as any).isDayjs?.(value);\r\n          if (isDayjsValue) {\r\n            // Send as YYYY-MM-DD (server typically accepts date-only here)\r\n            serialized[key] = (value as any).format('YYYY-MM-DD');\r\n          } else {\r\n            serialized[key] = value as unknown;\r\n          }\r\n        });\r\n        return serialized;\r\n      }\r\n\r\n      const staticFields: Record<string, unknown> = {};\r\n      const metaDataValues: Record<string, unknown> = {};\r\n      const metadataFieldName = config.metadataFieldName || 'meta_data_values';\r\n\r\n      Object.entries(values).forEach(([key, value]) => {\r\n        if (config.dynamicFieldNames?.includes(key)) {\r\n          // This is a dynamic metadata field\r\n          if (value !== undefined) {\r\n            const isDayjsValue = (dayjs as any).isDayjs?.(value);\r\n            metaDataValues[key] = isDayjsValue\r\n              ? (value as any).format('YYYY-MM-DD')\r\n              : value;\r\n          }\r\n        } else {\r\n          // This is a static field\r\n          const isDayjsValue = (dayjs as any).isDayjs?.(value);\r\n          staticFields[key] = isDayjsValue\r\n            ? (value as any).format('YYYY-MM-DD')\r\n            : value;\r\n        }\r\n      });\r\n\r\n      // Return payload based on configuration\r\n      if (Object.keys(metaDataValues).length > 0) {\r\n        return {\r\n          ...staticFields,\r\n          [metadataFieldName]: metaDataValues,\r\n        };\r\n      }\r\n\r\n      return staticFields;\r\n    },\r\n    [config.dynamicFieldNames, config.metadataFieldName]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    async (values: Partial<T>) => {\r\n      const transformedValues = config.beforeSave\r\n        ? await config.beforeSave(values)\r\n        : values;\r\n      const payload = processPayload(transformedValues);\r\n\r\n      try {\r\n        if (initialValues._id) {\r\n          await update(initialValues._id, payload as Partial<T>);\r\n        } else {\r\n          await create(payload as Partial<T>);\r\n        }\r\n        resetForm();\r\n      } catch (error) {\r\n        // Error handling is done in the mutation functions\r\n        console.error('Submit error:', error);\r\n      }\r\n    },\r\n    [\r\n      initialValues._id,\r\n      create,\r\n      update,\r\n      resetForm,\r\n      processPayload,\r\n      config.beforeSave,\r\n    ]\r\n  );\r\n  // Initial data load is handled by RTK Query automatically\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    items,\r\n    pagination: paginationData,\r\n    drawerVisible,\r\n    initialValues,\r\n    form,\r\n    filterValues,\r\n    setFilterValues: setFilterValuesDebounced,\r\n\r\n    // Actions\r\n    handleEdit,\r\n    handleDelete,\r\n    handleDrawerOpen,\r\n    resetForm,\r\n    handleSubmit,\r\n    handlePaginationChange,\r\n\r\n    // Config\r\n    ...config,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { Tag, Space } from 'antd';\r\nimport { CrudColumn } from '../components/common/GenericCrudPage';\r\nimport { FieldMetadata } from '../hooks/useFieldMetadata';\r\n\r\n/**\r\n * Generate table columns from field metadata\r\n * @param fields Array of field metadata\r\n * @param visibleColumns Array of column keys that should be visible\r\n * @returns Array of CrudColumn objects\r\n */\r\nexport const generateColumnsFromMetadata = (\r\n  fields: FieldMetadata[],\r\n  visibleColumns: string[] = []\r\n): CrudColumn[] => {\r\n  if (!fields || fields.length === 0) return [];\r\n\r\n  return fields\r\n    .filter(field => visibleColumns.includes(field.field_name))\r\n    .map(field => ({\r\n      title: field.label,\r\n      dataIndex: ['custom_data', field.field_name], // Access nested custom_data\r\n      key: field.field_name,\r\n      render: (value: any, record: any) => {\r\n        // Get value from custom_data object\r\n        const actualValue = record?.custom_data?.[field.field_name];\r\n        \r\n        if (actualValue === null || actualValue === undefined || actualValue === '') {\r\n          return <span style={{ color: '#999' }}>-</span>;\r\n        }\r\n\r\n        // Handle different field types\r\n        switch (field.field_type) {\r\n          case 'select':\r\n          case 'radio':\r\n            // For select/radio, display the selected option\r\n            return <Tag color=\"blue\">{String(actualValue)}</Tag>;\r\n          \r\n          case 'checkbox':\r\n            // For checkbox, display boolean state\r\n            return (\r\n              <Tag color={actualValue ? 'green' : 'red'}>\r\n                {actualValue ? 'Yes' : 'No'}\r\n              </Tag>\r\n            );\r\n          \r\n          case 'date':\r\n            // For date fields, format the date\r\n            try {\r\n              const date = new Date(actualValue);\r\n              return (\r\n                <span style={{ fontSize: '13px', color: '#666' }}>\r\n                  {date.toLocaleDateString()}\r\n                </span>\r\n              );\r\n            } catch {\r\n              return <span>{String(actualValue)}</span>;\r\n            }\r\n          \r\n          case 'number':\r\n          case 'currency':\r\n            // For number/currency fields, format with proper styling\r\n            return (\r\n              <span style={{ \r\n                fontFamily: 'monospace', \r\n                fontWeight: 500,\r\n                color: field.field_type === 'currency' ? '#52c41a' : '#1890ff'\r\n              }}>\r\n                {field.field_type === 'currency' ? `$${Number(actualValue).toFixed(2)}` : Number(actualValue).toLocaleString()}\r\n              </span>\r\n            );\r\n          \r\n          case 'textarea':\r\n          case 'text':\r\n          default:\r\n            // For text fields, truncate long text\r\n            const text = String(actualValue);\r\n            if (text.length > 50) {\r\n              return (\r\n                <span title={text}>\r\n                  {text.substring(0, 50)}...\r\n                </span>\r\n              );\r\n            }\r\n            return <span>{text}</span>;\r\n        }\r\n      },\r\n    }));\r\n};\r\n\r\n/**\r\n * Get all available column options from field metadata\r\n * @param fields Array of field metadata\r\n * @returns Array of column options with key and label\r\n */\r\nexport const getAvailableColumns = (fields: FieldMetadata[]) => {\r\n  return fields.map(field => ({\r\n    key: field.field_name,\r\n    label: field.label,\r\n    fieldType: field.field_type,\r\n  }));\r\n};\r\n\r\n/**\r\n * Get default visible columns (first 5 fields by display_order)\r\n * @param fields Array of field metadata\r\n * @returns Array of column keys\r\n */\r\nexport const getDefaultVisibleColumns = (fields: FieldMetadata[]): string[] => {\r\n  return fields\r\n    .slice(0, 5) // Take first 5 fields\r\n    .map(field => field.field_name);\r\n};\r\n","import { message } from \"antd\";\r\nimport { API_ROUTES } from \"../services/api/utils\";\r\n\r\nexport const showToast = (type: \"success\" | \"error\", content: string) => {\r\n  if (type === \"success\") {\r\n    message.success(content);\r\n  } else if (type === \"error\") {\r\n    message.error(content);\r\n  }\r\n};\r\n\r\n// Generic function to generate API route getters for any entity\r\nexport const createApiRouteGetter = <T extends keyof typeof API_ROUTES>(entityName: T) => {\r\n  return (action: keyof typeof API_ROUTES[T]) => {\r\n    const route = API_ROUTES?.[entityName]?.[action];\r\n    if (!route) {\r\n\r\n      throw new Error(`API route for ${String(entityName)}.${String(action)} is not defined.`);\r\n    }\r\n    return route;\r\n  };\r\n};\r\n\r\n// Generic CRUD factory that creates all CRUD operations for an entity\r\nexport const createCrudOperations = <T extends keyof typeof API_ROUTES>(entityName: T) => {\r\n  const getRoute = createApiRouteGetter(entityName);\r\n  \r\n  return {\r\n    getAll: () => getRoute(\"GetAll\" as keyof typeof API_ROUTES[T]),\r\n    create: () => getRoute(\"Create\" as keyof typeof API_ROUTES[T]),\r\n    update: () => getRoute(\"Update\" as keyof typeof API_ROUTES[T]),\r\n    delete: () => getRoute(\"Delete\" as keyof typeof API_ROUTES[T]),\r\n    get: () => getRoute(\"Get\" as keyof typeof API_ROUTES[T]),\r\n  };\r\n};\r\n\r\n// Auto-generated CRUD operations for all entities (minimal - only for fallback)\r\nexport const CrudOperations = {\r\n  Unit: createCrudOperations(\"Unit\"),\r\n  // Note: All API calls are now handled by RTK Query via apiSlice\r\n  // because they don't follow the standard CRUD pattern\r\n} as const;"],"names":["handleApiResponse","_ref","action","success","title","getAllItems","resetForm","errorMessage","showToast","concat","useSuperAdminFilters","selectedTenant","setSelectedTenant","useState","selectedOrganisation","setSelectedOrganisation","selectedBranch","setSelectedBranch","userItem","useMemo","getCurrentUser","scopeData","SessionStorageEncryption","getItem","userRole","userType","user_type","usertype","user_role","isSuperAdmin","toLowerCase","isTenant","isOrganisationUser","isBranchUser","data","tenantsData","isLoading","tenantsLoading","refetch","refetchTenants","apiSlice","useGetTenantAccountsQuery","skip","effectiveTenantId","undefined","organisationsData","organisationsLoading","refetchOrganisations","useGetOrganisationsQuery","tenant_id","effectiveOrganisationId","_userItem$organisatio","organisation_id","organisationItems","_id","branchesData","branchesLoading","refetchBranches","useGetBranchesQuery","org_id","tenantsItems","result","organisationsItems","branchesItems","tenantOptions","map","tenant","label","organization_name","contact_name","username","value","organisationOptions","orgs","filter","org","org_name","name","branchOptions","branches","branch","branch_name","handleTenantChange","useCallback","handleOrganisationChange","handleBranchChange","getApiFilters","filters","branch_id","props","FormValue","onSubmit","onCancel","formItems","onChildCancel","formColumns","splitLabelAndField","nested","nestedInputs","wrapperCol","labelCol","initialValues","loading","form","onValuesChange","columns","useEffect","setFieldsValue","_jsxs","style","position","height","children","_jsx","top","left","right","bottom","backgroundRepeat","backgroundPosition","backgroundSize","opacity","zIndex","Form","onFinish","values","resetFields","layout","Row","gutter","item","index","_item$rules","Col","span","colSpan","Typography","Text","strong","rules","some","rule","required","type","Item","marginTop","component","List","fields","add","remove","_Fragment","_ref2","key","fieldKey","restField","_objectWithoutProperties","_excluded","align","input","idx","_objectSpread","message","MinusCircleOutlined","onClick","justify","Button","icon","PlusOutlined","padding","handleCancel","htmlType","TextArea","Input","FIELD_TYPE_OPTIONS","category","generateFormItemFromMetadata","metadata","field_name","is_required","validation_rules","field_type","push","email","min","max","pattern","RegExp","patternMessage","buildValidationRules","valuePropName","placeholder","placeholderText","options","Array","isArray","rows","Password","InputNumber","width","step","precision","Switch","checkedChildren","unCheckedChildren","defaultChecked","Checkbox","Select","allowClear","showSearch","optionFilterProp","opt","mode","Radio","option","DatePicker","format","showTime","generateComponent","formItem","FieldForm","React","editingField","optionsText","onOptionsChange","selectedFieldType","useWatch","needsOptions","includes","needsNumberValidation","is_active","is_global","display_order","disabled","extra","Divider","onChange","e","target","displayName","FieldsTable","deleteLoading","onEdit","onDelete","dataIndex","sorter","a","b","localeCompare","render","text","Tag","color","onFilter","record","fixed","_","Space","size","EditOutlined","Popconfirm","description","onConfirm","okText","cancelText","okButtonProps","danger","DeleteOutlined","Table","dataSource","rowKey","pagination","pageSize","showSizeChanger","scroll","x","useFieldMetadataOperations","entityName","businessType","tenantId","organisationId","onFieldsUpdated","enabled","queryParams","entity_name","fieldsResponse","fieldsLoading","refetchFields","useGetFieldMetadataQuery","createField","createLoading","useCreateFieldMetadataMutation","updateField","updateLoading","useUpdateFieldMetadataMutation","deleteField","useDeleteFieldMetadataMutation","fetchFields","handleSubmitField","async","validationRules","fieldType","split","trim","length","payload","business_type","errors","_metadata$entity_name","_metadata$field_name","_metadata$field_type","_metadata$label","test","_metadata$validation_","validateFieldMetadata","id","unwrap","error","_error$data","handleDeleteField","fieldId","_error$data2","fieldsData","FieldMetadataManager","useForm","modalVisible","setModalVisible","fieldModalVisible","setFieldModalVisible","setEditingField","setOptionsText","hasChanges","setHasChanges","handleOpenFieldModal","field","_field$validation_rul","_field$validation_rul2","_field$validation_rul3","join","handleSubmit","validateFields","console","confirmLoading","handleModalClose","handleDelete","SettingOutlined","Modal","open","footer","destroyOnClose","direction","Alert","showIcon","display","justifyContent","onOk","getActionsColumn","handleEdit","arguments","canEdit","canDelete","allowEdit","allowDelete","gap","alignItems","Tooltip","cursor","fontSize","GenericCrudPageComponent","config","onFilterChange","customButtons","enableSuperAdminFilters","enableDynamicFields","showDynamicColumnsInTable","superAdminFilters","isInitialMount","useRef","prevSuperAdminFilters","mergedFormItems","refresh","refreshMetadata","dynamicFields","staticFormItems","params","metadataResponse","refetchFieldMetadata","sort","dynamicFormItems","useFieldMetadata","dynamicFieldNames","enhancedConfig","items","drawerVisible","handleDrawerOpen","handlePaginationChange","drawerWidth","filterValues","setFilterValues","setDrawerVisible","setInitialValues","debouncedFilters","setDebouncedFilters","debounceTimerRef","setFilterValuesDebounced","current","clearTimeout","setTimeout","setPagination","prev","entityHooks","getEntityHooks","pageNumber","pageLimit","queryData","useGetQuery","createMutation","useCreateMutation","updateMutation","useUpdateMutation","deleteMutation","useDeleteMutation","paginationData","create","statusCode","Error","alreadyShown","_data","update","_data2","_data3","dateRegex","isStrictDate","parseDateValue","parsedDate","dayjs","isValid","newRecord","metadataFieldName","Object","entries","forEach","metaDataValues","processPayload","serialized","_ref3","_isDayjs","_ref4","isDayjsValue","isDayjs","call","staticFields","_ref5","_config$dynamicFieldN","_isDayjs2","_ref6","_isDayjs3","_ref7","keys","transformedValues","beforeSave","useGenericCrud","enhancedColumns","generateColumnsFromMetadata","require","isPureDynamicForm","every","col","allFieldNames","dynamicColumns","existingKeys","newDynamicColumns","superAdminApiFilters","handleFilterChange","newValues","allFilters","nextFilters","changed","aKeys","bKeys","shallowEqual","tableColumns","marginBottom","flex","margin","wrap","Option","_filter$options","val","date","btn","canCreateItem","canCreate","GlobalTable","rowKeyField","totalCount","total","onPaginationChange","GlobalDrawer","onClose","AntdForm","all","GenericCrudPage","visibleColumns","_record$custom_data","actualValue","custom_data","String","Date","toLocaleDateString","_unused","fontFamily","fontWeight","Number","toFixed","toLocaleString","substring","getAvailableColumns","getDefaultVisibleColumns","slice","content","getRoute","_API_ROUTES$entityNam","route","API_ROUTES","createApiRouteGetter","createCrudOperations"],"sourceRoot":""}