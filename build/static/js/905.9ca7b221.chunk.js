"use strict";(self.webpackChunkFOCUZ_BILLING=self.webpackChunkFOCUZ_BILLING||[]).push([[905],{74198:(e,t,i)=>{i.d(t,{_V:()=>a});i(65043);var l=i(91449);i(52614);const a=e=>{const t=l.LE[e]||(0,l.lX)(e);return{get:t.getAll(),create:t.create(),update:t.update(),delete:t.delete()}}},81905:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var l=i(65043),a=i(36621),n=i(26553),s=i(78566),d=i(4825),o=i(97031),r=i(82863),c=i(74198),u=i(70579);const p=()=>{const{getEntityApi:e}=(0,d.p)(),t=e("Unit"),{items:i,loading:p}=(0,o.Sm)(t.getIdentifier("GetAll"));(0,l.useEffect)((()=>{t("GetAll")}),[t]);const m={title:"Variants",columns:[{title:"Name",dataIndex:"variant_name",key:"variant_name"},{title:"Unit Type",dataIndex:"unit",key:"unit"},{title:"Pack Size",dataIndex:"pack_size",key:"pack_size"},{title:"Pack Type",dataIndex:"pack_type",key:"pack_type"}],formItems:[{label:"Variant Name",name:"variant_name",rules:[{required:!0,message:"Please enter variant name"}],component:(0,u.jsx)(a.A,{placeholder:"e.g., 1kg, 500ml, 10pcs"})},{label:"Unit Type",name:"unit",rules:[{required:!0,message:"Please select unit"}],component:(0,u.jsx)(n.A,{placeholder:"Select unit",loading:p,showSearch:!0,allowClear:!0,children:((null===i||void 0===i?void 0:i.result)||[]).map((e=>(0,u.jsx)(s.c,{value:e.unit_code,children:e.unit_name},e._id)))})},{label:"Pack Type",name:"pack_type",rules:[{required:!0,message:"Please select pack type"}],component:(0,u.jsxs)(n.A,{placeholder:"Select pack type",children:[(0,u.jsx)(s.c,{value:"strip",children:"Strip"}),(0,u.jsx)(s.c,{value:"bottle",children:"Bottle"}),(0,u.jsx)(s.c,{value:"packet",children:"Packet"}),(0,u.jsx)(s.c,{value:"box",children:"Box"}),(0,u.jsx)(s.c,{value:"pouch",children:"Pouch"}),(0,u.jsx)(s.c,{value:"pack",children:"Pack"})]})},{label:"Pack Size",name:"pack_size",rules:[{required:!0,message:"Enter number of items in pack"}],component:(0,u.jsx)(a.A,{type:"number",placeholder:"e.g., 15 (for 15 tablets in a strip)"})}],apiRoutes:(0,c._V)("Variant"),formColumns:2};return(0,u.jsx)(r.r,{config:m})}},82863:(e,t,i)=>{i.d(t,{r:()=>F});var l=i(89379),a=i(65043),n=i(96651),s=i(47419),d=i(11645),o=i(36621),r=i(26553),c=i(93504),u=i(95206),p=i(33359),m=i(9316),h=i(83003),g=i(62305),x=i(97031),f=i(91449),y=i(60446),j=i.n(y);var A=i(22671),v=i(53986),b=i(83833),k=i(88655),C=i(73847),R=i(70579);const S=["key","name","fieldKey"],w=e=>{const{FormValue:t,onSubmit:i,onCancel:n,formItems:o,onChildCancel:r,formColumns:c,splitLabelAndField:p,nested:m,nestedInputs:h,wrapperCol:x,labelCol:f,initialValues:y,loading:j,form:A,onValuesChange:w}=e,_=c||1;return(0,a.useEffect)((()=>{y&&(null===A||void 0===A||A.setFieldsValue(y))}),[y,A]),(0,R.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,R.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"600px 600px",opacity:.1,zIndex:0}}),(0,R.jsxs)(g.A,{form:A,onFinish:e=>{i?i(e):t&&t(e),null===A||void 0===A||A.resetFields()},layout:"vertical",onValuesChange:w,children:[(0,R.jsxs)(s.A,{gutter:[16,16],children:[null===o||void 0===o?void 0:o.map(((e,t)=>{var i;return(0,R.jsx)(d.A,{span:24/_,children:p?(0,R.jsxs)("div",{children:[(0,R.jsxs)(b.A.Text,{strong:!0,children:[e.label," ",(null===(i=e.rules)||void 0===i?void 0:i.some((e=>e.required)))&&(0,R.jsx)(b.A.Text,{type:"danger",children:"*"})]}),(0,R.jsx)(g.A.Item,{name:e.name,rules:e.rules,style:{marginTop:"8px"},children:e.component})]}):(0,R.jsx)(g.A.Item,{label:(0,R.jsx)(b.A.Text,{strong:!0,children:e.label}),name:e.name,rules:e.rules,labelCol:{span:f},wrapperCol:{span:x},children:e.component})},t)})),m&&(0,R.jsx)(g.A.List,{name:"nestedItems",children:(e,t)=>{let{add:i,remove:a}=t;return(0,R.jsxs)(R.Fragment,{children:[e.map((e=>{let{key:t,name:i,fieldKey:n}=e,o=(0,v.A)(e,S);return(0,R.jsxs)(s.A,{gutter:[16,16],align:"middle",children:[h.map(((e,t)=>(0,R.jsx)(d.A,{children:(0,R.jsx)(g.A.Item,(0,l.A)((0,l.A)({},o),{},{name:[i,e.name],fieldKey:[n,e.name],rules:[{required:!0,message:"Missing ".concat(e.label)}],label:e.label,children:e.component}))},t))),(0,R.jsx)(d.A,{children:(0,R.jsx)(k.A,{onClick:()=>a(i)})})]},t)})),(0,R.jsx)(s.A,{justify:"center",children:(0,R.jsx)(d.A,{children:(0,R.jsx)(u.Ay,{type:"primary",onClick:()=>i(),icon:(0,R.jsx)(C.A,{}),children:"Add More Field"})})})]})}})]}),(0,R.jsxs)(s.A,{justify:"end",gutter:[16,16],style:{padding:"16px"},children:[(0,R.jsx)(d.A,{children:(0,R.jsx)(u.Ay,{onClick:()=>{n?n():r&&r(!1),null===A||void 0===A||A.resetFields()},children:"Cancel"})}),(0,R.jsx)(d.A,{children:(0,R.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:j,children:"Submit"})})]})]})]})};var _=i(4413);function V(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{title:"Actions",key:"actions",render:(a,s)=>(0,R.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,R.jsx)(n.A,{title:"Edit ".concat(e),children:(0,R.jsx)(p.A,{style:{cursor:"pointer",color:"#1890ff"},onClick:()=>t(s)})}),(0,R.jsx)(n.A,{title:"Delete ".concat(e),children:(0,R.jsx)(m.A,{style:{cursor:l?"not-allowed":"pointer",color:l?"#d9d9d9":"#ff4d4f",opacity:l?.5:1},onClick:()=>!l&&i(s)})})]})}}const F=e=>{let{config:t,filters:i=[],onFilterChange:n,customButtons:p=[],onValuesChange:m}=e;const{loading:y,createLoading:v,updateLoading:b,deleteLoading:k,items:C,pagination:S,drawerVisible:F,initialValues:P,form:I,handleEdit:L,handleDelete:E,handleDrawerOpen:z,resetForm:T,handleSubmit:K,handlePaginationChange:q,columns:B,formItems:D,formColumns:N=2,drawerWidth:O,filterValues:U,setFilterValues:G}=(e=>{const t=(0,h.wA)(),[i]=g.A.useForm(),[n,s]=(0,a.useState)(!1),[d,o]=(0,a.useState)({}),[r,c]=(0,a.useState)({}),[u,p]=(0,a.useState)({current:1,pageSize:10}),{loading:m,items:y}=(0,x.Sm)(e.apiRoutes.get.identifier),{loading:A,items:v,error:b}=(0,x.Sm)(e.apiRoutes.create.identifier),{loading:k,items:C,error:R}=(0,x.Sm)(e.apiRoutes.update.identifier),{loading:S,items:w,error:_}=(0,x.Sm)(e.apiRoutes.delete.identifier),V=(0,a.useCallback)(((e,i,l,a)=>{t((0,x.s7)({method:e,endpoint:i,data:l},a))}),[t]),F=(0,a.useCallback)((()=>{const t=(0,l.A)((0,l.A)({},r),{},{pageNumber:u.current,pageLimit:u.pageSize});V(e.apiRoutes.get.method,e.apiRoutes.get.endpoint,t,e.apiRoutes.get.identifier)}),[V,e.apiRoutes.get,r,u]),P=(0,a.useCallback)((t=>{V(e.apiRoutes.create.method,e.apiRoutes.create.endpoint,t,e.apiRoutes.create.identifier)}),[V,e.apiRoutes.create]),I=(0,a.useCallback)(((t,i)=>{V(e.apiRoutes.update.method,"".concat(e.apiRoutes.update.endpoint,"/").concat(t),i,e.apiRoutes.update.identifier)}),[V,e.apiRoutes.update]),L=(0,a.useCallback)((t=>{V(e.apiRoutes.delete.method,"".concat(e.apiRoutes.delete.endpoint,"/").concat(t),{_id:t},e.apiRoutes.delete.identifier)}),[V,e.apiRoutes.delete]),E=(0,a.useCallback)(((e,t)=>{p({current:e,pageSize:t})}),[]);function z(e){return/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/.test(e)}const T=(0,a.useCallback)((e=>{const t={};for(const i in e){const l=e[i];"string"===typeof l&&z(l)&&j()(l,void 0,!0).isValid()?t[i]=j()(l):t[i]=l}o(t),s(!0)}),[]),K=(0,a.useCallback)((e=>{L(e._id)}),[L]),q=(0,a.useCallback)((()=>{s(!0)}),[]),B=(0,a.useCallback)((()=>{s(!1),o({}),i.resetFields()}),[i]),D=(0,a.useCallback)((e=>{d._id?I(d._id,e):P(e)}),[d._id,P,I]);return(0,a.useEffect)((()=>{if(200===(null===v||void 0===v?void 0:v.statusCode))(0,f.P0)("success","".concat(e.title," created successfully")),F(),B(),t((0,x.Ki)(e.apiRoutes.create.identifier));else if(b){const t=b.message||"Failed to create ".concat(e.title);(0,f.P0)("error",t)}}),[v,b,e.title,F,B,t,e.apiRoutes.create.identifier]),(0,a.useEffect)((()=>{if(200===(null===C||void 0===C?void 0:C.statusCode))(0,f.P0)("success","".concat(e.title," updated successfully")),F(),B(),t((0,x.Ki)(e.apiRoutes.update.identifier));else if(R){const t=R.message||"Failed to update ".concat(e.title);(0,f.P0)("error",t)}}),[C,R,e.title,F,B,t,e.apiRoutes.update.identifier]),(0,a.useEffect)((()=>{if(200===(null===w||void 0===w?void 0:w.statusCode))(0,f.P0)("success","".concat(e.title," deleted successfully")),F(),t((0,x.Ki)(e.apiRoutes.delete.identifier));else if(_){const t=_.message||"Failed to delete ".concat(e.title);(0,f.P0)("error",t)}}),[w,_,e.title,F,t,e.apiRoutes.delete.identifier]),(0,a.useEffect)((()=>{F()}),[F]),(0,l.A)({loading:m,createLoading:A,updateLoading:k,deleteLoading:S,items:null===y||void 0===y?void 0:y.result,pagination:null===y||void 0===y?void 0:y.pagination,drawerVisible:n,initialValues:d,form:i,filterValues:r,setFilterValues:c,handleEdit:T,handleDelete:K,handleDrawerOpen:q,resetForm:B,handleSubmit:D,handlePaginationChange:E},e)})(t),M=(0,a.useCallback)(((e,t)=>{const i=(0,l.A)((0,l.A)({},U),{},{[e]:t});G(i),n&&n(i)}),[U,G,n]),Z=(0,a.useMemo)((()=>[...B,V(t.title,L,E,k)]),[B,t.title,L,E,k]);return(0,R.jsxs)("div",{children:[(0,R.jsxs)(s.A,{justify:"space-between",align:"bottom",gutter:[16,16],style:{marginBottom:16},children:[(0,R.jsx)(d.A,{flex:"auto",children:(0,R.jsx)("h1",{style:{margin:0},children:t.title})}),(0,R.jsx)(d.A,{children:(0,R.jsxs)(s.A,{gutter:[12,12],align:"bottom",justify:"end",wrap:!0,children:[i.map((e=>{var t;return(0,R.jsxs)(d.A,{children:["input"===e.type&&(0,R.jsx)(o.A,{placeholder:e.placeholder||e.label,value:U[e.key]||"",onChange:t=>M(e.key,t.target.value),style:{width:e.width||200},disabled:v||b||k}),"select"===e.type&&(0,R.jsx)(r.A,{placeholder:e.placeholder||e.label,value:U[e.key],onChange:t=>{M(e.key,t),e.onChange&&e.onChange(t)},allowClear:!0,style:{width:e.width||200},disabled:e.disabled||v||b||k,children:null===(t=e.options)||void 0===t?void 0:t.map((e=>(0,R.jsx)(r.A.Option,{value:e.value,children:e.label},e.value)))}),"date"===e.type&&(0,R.jsx)(c.A,{placeholder:e.placeholder||e.label,value:U[e.key],onChange:t=>M(e.key,t),style:{width:e.width||200},disabled:v||b||k})]},e.key)})),(0,R.jsx)(d.A,{children:(0,R.jsx)(o.A,{placeholder:"Search ".concat(t.title),value:U.searchString||"",onChange:e=>M("searchString",e.target.value),style:{width:200},disabled:v||b||k})}),p.map((e=>(0,R.jsx)(d.A,{children:(0,R.jsx)(u.Ay,{type:e.type||"default",onClick:e.onClick,icon:e.icon,disabled:v||b||k,children:e.label})},e.key))),(0,R.jsx)(d.A,{children:(0,R.jsxs)(u.Ay,{type:"primary",onClick:z,loading:v,disabled:v,children:["Add ",t.title]})})]})})]}),(0,R.jsx)(_.A,{columns:Z,data:C,loading:y||k,rowKeyField:"_id",totalCount:(null===S||void 0===S?void 0:S.totalCount)||0,pageLimit:(null===S||void 0===S?void 0:S.pageLimit)||10,onPaginationChange:q}),(0,R.jsx)(A.A,{title:"".concat(P._id?"Edit":"Add"," ").concat(t.title),open:F,onClose:v||b?()=>{}:T,width:O,children:(0,R.jsx)(w,{form:I,formItems:D,formColumns:N,initialValues:P,onSubmit:K,onCancel:T,onValuesChange:m,loading:v||b})})]})}}}]);
//# sourceMappingURL=905.9ca7b221.chunk.js.map