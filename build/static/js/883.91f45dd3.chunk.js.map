{"version":3,"file":"static/js/883.91f45dd3.chunk.js","mappings":"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","sources":["helpers/CrudFactory.ts","components/antd/form/form.jsx","helpers/fieldMetadataUtils.tsx","components/FieldMetadataManager/FieldForm.tsx","components/FieldMetadataManager/FieldsTable.tsx","components/FieldMetadataManager/hooks/useFieldMetadataOperations.ts","components/FieldMetadataManager/FieldMetadataManager.tsx","components/common/GenericCrudPage.tsx","hooks/useSuperAdminFilters.ts","hooks/useFieldMetadata.ts","hooks/useGenericCrud.ts","helpers/columnUtils.tsx"],"sourcesContent":["import { useDispatch } from \"react-redux\";\r\nimport { useCallback } from \"react\";\r\nimport { CrudOperations, createCrudOperations } from \"./Common_functions\";\r\nimport { dynamic_request } from \"../services/redux/slices\";\r\nimport { API_ROUTES } from \"../services/api/utils\";\r\n\r\n// Type for CRUD actions\r\nexport type CrudAction = \"GetAll\" | \"Create\" | \"Update\" | \"Delete\" | \"Get\";\r\n\r\n// Type for API route structure\r\nexport type ApiRoute = {\r\n  method: string;\r\n  endpoint: string;\r\n  identifier: string;\r\n};\r\n\r\n// Type for entity names\r\nexport type EntityName = keyof typeof API_ROUTES;\r\n\r\n// Hook for using CRUD operations with Redux\r\nexport const useCrudOperations = <T extends EntityName>(entityName: T) => {\r\n  const dispatch = useDispatch();\r\n  \r\n  const operations = (CrudOperations as any)[entityName] || createCrudOperations(entityName);\r\n  \r\n  const callApi = useCallback((action: CrudAction, data?: any, id?: string) => {\r\n    const route = operations[action.toLowerCase() as keyof typeof operations]();\r\n    \r\n    let endpoint = route.endpoint;\r\n    if (id && (action === \"Update\" || action === \"Delete\" || action === \"Get\")) {\r\n      endpoint = `${route.endpoint}/${id}`;\r\n    }\r\n    \r\n    dispatch(\r\n      dynamic_request(\r\n        {\r\n          method: route.method,\r\n          endpoint,\r\n          data: data || {},\r\n        },\r\n        route.identifier\r\n      ) as any\r\n    );\r\n  }, [dispatch, operations]);\r\n\r\n  return {\r\n    getAll: () => callApi(\"GetAll\"),\r\n    create: (data: any) => callApi(\"Create\", data),\r\n    update: (id: string, data: any) => callApi(\"Update\", data, id),\r\n    delete: (id: string) => callApi(\"Delete\", { _id: id }, id),\r\n    get: (id: string) => callApi(\"Get\", {}, id),\r\n    operations,\r\n  };\r\n};\r\n\r\n// Generic CRUD component factory\r\nexport const createCrudComponent = <T extends EntityName>(\r\n  entityName: T,\r\n  config: {\r\n    title: string;\r\n    formItems: any[];\r\n    columns: any[];\r\n    formColumns?: number;\r\n  }\r\n) => {\r\n  return () => {\r\n    const { getAll, create, update, delete: deleteItem } = useCrudOperations(entityName);\r\n    \r\n    // This would be used in a React component\r\n    // For now, just return the configuration\r\n    return {\r\n      ...config,\r\n      apiOperations: {\r\n        getAll,\r\n        create,\r\n        update,\r\n        delete: deleteItem,\r\n      },\r\n    };\r\n  };\r\n};\r\n\r\n// Example usage for Organisations\r\nexport const useOrganisationsCrud = () => useCrudOperations(\"Organisations\");\r\n\r\n// Example usage for any new entity\r\nexport const useEntityCrud = <T extends EntityName>(entityName: T) => useCrudOperations(entityName);\r\n\r\n// Utility function to get API routes for any entity\r\nexport const getEntityApiRoutes = <T extends EntityName>(entityName: T) => {\r\n  const operations = (CrudOperations as any)[entityName] || createCrudOperations(entityName);\r\n  \r\n  return {\r\n    get: operations.getAll(),\r\n    create: operations.create(),\r\n    update: operations.update(),\r\n    delete: operations.delete(),\r\n  };\r\n}; ","import { Form, Button, Typography, Row, Col } from \"antd\";\r\nimport { PlusOutlined, MinusCircleOutlined } from \"@ant-design/icons\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst AntdForm = (props) => {\r\n  const {\r\n    FormValue,\r\n    onSubmit,\r\n    onCancel,\r\n    formItems,\r\n    onChildCancel,\r\n    formColumns,\r\n    splitLabelAndField,\r\n    nested,\r\n    nestedInputs,\r\n    wrapperCol,\r\n    labelCol,\r\n    initialValues,\r\n    loading,\r\n    form,\r\n    onValuesChange,\r\n  } = props;\r\n  const columns = formColumns || 1;\r\n  \r\n  const handleCancel = () => {\r\n    // Support both old and new cancel handlers\r\n    if (onCancel) {\r\n      onCancel();\r\n    } else if (onChildCancel) {\r\n      onChildCancel(false);\r\n    }\r\n    form?.resetFields();\r\n  };\r\n  \r\n  const onFinish = (values) => {\r\n    // Support both old FormValue and new onSubmit\r\n    if (onSubmit) {\r\n      onSubmit(values);\r\n    } else if (FormValue) {\r\n      FormValue(values);\r\n    }\r\n    form?.resetFields();\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      form?.setFieldsValue(initialValues);\r\n    }\r\n  }, [initialValues, form]);\r\n  \r\n  return (\r\n    <div style={{ position: \"relative\", height: \"100%\" }}>\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundRepeat: \"no-repeat\",\r\n          backgroundPosition: \"center\",\r\n          backgroundSize: \"600px 600px\",\r\n          opacity: 0.1,\r\n          zIndex: 0,\r\n        }}\r\n      />\r\n      <Form\r\n        form={form}\r\n        onFinish={onFinish}\r\n        layout=\"vertical\"\r\n        onValuesChange={onValuesChange}\r\n      >\r\n        <Row gutter={[16, 16]}>\r\n          {formItems?.map((item, index) => (\r\n            <Col span={24 / columns} key={index}>\r\n              {splitLabelAndField ? (\r\n                <div>\r\n                  <Typography.Text strong>\r\n                    {item.label}{\" \"}\r\n                    {item.rules?.some((rule) => rule.required) && (\r\n                      <Typography.Text type=\"danger\">*</Typography.Text>\r\n                    )}\r\n                  </Typography.Text>\r\n                  <Form.Item\r\n                    name={item.name}\r\n                    rules={item.rules}\r\n                    style={{ marginTop: \"8px\" }}\r\n                  >\r\n                    {item.component}\r\n                  </Form.Item>\r\n                </div>\r\n              ) : (\r\n                <Form.Item\r\n                  label={<Typography.Text strong>{item.label}</Typography.Text>}\r\n                  name={item.name}\r\n                  rules={item.rules}\r\n                  labelCol={{ span: labelCol }}\r\n                  wrapperCol={{ span: wrapperCol }}\r\n                >\r\n                  {item.component}\r\n                </Form.Item>\r\n              )}\r\n            </Col>\r\n          ))}\r\n\r\n          {nested && (\r\n            <Form.List name=\"nestedItems\">\r\n              {(fields, { add, remove }) => (\r\n                <>\r\n                  {fields.map(({ key, name, fieldKey, ...restField }) => (\r\n                    <Row gutter={[16, 16]} align=\"middle\" key={key}>\r\n                      {nestedInputs.map((input, idx) => (\r\n                        <Col key={idx}>\r\n                          <Form.Item\r\n                            {...restField}\r\n                            name={[name, input.name]}\r\n                            fieldKey={[fieldKey, input.name]}\r\n                            rules={[\r\n                              {\r\n                                required: true,\r\n                                message: `Missing ${input.label}`,\r\n                              },\r\n                            ]}\r\n                            label={input.label}\r\n                          >\r\n                            {input.component}\r\n                          </Form.Item>\r\n                        </Col>\r\n                      ))}\r\n                      <Col>\r\n                        <MinusCircleOutlined onClick={() => remove(name)} />\r\n                      </Col>\r\n                    </Row>\r\n                  ))}\r\n                  <Row justify=\"center\">\r\n                    <Col>\r\n                      <Button\r\n                        type=\"primary\"\r\n                        onClick={() => add()}\r\n                        icon={<PlusOutlined />}\r\n                      >\r\n                        Add More Field\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </>\r\n              )}\r\n            </Form.List>\r\n          )}\r\n        </Row>\r\n\r\n        <Row justify=\"end\" gutter={[16, 16]} style={{padding: \"16px\"}}>\r\n          <Col>\r\n            <Button onClick={handleCancel}>Cancel</Button>\r\n          </Col>\r\n          <Col>\r\n            <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n              Submit\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AntdForm;\r\n","import React from 'react';\r\nimport {\r\n  Input,\r\n  InputNumber,\r\n  Select,\r\n  Switch,\r\n  DatePicker,\r\n  Checkbox,\r\n  Radio,\r\n} from 'antd';\r\nimport type { Rule } from 'antd/es/form';\r\nimport { CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { FieldMetadata } from '../hooks/useFieldMetadata';\r\n\r\nconst { TextArea } = Input;\r\n\r\n/**\r\n * Field type option for dropdown\r\n */\r\nexport interface FieldTypeOption {\r\n  label: string;\r\n  value: string;\r\n  category?: 'text' | 'number' | 'choice' | 'date' | 'other';\r\n}\r\n\r\n/**\r\n * Get field type options for dropdown (categorized)\r\n */\r\nexport const FIELD_TYPE_OPTIONS: FieldTypeOption[] = [\r\n  // Text inputs\r\n  { label: 'Text', value: 'text', category: 'text' },\r\n  { label: 'Text Area', value: 'textarea', category: 'text' },\r\n  { label: 'Email', value: 'email', category: 'text' },\r\n  { label: 'Phone', value: 'phone', category: 'text' },\r\n  { label: 'URL', value: 'url', category: 'text' },\r\n  { label: 'Password', value: 'password', category: 'text' },\r\n  \r\n  // Numbers\r\n  { label: 'Number (Integer)', value: 'number', category: 'number' },\r\n  { label: 'Decimal', value: 'decimal', category: 'number' },\r\n  \r\n  // Choices\r\n  { label: 'Boolean (Yes/No)', value: 'boolean', category: 'choice' },\r\n  { label: 'Checkbox', value: 'checkbox', category: 'choice' },\r\n  { label: 'Select (Dropdown)', value: 'select', category: 'choice' },\r\n  { label: 'Multi-Select', value: 'multiselect', category: 'choice' },\r\n  { label: 'Radio Buttons', value: 'radio', category: 'choice' },\r\n  \r\n  // Date/Time\r\n  { label: 'Date', value: 'date', category: 'date' },\r\n  { label: 'DateTime', value: 'datetime', category: 'date' },\r\n];\r\n\r\n/**\r\n * Get field type category\r\n */\r\nexport const getFieldTypeCategory = (fieldType: string): string => {\r\n  const option = FIELD_TYPE_OPTIONS.find(opt => opt.value === fieldType);\r\n  return option?.category || 'other';\r\n};\r\n\r\n/**\r\n * Build validation rules from field metadata\r\n */\r\nconst buildValidationRules = (metadata: FieldMetadata): Rule[] => {\r\n  const { label, is_required, validation_rules, field_type } = metadata;\r\n  const rules: Rule[] = [];\r\n\r\n  // Required validation\r\n  if (is_required) {\r\n    rules.push({\r\n      required: true,\r\n      message: `Please enter ${label.toLowerCase()}`,\r\n    });\r\n  }\r\n\r\n  // Email validation\r\n  if (field_type === 'email' || validation_rules?.email) {\r\n    rules.push({\r\n      type: 'email',\r\n      message: 'Please enter a valid email address',\r\n    });\r\n  }\r\n\r\n  // URL validation\r\n  if (field_type === 'url') {\r\n    rules.push({\r\n      type: 'url',\r\n      message: 'Please enter a valid URL',\r\n    });\r\n  }\r\n\r\n  // Min/Max validation for numbers\r\n  if (validation_rules?.min !== undefined) {\r\n    rules.push({\r\n      type: 'number',\r\n      min: validation_rules.min,\r\n      message: `Minimum value is ${validation_rules.min}`,\r\n    });\r\n  }\r\n\r\n  if (validation_rules?.max !== undefined) {\r\n    rules.push({\r\n      type: 'number',\r\n      max: validation_rules.max,\r\n      message: `Maximum value is ${validation_rules.max}`,\r\n    });\r\n  }\r\n\r\n  // Pattern validation\r\n  if (validation_rules?.pattern) {\r\n    rules.push({\r\n      pattern: new RegExp(validation_rules.pattern),\r\n      message: validation_rules.patternMessage || 'Invalid format',\r\n    });\r\n  }\r\n\r\n  return rules;\r\n};\r\n\r\n/**\r\n * Generate form component based on field type\r\n */\r\nconst generateComponent = (\r\n  metadata: FieldMetadata\r\n): { component: React.ReactNode; valuePropName?: string } => {\r\n  const { field_type, label, placeholder, validation_rules } = metadata;\r\n  const placeholderText = placeholder || `Enter ${label.toLowerCase()}`;\r\n\r\n  // Parse options if available\r\n  const options: string[] = Array.isArray(validation_rules?.options)\r\n    ? validation_rules.options\r\n    : [];\r\n\r\n  let component: React.ReactNode;\r\n  let valuePropName: string | undefined;\r\n\r\n  switch (field_type.toLowerCase()) {\r\n    // Text inputs\r\n    case 'text':\r\n    case 'string':\r\n      component = <Input placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'textarea':\r\n      component = <TextArea rows={4} placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'email':\r\n      component = <Input type=\"email\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'phone':\r\n    case 'tel':\r\n      component = <Input type=\"tel\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'url':\r\n      component = <Input type=\"url\" placeholder={placeholderText} />;\r\n      break;\r\n\r\n    case 'password':\r\n      component = <Input.Password placeholder={placeholderText} />;\r\n      break;\r\n\r\n    // Numbers\r\n    case 'number':\r\n    case 'integer':\r\n      component = (\r\n        <InputNumber\r\n          placeholder={placeholderText}\r\n          style={{ width: '100%' }}\r\n          min={validation_rules?.min}\r\n          max={validation_rules?.max}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'decimal':\r\n    case 'float':\r\n      component = (\r\n        <InputNumber\r\n          placeholder={placeholderText}\r\n          style={{ width: '100%' }}\r\n          min={validation_rules?.min}\r\n          max={validation_rules?.max}\r\n          step={0.01}\r\n          precision={2}\r\n        />\r\n      );\r\n      break;\r\n\r\n    // Boolean/Choice\r\n    case 'boolean':\r\n    case 'switch':\r\n      component = (\r\n        <Switch checkedChildren=\"Yes\" unCheckedChildren=\"No\" defaultChecked={false} />\r\n      );\r\n      valuePropName = 'checked';\r\n      break;\r\n\r\n    case 'checkbox':\r\n      component = <Checkbox>{label}</Checkbox>;\r\n      valuePropName = 'checked';\r\n      break;\r\n\r\n    case 'select':\r\n    case 'dropdown':\r\n      component = (\r\n        <Select\r\n          placeholder={placeholderText}\r\n          allowClear\r\n          showSearch\r\n          optionFilterProp=\"children\"\r\n          options={options.map(opt => ({ label: opt, value: opt }))}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'multiselect':\r\n      component = (\r\n        <Select\r\n          mode=\"multiple\"\r\n          placeholder={placeholderText}\r\n          allowClear\r\n          showSearch\r\n          optionFilterProp=\"children\"\r\n          options={options.map(opt => ({ label: opt, value: opt }))}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'radio':\r\n      component = (\r\n        <Radio.Group>\r\n          {options.map((option) => (\r\n            <Radio key={option} value={option}>\r\n              {option}\r\n            </Radio>\r\n          ))}\r\n        </Radio.Group>\r\n      );\r\n      break;\r\n\r\n    // Date/Time\r\n    case 'date':\r\n      component = (\r\n        <DatePicker\r\n          style={{ width: '100%' }}\r\n          format=\"YYYY-MM-DD\"\r\n          placeholder={placeholderText}\r\n        />\r\n      );\r\n      break;\r\n\r\n    case 'datetime':\r\n      component = (\r\n        <DatePicker\r\n          showTime\r\n          style={{ width: '100%' }}\r\n          format=\"YYYY-MM-DD HH:mm:ss\"\r\n          placeholder={placeholderText}\r\n        />\r\n      );\r\n      break;\r\n\r\n    // Default fallback\r\n    default:\r\n      component = <Input placeholder={placeholderText} />;\r\n  }\r\n\r\n  return { component, valuePropName };\r\n};\r\n\r\n/**\r\n * Generate an Ant Design form item configuration from field metadata\r\n * @param metadata Field metadata configuration\r\n * @returns CrudFormItem for use in forms\r\n */\r\nexport const generateFormItemFromMetadata = (\r\n  metadata: FieldMetadata\r\n): CrudFormItem => {\r\n  const { field_name, label } = metadata;\r\n\r\n  // Build validation rules\r\n  const rules = buildValidationRules(metadata);\r\n\r\n  // Generate component\r\n  const { component, valuePropName } = generateComponent(metadata);\r\n\r\n  // Build form item\r\n  const formItem: CrudFormItem = {\r\n    label,\r\n    name: field_name,\r\n    rules,\r\n    component,\r\n  };\r\n\r\n  // Add valuePropName if needed (for checkbox, switch, etc.)\r\n  if (valuePropName) {\r\n    formItem.valuePropName = valuePropName;\r\n  }\r\n\r\n  return formItem;\r\n};\r\n\r\n/**\r\n * Validate field metadata before saving\r\n * @param metadata Partial field metadata to validate\r\n * @returns Array of error messages (empty if valid)\r\n */\r\nexport const validateFieldMetadata = (metadata: Partial<FieldMetadata>): string[] => {\r\n  const errors: string[] = [];\r\n\r\n  // Required fields\r\n  if (!metadata.entity_name?.trim()) {\r\n    errors.push('Entity name is required');\r\n  }\r\n\r\n  if (!metadata.field_name?.trim()) {\r\n    errors.push('Field name is required');\r\n  } else {\r\n    // Field name format validation\r\n    if (!/^[a-z_][a-z0-9_]*$/i.test(metadata.field_name)) {\r\n      errors.push(\r\n        'Field name must start with a letter and contain only letters, numbers, and underscores'\r\n      );\r\n    }\r\n  }\r\n\r\n  if (!metadata.field_type?.trim()) {\r\n    errors.push('Field type is required');\r\n  }\r\n\r\n  if (!metadata.label?.trim()) {\r\n    errors.push('Label is required');\r\n  }\r\n\r\n  // Validate options for select/radio/multiselect fields\r\n  const needsOptions = ['select', 'multiselect', 'radio'].includes(\r\n    metadata.field_type || ''\r\n  );\r\n  \r\n  if (needsOptions) {\r\n    const options = metadata.validation_rules?.options;\r\n    if (!options || !Array.isArray(options) || options.length === 0) {\r\n      errors.push(`${metadata.field_type} fields must have at least one option`);\r\n    }\r\n  }\r\n\r\n  // Validate min/max for number fields\r\n  const isNumberField = ['number', 'integer', 'decimal', 'float'].includes(\r\n    metadata.field_type || ''\r\n  );\r\n  \r\n  if (isNumberField && metadata.validation_rules) {\r\n    const { min, max } = metadata.validation_rules;\r\n    if (min !== undefined && max !== undefined && min > max) {\r\n      errors.push('Minimum value cannot be greater than maximum value');\r\n    }\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\n/**\r\n * Check if a field type requires options\r\n */\r\nexport const fieldTypeNeedsOptions = (fieldType: string): boolean => {\r\n  return ['select', 'multiselect', 'radio'].includes(fieldType);\r\n};\r\n\r\n/**\r\n * Check if a field type is numeric\r\n */\r\nexport const isNumericFieldType = (fieldType: string): boolean => {\r\n  return ['number', 'integer', 'decimal', 'float'].includes(fieldType);\r\n};\r\n\r\n/**\r\n * Get default placeholder for a field type\r\n */\r\nexport const getDefaultPlaceholder = (fieldType: string, label: string): string => {\r\n  const lowerLabel = label.toLowerCase();\r\n  \r\n  switch (fieldType) {\r\n    case 'select':\r\n    case 'dropdown':\r\n      return `Select ${lowerLabel}`;\r\n    case 'multiselect':\r\n      return `Select multiple ${lowerLabel}`;\r\n    case 'date':\r\n    case 'datetime':\r\n      return `Select ${lowerLabel}`;\r\n    case 'email':\r\n      return 'Enter email address';\r\n    case 'phone':\r\n    case 'tel':\r\n      return 'Enter phone number';\r\n    case 'url':\r\n      return 'Enter URL';\r\n    case 'password':\r\n      return 'Enter password';\r\n    default:\r\n      return `Enter ${lowerLabel}`;\r\n  }\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport {\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Switch,\r\n  InputNumber,\r\n  Divider,\r\n  Row,\r\n  Col,\r\n} from 'antd';\r\nimport { FIELD_TYPE_OPTIONS } from '../../helpers/fieldMetadataUtils';\r\nimport { FieldFormProps } from './types';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst FieldForm: React.FC<FieldFormProps> = React.memo(({\r\n  form,\r\n  editingField,\r\n  optionsText,\r\n  onOptionsChange,\r\n}) => {\r\n  const selectedFieldType = Form.useWatch('field_type', form);\r\n  \r\n  const needsOptions = useMemo(\r\n    () => ['select', 'multiselect', 'radio'].includes(selectedFieldType),\r\n    [selectedFieldType]\r\n  );\r\n  \r\n  const needsNumberValidation = useMemo(\r\n    () => ['number', 'integer', 'decimal'].includes(selectedFieldType),\r\n    [selectedFieldType]\r\n  );\r\n\r\n  return (\r\n    <Form\r\n      form={form}\r\n      layout=\"vertical\"\r\n      initialValues={{\r\n        is_required: false,\r\n        is_active: true,\r\n        is_global: false,\r\n        display_order: 0,\r\n      }}\r\n    >\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Entity Name\"\r\n            name=\"entity_name\"\r\n            rules={[{ required: true, message: 'Please enter entity name' }]}\r\n          >\r\n            <Input disabled={!!editingField} placeholder=\"e.g., products, customers\" />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Field Name\"\r\n            name=\"field_name\"\r\n            rules={[\r\n              { required: true, message: 'Please enter field name' },\r\n              {\r\n                pattern: /^[a-z_][a-z0-9_]*$/i,\r\n                message: 'Must start with a letter, only letters, numbers, underscores',\r\n              },\r\n            ]}\r\n            extra=\"Use lowercase with underscores (e.g., custom_field_1)\"\r\n          >\r\n            <Input placeholder=\"e.g., custom_field_1\" disabled={!!editingField} />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Field Type\"\r\n            name=\"field_type\"\r\n            rules={[{ required: true, message: 'Please select field type' }]}\r\n          >\r\n            <Select placeholder=\"Select field type\" options={FIELD_TYPE_OPTIONS} />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Label\"\r\n            name=\"label\"\r\n            rules={[{ required: true, message: 'Please enter label' }]}\r\n          >\r\n            <Input placeholder=\"Field label shown to users\" />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Form.Item label=\"Placeholder\" name=\"placeholder\">\r\n        <Input placeholder=\"Placeholder text (optional)\" />\r\n      </Form.Item>\r\n\r\n      {needsOptions && (\r\n        <>\r\n          <Divider>Options Configuration</Divider>\r\n          <Form.Item\r\n            label=\"Options (one per line)\"\r\n            extra=\"Enter each option on a new line\"\r\n            required\r\n          >\r\n            <TextArea\r\n              rows={4}\r\n              value={optionsText}\r\n              onChange={(e) => onOptionsChange(e.target.value)}\r\n              placeholder=\"Option 1&#10;Option 2&#10;Option 3\"\r\n            />\r\n          </Form.Item>\r\n        </>\r\n      )}\r\n\r\n      {needsNumberValidation && (\r\n        <>\r\n          <Divider>Number Validation</Divider>\r\n          <Row gutter={16}>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Min Value\" name=\"min\">\r\n                <InputNumber placeholder=\"Min\" style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n            <Col span={12}>\r\n              <Form.Item label=\"Max Value\" name=\"max\">\r\n                <InputNumber placeholder=\"Max\" style={{ width: '100%' }} />\r\n              </Form.Item>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n\r\n      <Divider>Display Settings</Divider>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={12}>\r\n          <Form.Item\r\n            label=\"Display Order\"\r\n            name=\"display_order\"\r\n            extra=\"Lower numbers appear first\"\r\n          >\r\n            <InputNumber min={0} style={{ width: '100%' }} />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item label=\"Business Type\" name=\"business_type\">\r\n            <Input placeholder=\"Business type (optional)\" />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row gutter={16}>\r\n        <Col span={8}>\r\n          <Form.Item\r\n            label=\"Required Field\"\r\n            name=\"is_required\"\r\n            valuePropName=\"checked\"\r\n          >\r\n            <Switch />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Form.Item label=\"Active\" name=\"is_active\" valuePropName=\"checked\">\r\n            <Switch defaultChecked />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={8}>\r\n          <Form.Item label=\"Global Field\" name=\"is_global\" valuePropName=\"checked\">\r\n            <Switch />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n});\r\n\r\nFieldForm.displayName = 'FieldForm';\r\n\r\nexport default FieldForm;\r\n\r\n","import React, { useMemo } from 'react';\r\nimport { Button, Table, Space, Popconfirm, Tag } from 'antd';\r\nimport type { ColumnsType } from 'antd/es/table';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { FieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport { FIELD_TYPE_OPTIONS } from '../../helpers/fieldMetadataUtils';\r\nimport { FieldsTableProps } from './types';\r\n\r\nconst FieldsTable: React.FC<FieldsTableProps> = ({\r\n  data,\r\n  loading,\r\n  deleteLoading,\r\n  onEdit,\r\n  onDelete,\r\n}) => {\r\n  const columns: ColumnsType<FieldMetadata> = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Label',\r\n        dataIndex: 'label',\r\n        key: 'label',\r\n        sorter: (a, b) => a.label.localeCompare(b.label),\r\n      },\r\n      {\r\n        title: 'Field Name',\r\n        dataIndex: 'field_name',\r\n        key: 'field_name',\r\n        render: (text: string) => <Tag color=\"blue\">{text}</Tag>,\r\n      },\r\n      {\r\n        title: 'Type',\r\n        dataIndex: 'field_type',\r\n        key: 'field_type',\r\n        render: (text: string) => <Tag color=\"cyan\">{text}</Tag>,\r\n        filters: FIELD_TYPE_OPTIONS.map(opt => ({ text: opt.label, value: opt.value })),\r\n        onFilter: (value, record) => record.field_type === value,\r\n      },\r\n      {\r\n        title: 'Required',\r\n        dataIndex: 'is_required',\r\n        key: 'is_required',\r\n        render: (value: boolean) => (\r\n          <Tag color={value ? 'red' : 'default'}>{value ? 'Yes' : 'No'}</Tag>\r\n        ),\r\n        filters: [\r\n          { text: 'Required', value: true },\r\n          { text: 'Optional', value: false },\r\n        ],\r\n        onFilter: (value, record) => record.is_required === value,\r\n      },\r\n      {\r\n        title: 'Active',\r\n        dataIndex: 'is_active',\r\n        key: 'is_active',\r\n        render: (value: boolean) => (\r\n          <Tag color={value ? 'green' : 'default'}>{value ? 'Yes' : 'No'}</Tag>\r\n        ),\r\n        filters: [\r\n          { text: 'Active', value: true },\r\n          { text: 'Inactive', value: false },\r\n        ],\r\n        onFilter: (value, record) => record.is_active === value,\r\n      },\r\n      {\r\n        title: 'Order',\r\n        dataIndex: 'display_order',\r\n        key: 'display_order',\r\n        sorter: (a, b) => a.display_order - b.display_order,\r\n        width: 80,\r\n      },\r\n      {\r\n        title: 'Actions',\r\n        key: 'actions',\r\n        width: 120,\r\n        fixed: 'right',\r\n        render: (_: any, record: FieldMetadata) => (\r\n          <Space>\r\n            <Button\r\n              type=\"link\"\r\n              size=\"small\"\r\n              icon={<EditOutlined />}\r\n              onClick={() => onEdit(record)}\r\n            />\r\n            <Popconfirm\r\n              title=\"Delete this field?\"\r\n              description=\"This action cannot be undone.\"\r\n              onConfirm={() => onDelete(record._id)}\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              okButtonProps={{ danger: true }}\r\n            >\r\n              <Button\r\n                type=\"link\"\r\n                size=\"small\"\r\n                danger\r\n                icon={<DeleteOutlined />}\r\n                loading={deleteLoading}\r\n              />\r\n            </Popconfirm>\r\n          </Space>\r\n        ),\r\n      },\r\n    ],\r\n    [onEdit, onDelete, deleteLoading]\r\n  );\r\n\r\n  return (\r\n    <Table\r\n      dataSource={data}\r\n      columns={columns}\r\n      loading={loading}\r\n      rowKey=\"_id\"\r\n      pagination={{ pageSize: 10, showSizeChanger: true }}\r\n      size=\"middle\"\r\n      scroll={{ x: 900 }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(FieldsTable);\r\n\r\n","import { useCallback, useEffect, useMemo } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { dynamic_request, useDynamicSelector, dynamic_clear } from '../../../services/redux';\r\nimport { FieldMetadata } from '../../../hooks/useFieldMetadata';\r\nimport { validateFieldMetadata } from '../../../helpers/fieldMetadataUtils';\r\nimport { showToast } from '../../../helpers/Common_functions';\r\nimport { getEntityApiRoutes } from '../../../helpers/CrudFactory';\r\nimport {\r\n  UseFieldMetadataOperationsProps,\r\n  UseFieldMetadataOperationsReturn,\r\n} from '../types';\r\n\r\nexport const useFieldMetadataOperations = ({\r\n  entityName,\r\n  businessType,\r\n  tenantId,\r\n  organisationId,\r\n  onFieldsUpdated,\r\n}: UseFieldMetadataOperationsProps): UseFieldMetadataOperationsReturn => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Get API routes using the generic helper (memoized)\r\n  const apiRoutes = useMemo(() => getEntityApiRoutes('FieldMetadata'), []);\r\n\r\n  // Redux selectors using the identifiers from API routes\r\n  const { items: fieldsResponse, loading: fieldsLoading } = useDynamicSelector(\r\n    apiRoutes.get.identifier\r\n  );\r\n  const { items: createResponse, loading: createLoading } = useDynamicSelector(\r\n    apiRoutes.create.identifier\r\n  );\r\n  const { items: updateResponse, loading: updateLoading } = useDynamicSelector(\r\n    apiRoutes.update.identifier\r\n  );\r\n  const { items: deleteResponse, loading: deleteLoading } = useDynamicSelector(\r\n    apiRoutes.delete.identifier\r\n  );\r\n\r\n  // Fetch field metadata\r\n  const fetchFields = useCallback(() => {\r\n    dispatch(\r\n      dynamic_request(\r\n        {\r\n          method: apiRoutes.get.method,\r\n          endpoint: apiRoutes.get.endpoint,\r\n          data: {\r\n            entity_name: entityName,\r\n            is_active: undefined, // Get all fields (active and inactive)\r\n          },\r\n        },\r\n        apiRoutes.get.identifier\r\n      ) as any\r\n    );\r\n  }, [dispatch, entityName, apiRoutes.get]);\r\n\r\n  // Combined success handler for create/update/delete\r\n  useEffect(() => {\r\n    const handleSuccess = (\r\n      response: any,\r\n      action: 'created' | 'updated' | 'deleted',\r\n      identifier: string\r\n    ) => {\r\n      if (response?.statusCode === 200) {\r\n        showToast('success', `Field ${action} successfully`);\r\n        // Only fetch fields for the modal view\r\n        fetchFields();\r\n        // Clear the request state\r\n        dispatch(dynamic_clear(identifier) as any);\r\n      }\r\n    };\r\n\r\n    handleSuccess(createResponse, 'created', apiRoutes.create.identifier);\r\n    handleSuccess(updateResponse, 'updated', apiRoutes.update.identifier);\r\n    handleSuccess(deleteResponse, 'deleted', apiRoutes.delete.identifier);\r\n  }, [\r\n    createResponse,\r\n    updateResponse,\r\n    deleteResponse,\r\n    fetchFields,\r\n    dispatch,\r\n    apiRoutes.create.identifier,\r\n    apiRoutes.update.identifier,\r\n    apiRoutes.delete.identifier,\r\n  ]);\r\n\r\n  // Submit field (create or update)\r\n  const handleSubmitField = useCallback(\r\n    async (values: any, optionsText: string, editingField: FieldMetadata | null) => {\r\n      // Build validation rules\r\n      const validationRules: any = {};\r\n      const fieldType = values.field_type;\r\n\r\n      // Handle options for select/radio fields\r\n      if (['select', 'multiselect', 'radio'].includes(fieldType)) {\r\n        const options = optionsText\r\n          .split('\\n')\r\n          .map((opt) => opt.trim())\r\n          .filter((opt) => opt.length > 0);\r\n\r\n        if (options.length === 0) {\r\n          showToast('error', 'Please provide at least one option');\r\n          return;\r\n        }\r\n        validationRules.options = options;\r\n      }\r\n\r\n      // Add number validation rules\r\n      if (values.min !== undefined && values.min !== null) {\r\n        validationRules.min = values.min;\r\n      }\r\n      if (values.max !== undefined && values.max !== null) {\r\n        validationRules.max = values.max;\r\n      }\r\n\r\n      // Build payload\r\n      const payload: any = {\r\n        entity_name: values.entity_name,\r\n        field_name: values.field_name,\r\n        business_type: values.business_type || businessType,\r\n        field_type: values.field_type,\r\n        label: values.label,\r\n        placeholder: values.placeholder,\r\n        is_required: values.is_required || false,\r\n        validation_rules: validationRules,\r\n        display_order: values.display_order || 0,\r\n        is_active: values.is_active !== false,\r\n        is_global: values.is_global || false,\r\n      };\r\n\r\n      if (tenantId) payload.tenant_id = tenantId;\r\n      if (organisationId) payload.organisation_id = organisationId;\r\n\r\n      // Validate before submission\r\n      const errors = validateFieldMetadata(payload);\r\n      if (errors.length > 0) {\r\n        showToast('error', errors[0]); // Show first error\r\n        return;\r\n      }\r\n\r\n      // Submit\r\n      const requestConfig = editingField\r\n        ? {\r\n            method: apiRoutes.update.method,\r\n            endpoint: `${apiRoutes.update.endpoint}/${editingField._id}`,\r\n            data: payload,\r\n          }\r\n        : {\r\n            method: apiRoutes.create.method,\r\n            endpoint: apiRoutes.create.endpoint,\r\n            data: payload,\r\n          };\r\n\r\n      dispatch(\r\n        dynamic_request(\r\n          requestConfig,\r\n          editingField ? apiRoutes.update.identifier : apiRoutes.create.identifier\r\n        ) as any\r\n      );\r\n    },\r\n    [businessType, tenantId, organisationId, apiRoutes, dispatch]\r\n  );\r\n\r\n  // Delete field\r\n  const handleDeleteField = useCallback(\r\n    (fieldId: string) => {\r\n      dispatch(\r\n        dynamic_request(\r\n          {\r\n            method: apiRoutes.delete.method,\r\n            endpoint: `${apiRoutes.delete.endpoint}/${fieldId}`,\r\n            data: { _id: fieldId },\r\n          },\r\n          apiRoutes.delete.identifier\r\n        ) as any\r\n      );\r\n    },\r\n    [dispatch, apiRoutes.delete]\r\n  );\r\n\r\n  // Memoized fields data\r\n  const fieldsData = useMemo(\r\n    () => fieldsResponse?.result || [],\r\n    [fieldsResponse?.result]\r\n  );\r\n\r\n  return {\r\n    fieldsData,\r\n    fieldsLoading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    fetchFields,\r\n    handleSubmitField,\r\n    handleDeleteField,\r\n  };\r\n};\r\n\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { Modal, Form, Button, Space, Alert } from 'antd';\r\nimport { PlusOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport { FieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport FieldForm from './FieldForm';\r\nimport FieldsTable from './FieldsTable';\r\nimport { useFieldMetadataOperations } from './hooks/useFieldMetadataOperations';\r\nimport { FieldMetadataManagerProps } from './types';\r\n\r\nconst FieldMetadataManager: React.FC<FieldMetadataManagerProps> = ({\r\n  entityName,\r\n  businessType = '',\r\n  tenantId,\r\n  organisationId,\r\n  onFieldsUpdated,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [fieldModalVisible, setFieldModalVisible] = useState(false);\r\n  const [editingField, setEditingField] = useState<FieldMetadata | null>(null);\r\n  const [optionsText, setOptionsText] = useState('');\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  // Use custom hook for operations\r\n  const {\r\n    fieldsData,\r\n    fieldsLoading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    fetchFields,\r\n    handleSubmitField,\r\n    handleDeleteField,\r\n  } = useFieldMetadataOperations({\r\n    entityName,\r\n    businessType,\r\n    tenantId,\r\n    organisationId,\r\n    onFieldsUpdated,\r\n  });\r\n\r\n  // Fetch on modal open\r\n  useEffect(() => {\r\n    if (modalVisible) {\r\n      fetchFields();\r\n    }\r\n  }, [modalVisible, fetchFields]);\r\n\r\n  const handleOpenFieldModal = useCallback(\r\n    (field?: FieldMetadata) => {\r\n      if (field) {\r\n        setEditingField(field);\r\n        const options = field.validation_rules?.options || [];\r\n        setOptionsText(options.join('\\n'));\r\n        form.setFieldsValue({\r\n          ...field,\r\n          min: field.validation_rules?.min,\r\n          max: field.validation_rules?.max,\r\n        });\r\n      } else {\r\n        setEditingField(null);\r\n        setOptionsText('');\r\n        form.resetFields();\r\n        form.setFieldsValue({\r\n          entity_name: entityName,\r\n          business_type: businessType,\r\n          is_required: false,\r\n          is_active: true,\r\n          is_global: false,\r\n          display_order: (fieldsData.length || 0) + 1,\r\n        });\r\n      }\r\n      setFieldModalVisible(true);\r\n    },\r\n    [form, entityName, businessType, fieldsData.length]\r\n  );\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      await handleSubmitField(values, optionsText, editingField);\r\n      \r\n      // Mark that changes were made\r\n      setHasChanges(true);\r\n      \r\n      // Close modal and reset form on success\r\n      setFieldModalVisible(false);\r\n      setEditingField(null);\r\n      form.resetFields();\r\n      setOptionsText('');\r\n    } catch (error) {\r\n      console.error('Form validation failed:', error);\r\n    }\r\n  }, [form, optionsText, editingField, handleSubmitField]);\r\n\r\n  const confirmLoading = createLoading || updateLoading;\r\n\r\n  // Handle modal close - notify parent if there were changes\r\n  const handleModalClose = useCallback(() => {\r\n    setModalVisible(false);\r\n    if (hasChanges && onFieldsUpdated) {\r\n      // Notify parent component to refresh its form items\r\n      onFieldsUpdated();\r\n      setHasChanges(false);\r\n    }\r\n  }, [hasChanges, onFieldsUpdated]);\r\n\r\n  // Wrap delete handler to track changes\r\n  const handleDelete = useCallback((fieldId: string) => {\r\n    handleDeleteField(fieldId);\r\n    setHasChanges(true);\r\n  }, [handleDeleteField]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        icon={<SettingOutlined />}\r\n        onClick={() => setModalVisible(true)}\r\n        type=\"default\"\r\n      >\r\n        Manage Fields\r\n      </Button>\r\n\r\n      {/* Fields List Modal */}\r\n      <Modal\r\n        title={`Manage Fields - ${entityName}`}\r\n        open={modalVisible}\r\n        onCancel={handleModalClose}\r\n        width={1000}\r\n        footer={[\r\n          <Button key=\"close\" onClick={handleModalClose}>\r\n            Close\r\n          </Button>,\r\n        ]}\r\n        destroyOnClose\r\n      >\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\r\n          <Alert\r\n            message=\"Dynamic Fields\"\r\n            description=\"Add custom fields to this entity. These fields will be automatically added to the form.\"\r\n            type=\"info\"\r\n            showIcon\r\n          />\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<PlusOutlined />}\r\n              onClick={() => handleOpenFieldModal()}\r\n            >\r\n              Add New Field\r\n            </Button>\r\n          </div>\r\n\r\n          <FieldsTable\r\n            data={fieldsData}\r\n            loading={fieldsLoading}\r\n            deleteLoading={deleteLoading}\r\n            onEdit={handleOpenFieldModal}\r\n            onDelete={handleDelete}\r\n          />\r\n        </Space>\r\n      </Modal>\r\n\r\n      {/* Field Edit/Create Modal */}\r\n      <Modal\r\n        title={editingField ? 'Edit Field' : 'Add New Field'}\r\n        open={fieldModalVisible}\r\n        onOk={handleSubmit}\r\n        onCancel={() => {\r\n          setFieldModalVisible(false);\r\n          setEditingField(null);\r\n          form.resetFields();\r\n          setOptionsText('');\r\n        }}\r\n        width={700}\r\n        confirmLoading={confirmLoading}\r\n        destroyOnClose\r\n      >\r\n        <FieldForm\r\n          form={form}\r\n          editingField={editingField}\r\n          optionsText={optionsText}\r\n          onOptionsChange={setOptionsText}\r\n        />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(FieldMetadataManager);\r\n\r\n","import React, { useState, useMemo, useCallback, useEffect, useRef } from 'react';\r\nimport {\r\n  Button,\r\n  Row,\r\n  Input,\r\n  Tooltip,\r\n  Select,\r\n  DatePicker,\r\n  Space,\r\n  Col,\r\n  Popconfirm,\r\n} from 'antd';\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { useGenericCrud, CrudConfig } from '../../hooks/useGenericCrud';\r\nimport { BaseEntity } from '../../types/entities';\r\nimport GlobalDrawer from '../antd/GlobalDrawer';\r\nimport AntdForm from '../antd/form/form';\r\nimport GlobalTable from '../antd/GlobalTable';\r\nimport { useSuperAdminFilters } from '../../hooks/useSuperAdminFilters';\r\nimport { useFieldMetadata } from '../../hooks/useFieldMetadata';\r\nimport FieldMetadataManager from '../FieldMetadataManager';\r\n\r\n// Filter and Button Config Types\r\nexport type FilterConfig = {\r\n  key: string;\r\n  label: string;\r\n  type: 'input' | 'select' | 'date';\r\n  options?: { label: string; value: any }[]; // for select\r\n  placeholder?: string;\r\n  width?: string | number;\r\n  disabled?: boolean;\r\n  onChange?: (value: any) => void;\r\n};\r\n\r\nexport type CustomButtonConfig = {\r\n  key: string;\r\n  label: string;\r\n  type?: 'primary' | 'default' | 'dashed' | 'link' | 'text';\r\n  onClick: () => void;\r\n  icon?: React.ReactNode;\r\n};\r\n\r\n// Add type definitions for columns and formItems\r\nexport interface CrudColumn {\r\n  title: string;\r\n  dataIndex?: any;\r\n  key: string;\r\n  render?: (value: any, record: any) => React.ReactNode;\r\n}\r\n\r\nexport interface CrudFormItem {\r\n  label: string;\r\n  name: string;\r\n  rules?: any[];\r\n  component: React.ReactNode;\r\n  valuePropName?: string;\r\n}\r\n\r\ninterface GenericCrudPageProps<T extends BaseEntity> {\r\n  config: Omit<CrudConfig<T>, 'columns' | 'formItems'> & {\r\n    columns: CrudColumn[];\r\n    formItems: CrudFormItem[];\r\n    metadataFieldName?: string; // Field name for metadata (default: 'meta_data_values', can be 'custom_data')\r\n    canCreate?: () => boolean; // Permission check for create action\r\n  };\r\n  filters?: FilterConfig[];\r\n  onFilterChange?: (values: Record<string, any>) => void;\r\n  customButtons?: CustomButtonConfig[];\r\n  onValuesChange?: (changed: any, all: any) => void;\r\n  enableSuperAdminFilters?: boolean; // Enable tenant/org/branch dropdowns for superadmin\r\n  enableDynamicFields?: boolean; // Enable dynamic field metadata in form\r\n  showDynamicColumnsInTable?: boolean; // Show dynamic metadata columns in table (default: false for static CRUDs)\r\n  entityName?: string; // Entity name for dynamic fields (e.g., 'products', 'customers')\r\n}\r\n\r\n// Extract actions column to a helper\r\nfunction getActionsColumn(\r\n  title: string, \r\n  handleEdit: (record: any) => void, \r\n  handleDelete: (record: any) => void,\r\n  deleteLoading: boolean = false,\r\n  canEdit?: (record: any) => boolean,\r\n  canDelete?: (record: any) => boolean\r\n) {\r\n  return {\r\n    title: 'Actions',\r\n    key: 'actions',\r\n    render: (_: any, record: object) => {\r\n      const allowEdit = canEdit ? canEdit(record) : true;\r\n      const allowDelete = canDelete ? canDelete(record) : true;\r\n      \r\n      return (\r\n        <div style={{ \r\n          display: 'flex', \r\n          gap: '16px', \r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }}>\r\n          <Tooltip title={allowEdit ? `Edit ${title}` : 'No permission to edit'}>\r\n            <EditOutlined\r\n              style={{ \r\n                cursor: allowEdit ? 'pointer' : 'not-allowed', \r\n                color: allowEdit ? '#1890ff' : '#d9d9d9',\r\n                opacity: allowEdit ? 1 : 0.5,\r\n                fontSize: '16px',\r\n                padding: '4px'\r\n              }}\r\n              onClick={() => allowEdit && handleEdit(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title={allowDelete ? `Delete ${title}` : 'No permission to delete'}>\r\n            <Popconfirm\r\n              title={`Delete ${title}`}\r\n              description=\"Are you sure you want to delete this item?\"\r\n              onConfirm={() => handleDelete(record)}\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              disabled={deleteLoading || !allowDelete}\r\n            >\r\n              <DeleteOutlined\r\n                style={{ \r\n                  cursor: (deleteLoading || !allowDelete) ? 'not-allowed' : 'pointer', \r\n                  color: (deleteLoading || !allowDelete) ? '#d9d9d9' : '#ff4d4f',\r\n                  opacity: (deleteLoading || !allowDelete) ? 0.5 : 1,\r\n                  fontSize: '16px',\r\n                  padding: '4px'\r\n                }}\r\n              />\r\n            </Popconfirm>\r\n          </Tooltip>\r\n        </div>\r\n      );\r\n    },\r\n  };\r\n}\r\n\r\nconst GenericCrudPageComponent = <T extends BaseEntity>({\r\n  config,\r\n  filters = [],\r\n  onFilterChange,\r\n  customButtons = [],\r\n  onValuesChange,\r\n  enableSuperAdminFilters = true, // Enabled by default\r\n  enableDynamicFields = false,\r\n  showDynamicColumnsInTable = false, // Disabled by default for static CRUDs\r\n  entityName,\r\n}: GenericCrudPageProps<T>) => {\r\n  // SuperAdmin filters hook\r\n  const superAdminFilters = useSuperAdminFilters();\r\n  const isInitialMount = useRef(true);\r\n  \r\n  // Dynamic fields hook - fetch first to get field names\r\n  const {\r\n    formItems: mergedFormItems,\r\n    loading: metadataLoading,\r\n    refresh: refreshMetadata,\r\n    dynamicFields,\r\n  } = useFieldMetadata({\r\n    entityName: entityName || config.title.toLowerCase(),\r\n    staticFormItems: config.formItems,\r\n    enabled: enableDynamicFields,\r\n  });\r\n\r\n  // Extract dynamic field names for payload separation - memoized\r\n  const dynamicFieldNames = useMemo(\r\n    () => enableDynamicFields && dynamicFields ? dynamicFields.map((field) => field.field_name) : [],\r\n    [dynamicFields, enableDynamicFields]\r\n  );\r\n\r\n  // Memoize config with dynamic field names\r\n  const enhancedConfig = useMemo(\r\n    () => ({\r\n      ...config,\r\n      dynamicFieldNames: dynamicFieldNames.length > 0 ? dynamicFieldNames : undefined,\r\n    }),\r\n    [config, dynamicFieldNames]\r\n  );\r\n  \r\n  const {\r\n    loading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    items,\r\n    pagination,\r\n    drawerVisible,\r\n    initialValues,\r\n    form,\r\n    handleEdit,\r\n    handleDelete,\r\n    handleDrawerOpen,\r\n    resetForm,\r\n    handleSubmit,\r\n    handlePaginationChange,\r\n    columns,\r\n    formItems: staticFormItems,\r\n    formColumns = 2,\r\n    drawerWidth,\r\n    filterValues,\r\n    setFilterValues,\r\n  } = useGenericCrud(enhancedConfig);\r\n\r\n  // Use merged form items if dynamic fields are enabled\r\n  const formItems = enableDynamicFields ? mergedFormItems : staticFormItems;\r\n\r\n  // Generate dynamic columns from field metadata if enabled\r\n  const enhancedColumns = useMemo(() => {\r\n    // Only add dynamic columns to table if explicitly enabled\r\n    if (!showDynamicColumnsInTable || !enableDynamicFields || !dynamicFields || dynamicFields.length === 0) {\r\n      return columns;\r\n    }\r\n\r\n    // Import the column generation utility\r\n    const { generateColumnsFromMetadata } = require('../../helpers/columnUtils');\r\n    \r\n    // For normal forms (like Products), combine config.columns with dynamic fields\r\n    // For pure dynamic forms (like DynamicEntity), show only dynamic fields\r\n    const isPureDynamicForm = columns.length <= 3 && \r\n      columns.every((col: any) => ['_id', 'createdAt', 'updatedAt'].includes(col.key));\r\n    \r\n    if (isPureDynamicForm) {\r\n      // Pure dynamic form - show all dynamic fields only\r\n      const allFieldNames = dynamicFields.map(field => field.field_name);\r\n      return generateColumnsFromMetadata(dynamicFields, allFieldNames);\r\n    } else {\r\n      // Normal form - combine existing columns with dynamic fields\r\n      const dynamicFieldNames = dynamicFields.map(field => field.field_name);\r\n      const dynamicColumns = generateColumnsFromMetadata(dynamicFields, dynamicFieldNames);\r\n      \r\n      // Combine existing columns with dynamic columns\r\n      const existingKeys = columns.map((col: any) => col.key);\r\n      const newDynamicColumns = dynamicColumns.filter((col: any) => !existingKeys.includes(col.key));\r\n      \r\n      return [...columns, ...newDynamicColumns];\r\n    }\r\n  }, [columns, showDynamicColumnsInTable, enableDynamicFields, dynamicFields]);\r\n\r\n  const handleFilterChange = useCallback((key: string, value: any) => {\r\n    const newValues = { ...filterValues, [key]: value };\r\n    // Include superadmin filters if enabled\r\n    const allFilters = enableSuperAdminFilters \r\n      ? { ...newValues, ...superAdminFilters.getApiFilters() }\r\n      : newValues;\r\n    setFilterValues(allFilters);\r\n    if (onFilterChange) onFilterChange(allFilters);\r\n  }, [filterValues, setFilterValues, onFilterChange, enableSuperAdminFilters, superAdminFilters]);\r\n\r\n  // Apply superadmin filters whenever they change\r\n  useEffect(() => {\r\n    // Skip the initial mount to avoid duplicate API call\r\n    if (isInitialMount.current) {\r\n      isInitialMount.current = false;\r\n      return;\r\n    }\r\n    \r\n    if (enableSuperAdminFilters) {\r\n      const apiFilters = superAdminFilters.getApiFilters();\r\n      const newFilters = { ...filterValues, ...apiFilters };\r\n      setFilterValues(newFilters);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    superAdminFilters.selectedTenant,\r\n    superAdminFilters.selectedOrganisation,\r\n    superAdminFilters.selectedBranch,\r\n    enableSuperAdminFilters,\r\n  ]);\r\n\r\n  const tableColumns = useMemo(() => [\r\n    ...enhancedColumns,\r\n    getActionsColumn(config.title, handleEdit, handleDelete, deleteLoading, config.canEdit, config.canDelete)\r\n  ], [enhancedColumns, config.title, handleEdit, handleDelete, deleteLoading, config.canEdit, config.canDelete]);\r\n\r\n  return (\r\n    <div>\r\n      <Row\r\n        justify=\"end\"\r\n        align=\"bottom\"\r\n        gutter={[16, 16]}\r\n        style={{ marginBottom: 16 }}\r\n      >\r\n        {/* Title aligned left */}\r\n        <Col flex=\"auto\">\r\n          <h1 style={{ margin: 0 }}>{config.title}</h1>\r\n        </Col>\r\n\r\n        {/* Filters + Actions aligned right and bottom */}\r\n        <Col>\r\n          <Row gutter={[12, 12]} align=\"bottom\" justify=\"end\" wrap>\r\n            {/* SuperAdmin Filters */}\r\n            {enableSuperAdminFilters && superAdminFilters.isSuperAdmin && (\r\n              <Col>\r\n                <Select\r\n                  placeholder=\"Select Tenant\"\r\n                  value={superAdminFilters.selectedTenant}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleTenantChange(value);\r\n                    handleFilterChange('tenant_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.tenantsLoading}\r\n                  disabled={createLoading || updateLoading || deleteLoading}\r\n                >\r\n                  <Select.Option value=\"all\">All Tenants</Select.Option>\r\n                  {superAdminFilters.tenantOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n            \r\n            {enableSuperAdminFilters && (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) && !superAdminFilters.isOrganisationUser && !superAdminFilters.isBranchUser && (\r\n              <Col>\r\n                <Select\r\n                  placeholder={\r\n                    superAdminFilters.isSuperAdmin && superAdminFilters.selectedTenant === 'all'\r\n                      ? 'Select tenant first'\r\n                      : 'Select Organisation'\r\n                  }\r\n                  value={superAdminFilters.selectedOrganisation}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleOrganisationChange(value);\r\n                    handleFilterChange('organisation_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.organisationsLoading}\r\n                  disabled={\r\n                    (superAdminFilters.isSuperAdmin && superAdminFilters.selectedTenant === 'all') ||\r\n                    createLoading ||\r\n                    updateLoading ||\r\n                    deleteLoading\r\n                  }\r\n                >\r\n                  <Select.Option value=\"all\">All Organisations</Select.Option>\r\n                  {superAdminFilters.organisationOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n            \r\n            {enableSuperAdminFilters && (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant || superAdminFilters.isOrganisationUser) && !superAdminFilters.isBranchUser && (\r\n              <Col>\r\n                <Select\r\n                  placeholder={\r\n                    (superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) &&\r\n                    superAdminFilters.selectedOrganisation === 'all'\r\n                      ? 'Select organisation first'\r\n                      : 'Select Branch'\r\n                  }\r\n                  value={superAdminFilters.selectedBranch}\r\n                  onChange={(value) => {\r\n                    superAdminFilters.handleBranchChange(value);\r\n                    handleFilterChange('branch_id', value === 'all' ? undefined : value);\r\n                  }}\r\n                  allowClear\r\n                  style={{ width: 200 }}\r\n                  loading={superAdminFilters.branchesLoading}\r\n                  disabled={\r\n                    ((superAdminFilters.isSuperAdmin || superAdminFilters.isTenant) &&\r\n                      superAdminFilters.selectedOrganisation === 'all') ||\r\n                    createLoading ||\r\n                    updateLoading ||\r\n                    deleteLoading\r\n                  }\r\n                >\r\n                  <Select.Option value=\"all\">All Branches</Select.Option>\r\n                  {superAdminFilters.branchOptions.map(opt => (\r\n                    <Select.Option key={opt.value} value={opt.value}>\r\n                      {opt.label}\r\n                    </Select.Option>\r\n                  ))}\r\n                </Select>\r\n              </Col>\r\n            )}\r\n\r\n            {/* Filters */}\r\n            {filters.map(filter => (\r\n              <Col key={filter.key}>\r\n                {filter.type === 'input' && (\r\n                  <Input\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={filterValues[filter.key] || ''}\r\n                    onChange={e =>\r\n                      handleFilterChange(filter.key, e.target.value)\r\n                    }\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={createLoading || updateLoading || deleteLoading}\r\n                  />\r\n                )}\r\n                {filter.type === 'select' && (\r\n                  <Select\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={filterValues[filter.key]}\r\n                    onChange={val => {\r\n                      handleFilterChange(filter.key, val);\r\n                      if (filter.onChange) filter.onChange(val);\r\n                    }}\r\n                    allowClear\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={filter.disabled || createLoading || updateLoading || deleteLoading}\r\n                  >\r\n                    {filter.options?.map(opt => (\r\n                      <Select.Option key={opt.value} value={opt.value}>\r\n                        {opt.label}\r\n                      </Select.Option>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n                {filter.type === 'date' && (\r\n                  <DatePicker\r\n                    placeholder={filter.placeholder || filter.label}\r\n                    value={filterValues[filter.key]}\r\n                    onChange={date => handleFilterChange(filter.key, date)}\r\n                    style={{ width: filter.width || 200 }}\r\n                    disabled={createLoading || updateLoading || deleteLoading}\r\n                  />\r\n                )}\r\n              </Col>\r\n            ))}\r\n\r\n            {/* Search */}\r\n            <Col>\r\n              <Input\r\n                placeholder={`Search ${config.title}`}\r\n                value={filterValues['searchString'] || ''}\r\n                onChange={e => handleFilterChange('searchString', e.target.value)}\r\n                style={{ width: 200 }}\r\n                disabled={createLoading || updateLoading || deleteLoading}\r\n              />\r\n            </Col>\r\n\r\n            {/* Custom Buttons */}\r\n            {customButtons.map(btn => (\r\n              <Col key={btn.key}>\r\n                <Button\r\n                  type={btn.type || 'default'}\r\n                  onClick={btn.onClick}\r\n                  icon={btn.icon}\r\n                  disabled={createLoading || updateLoading || deleteLoading}\r\n                >\r\n                  {btn.label}\r\n                </Button>\r\n              </Col>\r\n            ))}\r\n\r\n            {/* Field Metadata Manager */}\r\n            {enableDynamicFields && (\r\n              <Col>\r\n                <FieldMetadataManager\r\n                  entityName={entityName || config.title.toLowerCase()}\r\n                  onFieldsUpdated={refreshMetadata}\r\n                />\r\n              </Col>\r\n            )}\r\n\r\n\r\n            {/* Add Button */}\r\n            {(() => {\r\n              const canCreateItem = config.canCreate ? config.canCreate() : true;\r\n              return canCreateItem ? (\r\n                <Col>\r\n                  <Tooltip title={!canCreateItem ? 'No permission to create' : ''}>\r\n                    <Button \r\n                      type=\"primary\" \r\n                      onClick={handleDrawerOpen}\r\n                      loading={createLoading}\r\n                      disabled={createLoading || !canCreateItem}\r\n                    >\r\n                      Add {config.title}\r\n                    </Button>\r\n                  </Tooltip>\r\n                </Col>\r\n              ) : null;\r\n            })()}\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n\r\n      <GlobalTable\r\n        columns={tableColumns}\r\n        data={items}\r\n        loading={loading || deleteLoading}\r\n        rowKeyField=\"_id\"\r\n        totalCount={pagination?.totalCount || 0}\r\n        pageLimit={pagination?.pageLimit || 10}\r\n        onPaginationChange={handlePaginationChange}\r\n      />\r\n\r\n      <GlobalDrawer\r\n        title={`${initialValues._id ? 'Edit' : 'Add'} ${config.title}`}\r\n        open={drawerVisible}\r\n        onClose={createLoading || updateLoading ? () => {} : resetForm}\r\n        width={drawerWidth}\r\n      >\r\n        <AntdForm\r\n          form={form}\r\n          formItems={formItems}\r\n          formColumns={formColumns}\r\n          initialValues={initialValues}\r\n          onSubmit={handleSubmit}\r\n          onCancel={resetForm}\r\n          onValuesChange={onValuesChange}\r\n          loading={createLoading || updateLoading}\r\n        />\r\n      </GlobalDrawer>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Memoize the component to prevent unnecessary re-renders\r\nexport const GenericCrudPage = React.memo(GenericCrudPageComponent) as typeof GenericCrudPageComponent;\r\n","import { useState, useEffect, useMemo, useCallback } from 'react';\r\nimport { useApiActions } from '../services/api/useApiActions';\r\nimport { useDynamicSelector } from '../services/redux';\r\nimport { getCurrentUser } from '../helpers/auth';\r\nimport SessionStorageEncryption from '../helpers/encryption';\r\n\r\nexport interface SuperAdminFiltersReturn {\r\n  isSuperAdmin: boolean;\r\n  isTenant: boolean;\r\n  isOrganisationUser: boolean;\r\n  isBranchUser: boolean;\r\n  \r\n  // Selected values\r\n  selectedTenant: string;\r\n  selectedOrganisation: string;\r\n  selectedBranch: string;\r\n  \r\n  // Dropdown options\r\n  tenantOptions: Array<{ label: string; value: string }>;\r\n  organisationOptions: Array<{ label: string; value: string }>;\r\n  branchOptions: Array<{ label: string; value: string }>;\r\n  \r\n  // Change handlers\r\n  handleTenantChange: (value: string) => void;\r\n  handleOrganisationChange: (value: string) => void;\r\n  handleBranchChange: (value: string) => void;\r\n  \r\n  // Loading states\r\n  tenantsLoading: boolean;\r\n  organisationsLoading: boolean;\r\n  branchesLoading: boolean;\r\n  \r\n  // Filters object for API calls\r\n  getApiFilters: () => Record<string, any>;\r\n}\r\n\r\nexport const useSuperAdminFilters = (): SuperAdminFiltersReturn => {\r\n  const [selectedTenant, setSelectedTenant] = useState<string>('all');\r\n  const [selectedOrganisation, setSelectedOrganisation] = useState<string>('all');\r\n  const [selectedBranch, setSelectedBranch] = useState<string>('all');\r\n\r\n  // Get user role\r\n  const userItem = useMemo(() => {\r\n    return getCurrentUser();\r\n  }, []);\r\n\r\n  // Get user type from scope first (preferred), fallback to user_type\r\n  const scopeData = SessionStorageEncryption.getItem('scope');\r\n  const userRole = scopeData?.userType || userItem?.user_type || userItem?.usertype || userItem?.user_role || '';\r\n  const isSuperAdmin = userRole.toLowerCase() === 'superadmin';\r\n  const isTenant = userRole.toLowerCase() === 'tenant';\r\n  const isOrganisationUser = userRole.toLowerCase() === 'organisationuser';\r\n  const isBranchUser = userRole.toLowerCase() === 'branchuser';\r\n\r\n  // API hooks\r\n  const { getEntityApi } = useApiActions();\r\n  const TenantsApi = getEntityApi('Tenant');\r\n  const OrganisationsApi = getEntityApi('Organisations');\r\n  const BranchesApi = getEntityApi('Braches');\r\n\r\n  // Selectors for dropdowns data\r\n  const { items: tenantsItems, loading: tenantsLoading } = useDynamicSelector(\r\n    TenantsApi.getIdentifier('GetAll')\r\n  );\r\n  const { items: organisationsItems, loading: organisationsLoading } = useDynamicSelector(\r\n    OrganisationsApi.getIdentifier('GetAll')\r\n  );\r\n  const { items: branchesItems, loading: branchesLoading } = useDynamicSelector(\r\n    BranchesApi.getIdentifier('GetAll')\r\n  );\r\n\r\n  // Fetch data on mount\r\n  useEffect(() => {\r\n    if (isSuperAdmin) {\r\n      // SuperAdmin: Only fetch tenants initially\r\n      TenantsApi('GetAll');\r\n    } else if (isTenant) {\r\n      // Tenant: Fetch organisations on mount\r\n      OrganisationsApi('GetAll');\r\n    } else if (isOrganisationUser) {\r\n      // OrganisationUser: Fetch branches on mount\r\n      BranchesApi('GetAll');\r\n    }\r\n    // BranchUser: Don't fetch anything (no dropdowns needed)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isSuperAdmin, isTenant, isOrganisationUser, isBranchUser]);\r\n\r\n  // Prepare dropdown options\r\n  const tenantOptions = useMemo(() => {\r\n    return tenantsItems?.result?.map((tenant: any) => ({\r\n      label: tenant.organization_name || tenant.contact_name || tenant.username,\r\n      value: tenant._id,\r\n    })) || [];\r\n  }, [tenantsItems]);\r\n\r\n  const organisationOptions = useMemo(() => {\r\n    let orgs = organisationsItems?.result || [];\r\n    // Filter by selected tenant if applicable\r\n    if (isSuperAdmin && selectedTenant !== 'all') {\r\n      orgs = orgs.filter((org: any) => org.tenant_id === selectedTenant);\r\n    }\r\n    return orgs.map((org: any) => ({\r\n      label: org.org_name || org.name,\r\n      value: org._id,\r\n    }));\r\n  }, [organisationsItems, selectedTenant, isSuperAdmin]);\r\n\r\n  const branchOptions = useMemo(() => {\r\n    let branches = branchesItems?.result || [];\r\n    // Filter by selected organisation if applicable\r\n    if (selectedOrganisation !== 'all') {\r\n      branches = branches.filter(\r\n        (branch: any) =>\r\n          branch.organisation_id === selectedOrganisation ||\r\n          branch.org_id === selectedOrganisation\r\n      );\r\n    }\r\n    return branches.map((branch: any) => ({\r\n      label: branch.branch_name || branch.name,\r\n      value: branch._id,\r\n    }));\r\n  }, [branchesItems, selectedOrganisation]);\r\n\r\n  // Handle tenant change - reset dependent filters\r\n  const handleTenantChange = useCallback((value: string) => {\r\n    setSelectedTenant(value);\r\n    setSelectedOrganisation('all');\r\n    setSelectedBranch('all');\r\n    // Fetch organisations for selected tenant (with tenant_id filter)\r\n    if (value !== 'all') {\r\n      OrganisationsApi('GetAll', { tenant_id: value });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Handle organisation change - reset branch filter\r\n  const handleOrganisationChange = useCallback((value: string) => {\r\n    setSelectedOrganisation(value);\r\n    setSelectedBranch('all');\r\n    // Fetch branches for selected organisation (with organisation_id filter)\r\n    if (value !== 'all') {\r\n      BranchesApi('GetAll', { organisation_id: value });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Handle branch change\r\n  const handleBranchChange = useCallback((value: string) => {\r\n    setSelectedBranch(value);\r\n  }, []);\r\n\r\n  // Generate API filters based on selections\r\n  const getApiFilters = useCallback(() => {\r\n    const filters: Record<string, any> = {};\r\n    \r\n    if (isSuperAdmin) {\r\n      if (selectedTenant && selectedTenant !== 'all') {\r\n        filters.tenant_id = selectedTenant;\r\n      }\r\n    }\r\n    \r\n    if ((isSuperAdmin || isTenant) && selectedOrganisation && selectedOrganisation !== 'all') {\r\n      filters.organisation_id = selectedOrganisation;\r\n      filters.org_id = selectedOrganisation; // Some APIs use org_id\r\n    }\r\n    \r\n    if ((isSuperAdmin || isTenant || isOrganisationUser) && selectedBranch && selectedBranch !== 'all') {\r\n      filters.branch_id = selectedBranch;\r\n    }\r\n    \r\n    return filters;\r\n  }, [isSuperAdmin, isTenant, isOrganisationUser, selectedTenant, selectedOrganisation, selectedBranch]);\r\n\r\n  return {\r\n    isSuperAdmin,\r\n    isTenant,\r\n    isOrganisationUser,\r\n    isBranchUser,\r\n    selectedTenant,\r\n    selectedOrganisation,\r\n    selectedBranch,\r\n    tenantOptions,\r\n    organisationOptions,\r\n    branchOptions,\r\n    handleTenantChange,\r\n    handleOrganisationChange,\r\n    handleBranchChange,\r\n    tenantsLoading,\r\n    organisationsLoading,\r\n    branchesLoading,\r\n    getApiFilters,\r\n  };\r\n};\r\n\r\n","import { useCallback, useEffect, useMemo } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { dynamic_request, useDynamicSelector } from '../services/redux';\r\nimport { CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { generateFormItemFromMetadata } from '../helpers/fieldMetadataUtils';\r\nimport { getEntityApiRoutes } from '../helpers/CrudFactory';\r\n\r\nexport interface FieldMetadata {\r\n  _id: string;\r\n  entity_name: string;\r\n  field_name: string;\r\n  business_type: string;\r\n  field_type: string;\r\n  label: string;\r\n  placeholder?: string;\r\n  is_required: boolean;\r\n  validation_rules?: {\r\n    options?: string[];\r\n    min?: number;\r\n    max?: number;\r\n    pattern?: string;\r\n    patternMessage?: string;\r\n    email?: boolean;\r\n  };\r\n  display_order: number;\r\n  is_active: boolean;\r\n  is_global: boolean;\r\n  tenant_id?: string;\r\n  organisation_id?: string;\r\n  options?: string[]; // For select/radio fields (legacy support)\r\n}\r\n\r\ninterface UseFieldMetadataOptions {\r\n  entityName: string;\r\n  staticFormItems: CrudFormItem[];\r\n  enabled?: boolean;\r\n  businessType?: string;\r\n}\r\n\r\n/**\r\n * Custom hook to fetch and merge dynamic field metadata with static form items\r\n * @param options Configuration options\r\n * @returns Merged form items, loading state, and refresh function\r\n */\r\nexport const useFieldMetadata = ({\r\n  entityName,\r\n  staticFormItems,\r\n  enabled = true,\r\n  businessType,\r\n}: UseFieldMetadataOptions) => {\r\n  const dispatch = useDispatch();\r\n\r\n  // Use generic API routes instead of hardcoded endpoint\r\n  const apiRoutes = useMemo(() => getEntityApiRoutes('FieldMetadata'), []);\r\n\r\n  // Create a unique identifier for this entity's metadata\r\n  const identifier = useMemo(\r\n    () => `${apiRoutes.get.identifier}_${entityName}`,\r\n    [apiRoutes.get.identifier, entityName]\r\n  );\r\n\r\n  // Fetch field metadata from Redux\r\n  const { items: metadataResponse, loading } = useDynamicSelector(identifier);\r\n\r\n  /**\r\n   * Fetch field metadata for the given entity\r\n   */\r\n  const fetchFieldMetadata = useCallback(() => {\r\n    if (!enabled) return;\r\n\r\n    const requestData: any = {\r\n      entity_name: entityName,\r\n      is_active: true, // Only fetch active fields\r\n    };\r\n\r\n    // Add business_type filter if provided\r\n    if (businessType) {\r\n      requestData.business_type = businessType;\r\n    }\r\n\r\n    dispatch(\r\n      dynamic_request(\r\n        {\r\n          method: apiRoutes.get.method,\r\n          endpoint: apiRoutes.get.endpoint,\r\n          data: requestData,\r\n        },\r\n        identifier\r\n      ) as any\r\n    );\r\n  }, [dispatch, entityName, businessType, enabled, apiRoutes.get, identifier]);\r\n\r\n  /**\r\n   * Memoized dynamic fields - sorted and filtered\r\n   */\r\n  const dynamicFields = useMemo<FieldMetadata[]>(() => {\r\n    if (!metadataResponse?.result) return [];\r\n\r\n    const fields: FieldMetadata[] = metadataResponse.result;\r\n\r\n    // Filter active fields and sort by display_order\r\n    return fields\r\n      .filter((field) => field.is_active)\r\n      .sort((a, b) => a.display_order - b.display_order);\r\n  }, [metadataResponse?.result]);\r\n\r\n  /**\r\n   * Convert dynamic fields to form items\r\n   */\r\n  const dynamicFormItems = useMemo<CrudFormItem[]>(() => {\r\n    return dynamicFields.map((field) => generateFormItemFromMetadata(field));\r\n  }, [dynamicFields]);\r\n\r\n  /**\r\n   * Merge static and dynamic form items\r\n   * Strategy: Static items first, then dynamic items (can be customized)\r\n   */\r\n  const mergedFormItems = useMemo<CrudFormItem[]>(() => {\r\n    // If no dynamic fields, return static items as-is\r\n    if (dynamicFormItems.length === 0) {\r\n      return staticFormItems;\r\n    }\r\n\r\n    // Merge: static items first, then dynamic items\r\n    // You can customize this logic based on your needs\r\n    return [...staticFormItems, ...dynamicFormItems];\r\n  }, [staticFormItems, dynamicFormItems]);\r\n\r\n  /**\r\n   * Fetch metadata on mount and when dependencies change\r\n   */\r\n  useEffect(() => {\r\n    if (enabled) {\r\n      fetchFieldMetadata();\r\n    }\r\n  }, [enabled, fetchFieldMetadata]);\r\n\r\n  return {\r\n    /** Merged form items (static + dynamic) */\r\n    formItems: mergedFormItems,\r\n    \r\n    /** Loading state */\r\n    loading,\r\n    \r\n    /** Refresh/refetch function */\r\n    refresh: fetchFieldMetadata,\r\n    \r\n    /** Raw dynamic fields metadata */\r\n    dynamicFields,\r\n    \r\n    /** Dynamic form items only (without static) */\r\n    dynamicFormItems,\r\n    \r\n    /** Static form items only */\r\n    staticFormItems,\r\n  };\r\n};\r\n\r\n/**\r\n * Hook to fetch field metadata without merging with static items\r\n * Useful for standalone field metadata management\r\n */\r\nexport const useFieldMetadataOnly = (entityName: string, enabled = true) => {\r\n  const dispatch = useDispatch();\r\n  const apiRoutes = useMemo(() => getEntityApiRoutes('FieldMetadata'), []);\r\n  const identifier = useMemo(\r\n    () => `${apiRoutes.get.identifier}_${entityName}`,\r\n    [apiRoutes.get.identifier, entityName]\r\n  );\r\n\r\n  const { items: metadataResponse, loading } = useDynamicSelector(identifier);\r\n\r\n  const fetchFieldMetadata = useCallback(() => {\r\n    if (!enabled) return;\r\n\r\n    dispatch(\r\n      dynamic_request(\r\n        {\r\n          method: apiRoutes.get.method,\r\n          endpoint: apiRoutes.get.endpoint,\r\n          data: { entity_name: entityName },\r\n        },\r\n        identifier\r\n      ) as any\r\n    );\r\n  }, [dispatch, entityName, enabled, apiRoutes.get, identifier]);\r\n\r\n  const fields = useMemo<FieldMetadata[]>(() => {\r\n    return metadataResponse?.result || [];\r\n  }, [metadataResponse?.result]);\r\n\r\n  useEffect(() => {\r\n    if (enabled) {\r\n      fetchFieldMetadata();\r\n    }\r\n  }, [enabled, fetchFieldMetadata]);\r\n\r\n  return {\r\n    fields,\r\n    loading,\r\n    refresh: fetchFieldMetadata,\r\n  };\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Form } from 'antd';\r\nimport {\r\n  dynamic_request,\r\n  useDynamicSelector,\r\n  dynamic_clear,\r\n} from '../services/redux';\r\nimport { CrudColumn, CrudFormItem } from '../components/common/GenericCrudPage';\r\nimport { showToast } from '../helpers/Common_functions';\r\nimport { BaseEntity } from '../types/entities';\r\nimport { Dispatch } from 'redux';\r\nimport dayjs from 'dayjs';\r\n\r\nexport interface CrudConfig<T extends BaseEntity> {\r\n  title: string;\r\n  columns: CrudColumn[];\r\n  formItems: CrudFormItem[];\r\n  apiRoutes: {\r\n    get: { method: string; endpoint: string; identifier: string };\r\n    create: { method: string; endpoint: string; identifier: string };\r\n    update: { method: string; endpoint: string; identifier: string };\r\n    delete: { method: string; endpoint: string; identifier: string };\r\n  };\r\n  formColumns?: number;\r\n  drawerWidth?: number;\r\n  canEdit?: (record: T) => boolean;\r\n  canDelete?: (record: T) => boolean;\r\n  dynamicFieldNames?: string[]; // Names of dynamic metadata fields\r\n  metadataFieldName?: string; // Field name for storing metadata (default: 'meta_data_values', can be 'custom_data')\r\n  skipMetadataWrapping?: boolean; // If true, send fields directly without any wrapping\r\n}\r\n\r\nexport const useGenericCrud = <T extends BaseEntity>(config: CrudConfig<T>) => {\r\n  const dispatch: Dispatch<any> = useDispatch();\r\n  const [form] = Form.useForm();\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [initialValues, setInitialValues] = useState<Partial<T>>({});\r\n  const [filterValues, setFilterValues] = useState<Record<string, any>>({});\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n  });\r\n\r\n  // Selectors\r\n  const { loading, items } = useDynamicSelector(\r\n    config.apiRoutes.get.identifier\r\n  );\r\n  const { loading: createLoading, items: createItems, error: createError } = useDynamicSelector(\r\n    config.apiRoutes.create.identifier\r\n  );\r\n  const { loading: updateLoading, items: updateItems, error: updateError } = useDynamicSelector(\r\n    config.apiRoutes.update.identifier\r\n  );\r\n  const { loading: deleteLoading, items: deleteItems, error: deleteError } = useDynamicSelector(\r\n    config.apiRoutes.delete.identifier\r\n  );\r\n\r\n  // API call function\r\n  const callApi = useCallback(\r\n    (method: string, endpoint: string, data: any, identifier: string) => {\r\n      dispatch(dynamic_request({ method, endpoint, data }, identifier) as any);\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  // CRUD operations\r\n  const getAll = useCallback(() => {\r\n    const apiData = {\r\n      ...filterValues,\r\n      pageNumber: pagination.current,\r\n      pageLimit: pagination.pageSize,\r\n    };\r\n    callApi(\r\n      config.apiRoutes.get.method,\r\n      config.apiRoutes.get.endpoint,\r\n      apiData,\r\n      config.apiRoutes.get.identifier\r\n    );\r\n  }, [callApi, config.apiRoutes.get, filterValues, pagination]);\r\n\r\n  const create = useCallback(\r\n    (data: Partial<T>) => {\r\n      callApi(\r\n        config.apiRoutes.create.method,\r\n        config.apiRoutes.create.endpoint,\r\n        data,\r\n        config.apiRoutes.create.identifier\r\n      );\r\n    },\r\n    [callApi, config.apiRoutes.create]\r\n  );\r\n\r\n  const update = useCallback(\r\n    (id: string, data: Partial<T>) => {\r\n      callApi(\r\n        config.apiRoutes.update.method,\r\n        `${config.apiRoutes.update.endpoint}/${id}`,\r\n        data,\r\n        config.apiRoutes.update.identifier\r\n      );\r\n    },\r\n    [callApi, config.apiRoutes.update]\r\n  );\r\n\r\n  const remove = useCallback(\r\n    (id: string) => {\r\n      callApi(\r\n        config.apiRoutes.delete.method,\r\n        `${config.apiRoutes.delete.endpoint}/${id}`,\r\n        { _id: id },\r\n        config.apiRoutes.delete.identifier\r\n      );\r\n    },\r\n    [callApi, config.apiRoutes.delete]\r\n  );\r\n\r\n  const handlePaginationChange = useCallback((pageNumber: number, pageLimit: number) => {\r\n    setPagination({ current: pageNumber, pageSize: pageLimit });\r\n  }, []);\r\n\r\n  function isStrictDate(value: string): boolean {\r\n    // Only matches real ISO-like date formats (YYYY-MM-DD or with time)\r\n    return /^\\d{4}-\\d{2}-\\d{2}(T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[+-]\\d{2}:\\d{2})?)?$/.test(\r\n      value\r\n    );\r\n  }\r\n\r\n  // Event handlers\r\n  const handleEdit = useCallback((record: T) => {\r\n    const newRecord: any = {};\r\n    const metadataFieldName = config.metadataFieldName || 'meta_data_values';\r\n\r\n    // Process main record fields\r\n    for (const key in record) {\r\n      if (!record.hasOwnProperty(key)) continue;\r\n      \r\n      const value = record[key];\r\n\r\n      // Skip metadata field - we'll handle it separately\r\n      if (key === metadataFieldName || key === 'meta_data_values' || key === 'custom_data') {\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        typeof value === 'string' &&\r\n        isStrictDate(value) &&\r\n        dayjs(value, undefined, true).isValid()\r\n      ) {\r\n        newRecord[key] = dayjs(value);\r\n      } else {\r\n        newRecord[key] = value;\r\n      }\r\n    }\r\n\r\n    // If metadata field exists, flatten it into the record\r\n    const metaDataValues = (record as any)[metadataFieldName];\r\n    if (metaDataValues && typeof metaDataValues === 'object') {\r\n      for (const key in metaDataValues) {\r\n        if (!metaDataValues.hasOwnProperty(key)) continue;\r\n        \r\n        const value = metaDataValues[key];\r\n        \r\n        // Skip if value is null or undefined\r\n        if (value === null || value === undefined) {\r\n          continue;\r\n        }\r\n        \r\n        if (\r\n          typeof value === 'string' &&\r\n          isStrictDate(value) &&\r\n          dayjs(value, undefined, true).isValid()\r\n        ) {\r\n          newRecord[key] = dayjs(value);\r\n        } else {\r\n          newRecord[key] = value;\r\n        }\r\n      }\r\n    }\r\n\r\n    setInitialValues(newRecord);\r\n    setDrawerVisible(true);\r\n  }, [config.metadataFieldName]);\r\n\r\n  const handleDelete = useCallback(\r\n    (record: T) => {\r\n      remove(record._id);\r\n    },\r\n    [remove]\r\n  );\r\n\r\n  const handleDrawerOpen = useCallback(() => {\r\n    setDrawerVisible(true);\r\n  }, []);\r\n\r\n  const resetForm = useCallback(() => {\r\n    setDrawerVisible(false);\r\n    setInitialValues({});\r\n    form.resetFields();\r\n  }, [form]);\r\n\r\n  const handleSubmit = useCallback(\r\n    (values: Partial<T>) => {\r\n      let payload: any = { ...values };\r\n\r\n      // Handle metadata wrapping based on configuration\r\n      if (config.dynamicFieldNames && config.dynamicFieldNames.length > 0) {\r\n        const staticFields: any = {};\r\n        const metaDataValues: any = {};\r\n        const metadataFieldName = config.metadataFieldName || 'meta_data_values';\r\n\r\n        Object.keys(values).forEach((key) => {\r\n          const value = (values as any)[key];\r\n          \r\n          if (config.dynamicFieldNames?.includes(key)) {\r\n            // This is a dynamic metadata field\r\n            // Only add non-undefined values\r\n            if (value !== undefined) {\r\n              metaDataValues[key] = value;\r\n            }\r\n          } else {\r\n            // This is a static field\r\n            staticFields[key] = value;\r\n          }\r\n        });\r\n\r\n        // Wrap dynamic fields in metadata container\r\n        if (Object.keys(metaDataValues).length > 0) {\r\n          if (config.skipMetadataWrapping) {\r\n            // For dynamic entities: send all dynamic fields directly in the metadata field\r\n            payload = {\r\n              ...staticFields,\r\n              [metadataFieldName]: metaDataValues,\r\n            };\r\n          } else {\r\n            // For normal CRUD: wrap in metadata field\r\n            payload = {\r\n              ...staticFields,\r\n              [metadataFieldName]: metaDataValues,\r\n            };\r\n          }\r\n        } else {\r\n          payload = staticFields;\r\n        }\r\n      }\r\n\r\n      if (initialValues._id) {\r\n        update(initialValues._id, payload);\r\n      } else {\r\n        create(payload);\r\n      }\r\n    },\r\n    [initialValues._id, create, update, config.dynamicFieldNames, config.metadataFieldName, config.skipMetadataWrapping]\r\n  );\r\n\r\n  // No local filtering; all filtering is server-side\r\n  // API response handlers\r\n  useEffect(() => {\r\n    if (createItems?.statusCode === 200) {\r\n      showToast('success', `${config.title} created successfully`);\r\n      getAll();\r\n      resetForm();\r\n      dispatch(dynamic_clear(config.apiRoutes.create.identifier));\r\n    } else if (createError) {\r\n      const errorMessage =\r\n        createError.message || `Failed to create ${config.title}`;\r\n      showToast('error', errorMessage);\r\n    }\r\n  }, [\r\n    createItems,\r\n    createError,\r\n    config.title,\r\n    getAll,\r\n    resetForm,\r\n    dispatch,\r\n    config.apiRoutes.create.identifier,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (updateItems?.statusCode === 200) {\r\n      showToast('success', `${config.title} updated successfully`);\r\n      getAll();\r\n      resetForm();\r\n      dispatch(dynamic_clear(config.apiRoutes.update.identifier));\r\n    } else if (updateError) {\r\n      const errorMessage =\r\n        updateError.message || `Failed to update ${config.title}`;\r\n      showToast('error', errorMessage);\r\n    }\r\n  }, [\r\n    updateItems,\r\n    updateError,\r\n    config.title,\r\n    getAll,\r\n    resetForm,\r\n    dispatch,\r\n    config.apiRoutes.update.identifier,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (deleteItems?.statusCode === 200) {\r\n      showToast('success', `${config.title} deleted successfully`);\r\n      getAll();\r\n      dispatch(dynamic_clear(config.apiRoutes.delete.identifier));\r\n    } else if (deleteError) {\r\n      const errorMessage =\r\n        deleteError.message || `Failed to delete ${config.title}`;\r\n      showToast('error', errorMessage);\r\n    }\r\n  }, [\r\n    deleteItems,\r\n    deleteError,\r\n    config.title,\r\n    getAll,\r\n    dispatch,\r\n    config.apiRoutes.delete.identifier,\r\n  ]);\r\n\r\n  // Load data on mount and when filters change\r\n  useEffect(() => {\r\n    getAll();\r\n  }, [getAll]);\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    createLoading,\r\n    updateLoading,\r\n    deleteLoading,\r\n    items: items?.result,\r\n    pagination: items?.pagination,\r\n    drawerVisible,\r\n    initialValues,\r\n    form,\r\n    filterValues,\r\n    setFilterValues,\r\n\r\n    // Actions\r\n    handleEdit,\r\n    handleDelete,\r\n    handleDrawerOpen,\r\n    resetForm,\r\n    handleSubmit,\r\n    handlePaginationChange,\r\n\r\n    // Config\r\n    ...config,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { Tag, Space } from 'antd';\r\nimport { CrudColumn } from '../components/common/GenericCrudPage';\r\nimport { FieldMetadata } from '../hooks/useFieldMetadata';\r\n\r\n/**\r\n * Generate table columns from field metadata\r\n * @param fields Array of field metadata\r\n * @param visibleColumns Array of column keys that should be visible\r\n * @returns Array of CrudColumn objects\r\n */\r\nexport const generateColumnsFromMetadata = (\r\n  fields: FieldMetadata[],\r\n  visibleColumns: string[] = []\r\n): CrudColumn[] => {\r\n  if (!fields || fields.length === 0) return [];\r\n\r\n  return fields\r\n    .filter(field => visibleColumns.includes(field.field_name))\r\n    .map(field => ({\r\n      title: field.label,\r\n      dataIndex: ['custom_data', field.field_name], // Access nested custom_data\r\n      key: field.field_name,\r\n      render: (value: any, record: any) => {\r\n        // Get value from custom_data object\r\n        const actualValue = record?.custom_data?.[field.field_name];\r\n        \r\n        if (actualValue === null || actualValue === undefined || actualValue === '') {\r\n          return <span style={{ color: '#999' }}>-</span>;\r\n        }\r\n\r\n        // Handle different field types\r\n        switch (field.field_type) {\r\n          case 'select':\r\n          case 'radio':\r\n            // For select/radio, display the selected option\r\n            return <Tag color=\"blue\">{String(actualValue)}</Tag>;\r\n          \r\n          case 'checkbox':\r\n            // For checkbox, display boolean state\r\n            return (\r\n              <Tag color={actualValue ? 'green' : 'red'}>\r\n                {actualValue ? 'Yes' : 'No'}\r\n              </Tag>\r\n            );\r\n          \r\n          case 'date':\r\n            // For date fields, format the date\r\n            try {\r\n              const date = new Date(actualValue);\r\n              return (\r\n                <span style={{ fontSize: '13px', color: '#666' }}>\r\n                  {date.toLocaleDateString()}\r\n                </span>\r\n              );\r\n            } catch {\r\n              return <span>{String(actualValue)}</span>;\r\n            }\r\n          \r\n          case 'number':\r\n          case 'currency':\r\n            // For number/currency fields, format with proper styling\r\n            return (\r\n              <span style={{ \r\n                fontFamily: 'monospace', \r\n                fontWeight: 500,\r\n                color: field.field_type === 'currency' ? '#52c41a' : '#1890ff'\r\n              }}>\r\n                {field.field_type === 'currency' ? `$${Number(actualValue).toFixed(2)}` : Number(actualValue).toLocaleString()}\r\n              </span>\r\n            );\r\n          \r\n          case 'textarea':\r\n          case 'text':\r\n          default:\r\n            // For text fields, truncate long text\r\n            const text = String(actualValue);\r\n            if (text.length > 50) {\r\n              return (\r\n                <span title={text}>\r\n                  {text.substring(0, 50)}...\r\n                </span>\r\n              );\r\n            }\r\n            return <span>{text}</span>;\r\n        }\r\n      },\r\n    }));\r\n};\r\n\r\n/**\r\n * Get all available column options from field metadata\r\n * @param fields Array of field metadata\r\n * @returns Array of column options with key and label\r\n */\r\nexport const getAvailableColumns = (fields: FieldMetadata[]) => {\r\n  return fields.map(field => ({\r\n    key: field.field_name,\r\n    label: field.label,\r\n    fieldType: field.field_type,\r\n  }));\r\n};\r\n\r\n/**\r\n * Get default visible columns (first 5 fields by display_order)\r\n * @param fields Array of field metadata\r\n * @returns Array of column keys\r\n */\r\nexport const getDefaultVisibleColumns = (fields: FieldMetadata[]): string[] => {\r\n  return fields\r\n    .slice(0, 5) // Take first 5 fields\r\n    .map(field => field.field_name);\r\n};\r\n"],"names":["getEntityApiRoutes","entityName","operations","CrudOperations","createCrudOperations","get","getAll","create","update","delete","props","FormValue","onSubmit","onCancel","formItems","onChildCancel","formColumns","splitLabelAndField","nested","nestedInputs","wrapperCol","labelCol","initialValues","loading","form","onValuesChange","columns","useEffect","setFieldsValue","_jsxs","style","position","height","children","_jsx","top","left","right","bottom","backgroundRepeat","backgroundPosition","backgroundSize","opacity","zIndex","Form","onFinish","values","resetFields","layout","Row","gutter","map","item","index","_item$rules","Col","span","Typography","Text","strong","label","rules","some","rule","required","type","Item","name","marginTop","component","List","fields","_ref","add","remove","_Fragment","_ref2","key","fieldKey","restField","_objectWithoutProperties","_excluded","align","input","idx","_objectSpread","message","concat","MinusCircleOutlined","onClick","justify","Button","icon","PlusOutlined","padding","handleCancel","htmlType","TextArea","Input","FIELD_TYPE_OPTIONS","value","category","generateFormItemFromMetadata","metadata","field_name","is_required","validation_rules","field_type","push","toLowerCase","email","undefined","min","max","pattern","RegExp","patternMessage","buildValidationRules","valuePropName","placeholder","placeholderText","options","Array","isArray","rows","Password","InputNumber","width","step","precision","Switch","checkedChildren","unCheckedChildren","defaultChecked","Checkbox","Select","allowClear","showSearch","optionFilterProp","opt","mode","Radio","option","DatePicker","format","showTime","generateComponent","formItem","FieldForm","React","editingField","optionsText","onOptionsChange","selectedFieldType","useWatch","needsOptions","useMemo","includes","needsNumberValidation","is_active","is_global","display_order","disabled","extra","Divider","onChange","e","target","displayName","FieldsTable","data","deleteLoading","onEdit","onDelete","title","dataIndex","sorter","a","b","localeCompare","render","text","Tag","color","filters","onFilter","record","fixed","_","Space","size","EditOutlined","Popconfirm","description","onConfirm","_id","okText","cancelText","okButtonProps","danger","DeleteOutlined","Table","dataSource","rowKey","pagination","pageSize","showSizeChanger","scroll","x","useFieldMetadataOperations","businessType","tenantId","organisationId","onFieldsUpdated","dispatch","useDispatch","apiRoutes","items","fieldsResponse","fieldsLoading","useDynamicSelector","identifier","createResponse","createLoading","updateResponse","updateLoading","deleteResponse","fetchFields","useCallback","dynamic_request","method","endpoint","entity_name","handleSuccess","response","action","statusCode","showToast","dynamic_clear","handleSubmitField","async","validationRules","fieldType","split","trim","filter","length","payload","business_type","tenant_id","organisation_id","errors","_metadata$entity_name","_metadata$field_name","_metadata$field_type","_metadata$label","test","_metadata$validation_","validateFieldMetadata","requestConfig","handleDeleteField","fieldId","fieldsData","result","FieldMetadataManager","useForm","modalVisible","setModalVisible","useState","fieldModalVisible","setFieldModalVisible","setEditingField","setOptionsText","hasChanges","setHasChanges","handleOpenFieldModal","field","_field$validation_rul","_field$validation_rul2","_field$validation_rul3","join","handleSubmit","validateFields","error","console","confirmLoading","handleModalClose","handleDelete","SettingOutlined","Modal","open","footer","destroyOnClose","direction","Alert","showIcon","display","justifyContent","onOk","getActionsColumn","handleEdit","arguments","canEdit","canDelete","allowEdit","allowDelete","gap","alignItems","Tooltip","cursor","fontSize","GenericCrudPageComponent","config","onFilterChange","customButtons","enableSuperAdminFilters","enableDynamicFields","showDynamicColumnsInTable","superAdminFilters","useSuperAdminFilters","selectedTenant","setSelectedTenant","selectedOrganisation","setSelectedOrganisation","selectedBranch","setSelectedBranch","userItem","getCurrentUser","scopeData","SessionStorageEncryption","getItem","userRole","userType","user_type","usertype","user_role","isSuperAdmin","isTenant","isOrganisationUser","isBranchUser","getEntityApi","useApiActions","TenantsApi","OrganisationsApi","BranchesApi","tenantsItems","tenantsLoading","getIdentifier","organisationsItems","organisationsLoading","branchesItems","branchesLoading","tenantOptions","_tenantsItems$result","tenant","organization_name","contact_name","username","organisationOptions","orgs","org","org_name","branchOptions","branches","branch","org_id","branch_name","handleTenantChange","handleOrganisationChange","handleBranchChange","getApiFilters","branch_id","isInitialMount","useRef","mergedFormItems","metadataLoading","refresh","refreshMetadata","dynamicFields","staticFormItems","enabled","metadataResponse","fetchFieldMetadata","requestData","sort","dynamicFormItems","useFieldMetadata","dynamicFieldNames","enhancedConfig","drawerVisible","handleDrawerOpen","resetForm","handlePaginationChange","drawerWidth","filterValues","setFilterValues","setDrawerVisible","setInitialValues","setPagination","current","createItems","createError","updateItems","updateError","deleteItems","deleteError","callApi","apiData","pageNumber","pageLimit","id","isStrictDate","newRecord","metadataFieldName","hasOwnProperty","dayjs","isValid","metaDataValues","staticFields","Object","keys","forEach","_config$dynamicFieldN","skipMetadataWrapping","errorMessage","useGenericCrud","enhancedColumns","generateColumnsFromMetadata","require","isPureDynamicForm","every","col","allFieldNames","dynamicColumns","existingKeys","newDynamicColumns","handleFilterChange","newValues","allFilters","apiFilters","newFilters","tableColumns","marginBottom","flex","margin","wrap","Option","_filter$options","val","date","btn","canCreateItem","canCreate","GlobalTable","rowKeyField","totalCount","onPaginationChange","GlobalDrawer","onClose","AntdForm","GenericCrudPage","visibleColumns","_record$custom_data","actualValue","custom_data","String","Date","toLocaleDateString","_unused","fontFamily","fontWeight","Number","toFixed","toLocaleString","substring","getAvailableColumns","getDefaultVisibleColumns","slice"],"sourceRoot":""}