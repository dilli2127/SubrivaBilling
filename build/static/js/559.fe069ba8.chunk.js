"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[559],{86559:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(65043),a=n(91686),o=n(70644),s=n(95206),l=n(74883),d=n(83003),r=n(1045),c=n(97031),u=n(91449),m=n(70579);const y=()=>{const{entityName:e,entityDef:t,loading:n,hasError:y,isEntityValid:f,dynamicApiRoutes:p,defaultColumns:h,goBack:g,goToEntityDefinitions:A}=(()=>{const{entityName:e}=(0,r.g)(),t=(0,r.Zp)(),n=(0,d.wA)(),[a,o]=(0,i.useState)(null),s=(0,i.useMemo)((()=>(0,u.zm)("EntityDefinition")),[]),l=(0,i.useMemo)((()=>s("GetAll")),[s]),{loading:y,items:f,error:p}=(0,c.Sm)(l.identifier),h=(0,i.useCallback)((()=>{e&&n((0,c.s7)({method:l.method,endpoint:l.endpoint,data:{entity_name:e}},l.identifier))}),[e,n,l]);(0,i.useEffect)((()=>{if(null!==f&&void 0!==f&&f.result&&Array.isArray(f.result)&&f.result.length>0&&e){const t=f.result.find((t=>t.entity_name===e));o(t||null)}}),[f,e]),(0,i.useEffect)((()=>{h()}),[h]);const g=(0,i.useMemo)((()=>{if(!e)return null;const t="/".concat(e);return{get:{method:"POST",endpoint:t,identifier:"GetAll_".concat(e)},create:{method:"PUT",endpoint:t,identifier:"Add_".concat(e)},update:{method:"POST",endpoint:t,identifier:"Update_".concat(e)},delete:{method:"DELETE",endpoint:t,identifier:"Delete_".concat(e)}}}),[e]),A=(0,i.useMemo)((()=>[{title:"ID",dataIndex:"_id",key:"_id",render:e=>(0,m.jsxs)("span",{style:{fontFamily:"monospace",fontSize:"13px",fontWeight:500,color:"#1890ff"},children:[e.substring(0,8),"..."]})},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:e=>(0,m.jsx)("span",{style:{fontSize:"13px",color:"#666"},children:new Date(e).toLocaleDateString()})},{title:"Updated",dataIndex:"updatedAt",key:"updatedAt",render:e=>(0,m.jsx)("span",{style:{fontSize:"13px",color:"#666"},children:new Date(e).toLocaleDateString()})}]),[]),x=(0,i.useMemo)((()=>Boolean(a&&a.is_active)),[a]),D=(0,i.useMemo)((()=>p||!y&&!x),[p,y,x]),k=(0,i.useCallback)((()=>{t("/entities")}),[t]),_=(0,i.useCallback)((()=>{t("/entity-definitions")}),[t]);return{entityName:e,entityDef:a,loading:y,error:p,hasError:D,isEntityValid:x,dynamicApiRoutes:g,defaultColumns:A,fetchEntityDefinition:h,goBack:k,goToEntityDefinitions:_,entityDefRoute:l}})(),x=(0,i.useMemo)((()=>t&&p?{title:t.plural_name,columns:h,formItems:[],apiRoutes:p,formColumns:2,drawerWidth:700,skipMetadataWrapping:!0,metadataFieldName:"custom_data",enableDynamicFields:!0,enableSuperAdminFilters:!0}:null),[t,p,h]),D=(0,i.useCallback)(((e,n)=>{t&&!n.entity_name&&(n.entity_name=t.entity_name)}),[t]);return n?(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,m.jsx)(a.A,{size:"large",tip:"Loading ".concat(e," definition...")})}):!y&&f&&x?(0,m.jsx)(l.r,{config:x,enableDynamicFields:!0,showDynamicColumnsInTable:!0,entityName:null===t||void 0===t?void 0:t.entity_name,enableSuperAdminFilters:!0,onValuesChange:D}):(0,m.jsx)(o.Ay,{status:"404",title:"Entity Not Found",subTitle:'The entity "'.concat(e,'" does not exist or is not active.'),extra:(0,m.jsxs)("div",{children:[(0,m.jsx)(s.Ay,{type:"primary",onClick:g,style:{marginRight:8},children:"Back to Entities"}),(0,m.jsx)(s.Ay,{onClick:A,children:"Manage Entity Definitions"})]})})}}}]);
//# sourceMappingURL=559.fe069ba8.chunk.js.map