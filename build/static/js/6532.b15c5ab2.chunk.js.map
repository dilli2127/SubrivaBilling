{"version":3,"file":"static/js/6532.b15c5ab2.chunk.js","mappings":"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","sources":["pages/SalesReturns/columns.tsx","pages/SalesReturns/ReturnItemsTable.tsx","pages/SalesReturns/SelectInvoiceModal.tsx","pages/SalesReturns/ReturnApprovalModal.tsx","pages/SalesReturns/ReturnViewModal.tsx","pages/SalesReturns/SalesReturnsCrud.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Tag, Tooltip, Button, Space, Badge, Dropdown, Menu } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport {\r\n  FileTextOutlined,\r\n  UserOutlined,\r\n  CalendarOutlined,\r\n  DollarOutlined,\r\n  CheckCircleOutlined,\r\n  ClockCircleOutlined,\r\n  CloseCircleOutlined,\r\n  EyeOutlined,\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  CheckOutlined,\r\n  StopOutlined,\r\n  WarningOutlined,\r\n  MoreOutlined,\r\n  UploadOutlined,\r\n  UndoOutlined,\r\n  CreditCardOutlined,\r\n} from '@ant-design/icons';\r\nimport { ReturnStatus } from '../../types/salesReturn';\r\nimport { canRead, canUpdate, canDelete, RESOURCES } from '../../helpers/permissionHelper';\r\n\r\n// Status Configuration\r\nconst statusConfig: Record<ReturnStatus, { color: string; icon: React.ReactNode; label: string }> = {\r\n  draft: { color: 'default', icon: <EditOutlined />, label: 'Draft' },\r\n  pending_approval: { color: 'warning', icon: <ClockCircleOutlined />, label: 'Pending Approval' },\r\n  approved: { color: 'success', icon: <CheckCircleOutlined />, label: 'Approved' },\r\n  rejected: { color: 'error', icon: <CloseCircleOutlined />, label: 'Rejected' },\r\n  completed: { color: 'green', icon: <CheckCircleOutlined />, label: 'Completed' },\r\n  cancelled: { color: 'red', icon: <StopOutlined />, label: 'Cancelled' },\r\n};\r\n\r\n// Refund Type Configuration\r\nconst refundTypeConfig: Record<string, { color: string; icon: React.ReactNode; label: string }> = {\r\n  cash: { color: 'green', icon: <DollarOutlined />, label: 'Cash' },\r\n  card: { color: 'blue', icon: <CreditCardOutlined />, label: 'Card' },\r\n  upi: { color: 'purple', icon: <CreditCardOutlined />, label: 'UPI' },\r\n  points: { color: 'orange', icon: <CreditCardOutlined />, label: 'Customer Points' },\r\n  bank_transfer: { color: 'cyan', icon: <CreditCardOutlined />, label: 'Bank Transfer' },\r\n};\r\n\r\ninterface ColumnActions {\r\n  onView: (record: any) => void;\r\n  onEdit: (record: any) => void;\r\n  onDelete: (record: any) => void;\r\n  onSubmit: (record: any) => void;\r\n  onApprove: (record: any) => void;\r\n  onReject: (record: any) => void;\r\n  onComplete: (record: any) => void;\r\n  onCancel: (record: any) => void;\r\n  onPrint: (record: any) => void;\r\n}\r\n\r\nexport const salesReturnColumns = (actions: ColumnActions) => [\r\n  {\r\n    title: 'Return Number',\r\n    dataIndex: 'return_number',\r\n    key: 'return_number',\r\n    fixed: 'left' as const,\r\n    width: 140,\r\n    render: (text: string) => (\r\n      <Tag icon={<UndoOutlined />} color=\"orange\" style={{ fontSize: '12px' }}>\r\n        {text}\r\n      </Tag>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Status',\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    width: 160,\r\n    filters: Object.keys(statusConfig).map(key => ({\r\n      text: statusConfig[key as ReturnStatus].label,\r\n      value: key,\r\n    })),\r\n    onFilter: (value: any, record: any) => record.status === value,\r\n    render: (status: ReturnStatus) => {\r\n      const config = statusConfig[status] || statusConfig.draft;\r\n      return (\r\n        <Badge \r\n          status={config.color as any} \r\n          text={\r\n            <Tag color={config.color} icon={config.icon}>\r\n              {config.label}\r\n            </Tag>\r\n          }\r\n        />\r\n      );\r\n    },\r\n  },\r\n  {\r\n    title: 'Return Date',\r\n    dataIndex: 'return_date',\r\n    key: 'return_date',\r\n    width: 120,\r\n    sorter: (a: any, b: any) => dayjs(a.return_date).unix() - dayjs(b.return_date).unix(),\r\n    render: (date: string) => (\r\n      <span>\r\n        <CalendarOutlined style={{ marginRight: 4 }} />\r\n        {dayjs(date).format('DD/MM/YYYY')}\r\n      </span>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Original Invoice',\r\n    dataIndex: 'invoice_number',\r\n    key: 'invoice_number',\r\n    width: 140,\r\n    render: (invoiceNo: string, record: any) => (\r\n      <Tooltip title={`Invoice Date: ${record.invoice_date ? dayjs(record.invoice_date).format('DD/MM/YYYY') : '-'}`}>\r\n        <Tag color=\"blue\" icon={<FileTextOutlined />}>\r\n          {invoiceNo || '-'}\r\n        </Tag>\r\n      </Tooltip>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Customer',\r\n    dataIndex: 'CustomerItem',\r\n    key: 'customer',\r\n    width: 180,\r\n    render: (customer: any, record: any) => {\r\n      const customerData = customer || { customer_name: record.customer_name };\r\n      return (\r\n        <Tooltip title={customerData.email || customerData.phone}>\r\n          <div>\r\n            <UserOutlined style={{ marginRight: 4, color: '#1890ff' }} />\r\n            <strong>{customerData.customer_name || record.customer_name || '-'}</strong>\r\n            {customerData.phone && (\r\n              <div style={{ fontSize: '11px', color: '#888' }}>\r\n                {customerData.phone}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    title: 'Items Returned',\r\n    dataIndex: 'items',\r\n    key: 'items_count',\r\n    width: 100,\r\n    align: 'center' as const,\r\n    render: (items: any[]) => (\r\n      <Tag color=\"orange\">{items?.length || 0} items</Tag>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Refund Type',\r\n    dataIndex: 'refund_type',\r\n    key: 'refund_type',\r\n    width: 130,\r\n    filters: Object.keys(refundTypeConfig).map(key => ({\r\n      text: refundTypeConfig[key].label,\r\n      value: key,\r\n    })),\r\n    onFilter: (value: any, record: any) => record.refund_type === value,\r\n    render: (type: string) => {\r\n      const config = refundTypeConfig[type] || refundTypeConfig.cash;\r\n      return (\r\n        <Tag color={config.color} icon={config.icon}>\r\n          {config.label}\r\n        </Tag>\r\n      );\r\n    },\r\n  },\r\n    {\r\n      title: 'Refund Amount',\r\n      dataIndex: 'refund_amount',\r\n      key: 'refund_amount',\r\n      width: 130,\r\n      sorter: (a: any, b: any) => (Number(a.refund_amount) || 0) - (Number(b.refund_amount) || 0),\r\n      render: (amount: any, record: any) => (\r\n        <div>\r\n          <span style={{ fontWeight: 'bold', color: '#ff4d4f' }}>\r\n            <DollarOutlined style={{ marginRight: 4 }} />\r\n            ₹{Number(amount || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n          </span>\r\n          <div style={{ fontSize: '11px', color: '#888' }}>\r\n            {record.refund_status === 'completed' ? (\r\n              <Tag color=\"green\" style={{ marginTop: 2 }}>Paid</Tag>\r\n            ) : (\r\n              <Tag color=\"orange\" style={{ marginTop: 2 }}>Pending</Tag>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n  {\r\n    title: 'Points Issued',\r\n    key: 'points_issued',\r\n    width: 130,\r\n    render: (record: any) => {\r\n      if (record.refund_type !== 'points') {\r\n        return <span style={{ color: '#999' }}>-</span>;\r\n      }\r\n      \r\n      const pointsIssued = Math.floor(Number(record.refund_amount || 0));\r\n      \r\n      return (\r\n        <Tooltip title=\"Points added to customer balance\">\r\n          <Tag color=\"orange\" icon={<CreditCardOutlined />}>\r\n            {pointsIssued} pts (₹{pointsIssued})\r\n          </Tag>\r\n        </Tooltip>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    title: 'Stock Returned',\r\n    key: 'stock_returned',\r\n    width: 120,\r\n    align: 'center' as const,\r\n    render: (record: any) => (\r\n      record.stock_returned ? (\r\n        <Tag color=\"green\" icon={<CheckCircleOutlined />}>\r\n          Restocked\r\n        </Tag>\r\n      ) : (\r\n        <Tag color=\"default\">Not Restocked</Tag>\r\n      )\r\n    ),\r\n  },\r\n  {\r\n    title: 'Created By',\r\n    dataIndex: 'created_by_name',\r\n    key: 'created_by',\r\n    width: 120,\r\n    render: (name: string) => (\r\n      <span style={{ fontSize: '12px' }}>{name || '-'}</span>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Actions',\r\n    key: 'actions',\r\n    fixed: 'right' as const,\r\n    width: 120,\r\n    render: (record: any) => {\r\n      // Permission checks\r\n      const hasReadPerm = canRead(RESOURCES.SALES_RETURN);\r\n      const hasUpdatePerm = canUpdate(RESOURCES.SALES_RETURN);\r\n      const hasDeletePerm = canDelete(RESOURCES.SALES_RETURN);\r\n      \r\n      // Status-based checks\r\n      const canEditByStatus = record.status === 'draft';\r\n      const isDraft = record.status === 'draft';\r\n      \r\n      // Combined checks\r\n      const canEdit = hasUpdatePerm && canEditByStatus;\r\n      const canDeleteRecord = hasDeletePerm && isDraft;\r\n      \r\n      // Return Actions dropdown menu\r\n      const returnActionsMenu = (\r\n        <Menu>\r\n          {/* View - requires read permission */}\r\n          {hasReadPerm && (\r\n            <Menu.Item \r\n              key=\"view\" \r\n              icon={<EyeOutlined />}\r\n              onClick={() => actions.onView(record)}\r\n            >\r\n              View Details\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Submit - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <Menu.Item \r\n              key=\"submit\" \r\n              icon={<UploadOutlined />}\r\n              onClick={() => actions.onSubmit(record)}\r\n              style={{ color: '#1890ff' }}\r\n              disabled={record.status !== 'draft'}\r\n            >\r\n              Submit for Approval\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Approve - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <Menu.Item \r\n              key=\"approve\" \r\n              icon={<CheckOutlined />}\r\n              onClick={() => actions.onApprove(record)}\r\n              style={{ color: '#52c41a' }}\r\n              disabled={record.status !== 'pending_approval'}\r\n            >\r\n              Approve Return\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Reject - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <Menu.Item \r\n              key=\"reject\" \r\n              icon={<CloseCircleOutlined />}\r\n              onClick={() => actions.onReject(record)}\r\n              danger\r\n              disabled={!['pending_approval', 'approved'].includes(record.status)}\r\n            >\r\n              Reject Return\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Complete - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <Menu.Item \r\n              key=\"complete\" \r\n              icon={<CheckCircleOutlined />}\r\n              onClick={() => actions.onComplete(record)}\r\n              style={{ color: '#52c41a' }}\r\n              disabled={record.status !== 'approved'}\r\n            >\r\n              Mark Completed\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Print - requires read permission */}\r\n          {hasReadPerm && (\r\n            <Menu.Item \r\n              key=\"print\" \r\n              icon={<FileTextOutlined />}\r\n              onClick={() => actions.onPrint(record)}\r\n            >\r\n              Print / Download\r\n            </Menu.Item>\r\n          )}\r\n          \r\n          {/* Cancel - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <>\r\n              <Menu.Divider />\r\n              <Menu.Item \r\n                key=\"cancel\" \r\n                icon={<StopOutlined />}\r\n                onClick={() => {\r\n                  const confirmed = window.confirm('Cancel this Return?');\r\n                  if (confirmed) actions.onCancel(record);\r\n                }}\r\n                danger\r\n                disabled={['completed', 'cancelled'].includes(record.status)}\r\n              >\r\n                Cancel Return\r\n              </Menu.Item>\r\n            </>\r\n          )}\r\n        </Menu>\r\n      );\r\n      \r\n      // Don't show actions if no permissions\r\n      if (!hasReadPerm && !hasUpdatePerm && !hasDeletePerm) {\r\n        return null;\r\n      }\r\n      \r\n      return (\r\n        <Space size=\"small\">\r\n          {/* Edit - requires update permission */}\r\n          {hasUpdatePerm && (\r\n            <Tooltip title={canEdit ? \"Edit\" : \"Edit (not available for this status)\"}>\r\n              <Button\r\n                type=\"link\"\r\n                size=\"small\"\r\n                icon={<EditOutlined />}\r\n                onClick={() => actions.onEdit(record)}\r\n                disabled={!canEdit}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n          \r\n          {/* Delete - requires delete permission */}\r\n          {hasDeletePerm && (\r\n            <Tooltip title={canDeleteRecord ? \"Delete\" : \"Delete (only Draft can be deleted)\"}>\r\n              <Button\r\n                type=\"link\"\r\n                size=\"small\"\r\n                danger\r\n                icon={<DeleteOutlined />}\r\n                onClick={() => actions.onDelete(record)}\r\n                disabled={!canDeleteRecord}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n          \r\n          {/* Return Actions Dropdown */}\r\n          {(hasReadPerm || hasUpdatePerm) && (\r\n            <Dropdown overlay={returnActionsMenu} trigger={['click']} placement=\"bottomRight\">\r\n              <Tooltip title=\"Return Actions\">\r\n                <Button\r\n                  type=\"primary\"\r\n                  size=\"small\"\r\n                  icon={<MoreOutlined />}\r\n                />\r\n              </Tooltip>\r\n            </Dropdown>\r\n          )}\r\n        </Space>\r\n      );\r\n    },\r\n  },\r\n];\r\n\r\n","import React, { useCallback, useMemo } from 'react';\r\nimport {\r\n  Table,\r\n  InputNumber,\r\n  Select,\r\n  Input,\r\n  Tag,\r\n  Tooltip,\r\n  Space,\r\n} from 'antd';\r\nimport {\r\n  CheckCircleOutlined,\r\n  WarningOutlined,\r\n} from '@ant-design/icons';\r\nimport { SalesReturnItem } from '../../types/salesReturn';\r\n\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\n\r\ninterface ReturnItemsTableProps {\r\n  value?: SalesReturnItem[];\r\n  onChange?: (items: SalesReturnItem[]) => void;\r\n  disabled?: boolean;\r\n  showCondition?: boolean; // Show item condition column\r\n}\r\n\r\nconst ReturnItemsTable: React.FC<ReturnItemsTableProps> = ({\r\n  value = [],\r\n  onChange,\r\n  disabled = false,\r\n  showCondition = true,\r\n}) => {\r\n  \r\n  // Update item field\r\n  const handleFieldChange = useCallback((index: number, field: string, fieldValue: any) => {\r\n    const newItems = [...value];\r\n    const item = { ...newItems[index], [field]: fieldValue };\r\n    \r\n    // Recalculate line total if quantity or price changes\r\n    if (['quantity', 'unit_price', 'tax_percentage', 'discount'].includes(field)) {\r\n      const qty = Number(item.quantity) || 0;\r\n      const price = Number(item.unit_price) || 0;\r\n      const taxPct = Number(item.tax_percentage) || 0;\r\n      const discountVal = Number(item.discount) || 0;\r\n      const discountType = item.discount_type || 'percentage';\r\n      \r\n      let subtotal = qty * price;\r\n      \r\n      // Apply discount\r\n      if (discountType === 'percentage') {\r\n        subtotal -= subtotal * (discountVal / 100);\r\n      } else {\r\n        subtotal -= discountVal;\r\n      }\r\n      \r\n      // Add tax\r\n      const taxAmount = subtotal * (taxPct / 100);\r\n      item.line_total = Number((subtotal + taxAmount).toFixed(2));\r\n    }\r\n    \r\n    newItems[index] = item;\r\n    onChange?.(newItems);\r\n  }, [value, onChange]);\r\n\r\n  // Calculate totals\r\n  const totals = useMemo(() => {\r\n    const subtotal = value.reduce((sum, item) => {\r\n      const qty = Number(item.quantity) || 0;\r\n      const price = Number(item.unit_price) || 0;\r\n      const discountVal = Number(item.discount) || 0;\r\n      const discountType = item.discount_type || 'percentage';\r\n      \r\n      let itemSubtotal = qty * price;\r\n      if (discountType === 'percentage') {\r\n        itemSubtotal -= itemSubtotal * (discountVal / 100);\r\n      } else {\r\n        itemSubtotal -= discountVal;\r\n      }\r\n      \r\n      return sum + itemSubtotal;\r\n    }, 0);\r\n\r\n    const taxAmount = value.reduce((sum, item) => {\r\n      const qty = Number(item.quantity) || 0;\r\n      const price = Number(item.unit_price) || 0;\r\n      const taxPct = Number(item.tax_percentage) || 0;\r\n      const discountVal = Number(item.discount) || 0;\r\n      const discountType = item.discount_type || 'percentage';\r\n      \r\n      let itemSubtotal = qty * price;\r\n      if (discountType === 'percentage') {\r\n        itemSubtotal -= itemSubtotal * (discountVal / 100);\r\n      } else {\r\n        itemSubtotal -= discountVal;\r\n      }\r\n      \r\n      return sum + (itemSubtotal * (taxPct / 100));\r\n    }, 0);\r\n\r\n    const total = subtotal + taxAmount;\r\n    \r\n    return {\r\n      subtotal: Number(subtotal.toFixed(2)),\r\n      taxAmount: Number(taxAmount.toFixed(2)),\r\n      total: Number(total.toFixed(2)),\r\n    };\r\n  }, [value]);\r\n\r\n  // Table columns\r\n  const columns = [\r\n    {\r\n      title: '#',\r\n      key: 'index',\r\n      width: 40,\r\n      fixed: 'left' as const,\r\n      render: (_: any, __: any, index: number) => index + 1,\r\n    },\r\n    {\r\n      title: 'Product',\r\n      key: 'product',\r\n      width: 200,\r\n      fixed: 'left' as const,\r\n      render: (_: any, record: SalesReturnItem) => (\r\n        <div>\r\n          <strong>{record.product_name}</strong>\r\n          {record.variant_name && (\r\n            <div style={{ fontSize: '11px', color: '#888' }}>\r\n              {record.variant_name}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Original Qty',\r\n      key: 'max_quantity',\r\n      width: 100,\r\n      render: (_: any, record: SalesReturnItem) => (\r\n        <Tag color=\"blue\">{record.max_quantity || record.quantity}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: <span style={{ color: 'red' }}>* Return Qty</span>,\r\n      key: 'quantity',\r\n      width: 120,\r\n      render: (_: any, record: SalesReturnItem, index: number) => (\r\n        <InputNumber\r\n          min={1}\r\n          max={record.max_quantity || 999}\r\n          precision={0}\r\n          style={{ width: '100%' }}\r\n          value={record.quantity}\r\n          onChange={(val) => handleFieldChange(index, 'quantity', val || 1)}\r\n          disabled={disabled}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Unit Price',\r\n      key: 'unit_price',\r\n      width: 110,\r\n      render: (_: any, record: SalesReturnItem) => (\r\n        <span>₹{Number(record.unit_price || 0).toFixed(2)}</span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Tax %',\r\n      key: 'tax_percentage',\r\n      width: 80,\r\n      render: (_: any, record: SalesReturnItem) => (\r\n        <span>{record.tax_percentage}%</span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Line Total',\r\n      key: 'line_total',\r\n      width: 120,\r\n      render: (_: any, record: SalesReturnItem) => (\r\n        <strong style={{ color: '#ff4d4f' }}>\r\n          ₹{(record.line_total || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n        </strong>\r\n      ),\r\n    },\r\n    ...(showCondition ? [{\r\n      title: 'Condition',\r\n      key: 'item_condition',\r\n      width: 130,\r\n      render: (_: any, record: SalesReturnItem, index: number) => (\r\n        <Select\r\n          style={{ width: '100%' }}\r\n          value={record.item_condition || 'good'}\r\n          onChange={(val) => handleFieldChange(index, 'item_condition', val)}\r\n          disabled={disabled}\r\n        >\r\n          <Option value=\"good\">\r\n            <Space>\r\n              <CheckCircleOutlined style={{ color: '#52c41a' }} />\r\n              Good\r\n            </Space>\r\n          </Option>\r\n          <Option value=\"damaged\">\r\n            <Space>\r\n              <WarningOutlined style={{ color: '#faad14' }} />\r\n              Damaged\r\n            </Space>\r\n          </Option>\r\n          <Option value=\"expired\">\r\n            <Space>\r\n              <WarningOutlined style={{ color: '#ff4d4f' }} />\r\n              Expired\r\n            </Space>\r\n          </Option>\r\n          <Option value=\"defective\">\r\n            <Space>\r\n              <WarningOutlined style={{ color: '#ff4d4f' }} />\r\n              Defective\r\n            </Space>\r\n          </Option>\r\n        </Select>\r\n      ),\r\n    }] : []),\r\n    {\r\n      title: 'Notes',\r\n      key: 'condition_notes',\r\n      width: 200,\r\n      render: (_: any, record: SalesReturnItem, index: number) => (\r\n        <TextArea\r\n          rows={1}\r\n          placeholder=\"Condition notes...\"\r\n          value={record.condition_notes}\r\n          onChange={(e) => handleFieldChange(index, 'condition_notes', e.target.value)}\r\n          disabled={disabled}\r\n        />\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <div style={{ marginBottom: 12 }}>\r\n        <strong style={{ fontSize: '14px' }}>Return Items</strong>\r\n      </div>\r\n      \r\n      <Table\r\n        columns={columns}\r\n        dataSource={value}\r\n        pagination={false}\r\n        size=\"small\"\r\n        scroll={{ x: 'max-content' }}\r\n        rowKey={(record, index) => `item-${index}`}\r\n        bordered\r\n        footer={() => (\r\n          <div style={{ textAlign: 'right' }}>\r\n            <Space direction=\"vertical\" size=\"small\" style={{ width: '100%' }}>\r\n              <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '20px' }}>\r\n                <span>Subtotal:</span>\r\n                <strong>₹{totals.subtotal.toLocaleString('en-IN', { minimumFractionDigits: 2 })}</strong>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '20px' }}>\r\n                <span>Tax Amount:</span>\r\n                <strong>₹{totals.taxAmount.toLocaleString('en-IN', { minimumFractionDigits: 2 })}</strong>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '20px', fontSize: '16px', color: '#ff4d4f' }}>\r\n                <span>Refund Total:</span>\r\n                <strong>₹{totals.total.toLocaleString('en-IN', { minimumFractionDigits: 2 })}</strong>\r\n              </div>\r\n            </Space>\r\n          </div>\r\n        )}\r\n      />\r\n      \r\n      {value.length === 0 && (\r\n        <div style={{ textAlign: 'center', padding: '40px', color: '#999' }}>\r\n          No items to return. Please select an invoice first.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReturnItemsTable;\r\n\r\n","import React, { useState, useMemo } from 'react';\r\nimport { Modal, Input, Table, Button, Space, Tag, message, Tooltip } from 'antd';\r\nimport { SearchOutlined, FileTextOutlined, CalendarOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { apiSlice } from '../../services/redux/api/apiSlice';\r\nimport dayjs from 'dayjs';\r\n\r\ninterface SelectInvoiceModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSelect: (invoice: any) => void;\r\n}\r\n\r\nconst SelectInvoiceModal: React.FC<SelectInvoiceModalProps> = ({\r\n  open,\r\n  onClose,\r\n  onSelect,\r\n}) => {\r\n  const [searchText, setSearchText] = useState('');\r\n  const [selectedInvoice, setSelectedInvoice] = useState<any>(null);\r\n  \r\n  // Get all sales records (completed sales only)\r\n  const { data: salesData, isLoading } = apiSlice.useGetSalesRecordQuery({\r\n    pageNumber: 1,\r\n    pageLimit: 100,\r\n    // TODO: Add filter for completed sales only\r\n  });\r\n  \r\n  const invoices = useMemo(() => (salesData as any)?.result || [], [salesData]);\r\n  \r\n  // Filter invoices by search text\r\n  const filteredInvoices = useMemo(() => {\r\n    if (!searchText) return invoices;\r\n    \r\n    const search = searchText.toLowerCase();\r\n    return invoices.filter((invoice: any) => {\r\n      const invoiceNo = invoice.invoice_no || invoice.invoice_number || '';\r\n      const customerName = invoice.customerDetails?.full_name || invoice.customer_name || '';\r\n      const customerPhone = invoice.customerDetails?.mobile || invoice.customer_phone || '';\r\n      \r\n      return invoiceNo.toLowerCase().includes(search) ||\r\n             customerName.toLowerCase().includes(search) ||\r\n             customerPhone.includes(search);\r\n    });\r\n  }, [invoices, searchText]);\r\n  \r\n  const handleSelect = () => {\r\n    if (!selectedInvoice) {\r\n      message.warning('Please select an invoice');\r\n      return;\r\n    }\r\n    onSelect(selectedInvoice);\r\n  };\r\n  \r\n  const columns = [\r\n    {\r\n      title: 'Invoice Number',\r\n      key: 'invoice_number',\r\n      width: 140,\r\n      render: (record: any) => (\r\n        <Tag color=\"blue\" icon={<FileTextOutlined />}>\r\n          {record.invoice_no || record.invoice_number || '-'}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Date',\r\n      key: 'invoice_date',\r\n      width: 120,\r\n      render: (record: any) => {\r\n        const date = record.date || record.invoice_date;\r\n        return date ? (\r\n          <span>\r\n            <CalendarOutlined style={{ marginRight: 4 }} />\r\n            {dayjs(date).format('DD/MM/YYYY')}\r\n          </span>\r\n        ) : '-';\r\n      },\r\n    },\r\n    {\r\n      title: 'Customer',\r\n      key: 'customer',\r\n      width: 200,\r\n      render: (record: any) => {\r\n        const customerName = record.customerDetails?.full_name || record.customer_name || '-';\r\n        const customerPhone = record.customerDetails?.mobile || record.customer_phone;\r\n        \r\n        return (\r\n          <div>\r\n            <UserOutlined style={{ marginRight: 4, color: '#1890ff' }} />\r\n            <strong>{customerName}</strong>\r\n            {customerPhone && (\r\n              <div style={{ fontSize: '11px', color: '#888' }}>\r\n                {customerPhone}\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: 'Amount',\r\n      dataIndex: 'total_amount',\r\n      key: 'total_amount',\r\n      width: 120,\r\n      render: (amount: any) => (\r\n        <strong style={{ color: '#52c41a' }}>\r\n          ₹{Number(amount || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n        </strong>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Items',\r\n      key: 'items',\r\n      width: 80,\r\n      align: 'center' as const,\r\n      render: (record: any) => {\r\n        const itemsCount = record.Items?.length || record.sales_record_items?.length || record.items?.length || 0;\r\n        return <Tag color=\"geekblue\">{itemsCount}</Tag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'Payment',\r\n      dataIndex: 'is_paid',\r\n      key: 'payment_status',\r\n      width: 100,\r\n      render: (status: boolean) => {\r\n        const isPaid = status === true;\r\n        return (\r\n          <Tag color={isPaid ? 'green' : 'orange'}>\r\n            {isPaid ? 'Paid' : 'Pending'}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  \r\n  return (\r\n    <Modal\r\n      title={\r\n        <Space>\r\n          <SearchOutlined style={{ color: '#1890ff' }} />\r\n          <span>Select Original Invoice</span>\r\n        </Space>\r\n      }\r\n      open={open}\r\n      onCancel={onClose}\r\n      width={900}\r\n      footer={[\r\n        <Button key=\"cancel\" onClick={onClose}>\r\n          Cancel\r\n        </Button>,\r\n        <Button\r\n          key=\"select\"\r\n          type=\"primary\"\r\n          onClick={handleSelect}\r\n          disabled={!selectedInvoice}\r\n        >\r\n          Select Invoice\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <div style={{ marginBottom: 16 }}>\r\n        <Input\r\n          prefix={<SearchOutlined />}\r\n          placeholder=\"Search by invoice number, customer name, or phone...\"\r\n          value={searchText}\r\n          onChange={(e) => setSearchText(e.target.value)}\r\n          allowClear\r\n        />\r\n      </div>\r\n      \r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredInvoices}\r\n        loading={isLoading}\r\n        rowKey=\"_id\"\r\n        size=\"small\"\r\n        scroll={{ y: 400 }}\r\n        pagination={{\r\n          pageSize: 10,\r\n          showSizeChanger: false,\r\n          showTotal: (total) => `Total ${total} invoices`,\r\n        }}\r\n        rowSelection={{\r\n          type: 'radio',\r\n          selectedRowKeys: selectedInvoice ? [selectedInvoice._id] : [],\r\n          onChange: (selectedRowKeys, selectedRows) => {\r\n            setSelectedInvoice(selectedRows[0]);\r\n          },\r\n        }}\r\n      />\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default SelectInvoiceModal;\r\n\r\n","import React, { useState } from 'react';\r\nimport { Modal, Form, Input, message, Descriptions, Tag, Divider, Button, Checkbox, Space, Alert } from 'antd';\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons';\r\nimport { useApproveSalesReturnMutation, useRejectSalesReturnMutation } from '../../services/redux/api/endpoints';\r\n\r\ninterface ReturnApprovalModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  salesReturn: any;\r\n}\r\n\r\nconst ReturnApprovalModal: React.FC<ReturnApprovalModalProps> = ({\r\n  open,\r\n  onClose,\r\n  salesReturn,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const [rejectModalOpen, setRejectModalOpen] = useState(false);\r\n  const [rejectionReason, setRejectionReason] = useState('');\r\n  const [autoRestock, setAutoRestock] = useState(true);\r\n  \r\n  const [approveReturn, { isLoading: approving }] = useApproveSalesReturnMutation();\r\n  const [rejectReturn, { isLoading: rejecting }] = useRejectSalesReturnMutation();\r\n  \r\n  const handleApprove = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      await approveReturn({ \r\n        id: salesReturn._id, \r\n        comments: values.comments,\r\n        auto_restock: autoRestock\r\n      }).unwrap();\r\n      message.success('Sales return approved successfully');\r\n      form.resetFields();\r\n      onClose();\r\n    } catch (error: any) {\r\n      message.error(error?.data?.message || 'Failed to approve return');\r\n    }\r\n  };\r\n  \r\n  const handleReject = async () => {\r\n    try {\r\n      if (!rejectionReason) {\r\n        message.error('Please provide a rejection reason');\r\n        return;\r\n      }\r\n      await rejectReturn({ id: salesReturn._id, reason: rejectionReason }).unwrap();\r\n      message.success('Sales return rejected');\r\n      form.resetFields();\r\n      setRejectionReason('');\r\n      setRejectModalOpen(false);\r\n      onClose();\r\n    } catch (error: any) {\r\n      message.error(error?.data?.message || 'Failed to reject return');\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      <Modal\r\n        title=\"Approve / Reject Sales Return\"\r\n        open={open}\r\n        onCancel={onClose}\r\n        width={700}\r\n        footer={[\r\n          <Button\r\n            key=\"reject\"\r\n            danger\r\n            icon={<CloseCircleOutlined />}\r\n            loading={rejecting}\r\n            onClick={() => setRejectModalOpen(true)}\r\n          >\r\n            Reject\r\n          </Button>,\r\n          <Button\r\n            key=\"approve\"\r\n            type=\"primary\"\r\n            icon={<CheckCircleOutlined />}\r\n            loading={approving}\r\n            onClick={handleApprove}\r\n          >\r\n            Approve & Process\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <Descriptions bordered column={2} size=\"small\">\r\n          <Descriptions.Item label=\"Return Number\" span={2}>\r\n            <Tag color=\"orange\">{salesReturn?.return_number}</Tag>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Customer\" span={2}>\r\n            {salesReturn?.customer_name}\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Invoice Number\">\r\n            <Tag color=\"blue\">{salesReturn?.invoice_number}</Tag>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Refund Type\">\r\n            <Tag color=\"green\">{salesReturn?.refund_type?.toUpperCase()}</Tag>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Refund Amount\" span={2}>\r\n            <strong style={{ color: '#ff4d4f', fontSize: '16px' }}>\r\n              ₹{Number(salesReturn?.refund_amount || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n            </strong>\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Items\" span={2}>\r\n            {salesReturn?.items?.length} items\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Return Reason\" span={2}>\r\n            <Tag>{salesReturn?.return_reason?.replace('_', ' ').toUpperCase()}</Tag>\r\n            {salesReturn?.return_reason_notes && (\r\n              <div style={{ marginTop: 8, fontSize: '12px', color: '#666' }}>\r\n                {salesReturn.return_reason_notes}\r\n              </div>\r\n            )}\r\n          </Descriptions.Item>\r\n        </Descriptions>\r\n        \r\n        <Divider />\r\n        \r\n        <Form form={form} layout=\"vertical\">\r\n          <Form.Item\r\n            name=\"comments\"\r\n            label=\"Comments (Optional)\"\r\n          >\r\n            <Input.TextArea rows={3} placeholder=\"Add any comments...\" />\r\n          </Form.Item>\r\n          \r\n          <Form.Item>\r\n            <Checkbox\r\n              checked={autoRestock}\r\n              onChange={(e) => setAutoRestock(e.target.checked)}\r\n            >\r\n              <Space direction=\"vertical\" size={0}>\r\n                <strong>Auto-restock returned items</strong>\r\n                <span style={{ fontSize: '11px', color: '#888' }}>\r\n                  Automatically add items back to inventory\r\n                </span>\r\n              </Space>\r\n            </Checkbox>\r\n          </Form.Item>\r\n          \r\n          {salesReturn?.refund_type === 'points' && (\r\n            <Alert\r\n              message=\"Customer Points Refund\"\r\n              description={`${Math.floor(salesReturn.refund_amount || 0)} points (₹${Number(salesReturn.refund_amount || 0).toFixed(2)} value) will be added to customer's points balance after approval.`}\r\n              type=\"info\"\r\n              showIcon\r\n              style={{ marginTop: 16 }}\r\n            />\r\n          )}\r\n        </Form>\r\n      </Modal>\r\n      \r\n      {/* Rejection Modal */}\r\n      <Modal\r\n        title=\"Reject Sales Return\"\r\n        open={rejectModalOpen}\r\n        onCancel={() => setRejectModalOpen(false)}\r\n        onOk={handleReject}\r\n        confirmLoading={rejecting}\r\n        okText=\"Reject\"\r\n        okButtonProps={{ danger: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"Rejection Reason\"\r\n          required\r\n        >\r\n          <Input.TextArea\r\n            rows={4}\r\n            value={rejectionReason}\r\n            onChange={(e) => setRejectionReason(e.target.value)}\r\n            placeholder=\"Enter the reason for rejecting this return...\"\r\n          />\r\n        </Form.Item>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReturnApprovalModal;\r\n\r\n","import React from 'react';\r\nimport { Modal, Descriptions, Table, Tag, Divider, Space, Badge } from 'antd';\r\nimport {\r\n  FileTextOutlined,\r\n  CalendarOutlined,\r\n  DollarOutlined,\r\n  UserOutlined,\r\n  UndoOutlined,\r\n  CreditCardOutlined,\r\n  CheckCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport dayjs from 'dayjs';\r\n\r\ninterface ReturnViewModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  salesReturn: any;\r\n}\r\n\r\nconst ReturnViewModal: React.FC<ReturnViewModalProps> = ({\r\n  open,\r\n  onClose,\r\n  salesReturn,\r\n}) => {\r\n  if (!salesReturn) return null;\r\n  \r\n  const statusConfig: Record<string, any> = {\r\n    draft: { color: 'default', label: 'Draft' },\r\n    pending_approval: { color: 'warning', label: 'Pending Approval' },\r\n    approved: { color: 'success', label: 'Approved' },\r\n    rejected: { color: 'error', label: 'Rejected' },\r\n    completed: { color: 'green', label: 'Completed' },\r\n    cancelled: { color: 'red', label: 'Cancelled' },\r\n  };\r\n  \r\n  const currentStatus = statusConfig[salesReturn.status] || statusConfig.draft;\r\n  \r\n  const itemColumns = [\r\n    {\r\n      title: 'Product',\r\n      key: 'product',\r\n      render: (record: any) => (\r\n        <div>\r\n          <strong>{record.product_name}</strong>\r\n          {record.variant_name && (\r\n            <div style={{ fontSize: '11px', color: '#888' }}>\r\n              {record.variant_name}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Quantity',\r\n      dataIndex: 'quantity',\r\n      key: 'quantity',\r\n      render: (qty: number) => <Tag color=\"orange\">{qty}</Tag>,\r\n    },\r\n    {\r\n      title: 'Unit Price',\r\n      dataIndex: 'unit_price',\r\n      key: 'unit_price',\r\n      render: (price: any) => `₹${Number(price || 0).toFixed(2)}`,\r\n    },\r\n    {\r\n      title: 'Tax %',\r\n      dataIndex: 'tax_percentage',\r\n      key: 'tax_percentage',\r\n      render: (tax: any) => `${Number(tax || 0)}%`,\r\n    },\r\n    {\r\n      title: 'Line Total',\r\n      dataIndex: 'line_total',\r\n      key: 'line_total',\r\n      render: (total: any) => (\r\n        <strong style={{ color: '#ff4d4f' }}>\r\n          ₹{Number(total || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n        </strong>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Condition',\r\n      dataIndex: 'item_condition',\r\n      key: 'item_condition',\r\n      render: (condition: string) => {\r\n        const conditionConfig: Record<string, { color: string; label: string }> = {\r\n          good: { color: 'green', label: 'Good' },\r\n          damaged: { color: 'orange', label: 'Damaged' },\r\n          expired: { color: 'red', label: 'Expired' },\r\n          defective: { color: 'red', label: 'Defective' },\r\n        };\r\n        const config = conditionConfig[condition] || conditionConfig.good;\r\n        return <Tag color={config.color}>{config.label}</Tag>;\r\n      },\r\n    },\r\n  ];\r\n  \r\n  return (\r\n    <Modal\r\n      title={\r\n        <Space>\r\n          <UndoOutlined style={{ color: '#ff4d4f' }} />\r\n          <span>Sales Return Details</span>\r\n        </Space>\r\n      }\r\n      open={open}\r\n      onCancel={onClose}\r\n      width={1200}\r\n      footer={null}\r\n    >\r\n      <Descriptions bordered column={2} size=\"small\">\r\n        <Descriptions.Item label=\"Return Number\" span={1}>\r\n          <Tag color=\"orange\" icon={<UndoOutlined />}>\r\n            {salesReturn.return_number}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        <Descriptions.Item label=\"Status\" span={1}>\r\n          <Badge status={currentStatus.color} text={<Tag color={currentStatus.color}>{currentStatus.label}</Tag>} />\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item label=\"Original Invoice\" span={1}>\r\n          <Tag color=\"blue\" icon={<FileTextOutlined />}>\r\n            {salesReturn.invoice_number}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        <Descriptions.Item label=\"Invoice Date\" span={1}>\r\n          <CalendarOutlined style={{ marginRight: 8 }} />\r\n          {salesReturn.invoice_date ? dayjs(salesReturn.invoice_date).format('DD/MM/YYYY') : '-'}\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item label=\"Customer\" span={2}>\r\n          <UserOutlined style={{ marginRight: 8 }} />\r\n          <strong>{salesReturn.customer_name}</strong>\r\n          {salesReturn.customer_phone && ` - ${salesReturn.customer_phone}`}\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item label=\"Return Date\">\r\n          <CalendarOutlined style={{ marginRight: 8 }} />\r\n          {dayjs(salesReturn.return_date).format('DD/MM/YYYY')}\r\n        </Descriptions.Item>\r\n        <Descriptions.Item label=\"Return Reason\">\r\n          <Tag>{salesReturn.return_reason?.replace('_', ' ').toUpperCase()}</Tag>\r\n        </Descriptions.Item>\r\n        \r\n        {salesReturn.return_reason_notes && (\r\n          <Descriptions.Item label=\"Reason Details\" span={2}>\r\n            {salesReturn.return_reason_notes}\r\n          </Descriptions.Item>\r\n        )}\r\n      </Descriptions>\r\n      \r\n      <Divider orientation=\"left\">Refund Information</Divider>\r\n      \r\n      <Descriptions bordered column={4} size=\"small\">\r\n        <Descriptions.Item label=\"Refund Type\">\r\n          <Tag color=\"green\" icon={<CreditCardOutlined />}>\r\n            {salesReturn.refund_type?.toUpperCase()}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        <Descriptions.Item label=\"Refund Status\">\r\n          <Tag color={salesReturn.refund_status === 'completed' ? 'green' : 'orange'}>\r\n            {salesReturn.refund_status?.toUpperCase()}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        <Descriptions.Item label=\"Refund Amount\" span={2}>\r\n          <strong style={{ color: '#ff4d4f', fontSize: '16px' }}>\r\n            <DollarOutlined style={{ marginRight: 8 }} />\r\n            ₹{Number(salesReturn.refund_amount || 0).toLocaleString('en-IN', { minimumFractionDigits: 2 })}\r\n          </strong>\r\n        </Descriptions.Item>\r\n        \r\n        {salesReturn.refund_date && (\r\n          <Descriptions.Item label=\"Refund Date\" span={2}>\r\n            {dayjs(salesReturn.refund_date).format('DD/MM/YYYY')}\r\n          </Descriptions.Item>\r\n        )}\r\n        \r\n        {salesReturn.refund_reference && (\r\n          <Descriptions.Item label=\"Refund Reference\" span={2}>\r\n            {salesReturn.refund_reference}\r\n          </Descriptions.Item>\r\n        )}\r\n        \r\n        {salesReturn.refund_type === 'points' && (\r\n          <Descriptions.Item label=\"Points Issued\" span={4}>\r\n            <Tag color=\"orange\" icon={<CreditCardOutlined />}>\r\n              {Math.floor(Number(salesReturn.refund_amount || 0))} points\r\n            </Tag>\r\n            <span style={{ marginLeft: 8, color: '#888' }}>\r\n              Points added to customer balance (₹{Number(salesReturn.refund_amount || 0).toFixed(2)} value)\r\n            </span>\r\n          </Descriptions.Item>\r\n        )}\r\n      </Descriptions>\r\n      \r\n      <Divider orientation=\"left\">Returned Items</Divider>\r\n      \r\n      <Table\r\n        columns={itemColumns}\r\n        dataSource={salesReturn.items || []}\r\n        rowKey={(record, index) => `item-${index}`}\r\n        pagination={false}\r\n        size=\"small\"\r\n        bordered\r\n        scroll={{ x: 1000 }}\r\n      />\r\n      \r\n      {salesReturn.stock_returned && (\r\n        <div style={{ marginTop: 16, padding: '12px', background: '#f6ffed', border: '1px solid #b7eb8f', borderRadius: '4px' }}>\r\n          <CheckCircleOutlined style={{ color: '#52c41a', marginRight: 8 }} />\r\n          <strong>Stock Returned:</strong> Items have been restocked on {' '}\r\n          {dayjs(salesReturn.stock_returned_date).format('DD/MM/YYYY')}\r\n        </div>\r\n      )}\r\n      \r\n      {salesReturn.notes && (\r\n        <>\r\n          <Divider orientation=\"left\">Notes</Divider>\r\n          <div style={{ padding: '12px', background: '#fafafa', borderRadius: '4px' }}>\r\n            {salesReturn.notes}\r\n          </div>\r\n        </>\r\n      )}\r\n      \r\n      {salesReturn.approved_by_name && (\r\n        <>\r\n          <Divider orientation=\"left\">Approval Information</Divider>\r\n          <Descriptions bordered size=\"small\">\r\n            <Descriptions.Item label=\"Approved By\">\r\n              {salesReturn.approved_by_name}\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"Approved Date\">\r\n              {dayjs(salesReturn.approved_date).format('DD/MM/YYYY HH:mm')}\r\n            </Descriptions.Item>\r\n          </Descriptions>\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ReturnViewModal;\r\n\r\n","import React, { useState, useCallback, useMemo } from 'react';\r\nimport { message, Modal, Form, Input, Select, DatePicker, Button, Alert, Space, Tag, Switch } from 'antd';\r\nimport { GenericCrudPage } from '../../components/common/GenericCrudPage';\r\nimport { salesReturnColumns } from './columns';\r\nimport {\r\n  useSubmitSalesReturnMutation,\r\n  useApproveSalesReturnMutation,\r\n  useRejectSalesReturnMutation,\r\n  useCompleteSalesReturnMutation,\r\n  useCancelSalesReturnMutation,\r\n} from '../../services/redux/api/endpoints';\r\nimport ReturnItemsTable from './ReturnItemsTable';\r\nimport SelectInvoiceModal from './SelectInvoiceModal';\r\nimport ReturnApprovalModal from './ReturnApprovalModal';\r\nimport ReturnViewModal from './ReturnViewModal';\r\nimport dayjs from 'dayjs';\r\nimport { getCurrentUser } from '../../helpers/auth';\r\nimport { canCreate, canUpdate, canDelete, RESOURCES } from '../../helpers/permissionHelper';\r\nimport { FileTextOutlined, SearchOutlined } from '@ant-design/icons';\r\n\r\nconst { TextArea } = Input;\r\nconst { Option } = Select;\r\n\r\nconst SalesReturnsCrud: React.FC = () => {\r\n  const currentUser = getCurrentUser();\r\n  const [form] = Form.useForm();\r\n  \r\n  // Modals state\r\n  const [invoiceModalOpen, setInvoiceModalOpen] = useState(false);\r\n  const [approvalModalOpen, setApprovalModalOpen] = useState(false);\r\n  const [viewModalOpen, setViewModalOpen] = useState(false);\r\n  const [selectedReturn, setSelectedReturn] = useState<any>(null);\r\n  const [selectedInvoice, setSelectedInvoice] = useState<any>(null);\r\n  \r\n  // Mutations\r\n  const [submitReturn] = useSubmitSalesReturnMutation();\r\n  const [approveReturn] = useApproveSalesReturnMutation();\r\n  const [rejectReturn] = useRejectSalesReturnMutation();\r\n  const [completeReturn] = useCompleteSalesReturnMutation();\r\n  const [cancelReturn] = useCancelSalesReturnMutation();\r\n  \r\n  // Handle invoice selection\r\n  const handleInvoiceSelect = useCallback((invoice: any) => {\r\n    setSelectedInvoice(invoice);\r\n    setInvoiceModalOpen(false);\r\n    \r\n    // Check if GST is included in price\r\n    const isGstIncluded = invoice.is_gst_included || false;\r\n    \r\n    // Check multiple possible field names for items (Items with capital I!)\r\n    const invoiceItems = invoice.Items || invoice.sales_record_items || invoice.items || invoice.SalesRecordItems || [];\r\n    \r\n    // Convert invoice items to return items\r\n    if (invoiceItems && invoiceItems.length > 0) {\r\n      const items = invoiceItems.map((item: any) => {\r\n        // Get product name from nested object or direct field\r\n        const productName = item.productItems?.name || item.product_name || item.name || 'Unknown Product';\r\n        const variantName = item.productItems?.VariantItem?.variant_name || item.variant_name || '';\r\n        const taxPercentage = item.productItems?.CategoryItem?.tax_percentage || item.tax_percentage || 0;\r\n        \r\n        // Get price - handle GST included/excluded\r\n        let unitPrice = Number(item.price || item.unit_price) || 0;\r\n        let lineTotal = Number(item.amount || item.line_total) || 0;\r\n        \r\n        // If GST is included, extract base price from total\r\n        if (isGstIncluded && taxPercentage > 0) {\r\n          // Reverse calculate: base_price = total_price / (1 + tax_rate)\r\n          unitPrice = unitPrice / (1 + (taxPercentage / 100));\r\n          lineTotal = lineTotal / (1 + (taxPercentage / 100));\r\n        }\r\n        \r\n        return {\r\n          sales_record_item_id: item._id,\r\n          product_id: item.product_id,\r\n          product_name: productName,\r\n          variant_id: item.variant_id || item.productItems?.variant,\r\n          variant_name: variantName,\r\n          stock_id: item.stock_id,\r\n          batch_no: item.batch_no,\r\n          expiry_date: item.expiry_date,\r\n          quantity: Number(item.qty || item.quantity) || 1,\r\n          max_quantity: Number(item.qty || item.quantity) || 1,\r\n          loose_qty: Number(item.loose_qty) || 0,\r\n          unit_price: Number(unitPrice.toFixed(2)),\r\n          tax_percentage: Number(taxPercentage),\r\n          discount: Number(item.discount) || 0,\r\n          discount_type: item.discount_type || 'percentage',\r\n          line_total: Number(lineTotal.toFixed(2)),\r\n          item_condition: 'good',\r\n          condition_notes: '',\r\n          is_gst_included: isGstIncluded, // Store for reference\r\n        };\r\n      });\r\n      \r\n      // Update form fields - both items AND invoice_selector to pass validation\r\n      form.setFieldsValue({ \r\n        items,\r\n        invoice_selector: invoice._id, // Set this to pass required validation\r\n      });\r\n      \r\n      const gstNote = isGstIncluded ? ' (GST Included - base price extracted)' : ' (GST Excluded)';\r\n      message.success(`Invoice loaded! ${items.length} item(s) ready to return.${gstNote}`);\r\n    } else {\r\n      message.error('This invoice has no items. Please select a different invoice.');\r\n    }\r\n  }, [form]);\r\n  \r\n  // Calculate totals from return items\r\n  const calculateTotals = useCallback((items: any[] = []) => {\r\n    let subtotal = 0;\r\n    let tax_amount = 0;\r\n\r\n    items.forEach(item => {\r\n      const qty = Number(item.quantity) || 0;\r\n      const price = Number(item.unit_price) || 0;\r\n      const taxPct = Number(item.tax_percentage) || 0;\r\n      const discountVal = Number(item.discount) || 0;\r\n      const discountType = item.discount_type || 'percentage';\r\n      \r\n      let itemSubtotal = qty * price;\r\n      if (discountType === 'percentage') {\r\n        itemSubtotal -= itemSubtotal * (discountVal / 100);\r\n      } else {\r\n        itemSubtotal -= discountVal;\r\n      }\r\n      \r\n      subtotal += itemSubtotal;\r\n      tax_amount += itemSubtotal * (taxPct / 100);\r\n    });\r\n\r\n    const total_amount = subtotal + tax_amount;\r\n    \r\n    return {\r\n      subtotal: Number(subtotal.toFixed(2)),\r\n      tax_amount: Number(tax_amount.toFixed(2)),\r\n      total_amount: Number(total_amount.toFixed(2)),\r\n    };\r\n  }, []);\r\n  \r\n  // Form items\r\n  const formItems = useMemo(() => [\r\n    {\r\n      name: 'invoice_selector',\r\n      label: 'Original Invoice',\r\n      rules: [{ required: true, message: 'Please select an invoice' }],\r\n      component: (\r\n        <div>\r\n          {selectedInvoice ? (\r\n            <Alert\r\n              message={\r\n                <Space>\r\n                  <FileTextOutlined />\r\n                  <span>Invoice: <strong>{selectedInvoice.invoice_no || selectedInvoice.invoice_number}</strong></span>\r\n                  <span>Customer: <strong>{selectedInvoice.customerDetails?.full_name || selectedInvoice.customer_name || 'N/A'}</strong></span>\r\n                  <span>Amount: <strong>₹{Number(selectedInvoice.total_amount || 0).toFixed(2)}</strong></span>\r\n                  {selectedInvoice.is_gst_included && (\r\n                    <Tag color=\"blue\">GST Included</Tag>\r\n                  )}\r\n                </Space>\r\n              }\r\n              type=\"success\"\r\n              action={\r\n                <Button size=\"small\" onClick={() => setInvoiceModalOpen(true)}>\r\n                  Change\r\n                </Button>\r\n              }\r\n            />\r\n          ) : (\r\n            <Button\r\n              type=\"dashed\"\r\n              block\r\n              icon={<SearchOutlined />}\r\n              onClick={() => setInvoiceModalOpen(true)}\r\n            >\r\n              Search & Select Invoice\r\n            </Button>\r\n          )}\r\n        </div>\r\n      ),\r\n      colSpan: 3,\r\n    },\r\n    {\r\n      name: 'return_number',\r\n      label: 'Return Number',\r\n      rules: [{ required: true, message: 'Return number is required' }],\r\n      component: <Input placeholder=\"Auto-generated or enter manually\" />,\r\n    },\r\n    {\r\n      name: 'return_date',\r\n      label: 'Return Date',\r\n      initialValue: dayjs(),\r\n      rules: [{ required: true, message: 'Return date is required' }],\r\n      component: <DatePicker style={{ width: '100%' }} format=\"YYYY-MM-DD\" />,\r\n    },\r\n    {\r\n      name: 'return_reason',\r\n      label: 'Return Reason',\r\n      rules: [{ required: true, message: 'Return reason is required' }],\r\n      component: (\r\n        <Select placeholder=\"Select reason\">\r\n          <Option value=\"damaged\">Damaged / Broken</Option>\r\n          <Option value=\"wrong_item\">Wrong Item Delivered</Option>\r\n          <Option value=\"expired\">Expired Product</Option>\r\n          <Option value=\"defective\">Defective / Not Working</Option>\r\n          <Option value=\"customer_request\">Customer Request</Option>\r\n          <Option value=\"other\">Other</Option>\r\n        </Select>\r\n      ),\r\n    },\r\n    {\r\n      name: 'return_reason_notes',\r\n      label: 'Reason Details',\r\n      component: <TextArea rows={2} placeholder=\"Additional details about the return...\" />,\r\n      colSpan: 3,\r\n    },\r\n    {\r\n      name: 'refund_type',\r\n      label: 'Refund Type',\r\n      initialValue: 'cash',\r\n      rules: [{ required: true, message: 'Refund type is required' }],\r\n      component: (\r\n        <Select placeholder=\"Select refund method\">\r\n          <Option value=\"cash\">💵 Cash</Option>\r\n          <Option value=\"card\">💳 Card</Option>\r\n          <Option value=\"upi\">📱 UPI</Option>\r\n          <Option value=\"points\">🎯 Customer Points (Recommended)</Option>\r\n          <Option value=\"bank_transfer\">🏦 Bank Transfer</Option>\r\n        </Select>\r\n      ),\r\n    },\r\n    {\r\n      name: 'refund_reference',\r\n      label: 'Refund Reference',\r\n      component: <Input placeholder=\"Transaction ID, Receipt No, etc.\" />,\r\n    },\r\n    {\r\n      name: 'refund_date',\r\n      label: 'Refund Date',\r\n      component: <DatePicker style={{ width: '100%' }} format=\"YYYY-MM-DD\" />,\r\n    },\r\n    {\r\n      name: 'notes',\r\n      label: 'Notes',\r\n      component: <TextArea rows={3} placeholder=\"Additional notes about the return...\" />,\r\n      colSpan: 3,\r\n    },\r\n    {\r\n      name: 'items',\r\n      label: 'Return Items',\r\n      rules: [\r\n        { required: true, message: 'At least one item is required' },\r\n        {\r\n          validator: async (_: any, items: any[]) => {\r\n            if (!items || items.length === 0) {\r\n              throw new Error('Please select an invoice with items to return');\r\n            }\r\n          },\r\n        },\r\n      ],\r\n      component: <ReturnItemsTable showCondition={true} />,\r\n      colSpan: 3,\r\n    },\r\n  ], [selectedInvoice]);\r\n  \r\n  // Column actions\r\n  const columnActions = useMemo(() => ({\r\n    onView: (record: any) => {\r\n      setSelectedReturn(record);\r\n      setViewModalOpen(true);\r\n    },\r\n    onEdit: () => {}, // Handled by GenericCrudPage\r\n    onDelete: async (record: any) => message.info('Delete handled by GenericCrudPage'),\r\n    onSubmit: async (record: any) => {\r\n      Modal.confirm({\r\n        title: 'Submit Sales Return for Approval?',\r\n        content: (\r\n          <div>\r\n            <p>Once submitted, the return will be sent for approval.</p>\r\n            <Input.TextArea\r\n              rows={2}\r\n              id=\"submit-comments\"\r\n              placeholder=\"Optional comments...\"\r\n            />\r\n          </div>\r\n        ),\r\n        onOk: async () => {\r\n          try {\r\n            const comments = (document.getElementById('submit-comments') as HTMLTextAreaElement)?.value || undefined;\r\n            await submitReturn({ id: record._id, comments }).unwrap();\r\n            message.success('Sales return submitted for approval');\r\n          } catch (error: any) {\r\n            message.error(error?.data?.message || 'Failed to submit return');\r\n          }\r\n        },\r\n      });\r\n    },\r\n    onApprove: (record: any) => {\r\n      setSelectedReturn(record);\r\n      setApprovalModalOpen(true);\r\n    },\r\n    onReject: async (record: any) => {\r\n      Modal.confirm({\r\n        title: 'Reject Sales Return?',\r\n        content: (\r\n          <div>\r\n            <p>Please provide a reason for rejection:</p>\r\n            <Input.TextArea\r\n              rows={3}\r\n              id=\"rejection-reason\"\r\n              placeholder=\"Enter reason...\"\r\n            />\r\n          </div>\r\n        ),\r\n        onOk: async () => {\r\n          const reason = (document.getElementById('rejection-reason') as HTMLTextAreaElement)?.value;\r\n          if (!reason) {\r\n            message.error('Rejection reason is required');\r\n            return Promise.reject();\r\n          }\r\n          try {\r\n            await rejectReturn({ id: record._id, reason }).unwrap();\r\n            message.success('Sales return rejected');\r\n          } catch (error: any) {\r\n            message.error(error?.data?.message || 'Failed to reject return');\r\n          }\r\n        },\r\n      });\r\n    },\r\n    onComplete: async (record: any) => {\r\n      Modal.confirm({\r\n        title: 'Mark Return as Completed?',\r\n        content: 'This will finalize the return process.',\r\n        onOk: async () => {\r\n          try {\r\n            await completeReturn({ id: record._id }).unwrap();\r\n            message.success('Sales return marked as completed');\r\n          } catch (error: any) {\r\n            message.error(error?.data?.message || 'Failed to complete return');\r\n          }\r\n        },\r\n      });\r\n    },\r\n    onCancel: async (record: any) => {\r\n      Modal.confirm({\r\n        title: 'Cancel Sales Return?',\r\n        content: 'Are you sure you want to cancel this return?',\r\n        onOk: async () => {\r\n          try {\r\n            await cancelReturn({ id: record._id }).unwrap();\r\n            message.success('Sales return cancelled');\r\n          } catch (error: any) {\r\n            message.error(error?.data?.message || 'Failed to cancel return');\r\n          }\r\n        },\r\n      });\r\n    },\r\n    onPrint: () => message.info('Print functionality coming soon'),\r\n  }), [submitReturn, rejectReturn, completeReturn, cancelReturn]);\r\n  \r\n  // Handle before save\r\n  const handleBeforeSave = useCallback((values: any) => {\r\n    if (!selectedInvoice) {\r\n      message.error('Please select an invoice first');\r\n      throw new Error('No invoice selected');\r\n    }\r\n    \r\n    const totals = calculateTotals(values.items || []);\r\n    \r\n    return {\r\n      ...values,\r\n      sales_record_id: selectedInvoice._id,\r\n      invoice_number: selectedInvoice.invoice_no || selectedInvoice.invoice_number,\r\n      invoice_date: selectedInvoice.date || selectedInvoice.invoice_date,\r\n      customer_id: selectedInvoice.customer_id,\r\n      customer_name: selectedInvoice.customerDetails?.full_name || selectedInvoice.customer_name,\r\n      customer_email: selectedInvoice.customerDetails?.email || selectedInvoice.customer_email,\r\n      customer_phone: selectedInvoice.customerDetails?.mobile || selectedInvoice.customer_phone,\r\n      ...totals,\r\n      refund_amount: totals.total_amount,\r\n      return_date: values.return_date ? dayjs(values.return_date).format('YYYY-MM-DD') : dayjs().format('YYYY-MM-DD'),\r\n      refund_date: values.refund_date ? dayjs(values.refund_date).format('YYYY-MM-DD') : undefined,\r\n      status: values._id ? values.status : 'draft',\r\n      created_by_id: currentUser?._id,\r\n      created_by_name: currentUser?.username,\r\n    };\r\n  }, [selectedInvoice, calculateTotals, currentUser]);\r\n  \r\n  // Config for GenericCrudPage\r\n  const config = useMemo(() => ({\r\n    title: 'Sales Returns',\r\n    entityName: 'SalesReturn',\r\n    columns: salesReturnColumns(columnActions),\r\n    formItems,\r\n    formColumns: 3,\r\n    drawerWidth: 1400,\r\n    form, // Pass form instance\r\n    beforeSave: handleBeforeSave,\r\n    canCreate: () => canCreate(RESOURCES.SALES_RETURN),\r\n    canEdit: (record: any) => {\r\n      const hasPermission = canUpdate(RESOURCES.SALES_RETURN);\r\n      const canEditByStatus = record?.status === 'draft';\r\n      return hasPermission && canEditByStatus;\r\n    },\r\n    canDelete: (record: any) => {\r\n      const hasPermission = canDelete(RESOURCES.SALES_RETURN);\r\n      const isDraft = record?.status === 'draft';\r\n      return hasPermission && isDraft;\r\n    },\r\n  }), [columnActions, formItems, handleBeforeSave, form]);\r\n  \r\n  return (\r\n    <>\r\n      <GenericCrudPage config={config} />\r\n      \r\n      {/* Select Invoice Modal */}\r\n      <SelectInvoiceModal\r\n        open={invoiceModalOpen}\r\n        onClose={() => setInvoiceModalOpen(false)}\r\n        onSelect={handleInvoiceSelect}\r\n      />\r\n      \r\n      {/* Approval Modal */}\r\n      <ReturnApprovalModal\r\n        open={approvalModalOpen}\r\n        onClose={() => {\r\n          setApprovalModalOpen(false);\r\n          setSelectedReturn(null);\r\n        }}\r\n        salesReturn={selectedReturn}\r\n      />\r\n      \r\n      {/* View Details Modal */}\r\n      <ReturnViewModal\r\n        open={viewModalOpen}\r\n        onClose={() => {\r\n          setViewModalOpen(false);\r\n          setSelectedReturn(null);\r\n        }}\r\n        salesReturn={selectedReturn}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SalesReturnsCrud;\r\n\r\n"],"names":["statusConfig","draft","color","icon","_jsx","EditOutlined","label","pending_approval","ClockCircleOutlined","approved","CheckCircleOutlined","rejected","CloseCircleOutlined","completed","cancelled","StopOutlined","refundTypeConfig","cash","DollarOutlined","card","CreditCardOutlined","upi","points","bank_transfer","TextArea","Input","Option","Select","_ref","value","onChange","disabled","showCondition","handleFieldChange","useCallback","index","field","fieldValue","newItems","item","_objectSpread","includes","qty","Number","quantity","price","unit_price","taxPct","tax_percentage","discountVal","discount","subtotal","discount_type","taxAmount","line_total","toFixed","totals","useMemo","reduce","sum","itemSubtotal","total","columns","title","key","width","fixed","render","_","__","record","_jsxs","children","product_name","variant_name","style","fontSize","Tag","max_quantity","InputNumber","min","max","precision","val","toLocaleString","minimumFractionDigits","item_condition","Space","WarningOutlined","rows","placeholder","condition_notes","e","target","marginBottom","Table","dataSource","pagination","size","scroll","x","rowKey","concat","bordered","footer","textAlign","direction","display","justifyContent","gap","length","padding","open","onClose","onSelect","searchText","setSearchText","useState","selectedInvoice","setSelectedInvoice","data","salesData","isLoading","apiSlice","useGetSalesRecordQuery","pageNumber","pageLimit","invoices","result","filteredInvoices","search","toLowerCase","filter","invoice","_invoice$customerDeta","_invoice$customerDeta2","invoiceNo","invoice_no","invoice_number","customerName","customerDetails","full_name","customer_name","customerPhone","mobile","customer_phone","FileTextOutlined","date","invoice_date","CalendarOutlined","marginRight","dayjs","format","_record$customerDetai","_record$customerDetai2","UserOutlined","dataIndex","amount","align","_record$Items","_record$sales_record_","_record$items","itemsCount","Items","sales_record_items","items","status","isPaid","Modal","SearchOutlined","onCancel","Button","onClick","type","handleSelect","message","warning","prefix","allowClear","loading","y","pageSize","showSizeChanger","showTotal","rowSelection","selectedRowKeys","_id","selectedRows","_salesReturn$refund_t","_salesReturn$items","_salesReturn$return_r","salesReturn","form","Form","useForm","rejectModalOpen","setRejectModalOpen","rejectionReason","setRejectionReason","autoRestock","setAutoRestock","approveReturn","approving","useApproveSalesReturnMutation","rejectReturn","rejecting","useRejectSalesReturnMutation","_Fragment","danger","async","values","validateFields","id","comments","auto_restock","unwrap","success","resetFields","error","_error$data","Descriptions","column","Item","span","return_number","refund_type","toUpperCase","refund_amount","return_reason","replace","return_reason_notes","marginTop","Divider","layout","name","Checkbox","checked","Alert","description","Math","floor","showIcon","onOk","reason","_error$data2","confirmLoading","okText","okButtonProps","required","_salesReturn$refund_s","currentStatus","itemColumns","tax","condition","conditionConfig","good","damaged","expired","defective","config","UndoOutlined","Badge","text","return_date","orientation","refund_status","refund_date","refund_reference","marginLeft","stock_returned","background","border","borderRadius","stock_returned_date","notes","approved_by_name","approved_date","SalesReturnsCrud","currentUser","getCurrentUser","invoiceModalOpen","setInvoiceModalOpen","approvalModalOpen","setApprovalModalOpen","viewModalOpen","setViewModalOpen","selectedReturn","setSelectedReturn","submitReturn","useSubmitSalesReturnMutation","completeReturn","useCompleteSalesReturnMutation","cancelReturn","useCancelSalesReturnMutation","handleInvoiceSelect","isGstIncluded","is_gst_included","invoiceItems","SalesRecordItems","map","_item$productItems","_item$productItems2","_item$productItems2$V","_item$productItems3","_item$productItems3$C","_item$productItems4","productName","productItems","variantName","VariantItem","taxPercentage","CategoryItem","unitPrice","lineTotal","sales_record_item_id","product_id","variant_id","variant","stock_id","batch_no","expiry_date","loose_qty","setFieldsValue","invoice_selector","gstNote","calculateTotals","tax_amount","arguments","undefined","forEach","total_amount","formItems","_selectedInvoice$cust","rules","component","action","block","colSpan","initialValue","DatePicker","validator","Error","ReturnItemsTable","columnActions","onView","onEdit","onDelete","info","onSubmit","confirm","content","_document$getElementB","document","getElementById","onApprove","onReject","_document$getElementB2","Promise","reject","onComplete","_error$data3","_error$data4","onPrint","handleBeforeSave","_selectedInvoice$cust2","_selectedInvoice$cust3","_selectedInvoice$cust4","sales_record_id","customer_id","customer_email","email","created_by_id","created_by_name","username","entityName","actions","filters","Object","keys","onFilter","sorter","a","b","unix","Tooltip","customer","customerData","phone","fontWeight","pointsIssued","hasReadPerm","canRead","RESOURCES","SALES_RETURN","hasUpdatePerm","canUpdate","hasDeletePerm","canDelete","canEditByStatus","isDraft","canEdit","canDeleteRecord","returnActionsMenu","Menu","EyeOutlined","UploadOutlined","CheckOutlined","window","DeleteOutlined","Dropdown","overlay","trigger","placement","MoreOutlined","formColumns","drawerWidth","beforeSave","canCreate","hasPermission","GenericCrudPage","SelectInvoiceModal","ReturnApprovalModal","ReturnViewModal"],"sourceRoot":""}