/*! For license information please see 505.d167da1e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[505],{18505:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var l=n(65043),a=n(82863),i=n(74198),s=n(26553),o=n(36621),r=n(12624),d=n(70579);const{Option:c}=s.A,u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return[{label:"Branch Name",name:"branch_name",rules:[{required:!0,message:"Please enter branch name!"}],component:(0,d.jsx)(o.A,{placeholder:"Enter branch name"})},..."tenant"===t||"superadmin"===t?[{label:"Organisation",name:"organisation_id",rules:[{required:!0,message:"Please select a organisation!"}],component:(0,d.jsx)(s.A,{placeholder:"Select orgnisation",children:(e||[]).map((e=>(0,d.jsx)(c,{value:e._id,children:e.org_name},e._id)))})}]:[],{label:"Branch Code",name:"branch_code",rules:[{required:!0,message:"Please enter unique branch code!"}],component:(0,d.jsx)(o.A,{placeholder:"Enter unique branch code"})},{label:"Phone",name:"phone",rules:[{required:!0,message:"Please enter phone number"},{pattern:/^\d{10}$/,message:"Phone number must be 10 digits"}],component:(0,d.jsx)(o.A,{placeholder:"Enter phone number",maxLength:10})},{label:"Email",name:"email",rules:[{type:"email",message:"Please enter a valid email!"}],component:(0,d.jsx)(o.A,{placeholder:"Enter email address"})},{label:"Address Line 1",name:"address1",component:(0,d.jsx)(o.A,{placeholder:"Address Line 1"})},{label:"Address Line 2",name:"address2",component:(0,d.jsx)(o.A,{placeholder:"Address Line 2"})},{label:"City",name:"city",component:(0,d.jsx)(o.A,{placeholder:"Enter city"})},{label:"State",name:"state",component:(0,d.jsx)(o.A,{placeholder:"Enter state"})},{label:"Pincode",name:"pincode",component:(0,d.jsx)(o.A,{placeholder:"Enter pincode"})},{label:"Head Office",name:"is_head_office",valuePropName:"unchecked",component:(0,d.jsx)(r.A,{checkedChildren:"True",unCheckedChildren:"False"})},{label:"Status",name:"status",valuePropName:"checked",component:(0,d.jsx)(r.A,{checkedChildren:"Active",unCheckedChildren:"Inactive",defaultChecked:!0})}]};var p=n(83833),h=n(6051),m=n(76399),g=n(87534),f=n(75388);const{Text:x}=p.A,A=[{title:"Branch",dataIndex:"branch_name",key:"branch_name",render:e=>(0,d.jsx)(x,{strong:!0,children:e})},{title:"Organization",dataIndex:"OrganisationItem",key:"OrganisationItem",render:e=>(0,d.jsx)(x,{strong:!0,children:null===e||void 0===e?void 0:e.org_name})},{title:"Phone",dataIndex:"phone",key:"phone",render:e=>(0,d.jsxs)(h.A,{children:[(0,d.jsx)(g.A,{style:{color:"#1890ff"}}),(0,d.jsx)(x,{children:e})]})},{title:"Email",dataIndex:"email",key:"email",render:e=>(0,d.jsxs)(h.A,{children:[(0,d.jsx)(f.A,{style:{color:"#722ed1"}}),(0,d.jsx)(x,{type:"secondary",children:e})]})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,d.jsx)(m.A,{color:e?"green":"volcano",children:e?"Active":"Inactive"})}];var b=n(4825),v=n(95005);const y=()=>{var e,t;const{getEntityApi:n}=(0,b.p)(),s=n("Organisations"),o=n("Braches"),{items:r}=(0,v.S)(s.getIdentifier("GetAll")),{items:c}=(0,v.S)(o.getIdentifier("GetAll"));(0,l.useEffect)((()=>{s("GetAll")}),[s,o]);const[p,h]=(0,l.useState)(void 0),m=(null===c||void 0===c||null===(e=c.result)||void 0===e?void 0:e.filter((e=>!p||e.organisation_id===p)))||[],g=[{key:"organisation_id",label:"Organisation",type:"select",options:(null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.map((e=>({label:e.org_name,value:e._id}))))||[],placeholder:"Select Organisation",onChange:e=>h(e)},{key:"branch_id",label:"Branch",type:"select",options:m.map((e=>({label:e.branch_name,value:e._id}))),placeholder:"Select Branch",disabled:!p}],f=[{key:"export",label:"Export",type:"primary",onClick:()=>{alert("Export clicked!")}}],x=function(){var e;const t=sessionStorage.getItem("user");if(!t)return null;const n=JSON.parse(t);return(null===n||void 0===n||null===(e=n.roleItems)||void 0===e?void 0:e.name)||(null===n||void 0===n?void 0:n.usertype)||(null===n||void 0===n?void 0:n.user_role)||null}();return(0,d.jsx)(a.r,{config:{title:"Branches",columns:A,formItems:u(null===r||void 0===r?void 0:r.result,x),apiRoutes:(0,i._V)("Braches"),formColumns:2},filters:g,customButtons:f})}},33359:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(65043),a=n(71360),i=n(66381);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},s.apply(this,arguments)}const o=(e,t)=>l.createElement(i.A,s({},e,{ref:t,icon:a.A}));const r=l.forwardRef(o)},74198:(e,t,n)=>{n.d(t,{_V:()=>a});n(65043);var l=n(91449);n(27038);const a=e=>{const t=l.LE[e]||(0,l.lX)(e);return{get:t.getAll(),create:t.create(),update:t.update(),delete:t.delete()}}},82863:(e,t,n)=>{n.d(t,{r:()=>E});var l=n(89379),a=n(65043),i=n(96651),s=n(47419),o=n(11645),r=n(36621),d=n(26553),c=n(93504),u=n(95206),p=n(33359),h=n(9316),m=n(83003),g=n(62305),f=n(97031),x=n(91449),A=n(60446),b=n.n(A);var v=n(22671),y=n(53986),j=n(83833),C=n(88655),k=n(73847),S=n(70579);const R=["key","name","fieldKey"],_=e=>{const{FormValue:t,onSubmit:n,onCancel:i,formItems:r,onChildCancel:d,formColumns:c,splitLabelAndField:p,nested:h,nestedInputs:m,wrapperCol:f,labelCol:x,initialValues:A,loading:b,form:v,onValuesChange:_}=e,I=c||1;return(0,a.useEffect)((()=>{A&&(null===v||void 0===v||v.setFieldsValue(A))}),[A,v]),(0,S.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,S.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"600px 600px",opacity:.1,zIndex:0}}),(0,S.jsxs)(g.A,{form:v,onFinish:e=>{n?n(e):t&&t(e),null===v||void 0===v||v.resetFields()},layout:"vertical",onValuesChange:_,children:[(0,S.jsxs)(s.A,{gutter:[16,16],children:[null===r||void 0===r?void 0:r.map(((e,t)=>{var n;return(0,S.jsx)(o.A,{span:24/I,children:p?(0,S.jsxs)("div",{children:[(0,S.jsxs)(j.A.Text,{strong:!0,children:[e.label," ",(null===(n=e.rules)||void 0===n?void 0:n.some((e=>e.required)))&&(0,S.jsx)(j.A.Text,{type:"danger",children:"*"})]}),(0,S.jsx)(g.A.Item,{name:e.name,rules:e.rules,style:{marginTop:"8px"},children:e.component})]}):(0,S.jsx)(g.A.Item,{label:(0,S.jsx)(j.A.Text,{strong:!0,children:e.label}),name:e.name,rules:e.rules,labelCol:{span:x},wrapperCol:{span:f},children:e.component})},t)})),h&&(0,S.jsx)(g.A.List,{name:"nestedItems",children:(e,t)=>{let{add:n,remove:a}=t;return(0,S.jsxs)(S.Fragment,{children:[e.map((e=>{let{key:t,name:n,fieldKey:i}=e,r=(0,y.A)(e,R);return(0,S.jsxs)(s.A,{gutter:[16,16],align:"middle",children:[m.map(((e,t)=>(0,S.jsx)(o.A,{children:(0,S.jsx)(g.A.Item,(0,l.A)((0,l.A)({},r),{},{name:[n,e.name],fieldKey:[i,e.name],rules:[{required:!0,message:"Missing ".concat(e.label)}],label:e.label,children:e.component}))},t))),(0,S.jsx)(o.A,{children:(0,S.jsx)(C.A,{onClick:()=>a(n)})})]},t)})),(0,S.jsx)(s.A,{justify:"center",children:(0,S.jsx)(o.A,{children:(0,S.jsx)(u.Ay,{type:"primary",onClick:()=>n(),icon:(0,S.jsx)(k.A,{}),children:"Add More Field"})})})]})}})]}),(0,S.jsxs)(s.A,{justify:"end",gutter:[16,16],style:{padding:"16px"},children:[(0,S.jsx)(o.A,{children:(0,S.jsx)(u.Ay,{onClick:()=>{i?i():d&&d(!1),null===v||void 0===v||v.resetFields()},children:"Cancel"})}),(0,S.jsx)(o.A,{children:(0,S.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:b,children:"Submit"})})]})]})]})};var I=n(4413);function w(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{title:"Actions",key:"actions",render:(a,s)=>(0,S.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,S.jsx)(i.A,{title:"Edit ".concat(e),children:(0,S.jsx)(p.A,{style:{cursor:"pointer",color:"#1890ff"},onClick:()=>t(s)})}),(0,S.jsx)(i.A,{title:"Delete ".concat(e),children:(0,S.jsx)(h.A,{style:{cursor:l?"not-allowed":"pointer",color:l?"#d9d9d9":"#ff4d4f",opacity:l?.5:1},onClick:()=>!l&&n(s)})})]})}}const E=e=>{let{config:t,filters:n=[],onFilterChange:i,customButtons:p=[],onValuesChange:h}=e;const{loading:A,createLoading:y,updateLoading:j,deleteLoading:C,items:k,pagination:R,drawerVisible:E,initialValues:P,form:L,handleEdit:V,handleDelete:F,handleDrawerOpen:O,resetForm:B,handleSubmit:q,handlePaginationChange:T,columns:K,formItems:N,formColumns:z=2,drawerWidth:D,filterValues:G,setFilterValues:M}=(e=>{const t=(0,m.wA)(),[n]=g.A.useForm(),[i,s]=(0,a.useState)(!1),[o,r]=(0,a.useState)({}),[d,c]=(0,a.useState)({}),[u,p]=(0,a.useState)({current:1,pageSize:10}),{loading:h,items:A}=(0,f.Sm)(e.apiRoutes.get.identifier),{loading:v,items:y,error:j}=(0,f.Sm)(e.apiRoutes.create.identifier),{loading:C,items:k,error:S}=(0,f.Sm)(e.apiRoutes.update.identifier),{loading:R,items:_,error:I}=(0,f.Sm)(e.apiRoutes.delete.identifier),w=(0,a.useCallback)(((e,n,l,a)=>{t((0,f.s7)({method:e,endpoint:n,data:l},a))}),[t]),E=(0,a.useCallback)((()=>{const t=(0,l.A)((0,l.A)({},d),{},{pageNumber:u.current,pageLimit:u.pageSize});w(e.apiRoutes.get.method,e.apiRoutes.get.endpoint,t,e.apiRoutes.get.identifier)}),[w,e.apiRoutes.get,d,u]),P=(0,a.useCallback)((t=>{w(e.apiRoutes.create.method,e.apiRoutes.create.endpoint,t,e.apiRoutes.create.identifier)}),[w,e.apiRoutes.create]),L=(0,a.useCallback)(((t,n)=>{w(e.apiRoutes.update.method,"".concat(e.apiRoutes.update.endpoint,"/").concat(t),n,e.apiRoutes.update.identifier)}),[w,e.apiRoutes.update]),V=(0,a.useCallback)((t=>{w(e.apiRoutes.delete.method,"".concat(e.apiRoutes.delete.endpoint,"/").concat(t),{_id:t},e.apiRoutes.delete.identifier)}),[w,e.apiRoutes.delete]),F=(0,a.useCallback)(((e,t)=>{p({current:e,pageSize:t})}),[]);function O(e){return/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/.test(e)}const B=(0,a.useCallback)((e=>{const t={};for(const n in e){const l=e[n];"string"===typeof l&&O(l)&&b()(l,void 0,!0).isValid()?t[n]=b()(l):t[n]=l}r(t),s(!0)}),[]),q=(0,a.useCallback)((e=>{V(e._id)}),[V]),T=(0,a.useCallback)((()=>{s(!0)}),[]),K=(0,a.useCallback)((()=>{s(!1),r({}),n.resetFields()}),[n]),N=(0,a.useCallback)((e=>{o._id?L(o._id,e):P(e)}),[o._id,P,L]);return(0,a.useEffect)((()=>{if(200===(null===y||void 0===y?void 0:y.statusCode))(0,x.P0)("success","".concat(e.title," created successfully")),E(),K(),t((0,f.Ki)(e.apiRoutes.create.identifier));else if(j){const t=j.message||"Failed to create ".concat(e.title);(0,x.P0)("error",t)}}),[y,j,e.title,E,K,t,e.apiRoutes.create.identifier]),(0,a.useEffect)((()=>{if(200===(null===k||void 0===k?void 0:k.statusCode))(0,x.P0)("success","".concat(e.title," updated successfully")),E(),K(),t((0,f.Ki)(e.apiRoutes.update.identifier));else if(S){const t=S.message||"Failed to update ".concat(e.title);(0,x.P0)("error",t)}}),[k,S,e.title,E,K,t,e.apiRoutes.update.identifier]),(0,a.useEffect)((()=>{if(200===(null===_||void 0===_?void 0:_.statusCode))(0,x.P0)("success","".concat(e.title," deleted successfully")),E(),t((0,f.Ki)(e.apiRoutes.delete.identifier));else if(I){const t=I.message||"Failed to delete ".concat(e.title);(0,x.P0)("error",t)}}),[_,I,e.title,E,t,e.apiRoutes.delete.identifier]),(0,a.useEffect)((()=>{E()}),[E]),(0,l.A)({loading:h,createLoading:v,updateLoading:C,deleteLoading:R,items:null===A||void 0===A?void 0:A.result,pagination:null===A||void 0===A?void 0:A.pagination,drawerVisible:i,initialValues:o,form:n,filterValues:d,setFilterValues:c,handleEdit:B,handleDelete:q,handleDrawerOpen:T,resetForm:K,handleSubmit:N,handlePaginationChange:F},e)})(t),U=(0,a.useCallback)(((e,t)=>{const n=(0,l.A)((0,l.A)({},G),{},{[e]:t});M(n),i&&i(n)}),[G,M,i]),$=(0,a.useMemo)((()=>[...K,w(t.title,V,F,C)]),[K,t.title,V,F,C]);return(0,S.jsxs)("div",{children:[(0,S.jsxs)(s.A,{justify:"space-between",align:"bottom",gutter:[16,16],style:{marginBottom:16},children:[(0,S.jsx)(o.A,{flex:"auto",children:(0,S.jsx)("h1",{style:{margin:0},children:t.title})}),(0,S.jsx)(o.A,{children:(0,S.jsxs)(s.A,{gutter:[12,12],align:"bottom",justify:"end",wrap:!0,children:[n.map((e=>{var t;return(0,S.jsxs)(o.A,{children:["input"===e.type&&(0,S.jsx)(r.A,{placeholder:e.placeholder||e.label,value:G[e.key]||"",onChange:t=>U(e.key,t.target.value),style:{width:e.width||200},disabled:y||j||C}),"select"===e.type&&(0,S.jsx)(d.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>{U(e.key,t),e.onChange&&e.onChange(t)},allowClear:!0,style:{width:e.width||200},disabled:e.disabled||y||j||C,children:null===(t=e.options)||void 0===t?void 0:t.map((e=>(0,S.jsx)(d.A.Option,{value:e.value,children:e.label},e.value)))}),"date"===e.type&&(0,S.jsx)(c.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>U(e.key,t),style:{width:e.width||200},disabled:y||j||C})]},e.key)})),(0,S.jsx)(o.A,{children:(0,S.jsx)(r.A,{placeholder:"Search ".concat(t.title),value:G.searchString||"",onChange:e=>U("searchString",e.target.value),style:{width:200},disabled:y||j||C})}),p.map((e=>(0,S.jsx)(o.A,{children:(0,S.jsx)(u.Ay,{type:e.type||"default",onClick:e.onClick,icon:e.icon,disabled:y||j||C,children:e.label})},e.key))),(0,S.jsx)(o.A,{children:(0,S.jsxs)(u.Ay,{type:"primary",onClick:O,loading:y,disabled:y,children:["Add ",t.title]})})]})})]}),(0,S.jsx)(I.A,{columns:$,data:k,loading:A||C,rowKeyField:"_id",totalCount:(null===R||void 0===R?void 0:R.totalCount)||0,pageLimit:(null===R||void 0===R?void 0:R.pageLimit)||10,onPaginationChange:T}),(0,S.jsx)(v.A,{title:"".concat(P._id?"Edit":"Add"," ").concat(t.title),open:E,onClose:y||j?()=>{}:B,width:D,children:(0,S.jsx)(_,{form:L,formItems:N,formColumns:z,initialValues:P,onSubmit:q,onCancel:B,onValuesChange:h,loading:y||j})})]})}}}]);
//# sourceMappingURL=505.d167da1e.chunk.js.map