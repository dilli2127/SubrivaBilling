"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[4420],{20844:(e,n,i)=>{i.r(n),i.d(n,{default:()=>xn});var s=i(89379),l=i(65043),t=i(71782),a=i(26553),r=i(62305),o=i(16569),c=i(18125),d=i(95206),m=i(89073),u=i(47419),h=i(11645),x=i(98105),p=i(46011),j=i(14524),g=i(95920),y=i(85192),v=i(42177),f=i(36091),_=i(94834),A=i(46237),b=i(58502),S=i(47990),w=i(89266),k=i(71558),C=i(75929),I=i(1045);const P="Settings_settingsContainer__kj-pI",N="Settings_pageHeader__H4a97",R="Settings_pageTitle__TlV+s",B="Settings_tabsCard__P-nek",T="Settings_sectionTitle__Vpoel",U="Settings_settingsForm__UU11S",z="Settings_formActions__hSL8G",F="Settings_infoBox__bNA9f",E="Settings_successBox__fy43A",L="Settings_warningBox__53Aae",q="Settings_printerTestButton__QyyS9",D="Settings_defaultsGrid__qu3mL",M="Settings_notificationItem__YwxfM",O="Settings_notificationLabel__eRv69",W="Settings_notificationTitle__xzsIM",Q="Settings_notificationDesc__JAi46",V="Settings_currentModeInfo__Wp+F3";var G=i(98350),X=i(89472),H=i(66507),Y=i(36621),K=i(8354),J=i(12624),Z=i(51175),$=i(42156),ee=i(10454),ne=i(88143),ie=i(70579);const{Option:se}=a.A,{TextArea:le}=Y.A,te=[{name:"Supermarket / Grocery Store"},{name:"Medical / Pharmacy"},{name:"Hardware Store"},{name:"Hardware and Electronics Store"},{name:"Electronics Store"},{name:"Stationery / Book Store"},{name:"Clothing / Textile Store"},{name:"Footwear Store"},{name:"Bakery / Sweet Shop"},{name:"Fruits & Vegetables Shop"},{name:"Furniture Store"},{name:"Automobile / Spare Parts"},{name:"Mobile Accessories Store"},{name:"Cosmetics / Beauty Store"},{name:"Jewellery / Fancy Store"},{name:"Pet Store"},{name:"General Store"},{name:"Wholesale Business"},{name:"Computer & Laptop Store"},{name:"Mobile And Laptop Store"},{name:"Electrical Store"},{name:"Restaurant / Caf\xe9"}],ae=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(y.A,{}),"Business Information"]}),(0,ie.jsx)("div",{className:F,children:"Configure your business details, GST information, and address. This information will be displayed on invoices and bills."}),(0,ie.jsx)(K.A,{children:"Basic Information"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Organization Name",name:"org_name",rules:[{required:!0,message:"Please enter organization name!"}],children:(0,ie.jsx)(Y.A,{placeholder:"Enter organization name"})})}),(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Business Type",name:"business_type",rules:[{required:!0,message:"Please select business type!"}],children:(0,ie.jsx)(a.A,{placeholder:"Select business type",showSearch:!0,filterOption:(e,n)=>{var i;return(null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:"").toLowerCase().includes(e.toLowerCase())},options:te.map((e=>({value:e.name,label:e.name})))})})})]}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email!"},{type:"email",message:"Please enter a valid email!"}],children:(0,ie.jsx)(Y.A,{placeholder:"Enter email"})})}),(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Phone",name:"phone",rules:[{required:!0,message:"Please enter phone number!"}],children:(0,ie.jsx)(Y.A,{placeholder:"Enter phone number"})})})]}),(0,ie.jsxs)(K.A,{children:[(0,ie.jsx)(Z.A,{})," Tax & Legal Information"]}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"GST Number",name:"gst_number",extra:"15-digit GST identification number",children:(0,ie.jsx)(Y.A,{placeholder:"e.g., 27AAPFU0939F1ZV",maxLength:15})})}),(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"PAN Number",name:"pan_number",extra:"10-character PAN",children:(0,ie.jsx)(Y.A,{placeholder:"e.g., AAPFU0939F",maxLength:10,style:{textTransform:"uppercase"}})})})]}),(0,ie.jsxs)(K.A,{children:[(0,ie.jsx)($.A,{})," Address Information"]}),(0,ie.jsx)(r.A.Item,{label:"Address",name:"address1",children:(0,ie.jsx)(le,{placeholder:"Enter complete address",rows:3})}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{xs:24,md:8,children:(0,ie.jsx)(r.A.Item,{label:"City",name:"city",children:(0,ie.jsx)(Y.A,{placeholder:"Enter city"})})}),(0,ie.jsx)(h.A,{xs:24,md:8,children:(0,ie.jsx)(r.A.Item,{label:"State",name:"state",children:(0,ie.jsx)(Y.A,{placeholder:"Enter state"})})}),(0,ie.jsx)(h.A,{xs:24,md:8,children:(0,ie.jsx)(r.A.Item,{label:"Pincode",name:"pincode",children:(0,ie.jsx)(Y.A,{placeholder:"Enter pincode",maxLength:6})})})]}),(0,ie.jsxs)(K.A,{children:[(0,ie.jsx)(ee.A,{})," Additional Settings"]}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Currency",name:"currency",extra:"e.g., INR, USD, EUR",children:(0,ie.jsx)(Y.A,{placeholder:"INR"})})}),(0,ie.jsx)(h.A,{xs:24,md:12,children:(0,ie.jsx)(r.A.Item,{label:"Timezone",name:"timezone",extra:"e.g., Asia/Kolkata",children:(0,ie.jsx)(Y.A,{placeholder:"Asia/Kolkata"})})})]}),(0,ie.jsx)(r.A.Item,{label:"Organisation Status",name:"status",valuePropName:"checked",extra:"Enable or disable this organisation",children:(0,ie.jsx)(J.A,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),(0,ie.jsxs)("div",{className:E,children:["\u2705 ",(0,ie.jsx)("strong",{children:"Note:"})," This information is stored in your organisation profile and will be used across all invoices and reports."]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Business Information"})]})]})};var re=i(6051);const{Option:oe}=a.A,ce=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;const t=(0,I.Zp)();return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(v.A,{}),"Tax Configuration"]}),(0,ie.jsx)("div",{className:F,children:"Global tax settings. Tax rates are configured per category, and tax inclusion is handled at billing level."}),(0,ie.jsx)(r.A.Item,{label:"Enable Tax/GST",name:"tax_enabled",valuePropName:"checked",extra:"Enable or disable tax calculation across the entire application",children:(0,ie.jsx)(J.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,ie.jsx)(r.A.Item,{label:"Tax Type",name:"tax_type",extra:"Select the type of tax applicable to your business",children:(0,ie.jsxs)(a.A,{children:[(0,ie.jsx)(oe,{value:"GST",children:"GST (India)"}),(0,ie.jsx)(oe,{value:"VAT",children:"VAT"}),(0,ie.jsx)(oe,{value:"Sales Tax",children:"Sales Tax"})]})}),(0,ie.jsx)(K.A,{children:"Tax Rate Configuration"}),(0,ie.jsxs)("div",{className:L,children:["\u26a0\ufe0f ",(0,ie.jsx)("strong",{children:"Tax Rates:"})," Configured individually for each product category.",(0,ie.jsx)("br",{}),"Go to ",(0,ie.jsx)("strong",{children:"Products \u2192 Category"})," to set specific tax rates (e.g., Food: 5%, Electronics: 18%)."]}),(0,ie.jsx)(re.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,ie.jsx)(d.Ay,{type:"dashed",icon:(0,ie.jsx)(v.A,{}),onClick:()=>t("/category_crud"),block:!0,children:"Go to Category Management"})}),(0,ie.jsx)(K.A,{children:"Tax Inclusion"}),(0,ie.jsxs)("div",{className:L,children:["\u26a0\ufe0f ",(0,ie.jsx)("strong",{children:"Tax Inclusive/Exclusive:"})," Handled at the billing level.",(0,ie.jsx)("br",{}),"You can choose tax inclusion per bill in the ",(0,ie.jsx)("strong",{children:"Billing Page"}),"."]}),(0,ie.jsx)(re.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,ie.jsx)(d.Ay,{type:"dashed",icon:(0,ie.jsx)(f.A,{}),onClick:()=>t("/retaill_billing"),block:!0,children:"Go to Billing Page"})}),(0,ie.jsx)(K.A,{}),(0,ie.jsxs)("div",{className:E,children:["\u2705 ",(0,ie.jsx)("strong",{children:"Your Tax System Architecture:"}),(0,ie.jsx)("br",{}),"\u2022 ",(0,ie.jsx)("strong",{children:"Global (Here):"})," Enable/Disable tax & Tax type (GST/VAT)",(0,ie.jsx)("br",{}),"\u2022 ",(0,ie.jsx)("strong",{children:"Category Level:"})," Tax rates per product category",(0,ie.jsx)("br",{}),"\u2022 ",(0,ie.jsx)("strong",{children:"Billing Level:"})," Tax inclusive/exclusive per bill"]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Tax Settings"})]})]})};var de=i(7866);const{TextArea:me}=Y.A,ue=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(f.A,{}),"Invoice Settings"]}),(0,ie.jsx)("div",{className:F,children:"Customize how your invoices are generated and displayed"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Invoice Prefix",name:"invoice_prefix",rules:[{required:!0}],extra:"e.g., INV, BILL, REC",children:(0,ie.jsx)(Y.A,{placeholder:"INV"})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Starting Invoice Number",name:"invoice_starting_number",rules:[{required:!0}],children:(0,ie.jsx)(de.A,{min:1,style:{width:"100%"}})})})]}),(0,ie.jsx)(r.A.Item,{label:"Invoice Footer Text",name:"invoice_footer",extra:"This text will appear at the bottom of invoices",children:(0,ie.jsx)(me,{rows:3,placeholder:"Thank you for your business!"})}),(0,ie.jsx)(r.A.Item,{label:"Terms & Conditions",name:"invoice_terms",children:(0,ie.jsx)(me,{rows:4,placeholder:"Enter terms and conditions..."})}),(0,ie.jsx)(K.A,{children:"Display Options"}),(0,ie.jsxs)(re.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,ie.jsx)(r.A.Item,{label:"Show Logo on Invoice",name:"show_logo_on_invoice",valuePropName:"checked",children:(0,ie.jsx)(J.A,{})}),(0,ie.jsx)(r.A.Item,{label:"Show Terms & Conditions on Invoice",name:"show_terms_on_invoice",valuePropName:"checked",children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Invoice Settings"})]})]})},{Option:he}=a.A,xe=e=>{let{form:n,loading:i,onSave:s,onReset:l,onTestPrinter:t}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(_.A,{}),"Thermal Printer Configuration"]}),(0,ie.jsx)("div",{className:L,children:"\u26a0\ufe0f Make sure your thermal printer is connected before testing"}),(0,ie.jsx)(r.A.Item,{label:"Enable Thermal Printer",name:"thermal_printer_enabled",valuePropName:"checked",children:(0,ie.jsx)(J.A,{})}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Printer Port",name:"printer_port",children:(0,ie.jsxs)(a.A,{children:[(0,ie.jsx)(he,{value:"COM1",children:"COM1"}),(0,ie.jsx)(he,{value:"COM2",children:"COM2"}),(0,ie.jsx)(he,{value:"COM3",children:"COM3"}),(0,ie.jsx)(he,{value:"USB",children:"USB"}),(0,ie.jsx)(he,{value:"Bluetooth",children:"Bluetooth"})]})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Baud Rate",name:"printer_baud_rate",children:(0,ie.jsxs)(a.A,{children:[(0,ie.jsx)(he,{value:9600,children:"9600"}),(0,ie.jsx)(he,{value:19200,children:"19200"}),(0,ie.jsx)(he,{value:38400,children:"38400"}),(0,ie.jsx)(he,{value:115200,children:"115200"})]})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Paper Width (mm)",name:"paper_width",children:(0,ie.jsxs)(a.A,{children:[(0,ie.jsx)(he,{value:58,children:"58mm (2 inch)"}),(0,ie.jsx)(he,{value:80,children:"80mm (3 inch)"})]})})})]}),(0,ie.jsx)(r.A.Item,{label:"Auto Print After Bill",name:"auto_print",valuePropName:"checked",children:(0,ie.jsx)(J.A,{})}),(0,ie.jsx)(d.Ay,{type:"dashed",icon:(0,ie.jsx)(_.A,{}),onClick:t,className:q,children:"Test Printer"}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Printer Settings"})]})]})},{Option:pe}=a.A,je=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(A.A,{}),"Default Values"]}),(0,ie.jsx)("div",{className:F,children:"These values will be pre-selected when creating new records"}),(0,ie.jsxs)("div",{className:D,children:[(0,ie.jsx)(r.A.Item,{label:"Default Payment Mode",name:"default_payment_mode",extra:"Pre-selected payment method for new bills",children:(0,ie.jsxs)(a.A,{placeholder:"Select default payment mode",children:[(0,ie.jsx)(pe,{value:"cash",children:"\ud83d\udcb5 Cash"}),(0,ie.jsx)(pe,{value:"upi",children:"\ud83d\udcf1 UPI"}),(0,ie.jsx)(pe,{value:"card",children:"\ud83d\udcb3 Card"}),(0,ie.jsx)(pe,{value:"credit",children:"\ud83d\udcdd Credit"})]})}),(0,ie.jsx)(r.A.Item,{label:"Default Document Print Type",name:"default_document_type",extra:"Default print format when creating new bills",children:(0,ie.jsxs)(a.A,{placeholder:"Select default document type",children:[(0,ie.jsx)(pe,{value:"bill",children:"\ud83e\uddfe Bill (Retail / Quick)"}),(0,ie.jsx)(pe,{value:"invoice",children:"\ud83d\udccb Invoice (Formal / Detailed)"})]})})]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Default Values"})]})]})},ge=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(b.A,{}),"Notification Preferences"]}),(0,ie.jsx)("div",{className:F,children:"Control how and when you receive notifications"}),(0,ie.jsxs)("div",{className:M,children:[(0,ie.jsxs)("div",{className:O,children:[(0,ie.jsx)("div",{className:W,children:"Email Notifications"}),(0,ie.jsx)("div",{className:Q,children:"Receive notifications via email"})]}),(0,ie.jsx)(r.A.Item,{name:"email_notifications",valuePropName:"checked",noStyle:!0,children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsxs)("div",{className:M,children:[(0,ie.jsxs)("div",{className:O,children:[(0,ie.jsx)("div",{className:W,children:"SMS Notifications"}),(0,ie.jsx)("div",{className:Q,children:"Receive notifications via SMS"})]}),(0,ie.jsx)(r.A.Item,{name:"sms_notifications",valuePropName:"checked",noStyle:!0,children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsx)(K.A,{}),(0,ie.jsxs)("div",{className:M,children:[(0,ie.jsxs)("div",{className:O,children:[(0,ie.jsx)("div",{className:W,children:"Low Stock Alerts"}),(0,ie.jsx)("div",{className:Q,children:"Get notified when product stock is low"})]}),(0,ie.jsx)(r.A.Item,{name:"low_stock_alert",valuePropName:"checked",noStyle:!0,children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsx)(r.A.Item,{label:"Low Stock Threshold",name:"low_stock_threshold",extra:"Notify when stock goes below this quantity",children:(0,ie.jsx)(de.A,{min:0,style:{width:200}})}),(0,ie.jsx)(K.A,{}),(0,ie.jsxs)("div",{className:M,children:[(0,ie.jsxs)("div",{className:O,children:[(0,ie.jsx)("div",{className:W,children:"Payment Reminders"}),(0,ie.jsx)("div",{className:Q,children:"Send reminders for pending payments"})]}),(0,ie.jsx)(r.A.Item,{name:"payment_reminder",valuePropName:"checked",noStyle:!0,children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsxs)("div",{className:M,children:[(0,ie.jsxs)("div",{className:O,children:[(0,ie.jsx)("div",{className:W,children:"Daily Report Email"}),(0,ie.jsx)("div",{className:Q,children:"Receive daily sales report via email"})]}),(0,ie.jsx)(r.A.Item,{name:"daily_report_email",valuePropName:"checked",noStyle:!0,children:(0,ie.jsx)(J.A,{})})]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Notification Settings"})]})]})};var ye=i(62751),ve=i(61118),fe=i(12279),_e=i(22115);const Ae=e=>{var n,i;let{form:s,loading:t,onSave:a,onReset:o}=e;(0,_e.J)();const[c,x]=(0,l.useState)(null),[p,j]=(0,l.useState)("bill"),[g,y]=(0,l.useState)(!1),v=r.A.useWatch("bill_template",s),_=r.A.useWatch("invoice_template",s),A=()=>({customerName:"Sample Customer",customerAddress:"Sample Address, City",customerPhone:"+91 9999999999",customerEmail:"customer@example.com",date:(new Date).toISOString(),invoice_no:"PREVIEW-001",payment_mode:"Cash",items:[{name:"Sample Product 1",product_name:"Sample Product 1",qty:2,price:100,amount:200,tax_percentage:18,hsn_code:"1234",mrp:120,unit:"Pcs"},{name:"Sample Product 2",product_name:"Sample Product 2",qty:1,price:150,amount:150,tax_percentage:18,hsn_code:"5678",mrp:180,unit:"Pcs"}],total:350,total_gst:63,cgst:31.5,sgst:31.5,discount:0,discount_type:"percentage",is_paid:!0,is_partially_paid:!1,paid_amount:350}),b=()=>{y(!1),x(null)},S=(e,n,i)=>{const l="bill"===e?fe.XA:fe.tL;return(0,ie.jsx)(u.A,{gutter:[16,16],children:Object.entries(l).map((l=>{let[t,a]=l;const r=n===t;return(0,ie.jsx)(h.A,{xs:24,sm:12,md:8,lg:6,children:(0,ie.jsxs)(m.A,{hoverable:!0,style:{border:r?"2px solid #4e54c8":"1px solid #eee",borderRadius:12,boxShadow:r?"0 4px 16px #4e54c855":"0 2px 8px rgba(0,0,0,0.06)",background:r?"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)":"#fff",textAlign:"center",transition:"all 0.3s"},onClick:()=>s.setFieldValue(i,t),bodyStyle:{padding:16},children:[(0,ie.jsx)("div",{style:{width:"100%",height:120,overflow:"hidden",borderRadius:8,boxShadow:"0 1px 4px rgba(0,0,0,0.07)",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e0e0e0",marginBottom:12},children:(0,ie.jsx)("div",{style:{width:750,height:400,display:"flex",alignItems:"center",justifyContent:"center",transform:"scale(0.22)",transformOrigin:"center center",pointerEvents:"none"},children:(0,ie.jsx)(a.component,{billData:A()})})}),(0,ie.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:4,color:r?"#4e54c8":"#333"},children:a.label}),(0,ie.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:8},children:a.description}),r&&(0,ie.jsx)("div",{style:{color:"#4e54c8",fontWeight:500,fontSize:12,marginBottom:8},children:"\u2713 Selected"}),(0,ie.jsx)(d.Ay,{type:"primary",ghost:!0,size:"small",icon:(0,ie.jsx)(ve.A,{}),onClick:n=>{n.stopPropagation(),((e,n)=>{x(e),j(n),y(!0)})(t,e)},children:"Preview"})]})},t)}))})};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(r.A,{form:s,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(f.A,{}),"Template Settings"]}),(0,ie.jsx)("div",{className:F,children:"Select your preferred templates for bills and invoices. These templates will be used when printing or generating PDFs."}),(0,ie.jsx)(K.A,{children:"Bill Template (For Quick Sales / Retail)"}),(0,ie.jsxs)("div",{className:E,children:["\ud83d\udcc4 ",(0,ie.jsx)("strong",{children:"Bill Template:"})," Used for quick retail sales and POS billing"]}),(0,ie.jsx)(r.A.Item,{name:"bill_template",children:S("bill",v,"bill_template")}),(0,ie.jsx)(K.A,{children:"Invoice Template (For Formal Invoices)"}),(0,ie.jsxs)("div",{className:E,children:["\ud83d\udccb ",(0,ie.jsx)("strong",{children:"Invoice Template:"})," Used for formal invoices with detailed information"]}),(0,ie.jsx)(r.A.Item,{name:"invoice_template",children:S("invoice",_,"invoice_template")}),(0,ie.jsxs)("div",{className:L,children:["\ud83d\udca1 ",(0,ie.jsx)("strong",{children:"Tip:"}),' You can preview each template before selecting. Click the template card to select it, or click "Preview" for a full-size view.']}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:o,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:a,loading:t,children:"Save Template Settings"})]})]}),(0,ie.jsx)(ye.A,{open:g,onCancel:b,footer:[(0,ie.jsx)(d.Ay,{type:"primary",onClick:()=>{c&&("bill"===p?s.setFieldValue("bill_template",c):s.setFieldValue("invoice_template",c),b())},children:"Use this template"},"use"),(0,ie.jsx)(d.Ay,{onClick:b,children:"Close"},"close")],width:800,title:c?"".concat("bill"===p?null===(n=fe.XA[c])||void 0===n?void 0:n.label:null===(i=fe.tL[c])||void 0===i?void 0:i.label," Preview"):"",centered:!0,destroyOnClose:!0,children:c&&(0,ie.jsx)("div",{style:{background:"#fafafa",borderRadius:12,padding:16,minHeight:300},children:l.createElement("bill"===p?fe.XA[c].component:fe.tL[c].component,{billData:A()})})})]})},{Option:be}=a.A,Se=e=>{let{form:n,loading:i,onSave:s,onReset:l}=e;return(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(S.A,{}),"Bank Account Details"]}),(0,ie.jsx)("div",{className:F,children:"Add your bank account details to display on invoices and bills"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Bank Name",name:"bank_name",extra:"e.g., State Bank of India, HDFC Bank",children:(0,ie.jsx)(Y.A,{placeholder:"Enter bank name"})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Account Holder Name",name:"account_holder_name",extra:"Name as per bank records",children:(0,ie.jsx)(Y.A,{placeholder:"Enter account holder name"})})})]}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Account Number",name:"account_number",children:(0,ie.jsx)(Y.A,{placeholder:"Enter account number"})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Account Type",name:"account_type",children:(0,ie.jsxs)(a.A,{placeholder:"Select account type",children:[(0,ie.jsx)(be,{value:"savings",children:"Savings Account"}),(0,ie.jsx)(be,{value:"current",children:"Current Account"}),(0,ie.jsx)(be,{value:"overdraft",children:"Overdraft Account"})]})})})]}),(0,ie.jsx)(K.A,{children:"Bank Branch Information"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"IFSC Code",name:"ifsc_code",extra:"11-digit code for bank branch",children:(0,ie.jsx)(Y.A,{placeholder:"e.g., SBIN0001234",maxLength:11,style:{textTransform:"uppercase"}})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Branch Name",name:"branch_name",children:(0,ie.jsx)(Y.A,{placeholder:"Enter branch name"})})})]}),(0,ie.jsx)(K.A,{children:"Digital Payment Details"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"UPI ID",name:"upi_id",extra:"For digital payments (e.g., yourname@upi)",children:(0,ie.jsx)(Y.A,{placeholder:"Enter UPI ID"})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"SWIFT Code",name:"swift_code",extra:"For international transactions (optional)",children:(0,ie.jsx)(Y.A,{placeholder:"e.g., SBININBB123",maxLength:11,style:{textTransform:"uppercase"}})})})]}),(0,ie.jsxs)("div",{className:L,children:["\ud83d\udca1 ",(0,ie.jsx)("strong",{children:"Note:"})," Bank details will be displayed on printed invoices and bills. Ensure all information is accurate."]}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:l,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save Bank Details"})]})]})};var we=i(42261),ke=i(25558),Ce=i(94786),Ie=i(356);const{Option:Pe}=a.A,{Text:Ne,Title:Re,Paragraph:Be}=t.A,Te=e=>{let{form:n,loading:i,onSave:s,onReset:t}=e;const[o,c]=(0,l.useState)(""),[x,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(null),y=r.A.useWatch("upi_id",n),v=r.A.useWatch("enable_payment_qr",n),f=r.A.useWatch("qr_size",n)||200;return(0,l.useEffect)((()=>{(async()=>{if(!y||!(0,Ie.kU)(y))return c(""),p(!1),void g(null);p(!0),g((0,Ie.sd)(y));try{const e=n.getFieldValue("org_name")||"Your Business",i=await(0,Ie.generateUPIQRCode)({upiId:y,payeeName:e,transactionNote:"Payment for Invoice"},{width:f});c(i)}catch(e){console.error("Error generating QR preview:",e),c("")}})()}),[y,f,n]),(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(w.A,{}),"Payment QR Code Settings"]}),(0,ie.jsx)("div",{className:F,children:(0,ie.jsxs)(re.A,{direction:"vertical",size:"small",children:[(0,ie.jsxs)(Ne,{children:[(0,ie.jsx)(Ce.A,{})," Enable UPI QR codes on your invoices and bills for instant digital payments"]}),(0,ie.jsx)(Ne,{type:"secondary",style:{fontSize:"12px"},children:"Customers can scan the QR code with Google Pay, PhonePe, Paytm, or any UPI app"})]})}),(0,ie.jsx)(r.A.Item,{label:"Enable Payment QR Code",name:"enable_payment_qr",valuePropName:"checked",extra:"Show UPI payment QR code on invoices and bills",children:(0,ie.jsx)(J.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,ie.jsx)(u.A,{gutter:16,children:(0,ie.jsxs)(h.A,{span:24,children:[(0,ie.jsx)(r.A.Item,{label:"UPI ID",name:"upi_id",rules:[{validator:(e,n)=>n?(0,Ie.kU)(n)?Promise.resolve():Promise.reject("Invalid UPI ID format (e.g., 1234567890@ybl)"):Promise.reject("Please enter your UPI ID")}],extra:"Your UPI ID for receiving payments (e.g., 1234567890@ybl)",children:(0,ie.jsx)(Y.A,{placeholder:"yourname@upi or phonenumber@ybl",suffix:x?(0,ie.jsx)(A.A,{style:{color:"#52c41a"}}):null})}),j&&(0,ie.jsx)(we.A,{message:"UPI Provider: ".concat(j.provider),description:"Compatible with: ".concat(j.appName),type:"info",showIcon:!0,style:{marginBottom:16}})]})}),(0,ie.jsx)(K.A,{children:"QR Code Display Options"}),(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Show on Invoices",name:"qr_on_invoice",valuePropName:"checked",extra:"Display QR code on formal invoices",children:(0,ie.jsx)(J.A,{checkedChildren:"Yes",unCheckedChildren:"No",disabled:!v})})}),(0,ie.jsx)(h.A,{span:12,children:(0,ie.jsx)(r.A.Item,{label:"Show on Bills",name:"qr_on_bill",valuePropName:"checked",extra:"Display QR code on retail bills",children:(0,ie.jsx)(J.A,{checkedChildren:"Yes",unCheckedChildren:"No",disabled:!v})})})]}),(0,ie.jsx)(r.A.Item,{label:"QR Code Size: ".concat(f,"px"),name:"qr_size",extra:"Size of the QR code on printed documents",children:(0,ie.jsx)(ke.A,{min:100,max:300,step:10,marks:{100:"100px",150:"150px",200:"200px",250:"250px",300:"300px"},disabled:!v})}),(0,ie.jsx)(r.A.Item,{label:"QR Code Position",name:"qr_position",extra:"Where to place the QR code on the document",children:(0,ie.jsxs)(a.A,{disabled:!v,children:[(0,ie.jsx)(Pe,{value:"bottom-right",children:"Bottom Right"}),(0,ie.jsx)(Pe,{value:"bottom-left",children:"Bottom Left"}),(0,ie.jsx)(Pe,{value:"top-right",children:"Top Right (Header)"}),(0,ie.jsx)(Pe,{value:"footer",children:"Footer Center"})]})}),(0,ie.jsx)(r.A.Item,{label:"Show UPI ID Text",name:"show_upi_id_text",valuePropName:"checked",extra:"Display UPI ID below the QR code for manual entry",children:(0,ie.jsx)(J.A,{checkedChildren:"Show",unCheckedChildren:"Hide",disabled:!v})}),(0,ie.jsx)(K.A,{children:"QR Code Preview"}),(0,ie.jsx)(m.A,{title:"Live Preview",bordered:!1,style:{background:"#fafafa",marginBottom:24},children:o?(0,ie.jsxs)("div",{style:{textAlign:"center"},children:[(0,ie.jsx)("img",{src:o,alt:"UPI QR Code Preview",style:{maxWidth:"100%",border:"2px solid #d9d9d9",padding:8,background:"#fff",borderRadius:8}}),n.getFieldValue("show_upi_id_text")&&(0,ie.jsxs)("div",{style:{marginTop:12},children:[(0,ie.jsx)(Ne,{strong:!0,children:"UPI ID: "}),(0,ie.jsx)(Ne,{code:!0,children:y})]}),(0,ie.jsx)(Be,{type:"secondary",style:{marginTop:12,fontSize:"12px"},children:"Scan this QR code with any UPI app to make payment"})]}):(0,ie.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,ie.jsx)(w.A,{style:{fontSize:64,color:"#d9d9d9"}}),(0,ie.jsx)(Be,{type:"secondary",style:{marginTop:12},children:y?"Generating QR code...":"Enter a valid UPI ID to see preview"})]})}),(0,ie.jsxs)("div",{className:L,children:[(0,ie.jsx)(Re,{level:5,style:{marginTop:0},children:"\ud83d\udcf1 How Customers Will Pay:"}),(0,ie.jsxs)("ol",{style:{marginBottom:0,paddingLeft:20},children:[(0,ie.jsx)("li",{children:"Customer opens Google Pay, PhonePe, Paytm, or any UPI app"}),(0,ie.jsx)("li",{children:'Taps on "Scan QR Code" or "Pay by QR"'}),(0,ie.jsx)("li",{children:"Scans the QR code printed on your invoice/bill"}),(0,ie.jsx)("li",{children:"Verifies amount and completes payment"}),(0,ie.jsx)("li",{children:"Payment instantly credited to your account"})]})]}),(0,ie.jsx)(we.A,{message:"Pro Tip",description:"For best results, ensure your QR code is at least 150px in size and printed with high contrast (black on white background).",type:"info",showIcon:!0,style:{marginTop:16}}),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsx)(d.Ay,{onClick:t,children:"Reset"}),(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:s,loading:i,children:"Save QR Settings"})]})]})};var Ue=i(96603),ze=i(93557),Fe=i(95240),Ee=i(41474),Le=i(90617),qe=i(79711),De=i(89129);const Me=e=>{let{form:n,loading:i,onSave:s,onReset:t}=e;const[a,c]=(0,l.useState)("online"),[m,u]=(0,l.useState)(!1),h=(0,De.b8)();(0,qe.isOfflineModeSupported)();(0,l.useEffect)((()=>{const e=(0,qe.getApiModeConfig)();h?(n.setFieldsValue({api_mode:e.mode,online_url:e.onlineUrl,offline_url:e.offlineUrl}),c(e.mode)):(n.setFieldsValue({api_mode:"online",online_url:e.onlineUrl,offline_url:e.offlineUrl}),c("online"),"online"!==e.mode&&(0,qe.setApiModeConfig)({mode:"online"}))}),[n,h]);const x=()=>{window.location.reload()};return h?(0,ie.jsxs)(r.A,{form:n,layout:"vertical",className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(k.A,{}),"API Configuration"]}),(0,ie.jsx)("div",{className:F,children:"Configure the API endpoint mode. Switch between online (remote server) and offline (local development) modes."}),m&&(0,ie.jsx)(we.A,{message:"Reload Required",description:"You have changed the API mode. Please save and reload the application for changes to take effect.",type:"warning",icon:(0,ie.jsx)(Fe.A,{}),showIcon:!0,closable:!0,onClose:()=>u(!1),style:{marginBottom:16},action:(0,ie.jsx)(d.Ay,{size:"small",type:"primary",onClick:x,children:"Reload Now"})}),(0,ie.jsx)(r.A.Item,{label:"API Mode",name:"api_mode",required:!0,extra:"Select whether to use online (remote) or offline (local) API",rules:[{required:!0,message:"Please select an API mode"}],children:(0,ie.jsxs)(Ue.Ay.Group,{onChange:e=>{const n=e.target.value;c(n),u(!0)},buttonStyle:"solid",children:[(0,ie.jsxs)(Ue.Ay.Button,{value:"online",children:[(0,ie.jsx)(ze.A,{})," Online"]}),(0,ie.jsxs)(Ue.Ay.Button,{value:"offline",children:[(0,ie.jsx)(Ee.A,{})," Offline"]})]})}),"online"===a?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(K.A,{}),(0,ie.jsx)(we.A,{message:"You are in Online Mode",description:"Connected to default hosted server. All data will sync to online.",type:"info",icon:(0,ie.jsx)(ze.A,{}),showIcon:!0,style:{marginBottom:16}}),(0,ie.jsx)(we.A,{message:"Please Verify Data",description:"All data will sync to online server. Please verify your data before proceeding.",type:"warning",icon:(0,ie.jsx)(Fe.A,{}),showIcon:!0,style:{marginBottom:16}})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(K.A,{children:"Offline Configuration"}),(0,ie.jsx)(r.A.Item,{label:"Offline API URL",name:"offline_url",extra:"Local development API endpoint (editable for offline mode)",rules:[{required:"offline"===a,message:"Please enter offline API URL"}],children:(0,ie.jsx)(Y.A,{prefix:(0,ie.jsx)(Ee.A,{}),placeholder:"http://localhost:8247"})})]}),(0,ie.jsx)(K.A,{}),"offline"===a&&(0,ie.jsxs)("div",{className:L,children:[(0,ie.jsx)("strong",{children:"\u26a0\ufe0f Important:"}),(0,ie.jsxs)("ul",{style:{marginTop:8,marginBottom:0},children:[(0,ie.jsx)("li",{children:"Make sure your local server is running before switching to offline mode"}),(0,ie.jsx)("li",{children:"The application needs to reload after changing the API mode"})]})]}),(0,ie.jsx)(K.A,{}),(0,ie.jsxs)(re.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,ie.jsxs)("div",{className:V,children:[(0,ie.jsx)("strong",{children:"Current Mode:"})," ","online"===a?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(ze.A,{style:{color:"#1890ff"}})," Online"]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ee.A,{style:{color:"#52c41a"}})," Offline"]})]}),(0,ie.jsxs)(re.A,{children:[(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(ne.A,{}),onClick:async()=>{try{const e=await n.validateFields();if(!h&&"offline"===e.api_mode)return void o.Ay.error("Offline mode is only available in the Electron desktop app.");const i=(0,qe.getApiModeConfig)();(0,qe.setApiModeConfig)({mode:e.api_mode,onlineUrl:i.onlineUrl,offlineUrl:"offline"===e.api_mode?e.offline_url:i.offlineUrl}),o.Ay.success({content:"System settings saved successfully!",duration:3}),m&&o.Ay.warning({content:"Please reload the application for changes to take effect.",duration:5}),u(!1)}catch(e){console.error("Validation failed:",e),o.Ay.error("Please fill in all required fields correctly.")}},loading:i,children:"Save Settings"}),(0,ie.jsx)(d.Ay,{icon:(0,ie.jsx)(Le.A,{}),onClick:()=>{const e=(0,qe.getApiModeConfig)();n.setFieldsValue({api_mode:e.mode,online_url:e.onlineUrl,offline_url:e.offlineUrl}),c(e.mode),u(!1)},children:"Reset"}),m&&(0,ie.jsx)(d.Ay,{type:"dashed",icon:(0,ie.jsx)(Le.A,{}),onClick:x,children:"Reload Application"})]})]})]}):(0,ie.jsxs)("div",{className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(k.A,{}),"API Configuration"]}),(0,ie.jsx)("div",{className:F,children:(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ie.jsx)(ze.A,{style:{color:"#1890ff",fontSize:16}}),(0,ie.jsxs)("span",{children:[(0,ie.jsx)("strong",{children:"Mode:"})," Online (Default)"]})]})}),(0,ie.jsx)(we.A,{message:"Need Offline Installation?",description:(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{style:{marginBottom:8},children:"If you need an offline installation or want to use a local server, please contact Subriva Billing customer care."}),(0,ie.jsxs)("p",{style:{marginBottom:0},children:[(0,ie.jsx)("strong",{children:"Download Desktop App:"})," The desktop application supports offline mode and local server configuration."]})]}),type:"warning",icon:(0,ie.jsx)(Ce.A,{}),showIcon:!0,style:{marginBottom:16}}),(0,ie.jsxs)("div",{className:L,children:[(0,ie.jsx)("strong",{children:"\ud83d\udcde Contact Information:"}),(0,ie.jsxs)("ul",{style:{marginTop:8,marginBottom:0},children:[(0,ie.jsxs)("li",{children:["For offline installation support, contact ",(0,ie.jsx)("strong",{children:"Subriva Billing Customer Care"})]}),(0,ie.jsx)("li",{children:"Desktop application download and setup assistance available"}),(0,ie.jsx)("li",{children:"Custom API configuration available in desktop version only"})]})]})]})};var Oe=i(91686),We=i(76399),Qe=i(96651),Ve=i(57692),Ge=i(83357),Xe=i(59654),He=i(24729),Ye=i(45229),Ke=i(87534),Je=i(75388),Ze=i(97679),$e=i(67562);const{Title:en,Text:nn,Paragraph:sn}=t.A,ln=e=>Math.floor(.8*e),tn={monthly:249,annual:2499},an={monthly:699,annual:6999},rn={monthly:999,annual:9999},on=[{name:"Free",icon:(0,ie.jsx)(Ge.A,{}),monthlyPrice:0,annualPrice:0,description:"Perfect for trying out Subriva Billing",features:["Up to 100 invoices/month","1 user account","Basic reporting","Email support","Mobile app access"],popular:!1,color:"#1890ff"},{name:"Starter",icon:(0,ie.jsx)(Xe.A,{}),monthlyPrice:ln(tn.monthly),annualPrice:ln(tn.annual),originalMonthlyPrice:tn.monthly,originalAnnualPrice:tn.annual,description:"For freelancers and small shops",features:["Up to 500 invoices/month","1 user account","Custom templates","Mobile app access","Payment tracking & tax calculations"],popular:!1,color:"#faad14"},{name:"Professional",icon:(0,ie.jsx)(C.A,{}),monthlyPrice:ln(an.monthly),annualPrice:ln(an.annual),originalMonthlyPrice:an.monthly,originalAnnualPrice:an.annual,description:"Ideal for growing businesses",features:["Unlimited invoices","Up to 3 user accounts","One Organisation","One Branch","Inventory management","Advanced analytics & reports","Automated reminders","Customer portal","Priority email & chat support"],popular:!0,color:"#52c41a"},{name:"Business",icon:(0,ie.jsx)(He.A,{}),monthlyPrice:ln(rn.monthly),annualPrice:ln(rn.annual),originalMonthlyPrice:rn.monthly,originalAnnualPrice:rn.annual,description:"For established businesses with teams",features:["All Professional features","Up to 5 user accounts","Multi-location support","Two Organisations","Two Branches","Advanced team collaboration","Custom workflows","API access & integrations","Enhanced security features","Priority support"],popular:!1,color:"#722ed1"},{name:"Enterprise",icon:(0,ie.jsx)(A.A,{}),monthlyPrice:null,annualPrice:null,description:"For large organizations requiring advanced solutions",features:["Unlimited users & accounts","Custom integrations & development","White-label solution","Advanced security & compliance","Dedicated support manager","SLA guarantee","On-premise deployment options","24/7 phone support"],popular:!1,color:"#eb2f96"}],cn=()=>{var e,n,i,t;const[a,r]=(0,l.useState)(!1),{data:c,isLoading:x,error:p,refetch:j}=(0,Ze.bh)(void 0),{data:g,isLoading:y,error:v,refetch:f}=(0,Ze.PE)(void 0),_=x||y,b=c?(0,s.A)((0,s.A)({},(0,$e.te)(c)),{},{limits:null===g||void 0===g||null===(e=g.result)||void 0===e?void 0:e.limits,currentUsage:null===g||void 0===g||null===(n=g.result)||void 0===n?void 0:n.current_usage}):null,S=e=>{o.Ay.info("To upgrade to ".concat(e," plan, please contact our sales team."))};return _?(0,ie.jsxs)("div",{style:{textAlign:"center",padding:"50px"},children:[(0,ie.jsx)(Oe.A,{size:"large"}),(0,ie.jsx)("p",{style:{marginTop:20},children:"Loading subscription information..."})]}):(0,ie.jsxs)("div",{className:U,children:[(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(C.A,{}),"Current Subscription",(0,ie.jsx)(d.Ay,{icon:(0,ie.jsx)(Le.A,{}),onClick:async()=>{try{await Promise.all([j(),f()]),o.Ay.success("Subscription information refreshed")}catch(e){console.error("Failed to refresh subscription:",e),o.Ay.error("Failed to refresh subscription information")}},loading:_,size:"small",style:{marginLeft:"auto"},children:"Refresh"})]}),b&&(0,ie.jsxs)(ie.Fragment,{children:[b.isActive?b.daysRemaining&&b.daysRemaining<=7?(0,ie.jsx)(we.A,{message:"Subscription Expiring Soon",description:"Your subscription will expire in ".concat(b.daysRemaining," days. Please renew to avoid service interruption."),type:"warning",icon:(0,ie.jsx)(Ye.A,{}),showIcon:!0,style:{marginBottom:24,borderRadius:12,border:"2px solid #faad14"},action:(0,ie.jsx)(d.Ay,{type:"primary",size:"small",onClick:()=>S("Renew"),children:"Renew Now"})}):(0,ie.jsxs)("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%)",border:"2px solid #52c41a",borderRadius:16,padding:"24px 28px",marginBottom:24,boxShadow:"0 4px 12px rgba(82, 196, 26, 0.1)",display:"flex",alignItems:"center",gap:16},children:[(0,ie.jsx)("div",{style:{width:56,height:56,borderRadius:"50%",background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(82, 196, 26, 0.3)",flexShrink:0},children:(0,ie.jsx)(A.A,{style:{fontSize:28,color:"white"}})}),(0,ie.jsxs)("div",{style:{flex:1},children:[(0,ie.jsx)(en,{level:4,style:{margin:"0 0 4px 0",color:"#135200"},children:"Subscription Active"}),(0,ie.jsx)(nn,{style:{fontSize:15,color:"#389e0d"},children:(0,$e.X7)(b.isActive,b.daysRemaining,b.expiryDate)})]})]}):(0,ie.jsx)(we.A,{message:"Subscription Inactive",description:b.message||"Your subscription has expired. Please renew to continue using the service.",type:"error",icon:(0,ie.jsx)(Fe.A,{}),showIcon:!0,style:{marginBottom:24,borderRadius:12,border:"2px solid #ff4d4f"},action:(0,ie.jsx)(d.Ay,{type:"primary",danger:!0,size:"small",onClick:()=>S("Renew"),children:"Renew Now"})}),(0,ie.jsxs)(m.A,{style:{marginBottom:30,borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",border:"1px solid #f0f0f0"},bodyStyle:{padding:"32px"},children:[(0,ie.jsxs)(u.A,{gutter:[24,24],children:[(0,ie.jsx)(h.A,{xs:24,sm:8,children:(0,ie.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, #f6f8fa 0%, #fafbfc 100%)",borderRadius:12,height:"100%",border:"1px solid #e8e8e8"},children:[(0,ie.jsx)(nn,{type:"secondary",style:{fontSize:13,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Current Plan"}),(0,ie.jsxs)(en,{level:3,style:{margin:"12px 0 0 0",color:"#1890ff",display:"flex",alignItems:"center",gap:8},children:[(0,ie.jsx)(C.A,{}),(null===(i=b.planName)||void 0===i?void 0:i.charAt(0).toUpperCase())+((null===(t=b.planName)||void 0===t?void 0:t.slice(1))||"Standard")]})]})}),(0,ie.jsx)(h.A,{xs:24,sm:8,children:(0,ie.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%)",borderRadius:12,height:"100%",border:"1px solid #91d5ff"},children:[(0,ie.jsx)(nn,{type:"secondary",style:{fontSize:13,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Status"}),(0,ie.jsx)("div",{style:{marginTop:12},children:b.isActive?(0,ie.jsx)(We.A,{color:"success",icon:(0,ie.jsx)(A.A,{}),style:{padding:"6px 16px",fontSize:15,borderRadius:8,fontWeight:500,border:"none"},children:"Active"}):(0,ie.jsx)(We.A,{color:"error",icon:(0,ie.jsx)(Ye.A,{}),style:{padding:"6px 16px",fontSize:15,borderRadius:8,fontWeight:500,border:"none"},children:"Expired"})})]})}),(0,ie.jsx)(h.A,{xs:24,sm:8,children:(0,ie.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, #fffbe6 0%, #fff7e6 100%)",borderRadius:12,height:"100%",border:"1px solid #ffe58f"},children:[(0,ie.jsx)(nn,{type:"secondary",style:{fontSize:13,textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Valid Until"}),(0,ie.jsxs)(en,{level:3,style:{margin:"12px 0 0 0",color:"#fa8c16",display:"flex",alignItems:"center",gap:8},children:[(0,ie.jsx)(Ye.A,{}),b.expiryDate?new Date(b.expiryDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"]})]})})]}),void 0!==b.daysRemaining&&b.daysRemaining>7&&(0,ie.jsxs)("div",{style:{marginTop:24,padding:"16px 20px",background:"linear-gradient(90deg, #f6ffed 0%, #f0f9ff 100%)",borderRadius:12,border:"1px solid #d9f7be",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,ie.jsx)(A.A,{style:{color:"#52c41a",fontSize:18}}),(0,ie.jsxs)(nn,{style:{fontSize:15,fontWeight:500,color:"#389e0d"},children:[b.daysRemaining," days remaining"]})]})]}),b.limits&&b.currentUsage&&(0,ie.jsxs)(m.A,{title:(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ie.jsx)(Ge.A,{style:{color:"#1890ff"}}),(0,ie.jsx)("span",{children:"Plan Usage & Limits"})]}),style:{marginBottom:30,borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",border:"1px solid #f0f0f0"},bodyStyle:{padding:"24px 32px"},children:[(0,ie.jsxs)(u.A,{gutter:[24,24],children:[void 0!==b.limits.max_users&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("users")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.users||0," / ",b.limits.max_users]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.users,b.limits.max_users),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.users,b.limits.max_users),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.users,b.limits.max_users)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_organisations&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("organisations")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.organisations||0," / ",b.limits.max_organisations]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.organisations,b.limits.max_organisations),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.organisations,b.limits.max_organisations),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.organisations,b.limits.max_organisations)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_branches&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("branches")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.branches||0," / ",b.limits.max_branches]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.branches,b.limits.max_branches),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.branches,b.limits.max_branches),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.branches,b.limits.max_branches)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_customers&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("customers")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.customers||0," / ",b.limits.max_customers]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.customers,b.limits.max_customers),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.customers,b.limits.max_customers),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.customers,b.limits.max_customers)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_products&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("products")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.products||0," / ",b.limits.max_products]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.products,b.limits.max_products),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.products,b.limits.max_products),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.products,b.limits.max_products)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_sales_records&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("sales_records")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.sales_records||0," / ",b.limits.max_sales_records]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.sales_records,b.limits.max_sales_records),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.sales_records,b.limits.max_sales_records),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.sales_records,b.limits.max_sales_records)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_entities&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("entities")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.entities||0," / ",b.limits.max_entities]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.entities,b.limits.max_entities),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.entities,b.limits.max_entities),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.entities,b.limits.max_entities)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})}),void 0!==b.limits.max_custom_fields&&(0,ie.jsx)(h.A,{xs:24,sm:12,children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,ie.jsx)(nn,{strong:!0,style:{fontSize:14},children:(0,$e.wR)("custom_fields")}),(0,ie.jsxs)(nn,{type:"secondary",style:{fontSize:13},children:[b.currentUsage.entities||0," / ",b.limits.max_custom_fields]})]}),(0,ie.jsx)(Qe.A,{title:"".concat((0,$e.w2)(b.currentUsage.entities,b.limits.max_custom_fields),"% used"),children:(0,ie.jsx)(Ve.A,{percent:(0,$e.w2)(b.currentUsage.entities,b.limits.max_custom_fields),strokeColor:(0,$e.Bt)((0,$e.w2)(b.currentUsage.entities,b.limits.max_custom_fields)),status:"active",strokeWidth:12,style:{marginBottom:0}})})]})})]}),(()=>{const e=(0,$e.or)(b.limits,b.currentUsage);return e.length>0?(0,ie.jsx)(we.A,{type:"warning",message:"Approaching Limits",description:"You are approaching or have exceeded limits for: ".concat(e.join(", "),". Consider upgrading your plan."),showIcon:!0,style:{marginTop:24,borderRadius:8},action:(0,ie.jsx)(d.Ay,{size:"small",type:"primary",onClick:()=>S("Upgrade"),children:"Upgrade Plan"})}):null})()]})]}),(0,ie.jsx)(K.A,{}),(0,ie.jsxs)("div",{className:T,children:[(0,ie.jsx)(Xe.A,{}),"Available Plans"]}),(0,ie.jsx)("div",{className:F,children:"Choose the perfect plan for your business. Contact our sales team to upgrade or change your plan."}),(0,ie.jsx)("div",{style:{textAlign:"center",marginBottom:30},children:(0,ie.jsxs)(re.A,{size:"middle",children:[(0,ie.jsx)(nn,{strong:!0,children:"Monthly"}),(0,ie.jsx)(J.A,{checked:a,onChange:r,checkedChildren:"Annual",unCheckedChildren:"Monthly"}),(0,ie.jsx)(nn,{strong:!0,children:"Annual"}),(0,ie.jsxs)(We.A,{color:"green",children:["Save ",20,"%"]})]})}),(0,ie.jsx)(u.A,{gutter:[16,16],children:on.map(((e,n)=>{var i;const s=(null===b||void 0===b||null===(i=b.planName)||void 0===i?void 0:i.toLowerCase())===e.name.toLowerCase();return(0,ie.jsx)(h.A,{xs:24,sm:12,lg:8,children:(0,ie.jsxs)(m.A,{hoverable:!s,style:{height:"100%",borderColor:e.popular?"#52c41a":void 0,borderWidth:e.popular?2:1,opacity:s?.8:1},bodyStyle:{padding:24},children:[e.popular&&(0,ie.jsx)(We.A,{color:"green",style:{position:"absolute",top:-10,right:10},children:"Most Popular"}),s&&(0,ie.jsx)(We.A,{color:"blue",style:{position:"absolute",top:-10,right:10},children:"Current Plan"}),(0,ie.jsxs)("div",{style:{textAlign:"center",marginBottom:20},children:[(0,ie.jsx)("div",{style:{width:50,height:50,margin:"0 auto 15px",background:e.color,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:"white"},children:e.icon}),(0,ie.jsx)(en,{level:4,style:{marginBottom:8},children:e.name}),(0,ie.jsx)(nn,{type:"secondary",children:e.description})]}),(0,ie.jsx)("div",{style:{textAlign:"center",marginBottom:20},children:null!==e.monthlyPrice?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center"},children:[(0,ie.jsxs)(nn,{style:{fontSize:24,fontWeight:700,color:e.color},children:["\u20b9",a?e.annualPrice:e.monthlyPrice]}),(0,ie.jsxs)(nn,{type:"secondary",style:{marginLeft:5},children:["/",a?"year":"month"]})]}),(0,ie.jsxs)(nn,{delete:!0,type:"secondary",style:{fontSize:14},children:["\u20b9",a?e.originalAnnualPrice:e.originalMonthlyPrice]})]}):(0,ie.jsx)(nn,{strong:!0,style:{fontSize:24,color:e.color},children:"Contact Sales"})}),(0,ie.jsx)("ul",{style:{listStyle:"none",padding:0,marginBottom:20},children:e.features.map(((e,n)=>(0,ie.jsxs)("li",{style:{padding:"8px 0",display:"flex",alignItems:"flex-start"},children:[(0,ie.jsx)(A.A,{style:{color:"#52c41a",marginRight:8,marginTop:4}}),(0,ie.jsx)(nn,{children:e})]},n)))}),(0,ie.jsx)(d.Ay,{type:e.popular?"primary":"default",block:!0,size:"large",disabled:s,onClick:()=>S(e.name),style:{background:!s&&e.popular?e.color:void 0,borderColor:e.color},children:s?"Current Plan":"Upgrade to ".concat(e.name)})]})},n)}))}),(0,ie.jsx)(K.A,{}),(0,ie.jsx)(m.A,{style:{marginTop:30,background:"#f0f2f5"},children:(0,ie.jsxs)("div",{style:{textAlign:"center"},children:[(0,ie.jsx)(en,{level:4,children:"Need Help Choosing a Plan?"}),(0,ie.jsx)(sn,{children:"Contact our sales team for personalized assistance and custom enterprise solutions."}),(0,ie.jsxs)(re.A,{size:"large",children:[(0,ie.jsx)(d.Ay,{type:"primary",icon:(0,ie.jsx)(Ke.A,{}),size:"large",onClick:()=>o.Ay.info("Phone: +91-XXXX-XXXX-XX"),children:"Call Sales"}),(0,ie.jsx)(d.Ay,{icon:(0,ie.jsx)(Je.A,{}),size:"large",onClick:()=>o.Ay.info("Email: sales@subrivabilling.com"),children:"Email Sales"})]})]})})]})},{Title:dn,Text:mn}=t.A,{Option:un}=a.A,hn=(e,n)=>{n&&e.setFieldsValue({org_name:n.org_name||n.organization_name||n.name,business_type:n.business_type,email:n.email,phone:n.phone,gst_number:n.gst_number,pan_number:n.pan_number,address1:n.address1||n.address,city:n.city,state:n.state,pincode:n.pincode,currency:n.currency,timezone:n.timezone,status:!1!==n.status})},xn=()=>{const e=(0,I.Zp)(),[n]=((0,I.zy)(),r.A.useForm()),[i]=r.A.useForm(),[t,T]=(0,l.useState)(!1),[U,z]=(0,l.useState)(!1),F=(0,l.useCallback)((()=>{const e=window.location.hash,n=e.includes("?")?e.split("?")[1]:"";return new URLSearchParams(n).get("tab")||"business"}),[]),[E,L]=(0,l.useState)(F()),[q,D]=(0,l.useState)("all"),[M,O]=(0,l.useState)("all"),W=(0,l.useCallback)((e=>{L(e);const n=window.location.hash,i=n.split("?")[0]||"#/settings",s=n.includes("?")?n.split("?")[1]:"",l=new URLSearchParams(s);l.set("tab",e);const t="".concat(i,"?").concat(l.toString());window.history.replaceState(null,"",t)}),[]),Q=(0,l.useMemo)((()=>(0,X.getCurrentUser)()),[]),{userRole:V,isSuperAdmin:Y,isTenant:K,isOrganisationUser:J,isBranchUser:Z}=(0,l.useMemo)((()=>{const e=H.A.getItem("scope"),n=(null===e||void 0===e?void 0:e.userType)||(null===Q||void 0===Q?void 0:Q.user_type)||(null===Q||void 0===Q?void 0:Q.usertype)||(null===Q||void 0===Q?void 0:Q.user_role)||"";return{userRole:n,isSuperAdmin:"superadmin"===n.toLowerCase(),isTenant:"tenant"===n.toLowerCase(),isOrganisationUser:"organisationuser"===n.toLowerCase(),isBranchUser:"branchuser"===n.toLowerCase()}}),[Q]),{data:$}=G.lh.useGetTenantAccountsQuery({},{skip:!Y}),ee=(0,l.useMemo)((()=>{if(Y&&q&&"all"!==q)return{tenant_id:q};if(J||Z){var e;const n=(null===Q||void 0===Q?void 0:Q.organisation_id)||(null===Q||void 0===Q||null===(e=Q.organisationItems)||void 0===e?void 0:e._id);if(n)return{organisation_id:n}}return{}}),[Y,q,J,Z,Q]),{data:ne}=G.lh.useGetOrganisationsQuery(ee,{skip:!K&&!Y&&!J&&!Z}),[se,le]=(0,l.useState)(null),te=(0,l.useMemo)((()=>!se||"all"===se||!J&&!Z&&(Y?!q||"all"===q:!K)),[se,Y,K,J,Z,q]),{data:re,refetch:oe}=G.lh.useGetSettingsQuery({organisation_id:se,pageNumber:1,pageLimit:10},{skip:te||!se,refetchOnMountOrArgChange:!0}),[de]=G.lh.useUpdateSettingsMutation(),[me]=G.lh.useCreateSettingsMutation(),[he]=G.lh.useUpdateOrganisationsMutation(),pe=(null===$||void 0===$?void 0:$.result)||[],ye=(null===ne||void 0===ne?void 0:ne.result)||[],ve=(0,l.useMemo)((()=>se&&"all"!==se&&(null===ye||void 0===ye?void 0:ye.find((e=>e._id===se)))||null),[se,ye]);(0,l.useEffect)((()=>{if((J||Z)&&!se){var e;const n=(null===Q||void 0===Q?void 0:Q.organisation_id)||(null===Q||void 0===Q||null===(e=Q.organisationItems)||void 0===e?void 0:e._id);n&&(le(n),hn(i,null===Q||void 0===Q?void 0:Q.organisationItems))}}),[]),(0,l.useEffect)((()=>{const e=()=>{const e=F();e&&L(e)};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}),[F]);const fe=(0,l.useCallback)((e=>{D(e||"all"),O("all"),le(null),n.resetFields(),i.resetFields()}),[n,i]),_e=(0,l.useCallback)((e=>{O(e||"all"),e&&"all"!==e&&(!Y||q&&"all"!==q)?le(e):(le(null),n.resetFields())}),[n,Y,q]);(0,l.useEffect)((()=>{ve?hn(i,ve):se&&"all"!==se&&i.resetFields()}),[ve,se,i]),(0,l.useEffect)((()=>{const e=(null===re||void 0===re?void 0:re.result)||re||{},i=Array.isArray(e)?e[0]:e,s=i&&"object"===typeof i&&(i._id||i.id);var l,t,a,r,o,c,d,m,u,h,x,p,j,g,y,v,f,_,A,b,S,w,k,C,I,P,N,R,B,T,U,z,F,E,L;se?s?n.setFieldsValue({tax_enabled:null!==(l=i.tax_enabled)&&void 0!==l?l:null,tax_type:null!==(t=i.tax_type)&&void 0!==t?t:null,invoice_prefix:null!==(a=i.invoice_prefix)&&void 0!==a?a:null,invoice_starting_number:null!==(r=i.invoice_starting_number)&&void 0!==r?r:null,invoice_footer:null!==(o=i.invoice_footer)&&void 0!==o?o:null,show_logo_on_invoice:null!==(c=i.show_logo_on_invoice)&&void 0!==c?c:null,show_terms_on_invoice:null!==(d=i.show_terms_on_invoice)&&void 0!==d?d:null,invoice_terms:null!==(m=i.invoice_terms)&&void 0!==m?m:null,thermal_printer_enabled:null!==(u=i.thermal_printer_enabled)&&void 0!==u?u:null,printer_port:null!==(h=i.printer_port)&&void 0!==h?h:null,printer_baud_rate:null!==(x=i.printer_baud_rate)&&void 0!==x?x:null,paper_width:null!==(p=i.paper_width)&&void 0!==p?p:null,auto_print:null!==(j=i.auto_print)&&void 0!==j?j:null,default_payment_mode:null!==(g=i.default_payment_mode)&&void 0!==g?g:null,default_document_type:null!==(y=i.default_document_type)&&void 0!==y?y:null,email_notifications:null!==(v=i.email_notifications)&&void 0!==v?v:null,sms_notifications:null!==(f=i.sms_notifications)&&void 0!==f?f:null,low_stock_alert:null!==(_=i.low_stock_alert)&&void 0!==_?_:null,low_stock_threshold:null!==(A=i.low_stock_threshold)&&void 0!==A?A:null,payment_reminder:null!==(b=i.payment_reminder)&&void 0!==b?b:null,daily_report_email:null!==(S=i.daily_report_email)&&void 0!==S?S:null,bill_template:i.bill_template,invoice_template:i.invoice_template,bank_name:null!==(w=i.bank_name)&&void 0!==w?w:null,account_holder_name:null!==(k=i.account_holder_name)&&void 0!==k?k:null,account_number:null!==(C=i.account_number)&&void 0!==C?C:null,ifsc_code:null!==(I=i.ifsc_code)&&void 0!==I?I:null,branch_name:null!==(P=i.branch_name)&&void 0!==P?P:null,account_type:null!==(N=i.account_type)&&void 0!==N?N:null,upi_id:null!==(R=i.upi_id)&&void 0!==R?R:null,swift_code:null!==(B=i.swift_code)&&void 0!==B?B:null,enable_payment_qr:null!==(T=i.enable_payment_qr)&&void 0!==T&&T,qr_on_invoice:null===(U=i.qr_on_invoice)||void 0===U||U,qr_on_bill:null===(z=i.qr_on_bill)||void 0===z||z,qr_size:null!==(F=i.qr_size)&&void 0!==F?F:200,qr_position:null!==(E=i.qr_position)&&void 0!==E?E:"bottom-right",show_upi_id_text:null===(L=i.show_upi_id_text)||void 0===L||L}):n.setFieldsValue({tax_enabled:null,tax_type:null,invoice_prefix:null,invoice_starting_number:null,invoice_footer:null,show_logo_on_invoice:null,show_terms_on_invoice:null,invoice_terms:null,thermal_printer_enabled:null,printer_port:null,printer_baud_rate:null,paper_width:null,auto_print:null,default_payment_mode:null,default_document_type:null,email_notifications:null,sms_notifications:null,low_stock_alert:null,low_stock_threshold:null,payment_reminder:null,daily_report_email:null,bill_template:null,invoice_template:null,bank_name:null,account_holder_name:null,account_number:null,ifsc_code:null,branch_name:null,account_type:null,upi_id:null,swift_code:null,enable_payment_qr:!1,qr_on_invoice:!0,qr_on_bill:!0,qr_size:200,qr_position:"bottom-right",show_upi_id_text:!0}):"all"===M&&(Y||K)&&n.resetFields()}),[re,se,M,Y,K,n]);const be=(0,l.useCallback)((async()=>{try{if((Y||K)&&"all"===M)return void o.Ay.error("Please select an organisation before updating settings");const d=await n.validateFields();T(!0);let m="all"!==M?M:null;var e;if(!m)m=(null===Q||void 0===Q?void 0:Q.organisation_id)||(null===Q||void 0===Q||null===(e=Q.organisationItems)||void 0===e?void 0:e._id);if((Y||K)&&!m)return void o.Ay.error("Please select an organisation before updating settings");let u={};if("tax"===E)u={tax_enabled:d.tax_enabled,tax_type:d.tax_type};else if("invoice"===E)u={invoice_prefix:d.invoice_prefix,invoice_starting_number:d.invoice_starting_number,invoice_footer:d.invoice_footer,invoice_terms:d.invoice_terms,show_logo_on_invoice:d.show_logo_on_invoice,show_terms_on_invoice:d.show_terms_on_invoice};else if("printer"===E)u={thermal_printer_enabled:d.thermal_printer_enabled,printer_port:d.printer_port,printer_baud_rate:d.printer_baud_rate,paper_width:d.paper_width,auto_print:d.auto_print};else if("defaults"===E)u={default_payment_mode:d.default_payment_mode,default_document_type:d.default_document_type};else if("notifications"===E)u={email_notifications:d.email_notifications,sms_notifications:d.sms_notifications,low_stock_alert:d.low_stock_alert,low_stock_threshold:d.low_stock_threshold,payment_reminder:d.payment_reminder,daily_report_email:d.daily_report_email};else if("templates"===E)u={bill_template:d.bill_template,invoice_template:d.invoice_template};else if("bank"===E)u={bank_name:d.bank_name,account_holder_name:d.account_holder_name,account_number:d.account_number,ifsc_code:d.ifsc_code,branch_name:d.branch_name,account_type:d.account_type,upi_id:d.upi_id,swift_code:d.swift_code};else if("payment-qr"===E){var i,l,t,a,r,c;u={upi_id:d.upi_id,enable_payment_qr:null!==(i=d.enable_payment_qr)&&void 0!==i&&i,qr_on_invoice:null===(l=d.qr_on_invoice)||void 0===l||l,qr_on_bill:null===(t=d.qr_on_bill)||void 0===t||t,qr_size:null!==(a=d.qr_size)&&void 0!==a?a:200,qr_position:null!==(r=d.qr_position)&&void 0!==r?r:"bottom-right",show_upi_id_text:null===(c=d.show_upi_id_text)||void 0===c||c}}const h=(null===re||void 0===re?void 0:re.result)||re||[],x=Array.isArray(h)?h[0]:h,p=x&&(x._id||x.id),j=m||(null===Q||void 0===Q?void 0:Q._id);if(p){const e=x._id||x.id;await de({id:e,data:(0,s.A)((0,s.A)({},u),{},{organisation_id:j})}).unwrap(),o.Ay.success("Settings updated successfully! \ud83c\udf89")}else await me((0,s.A)((0,s.A)({},u),{},{organisation_id:j})).unwrap(),o.Ay.success("Settings created successfully! \ud83c\udf89");j&&await oe()}catch(m){var d;console.error("\u274c Error saving settings:",m),o.Ay.error(m.message||(null===(d=m.data)||void 0===d?void 0:d.message)||"Failed to save settings")}finally{T(!1)}}),[Y,K,M,Q,E,de,me,oe,re,n,J,Z]),we=(0,l.useCallback)((async()=>{try{if((Y||K)&&"all"===M)return void o.Ay.error("Please select an organisation before updating business information");const n=await i.validateFields();z(!0);let s="all"!==M?M:null;var e;if(!s)s=(null===Q||void 0===Q?void 0:Q.organisation_id)||(null===Q||void 0===Q||null===(e=Q.organisationItems)||void 0===e?void 0:e._id);if(!s)return void o.Ay.error("Organisation ID not found. Please select an organisation.");await he({id:s,data:{org_name:n.org_name,business_type:n.business_type,email:n.email,phone:n.phone,gst_number:n.gst_number,pan_number:n.pan_number,address1:n.address1,city:n.city,state:n.state,pincode:n.pincode,currency:n.currency,timezone:n.timezone,status:n.status}}).unwrap(),o.Ay.success("Business information updated successfully! \ud83c\udf89")}catch(s){var n;console.error("\u274c Error saving business information:",s),o.Ay.error(s.message||(null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to save business information")}finally{z(!1)}}),[Y,K,M,Q,i,he]),ke=(0,l.useCallback)((()=>{n.resetFields(),o.Ay.info("Form reset to last saved values")}),[n]),Ce=(0,l.useCallback)((()=>{i.resetFields(),o.Ay.info("Form reset to last saved values")}),[i]),Ie=(0,l.useCallback)((()=>{o.Ay.info("Printing test page... Check your thermal printer")}),[]),Pe=(0,l.useMemo)((()=>(null===pe||void 0===pe?void 0:pe.map((e=>({label:e.organization_name||e.tenant_name,value:e._id}))))||[]),[pe]),Ne=(0,l.useMemo)((()=>(null===ye||void 0===ye?void 0:ye.map((e=>({label:e.org_name||e.organization_name||e.name,value:e._id}))))||[]),[ye]);return(0,l.useEffect)((()=>{const e=e=>{const n=e.target;if("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.classList.contains("ant-select-selector")||n.closest(".ant-select-dropdown")||n.closest(".ant-picker-dropdown")||n.isContentEditable)return;const i=["business","tax","invoice","printer","defaults","notifications","templates","bank","payment-qr","system","subscription"];if(e.ctrlKey&&!e.shiftKey&&!e.altKey){let n=-1;e.key>="1"&&e.key<="9"?n=parseInt(e.key)-1:"0"===e.key&&(n=9),n>=0&&n<i.length&&(e.preventDefault(),e.stopPropagation(),W(i[n]),setTimeout((()=>{const e=document.querySelector('.ant-tabs-tab[data-node-key="'.concat(i[n],'"]'));e&&e.focus()}),50))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[E,W]),(0,ie.jsxs)("div",{className:P,children:[(0,ie.jsxs)(c.A,{style:{marginBottom:16},children:[(0,ie.jsx)(c.A.Item,{children:(0,ie.jsxs)("span",{onClick:()=>e("/dashboard"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,ie.jsx)(p.A,{}),(0,ie.jsx)("span",{style:{marginLeft:4},children:"Home"})]})}),(0,ie.jsxs)(c.A.Item,{children:[(0,ie.jsx)(j.A,{}),(0,ie.jsx)("span",{style:{marginLeft:4},children:"Settings"})]})]}),(0,ie.jsx)("div",{className:N,children:(0,ie.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:8},children:[(0,ie.jsx)(d.Ay,{icon:(0,ie.jsx)(g.A,{}),onClick:()=>e(-1),size:"large",style:{flexShrink:0},children:"Back"}),(0,ie.jsxs)(dn,{level:2,className:R,style:{margin:0},children:[(0,ie.jsx)(j.A,{}),"Settings"]})]})}),(Y||K)&&(0,ie.jsx)(m.A,{style:{marginBottom:16},children:(0,ie.jsxs)(u.A,{gutter:16,children:[Y&&(0,ie.jsxs)(h.A,{xs:24,sm:12,md:8,children:[(0,ie.jsx)("div",{style:{marginBottom:8},children:(0,ie.jsx)(mn,{strong:!0,children:"Tenant"})}),(0,ie.jsxs)(a.A,{style:{width:"100%"},placeholder:"Select Tenant",value:q,onChange:fe,showSearch:!0,optionFilterProp:"children",allowClear:!0,children:[(0,ie.jsx)(un,{value:"all",children:"All Tenants"}),Pe.map((e=>(0,ie.jsx)(un,{value:e.value,children:e.label},e.value)))]})]}),(Y||K)&&(0,ie.jsxs)(h.A,{xs:24,sm:12,md:8,children:[(0,ie.jsx)("div",{style:{marginBottom:8},children:(0,ie.jsx)(mn,{strong:!0,children:"Organisation"})}),(0,ie.jsxs)(a.A,{style:{width:"100%"},placeholder:"Select Organisation",value:M,onChange:_e,showSearch:!0,optionFilterProp:"children",allowClear:!0,disabled:Y&&("all"===q||!q),children:[(0,ie.jsx)(un,{value:"all",children:"All Organisations"}),Ne.map((e=>(0,ie.jsx)(un,{value:e.value,children:e.label},e.value)))]})]})]})}),(0,ie.jsx)(m.A,{className:B,children:(0,ie.jsx)(x.A,{activeKey:E,onChange:W,type:"card",items:[{key:"business",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(y.A,{})," Business Info"]}),children:(0,ie.jsx)(ae,{form:i,loading:U,onSave:we,onReset:Ce})},{key:"tax",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(v.A,{})," Tax & GST"]}),children:(0,ie.jsx)(ce,{form:n,loading:t,onSave:be,onReset:ke})},{key:"invoice",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(f.A,{})," Invoice"]}),children:(0,ie.jsx)(ue,{form:n,loading:t,onSave:be,onReset:ke})},{key:"printer",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(_.A,{})," Printer"]}),children:(0,ie.jsx)(xe,{form:n,loading:t,onSave:be,onReset:ke,onTestPrinter:Ie})},{key:"defaults",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(A.A,{})," Defaults"]}),children:(0,ie.jsx)(je,{form:n,loading:t,onSave:be,onReset:ke})},{key:"notifications",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(b.A,{})," Notifications"]}),children:(0,ie.jsx)(ge,{form:n,loading:t,onSave:be,onReset:ke})},{key:"templates",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(f.A,{})," Templates"]}),children:(0,ie.jsx)(Ae,{form:n,loading:t,onSave:be,onReset:ke})},{key:"bank",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(S.A,{})," Bank Details"]}),children:(0,ie.jsx)(Se,{form:n,loading:t,onSave:be,onReset:ke})},{key:"payment-qr",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(w.A,{})," Payment QR"]}),children:(0,ie.jsx)(Te,{form:n,loading:t,onSave:be,onReset:ke})},{key:"system",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(k.A,{})," System"]}),children:(0,ie.jsx)(Me,{form:n,loading:t,onSave:be,onReset:ke})},{key:"subscription",label:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(C.A,{})," Subscription"]}),children:(0,ie.jsx)(cn,{})}]})})]})}}}]);
//# sourceMappingURL=4420.8cca4098.chunk.js.map