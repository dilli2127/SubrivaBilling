{"version":3,"file":"static/js/116.98ff364c.chunk.js","mappings":"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","sources":["helpers/constants.ts","services/api/apiService.ts","services/electronBackend.ts","services/api/index.ts","../node_modules/@ant-design/icons/es/icons/PlusOutlined.js","helpers/resourceConstants.ts","pages/Roles/RolePermissionForm.tsx","pages/Roles/columns.tsx","pages/Roles/RolesCrudNew.tsx","pages/Roles/crud.tsx"],"sourcesContent":["export const API_ERROR_CODES = {\r\n  OK: 200,\r\n  CREATED: 201,\r\n  UPDATED: 202,\r\n  DELETED: 203,\r\n  DUPLICATE: 409,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  SERVICE_UNAVAILABLE: 503,\r\n};\r\n\r\nexport const EMPTY_STRING = \"\";\r\n\r\n","import axios, { AxiosInstance, AxiosError, InternalAxiosRequestConfig } from 'axios';\r\nimport { message } from 'antd';\r\nimport { API_ERROR_CODES } from '../../helpers/constants';\r\nimport { getAuthToken, getRefreshToken, setAccessToken, setRefreshToken, clearAuthData } from '../../helpers/auth';\r\nimport { getCSRFToken } from '../../helpers/csrfToken';\r\n\r\nexport interface ApiResponse<T> {\r\n    statusCode: number;\r\n    result:any\r\n    message: string;\r\n    data?: T; // Optional, only present on success\r\n    pagination:{};\r\n}\r\n\r\nexport interface ApiRequest {\r\n    method: string;\r\n    endpoint: string;\r\n    data?: any; // Optional, only present on success\r\n    signal?: AbortSignal; // For request cancellation\r\n}\r\n\r\nclass APIService {\r\n    private api: AxiosInstance;\r\n    private isRefreshing: boolean = false;\r\n    private refreshSubscribers: Array<(token: string) => void> = [];\r\n    private hasShownSessionExpiredMessage: boolean = false;\r\n\r\n    constructor(baseURL: string) {\r\n        this.api = axios.create({\r\n            baseURL,\r\n            timeout: 60000, // 60 seconds timeout for slow connections\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // Token header will be set by the interceptor\r\n            },\r\n        });\r\n\r\n        // Add request interceptor for token and CSRF\r\n        this.api.interceptors.request.use((config) => {\r\n            const token = getAuthToken();\r\n            if (token) {\r\n                config.headers['Token'] = token;\r\n                // Also add Authorization header for modern APIs\r\n                config.headers['Authorization'] = `Bearer ${token}`;\r\n            }\r\n            \r\n            // Add CSRF token for state-changing requests\r\n            if (config.method && ['post', 'put', 'patch', 'delete'].includes(config.method.toLowerCase())) {\r\n                const csrfToken = getCSRFToken();\r\n                config.headers['X-CSRF-Token'] = csrfToken;\r\n            }\r\n            \r\n            return config;\r\n        });\r\n\r\n        // Add response interceptor for automatic token refresh on 401\r\n        this.api.interceptors.response.use(\r\n            response => response,\r\n            async (error: AxiosError) => {\r\n                const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n                \r\n                if (error.response && error.response.status === 401 && !originalRequest._retry) {\r\n                    const errorMessage = (error.response.data as any)?.exception || \r\n                                       (error.response.data as any)?.message || '';\r\n                    \r\n                    // Check if it's a permission denied error (not token expiration)\r\n                    if (errorMessage.toLowerCase().includes('access denied') || \r\n                        errorMessage.toLowerCase().includes('insufficient permissions') ||\r\n                        errorMessage.toLowerCase().includes('permission')) {\r\n                        // Permission denied - don't clear auth, just show error\r\n                        message.error({\r\n                            content: 'You do not have permission to perform this action.',\r\n                            duration: 5,\r\n                        });\r\n                        return Promise.reject(error);\r\n                    }\r\n                    \r\n                    // Token expired - try to refresh\r\n                    if (this.isRefreshing) {\r\n                        // If already refreshing, queue this request\r\n                        return new Promise((resolve) => {\r\n                            this.refreshSubscribers.push((token: string) => {\r\n                                if (originalRequest.headers) {\r\n                                    originalRequest.headers['Token'] = token;\r\n                                    originalRequest.headers['Authorization'] = `Bearer ${token}`;\r\n                                }\r\n                                resolve(this.api.request(originalRequest));\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    originalRequest._retry = true;\r\n                    this.isRefreshing = true;\r\n\r\n                    try {\r\n                        const newAccessToken = await this.refreshAccessToken();\r\n                        \r\n                        if (newAccessToken) {\r\n                            // Update token in original request\r\n                            if (originalRequest.headers) {\r\n                                originalRequest.headers['Token'] = newAccessToken;\r\n                                originalRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\r\n                            }\r\n                            \r\n                            // Process queued requests\r\n                            this.refreshSubscribers.forEach(callback => callback(newAccessToken));\r\n                            this.refreshSubscribers = [];\r\n                            \r\n                            // Retry original request\r\n                            return this.api.request(originalRequest);\r\n                        }\r\n                    } catch (refreshError) {\r\n                        // Refresh failed - logout user\r\n                        console.error('Token refresh failed:', refreshError);\r\n                        \r\n                        // Show error message only once to avoid multiple toasts\r\n                        if (!this.hasShownSessionExpiredMessage) {\r\n                            this.hasShownSessionExpiredMessage = true;\r\n                            message.error('Your session has expired. Please login again.');\r\n                        }\r\n                        \r\n                        clearAuthData();\r\n                        window.location.href = '#/billing_login';\r\n                        return Promise.reject(refreshError);\r\n                    } finally {\r\n                        this.isRefreshing = false;\r\n                    }\r\n                }\r\n                \r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    // Refresh access token using refresh token\r\n    private async refreshAccessToken(): Promise<string | null> {\r\n        const refreshToken = getRefreshToken();\r\n        \r\n        if (!refreshToken) {\r\n            console.warn('No refresh token available');\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                `${this.api.defaults.baseURL}/auth/refresh-token`,\r\n                { refreshToken },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (response.data?.statusCode === 200) {\r\n                const { accessToken, refreshToken: newRefreshToken } = response.data.result;\r\n                \r\n                // Store new tokens\r\n                setAccessToken(accessToken);\r\n                if (newRefreshToken) {\r\n                    setRefreshToken(newRefreshToken);\r\n                }\r\n                \r\n                return accessToken;\r\n            }\r\n            \r\n            return null;\r\n        } catch (error) {\r\n            console.error('Failed to refresh access token:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // Method to send requests to the API\r\n    async send<T>(request:ApiRequest): Promise<ApiResponse<T | null>> {\r\n        try {\r\n            const { data } = await this.api.request<ApiResponse<T>>({\r\n                method: request.method,\r\n                url: request.endpoint,\r\n                data: request.data,\r\n                signal: request.signal, // Add abort signal for cancellation\r\n            });\r\n            return this.handleResponse(data);\r\n        } catch (error) {\r\n            // Check if request was cancelled\r\n            if (axios.isAxiosError(error) && error.name === 'CanceledError') {\r\n                return {\r\n                    statusCode: 0,\r\n                    message: 'Request cancelled',\r\n                    result: null,\r\n                    pagination: {}\r\n                };\r\n            }\r\n            return this.handleError<T>(error);\r\n        }\r\n    }\r\n\r\n    // Handle successful responses\r\n    private handleResponse<T>(response: ApiResponse<T>): ApiResponse<T> {\r\n        // Check for 401 status code in response body (some APIs return 401 in body, not HTTP status)\r\n        if (response.statusCode === 401) {\r\n            const errorMessage = (response as any).exception || response.message || '';\r\n            \r\n            // Check if it's a permission denied error (not token expiration)\r\n            if (errorMessage.toLowerCase().includes('access denied') || \r\n                errorMessage.toLowerCase().includes('insufficient permissions') ||\r\n                errorMessage.toLowerCase().includes('permission')) {\r\n                // Permission denied - don't clear auth, just show error\r\n                message.error({\r\n                    content: 'You do not have permission to perform this action.',\r\n                    duration: 5,\r\n                });\r\n                return response;\r\n            }\r\n            \r\n            // Token expired - logout user\r\n            if (!this.hasShownSessionExpiredMessage) {\r\n                this.hasShownSessionExpiredMessage = true;\r\n                message.error('Your session has expired. Please login again.');\r\n            }\r\n            \r\n            clearAuthData();\r\n            window.location.href = '#/billing_login';\r\n            return response;\r\n        }\r\n        \r\n        return {\r\n            statusCode: response.statusCode,\r\n            message: response.message,\r\n            result: response.result,\r\n            pagination :response.pagination\r\n        };\r\n    }\r\n\r\n    // Handle errors from Axios\r\n    private handleError<T>(error: unknown): ApiResponse<T | null> {\r\n        let errorMessage = 'API call failed';\r\n        let statusCode = API_ERROR_CODES.INTERNAL_SERVER_ERROR;\r\n\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.response) {\r\n                // The request was made and the server responded with a statusCode code\r\n                statusCode = error.response.status;\r\n                errorMessage = error.response.data?.message || 'An error occurred';\r\n            } else if (error.request) {\r\n                // Network error or timeout\r\n                errorMessage = 'No response received from server';\r\n                statusCode = API_ERROR_CODES.SERVICE_UNAVAILABLE ?? 503;\r\n            } else {\r\n                // Something happened in setting up the request\r\n                errorMessage = error.message;\r\n            }\r\n        }\r\n\r\n        return {\r\n            statusCode,\r\n            message: errorMessage,\r\n            result: null,\r\n            pagination: {}\r\n        };\r\n    }\r\n}\r\n\r\nexport default APIService;\r\n","/**\r\n * Electron Backend Service\r\n * Handles communication between the React frontend and the embedded backend server\r\n */\r\n\r\n// Using environment variables directly\r\n\r\n// Type declarations are in src/hooks/useElectron.ts\r\n\r\nclass ElectronBackendService {\r\n  private backendUrl: string | null = null;\r\n  private isElectron: boolean = false;\r\n\r\n  constructor() {\r\n    this.isElectron = this.checkIfElectron();\r\n    this.initializeBackendUrl();\r\n  }\r\n\r\n  /**\r\n   * Check if the app is running in Electron\r\n   */\r\n  private checkIfElectron(): boolean {\r\n    return !!(window && window.electronAPI);\r\n  }\r\n\r\n  /**\r\n   * Initialize the backend URL\r\n   */\r\n  private async initializeBackendUrl(): Promise<void> {\r\n    if (this.isElectron && window.electronAPI) {\r\n      try {\r\n        this.backendUrl = await window.electronAPI.getBackendUrl();\r\n      } catch (error) {\r\n        console.error('Failed to get backend URL from Electron:', error);\r\n        // Fallback to environment variable or default\r\n        this.backendUrl = 'http://localhost:8247'; // Force your port\r\n      }\r\n    } else {\r\n      // If not in Electron, use environment variable or fallback\r\n      this.backendUrl = 'http://localhost:8247'; // Force your port\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the backend base URL\r\n   */\r\n  public async getBackendUrl(): Promise<string> {\r\n    if (!this.backendUrl) {\r\n      await this.initializeBackendUrl();\r\n    }\r\n    return this.backendUrl || process.env.REACT_APP_API_URL || 'http://localhost:8247';\r\n  }\r\n\r\n  /**\r\n   * Get the full API URL with path\r\n   */\r\n  public async getApiUrl(path: string = ''): Promise<string> {\r\n    const baseUrl = await this.getBackendUrl();\r\n    const cleanPath = path.startsWith('/') ? path : `/${path}`;\r\n    return `${baseUrl}/api${cleanPath}`;\r\n  }\r\n\r\n  /**\r\n   * Check if running in Electron\r\n   */\r\n  public isElectronApp(): boolean {\r\n    return this.isElectron;\r\n  }\r\n\r\n  /**\r\n   * Wait for backend to be ready\r\n   */\r\n  public async waitForBackend(timeout: number = 30000): Promise<boolean> {\r\n    const startTime = Date.now();\r\n    const backendUrl = await this.getBackendUrl();\r\n\r\n    while (Date.now() - startTime < timeout) {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/api/health`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          return true;\r\n        }\r\n      } catch (error) {\r\n        // Backend not ready yet, continue waiting\r\n      }\r\n\r\n      // Wait 500ms before trying again\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get app version (Electron only)\r\n   */\r\n  public async getAppVersion(): Promise<string> {\r\n    if (this.isElectron && window.electronAPI) {\r\n      try {\r\n        return await window.electronAPI.getAppVersion();\r\n      } catch (error) {\r\n        console.error('Failed to get app version:', error);\r\n        return 'Unknown';\r\n      }\r\n    }\r\n    return 'Web Version';\r\n  }\r\n\r\n  /**\r\n   * Get platform info (Electron only)\r\n   */\r\n  public getPlatform(): string {\r\n    if (this.isElectron && window.electronAPI) {\r\n      return window.electronAPI.platform;\r\n    }\r\n    return 'web';\r\n  }\r\n}\r\n\r\n// Create and export a singleton instance\r\nconst electronBackendService = new ElectronBackendService();\r\nexport default electronBackendService;\r\n\r\n// Export the class for testing purposes\r\nexport { ElectronBackendService };\r\n","import APIService, { ApiRequest } from \"./apiService\";\r\nimport electronBackendService from \"../electronBackend\";\r\n\r\n// Initialize API service with dynamic backend URL\r\nlet apiService: APIService | null = null;\r\n\r\nconst initializeApiService = async (): Promise<APIService> => {\r\n  if (!apiService) {\r\n    let baseURL: string;\r\n    \r\n    if (electronBackendService.isElectronApp()) {\r\n      // Running in Electron - use external backend\r\n      baseURL = await electronBackendService.getBackendUrl();\r\n      \r\n      // Skip health check - backend URL configured in .env\r\n    } else {\r\n      // Running in browser - use environment variable or fallback\r\n      baseURL = process.env.REACT_APP_API_URL || \"http://localhost:8247/\";\r\n    }\r\n    \r\n    apiService = new APIService(baseURL);\r\n  }\r\n  \r\n  return apiService;\r\n};\r\n\r\nconst requestBackServer = async (request: ApiRequest) => {\r\n  const service = await initializeApiService();\r\n  return await service.send<any>(request);\r\n};\r\n\r\nexport default requestBackServer;\r\n\r\n// Export for direct access if needed\r\nexport { initializeApiService };\r\n\r\n","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nconst PlusOutlined = (props, ref) => /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n  ref: ref,\n  icon: PlusOutlinedSvg\n}));\n\n/**![plus](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ4MiAxNTJoNjBxOCAwIDggOHY3MDRxMCA4LTggOGgtNjBxLTggMC04LThWMTYwcTAtOCA4LTh6IiAvPjxwYXRoIGQ9Ik0xOTIgNDc0aDY3MnE4IDAgOCA4djYwcTAgOC04IDhIMTYwcS04IDAtOC04di02MHEwLTggOC04eiIgLz48L3N2Zz4=) */\nconst RefIcon = /*#__PURE__*/React.forwardRef(PlusOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'PlusOutlined';\n}\nexport default RefIcon;","/**\r\n * Resource Constants - Available Resources for Permission Management\r\n * \r\n * This file defines all available resources in the system and their metadata.\r\n * Used by the Role creation/edit forms to display permission checkboxes.\r\n */\r\n\r\nexport interface ResourceDefinition {\r\n  resource: string;\r\n  label: string;\r\n  category: string;\r\n  description: string;\r\n  menus: string[];\r\n}\r\n\r\n/**\r\n * All available resources in the system\r\n * Each resource maps to backend API endpoints and controls menu visibility\r\n */\r\nexport const AVAILABLE_RESOURCES: ResourceDefinition[] = [\r\n  // Core\r\n  { \r\n    resource: 'dashboard', \r\n    label: 'Dashboard',\r\n    category: 'Core',\r\n    description: 'Main dashboard view',\r\n    menus: ['dashboard']\r\n  },\r\n  \r\n  // Sales (Shared API - one permission controls multiple menus)\r\n  { \r\n    resource: 'sales_record', \r\n    label: 'Sales Records',\r\n    category: 'Sales',\r\n    description: 'Controls: SalesRecords menu, Create Sales, Sales List',\r\n    menus: ['SalesRecords', 'create-sales-record', 'sales-records-list']\r\n  },\r\n  \r\n  // Customers & Vendors (Separate APIs)\r\n  { \r\n    resource: 'customer', \r\n    label: 'Customers',\r\n    category: 'Sales',\r\n    description: 'Customer management',\r\n    menus: ['add-customer']\r\n  },\r\n  { \r\n    resource: 'vendor', \r\n    label: 'Vendors',\r\n    category: 'Sales',\r\n    description: 'Vendor management',\r\n    menus: ['vendor']\r\n  },\r\n  \r\n  // Products (Separate APIs for each)\r\n  { \r\n    resource: 'product', \r\n    label: 'Products',\r\n    category: 'Inventory',\r\n    description: 'Product management',\r\n    menus: ['add-product']\r\n  },\r\n  { \r\n    resource: 'unit', \r\n    label: 'Units',\r\n    category: 'Inventory',\r\n    description: 'Unit management',\r\n    menus: ['unit']\r\n  },\r\n  { \r\n    resource: 'category', \r\n    label: 'Categories',\r\n    category: 'Inventory',\r\n    description: 'Category management',\r\n    menus: ['category']\r\n  },\r\n  { \r\n    resource: 'variant', \r\n    label: 'Variants',\r\n    category: 'Inventory',\r\n    description: 'Variant management',\r\n    menus: ['variant']\r\n  },\r\n  { \r\n    resource: 'warehouse', \r\n    label: 'Warehouses',\r\n    category: 'Inventory',\r\n    description: 'Warehouse management',\r\n    menus: ['warehouse']\r\n  },\r\n  { \r\n    resource: 'rack', \r\n    label: 'Racks',\r\n    category: 'Inventory',\r\n    description: 'Rack management',\r\n    menus: ['rack']\r\n  },\r\n  \r\n  // Stock Management (Mixed - some share APIs, some don't)\r\n  { \r\n    resource: 'stock_audit', \r\n    label: 'Stock In / Org Stock',\r\n    category: 'Stock',\r\n    description: 'Controls: Stock In, Organisation Stock Available',\r\n    menus: ['stock-in', 'organisation-stock-available']\r\n  },\r\n  { \r\n    resource: 'stock_out', \r\n    label: 'Stock Out',\r\n    category: 'Stock',\r\n    description: 'Stock out management',\r\n    menus: ['stock-out']\r\n  },\r\n  { \r\n    resource: 'branch_stock', \r\n    label: 'Branch Stock',\r\n    category: 'Stock',\r\n    description: 'Controls: Branch Stock, Branch Stock Available',\r\n    menus: ['branch-stock', 'branch-stock-available']\r\n  },\r\n  { \r\n    resource: 'storage_stock', \r\n    label: 'Storage Stock',\r\n    category: 'Stock',\r\n    description: 'Storage stock list',\r\n    menus: ['storage-stock-list']\r\n  },\r\n  \r\n  // Financial\r\n  { \r\n    resource: 'payment_history', \r\n    label: 'Payment History',\r\n    category: 'Financial',\r\n    description: 'Payment history management',\r\n    menus: ['payment-history']\r\n  },\r\n  { \r\n    resource: 'expense', \r\n    label: 'Expenses',\r\n    category: 'Financial',\r\n    description: 'Expense management',\r\n    menus: ['expenses']\r\n  },\r\n  \r\n  // Reports\r\n  { \r\n    resource: 'reports', \r\n    label: 'Reports',\r\n    category: 'Reports',\r\n    description: 'All reports',\r\n    menus: ['reports', 'report']\r\n  },\r\n  \r\n  // Advanced\r\n  { \r\n    resource: 'custom_entities', \r\n    label: 'Custom Forms',\r\n    category: 'Advanced',\r\n    description: 'Custom entity management',\r\n    menus: ['custom_forms']\r\n  },\r\n  \r\n  // Settings\r\n  { \r\n    resource: 'settings', \r\n    label: 'Settings',\r\n    category: 'Settings',\r\n    description: 'Application settings',\r\n    menus: ['settings']\r\n  },\r\n  \r\n  // Master Settings\r\n  { \r\n    resource: 'organisation', \r\n    label: 'Organisation',\r\n    category: 'Master Settings',\r\n    description: 'Organisation management',\r\n    menus: ['organisation']\r\n  },\r\n  { \r\n    resource: 'branch', \r\n    label: 'Branches',\r\n    category: 'Master Settings',\r\n    description: 'Branch management',\r\n    menus: ['braches']\r\n  },\r\n  { \r\n    resource: 'billing_user', \r\n    label: 'Users',\r\n    category: 'Master Settings',\r\n    description: 'User management',\r\n    menus: ['users']\r\n  },\r\n  { \r\n    resource: 'role', \r\n    label: 'Roles',\r\n    category: 'Master Settings',\r\n    description: 'Role management',\r\n    menus: ['roles']\r\n  },\r\n  { \r\n    resource: 'permission', \r\n    label: 'Permissions',\r\n    category: 'Master Settings',\r\n    description: 'Permission management',\r\n    menus: ['permissions']\r\n  },\r\n];\r\n\r\n/**\r\n * Group resources by category with memoization\r\n */\r\nlet groupedResourcesCache: Record<string, ResourceDefinition[]> | null = null;\r\n\r\nexport const getGroupedResources = (): Record<string, ResourceDefinition[]> => {\r\n  if (groupedResourcesCache) {\r\n    return groupedResourcesCache;\r\n  }\r\n\r\n  groupedResourcesCache = AVAILABLE_RESOURCES.reduce((acc, resource) => {\r\n    if (!acc[resource.category]) {\r\n      acc[resource.category] = [];\r\n    }\r\n    acc[resource.category].push(resource);\r\n    return acc;\r\n  }, {} as Record<string, ResourceDefinition[]>);\r\n\r\n  return groupedResourcesCache;\r\n};\r\n\r\n/**\r\n * Get all categories with memoization\r\n */\r\nlet categoriesCache: string[] | null = null;\r\n\r\nexport const getCategories = (): string[] => {\r\n  if (categoriesCache) {\r\n    return categoriesCache;\r\n  }\r\n\r\n  categoriesCache = Array.from(new Set(AVAILABLE_RESOURCES.map(r => r.category)));\r\n  return categoriesCache;\r\n};\r\n\r\n/**\r\n * Get resource by name with memoization\r\n */\r\nconst resourceLookupCache = new Map<string, ResourceDefinition | undefined>();\r\n\r\nexport const getResourceByName = (resourceName: string): ResourceDefinition | undefined => {\r\n  if (resourceLookupCache.has(resourceName)) {\r\n    return resourceLookupCache.get(resourceName);\r\n  }\r\n\r\n  const resource = AVAILABLE_RESOURCES.find(r => r.resource === resourceName);\r\n  resourceLookupCache.set(resourceName, resource);\r\n  return resource;\r\n};\r\n\r\n","import React, { useState, useEffect, useMemo } from 'react';\r\nimport {\r\n  Form,\r\n  Input,\r\n  Select,\r\n  Checkbox,\r\n  Card,\r\n  Row,\r\n  Col,\r\n  Space,\r\n  Typography,\r\n  Divider,\r\n  Tag,\r\n} from 'antd';\r\nimport { AVAILABLE_RESOURCES, getGroupedResources } from '../../helpers/resourceConstants';\r\nimport { apiSlice } from '../../services/redux/api/apiSlice';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { TextArea } = Input;\r\n\r\nexport interface PermissionState {\r\n  [resource: string]: {\r\n    can_create: boolean;\r\n    can_read: boolean;\r\n    can_update: boolean;\r\n    can_delete: boolean;\r\n  };\r\n}\r\n\r\ninterface RolePermissionFormProps {\r\n  form: any;\r\n  initialPermissions?: PermissionState;\r\n  onPermissionsChange?: (permissions: PermissionState) => void;\r\n}\r\n\r\n/**\r\n * Role Permission Form Component\r\n * \r\n * This component provides a form for creating/editing roles with the new permission system.\r\n * It uses CRUD checkboxes for each resource instead of menu checkboxes.\r\n */\r\nconst RolePermissionForm: React.FC<RolePermissionFormProps> = ({\r\n  form,\r\n  initialPermissions = {},\r\n  onPermissionsChange\r\n}) => {\r\n  const [permissions, setPermissions] = useState<PermissionState>(initialPermissions);\r\n  const groupedResources = getGroupedResources();\r\n  const { data: roleTypesData, isLoading: roleTypesLoading } = apiSlice.useGetRoleTypeQuery({});\r\n  const roleTypeOptions = useMemo(\r\n    () => (\r\n      (roleTypesData as any)?.result?.map((rt: any) => ({\r\n        label: rt.name,\r\n        value: rt.name,\r\n      })) || []\r\n    ),\r\n    [roleTypesData]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(initialPermissions).length > 0) {\r\n      setPermissions(initialPermissions);\r\n    }\r\n  }, [initialPermissions]);\r\n\r\n  useEffect(() => {\r\n    if (onPermissionsChange) {\r\n      onPermissionsChange(permissions);\r\n    }\r\n  }, [permissions, onPermissionsChange]);\r\n\r\n  const handleCheckboxChange = (\r\n    resource: string,\r\n    action: 'can_create' | 'can_read' | 'can_update' | 'can_delete',\r\n    checked: boolean\r\n  ) => {\r\n    setPermissions(prev => ({\r\n      ...prev,\r\n      [resource]: {\r\n        ...(prev[resource] || {\r\n          can_create: false,\r\n          can_read: false,\r\n          can_update: false,\r\n          can_delete: false\r\n        }),\r\n        [action]: checked\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleSelectAllForAction = (\r\n    action: 'can_create' | 'can_read' | 'can_update' | 'can_delete',\r\n    checked: boolean\r\n  ) => {\r\n    const updated = { ...permissions };\r\n    AVAILABLE_RESOURCES.forEach(res => {\r\n      if (!updated[res.resource]) {\r\n        updated[res.resource] = {\r\n          can_create: false,\r\n          can_read: false,\r\n          can_update: false,\r\n          can_delete: false\r\n        };\r\n      }\r\n      updated[res.resource][action] = checked;\r\n    });\r\n    setPermissions(updated);\r\n  };\r\n\r\n  const handleSelectAllForResource = (resource: string, checked: boolean) => {\r\n    setPermissions(prev => ({\r\n      ...prev,\r\n      [resource]: {\r\n        can_create: checked,\r\n        can_read: checked,\r\n        can_update: checked,\r\n        can_delete: checked\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Get permissions array for submission\r\n  const getPermissionsArray = () => {\r\n    return Object.entries(permissions)\r\n      .filter(([_, perms]) => \r\n        perms.can_create || perms.can_read || perms.can_update || perms.can_delete\r\n      )\r\n      .map(([resource, perms]) => ({\r\n        resource,\r\n        can_create: perms.can_create || false,\r\n        can_read: perms.can_read || false,\r\n        can_update: perms.can_update || false,\r\n        can_delete: perms.can_delete || false\r\n      }));\r\n  };\r\n\r\n  // Expose getPermissionsArray to parent via form\r\n  useEffect(() => {\r\n    if (form) {\r\n      (form as any).getPermissionsArray = getPermissionsArray;\r\n    }\r\n  }, [permissions, form]);\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <Form.Item\r\n        label=\"Role Name\"\r\n        name=\"name\"\r\n        rules={[{ required: true, message: 'Please enter role name!' }]}\r\n      >\r\n        <Input placeholder=\"Enter role name\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Role Type\"\r\n        name=\"roles_type\"\r\n        rules={[{ required: true, message: 'Please select role type!' }]}\r\n      >\r\n        <Select\r\n          placeholder=\"Select role type\"\r\n          allowClear\r\n          showSearch\r\n          optionFilterProp=\"children\"\r\n          loading={roleTypesLoading}\r\n        >\r\n          {roleTypeOptions.map((opt: { label: string; value: string }) => (\r\n            <Select.Option key={opt.value} value={opt.value}>\r\n              {opt.label}\r\n            </Select.Option>\r\n          ))}\r\n        </Select>\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Description\" name=\"description\">\r\n        <TextArea rows={3} placeholder=\"Enter role description (optional)\" />\r\n      </Form.Item>\r\n\r\n      <Divider orientation=\"left\">\r\n        <Space>\r\n          <Title level={5} style={{ margin: 0 }}>Permissions (CRUD)</Title>\r\n          <Tag color=\"blue\">Select permissions for each resource</Tag>\r\n        </Space>\r\n      </Divider>\r\n\r\n      {/* Select All Row */}\r\n      <Card size=\"small\" style={{ marginBottom: 16, background: '#f0f2f5' }}>\r\n        <Row gutter={16} align=\"middle\">\r\n          <Col span={8}>\r\n            <Text strong>Select All:</Text>\r\n          </Col>\r\n          <Col span={4} style={{ textAlign: 'center' }}>\r\n            <Checkbox\r\n              onChange={(e) => handleSelectAllForAction('can_create', e.target.checked)}\r\n            >\r\n              <Text strong>Create</Text>\r\n            </Checkbox>\r\n          </Col>\r\n          <Col span={4} style={{ textAlign: 'center' }}>\r\n            <Checkbox\r\n              onChange={(e) => handleSelectAllForAction('can_read', e.target.checked)}\r\n            >\r\n              <Text strong>Read</Text>\r\n            </Checkbox>\r\n          </Col>\r\n          <Col span={4} style={{ textAlign: 'center' }}>\r\n            <Checkbox\r\n              onChange={(e) => handleSelectAllForAction('can_update', e.target.checked)}\r\n            >\r\n              <Text strong>Update</Text>\r\n            </Checkbox>\r\n          </Col>\r\n          <Col span={4} style={{ textAlign: 'center' }}>\r\n            <Checkbox\r\n              onChange={(e) => handleSelectAllForAction('can_delete', e.target.checked)}\r\n            >\r\n              <Text strong>Delete</Text>\r\n            </Checkbox>\r\n          </Col>\r\n        </Row>\r\n      </Card>\r\n\r\n      {/* Resource Permissions by Category */}\r\n      <div style={{ maxHeight: '500px', overflowY: 'auto', paddingRight: 8 }}>\r\n        {Object.entries(groupedResources).map(([category, resources]) => (\r\n          <Card\r\n            key={category}\r\n            title={<Text strong>{category}</Text>}\r\n            size=\"small\"\r\n            style={{ marginBottom: 16 }}\r\n          >\r\n            {resources.map(res => {\r\n              const perms = permissions[res.resource] || {\r\n                can_create: false,\r\n                can_read: false,\r\n                can_update: false,\r\n                can_delete: false\r\n              };\r\n              \r\n              const allChecked = perms.can_create && perms.can_read && \r\n                                perms.can_update && perms.can_delete;\r\n              \r\n              return (\r\n                <Row \r\n                  key={res.resource} \r\n                  gutter={16} \r\n                  align=\"middle\"\r\n                  style={{ \r\n                    marginBottom: 12, \r\n                    padding: 8,\r\n                    borderBottom: '1px solid #f0f0f0'\r\n                  }}\r\n                >\r\n                  <Col span={8}>\r\n                    <Space direction=\"vertical\" size={0}>\r\n                      <Space>\r\n                        <Text strong>{res.label}</Text>\r\n                        <Checkbox\r\n                          checked={allChecked}\r\n                          onChange={(e) => handleSelectAllForResource(res.resource, e.target.checked)}\r\n                          style={{ fontSize: 11 }}\r\n                        >\r\n                          <Text type=\"secondary\" style={{ fontSize: 11 }}>All</Text>\r\n                        </Checkbox>\r\n                      </Space>\r\n                      <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n                        {res.description}\r\n                      </Text>\r\n                    </Space>\r\n                  </Col>\r\n                  <Col span={4} style={{ textAlign: 'center' }}>\r\n                    <Checkbox\r\n                      checked={perms.can_create}\r\n                      onChange={(e) => \r\n                        handleCheckboxChange(res.resource, 'can_create', e.target.checked)\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col span={4} style={{ textAlign: 'center' }}>\r\n                    <Checkbox\r\n                      checked={perms.can_read}\r\n                      onChange={(e) => \r\n                        handleCheckboxChange(res.resource, 'can_read', e.target.checked)\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col span={4} style={{ textAlign: 'center' }}>\r\n                    <Checkbox\r\n                      checked={perms.can_update}\r\n                      onChange={(e) => \r\n                        handleCheckboxChange(res.resource, 'can_update', e.target.checked)\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col span={4} style={{ textAlign: 'center' }}>\r\n                    <Checkbox\r\n                      checked={perms.can_delete}\r\n                      onChange={(e) => \r\n                        handleCheckboxChange(res.resource, 'can_delete', e.target.checked)\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              );\r\n            })}\r\n          </Card>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Hidden field to store permissions - not actually used but satisfies form validation */}\r\n      <Form.Item name=\"permissions\" hidden>\r\n        <Input type=\"hidden\" />\r\n      </Form.Item>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RolePermissionForm;\r\n\r\n","import React from 'react';\r\n\r\n\r\nexport const rolesColumns = [\r\n  {\r\n    title: 'Role Name',\r\n    dataIndex: 'name',\r\n    key: 'name',\r\n    render: (text: string) => <strong>{text}</strong>,\r\n  },\r\n  {\r\n    title: 'Role Type',\r\n    dataIndex: 'roles_type',\r\n    key: 'roles_type',\r\n    render: (text: string) => (\r\n      <span style={{ \r\n        padding: '4px 8px', \r\n        borderRadius: '4px', \r\n        fontSize: '12px',\r\n        fontWeight: '500',\r\n        backgroundColor: text === 'Admin' ? '#f6ffed' : '#fff7e6',\r\n        color: text === 'Admin' ? '#52c41a' : '#fa8c16',\r\n        border: `1px solid ${text === 'Admin' ? '#b7eb8f' : '#ffd591'}`\r\n      }}>\r\n        {text}\r\n      </span>\r\n    ),\r\n  },\r\n  {\r\n    title: 'Description',\r\n    dataIndex: 'description',\r\n    key: 'description',\r\n    ellipsis: true,\r\n  },\r\n];\r\n","import React, { useState, useEffect, memo } from 'react';\r\nimport { Form, message, Modal } from 'antd';\r\nimport { EditOutlined, DeleteOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport GlobalTable from '../../components/antd/GlobalTable';\r\nimport GlobalDrawer from '../../components/antd/GlobalDrawer';\r\nimport RolePermissionForm, { PermissionState } from './RolePermissionForm';\r\nimport { rolesColumns } from './columns';\r\nimport requestBackServer from '../../services/api';\r\n\r\ninterface Role {\r\n  _id: string;\r\n  name: string;\r\n  description?: string;\r\n  roles_type: string;\r\n  allowedMenuKeys?: string[];\r\n}\r\n\r\n/**\r\n * Roles CRUD Page - Uses new Permission System\r\n * \r\n * This page handles role creation and editing with the new permission-based approach.\r\n * It sends a `permissions` array instead of `allowedMenuKeys` to the backend.\r\n */\r\nconst RolesCrudNew: React.FC = () => {\r\n  const [form] = Form.useForm();\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [drawerVisible, setDrawerVisible] = useState(false);\r\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\r\n  const [permissions, setPermissions] = useState<PermissionState>({});\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n    total: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, [pagination.current, pagination.pageSize]);\r\n\r\n  const fetchRoles = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await requestBackServer({\r\n        method: 'GET',\r\n        endpoint: '/roles',\r\n        data: {\r\n          pageNumber: pagination.current,\r\n          pageLimit: pagination.pageSize,\r\n        },\r\n      });\r\n\r\n      if (response.statusCode === 200) {\r\n        setRoles(response.result || []);\r\n        const paginationData = response.pagination as any;\r\n        setPagination(prev => ({\r\n          ...prev,\r\n          total: paginationData?.totalCount || paginationData?.total || response.result?.length || 0,\r\n        }));\r\n      } else {\r\n        message.error(`Failed to fetch roles: ${response.message || 'Unknown error'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching roles:', error);\r\n      message.error('Error fetching roles');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    setEditingRole(null);\r\n    setPermissions({});\r\n    form.resetFields();\r\n    setDrawerVisible(true);\r\n  };\r\n\r\n  const handleEdit = async (record: Role) => {\r\n    setEditingRole(record);\r\n    form.setFieldsValue({\r\n      name: record.name,\r\n      description: record.description,\r\n      roles_type: record.roles_type,\r\n    });\r\n\r\n    // Fetch permissions for this role\r\n    try {\r\n      const response = await requestBackServer({\r\n        method: 'GET',\r\n        endpoint: `/permissions/role/${record._id}`,\r\n      });\r\n\r\n      if (response.statusCode === 200) {\r\n        const resourcesArray = response.result?.resources || [];\r\n        \r\n        // Convert to PermissionState format\r\n        const permsData: PermissionState = {};\r\n        resourcesArray.forEach((item: any) => {\r\n          permsData[item.resource] = {\r\n            can_create: item.can_create,\r\n            can_read: item.can_read,\r\n            can_update: item.can_update,\r\n            can_delete: item.can_delete,\r\n          };\r\n        });\r\n        \r\n        setPermissions(permsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching role permissions:', error);\r\n      message.warning('Could not load permissions for this role');\r\n    }\r\n\r\n    setDrawerVisible(true);\r\n  };\r\n\r\n  const handleDelete = async (record: Role) => {\r\n    Modal.confirm({\r\n      title: 'Delete Role',\r\n      content: `Are you sure you want to delete role \"${record.name}\"?`,\r\n      okText: 'Yes',\r\n      okType: 'danger',\r\n      cancelText: 'No',\r\n      onOk: async () => {\r\n        try {\r\n          const response = await requestBackServer({\r\n            method: 'DELETE',\r\n            endpoint: `/roles/${record._id}`,\r\n          });\r\n\r\n          if (response.statusCode === 200) {\r\n            message.success('Role deleted successfully');\r\n            fetchRoles();\r\n          } else {\r\n            message.error(`Failed to delete role: ${response.message || 'Unknown error'}`);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error deleting role:', error);\r\n          message.error('Error deleting role');\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      // Validate form fields\r\n      const values = await form.validateFields();\r\n      \r\n      // Build permissions array from state\r\n      const permissionsArray = Object.entries(permissions)\r\n        .filter(([_, perms]) => \r\n          perms.can_create || perms.can_read || perms.can_update || perms.can_delete\r\n        )\r\n        .map(([resource, perms]) => ({\r\n          resource,\r\n          can_create: perms.can_create || false,\r\n          can_read: perms.can_read || false,\r\n          can_update: perms.can_update || false,\r\n          can_delete: perms.can_delete || false,\r\n        }));\r\n\r\n      // Validate at least one permission is selected\r\n      if (permissionsArray.length === 0) {\r\n        message.warning('Please select at least one permission');\r\n        return;\r\n      }\r\n\r\n      // Prepare payload with NEW format (permissions array)\r\n      const payload = {\r\n        name: values.name,\r\n        description: values.description,\r\n        roles_type: values.roles_type,\r\n        permissions: permissionsArray, //  NEW: Send permissions array\r\n      };\r\n\r\n      setSubmitting(true);\r\n\r\n      if (editingRole) {\r\n        // Update existing role\r\n        const response = await requestBackServer({\r\n          method: 'PATCH',\r\n          endpoint: `/roles/${editingRole._id}`,\r\n          data: payload,\r\n        });\r\n\r\n        if (response.statusCode === 200) {\r\n          message.success('Role updated successfully');\r\n          setDrawerVisible(false);\r\n          form.resetFields();\r\n          setPermissions({});\r\n          fetchRoles();\r\n        } else {\r\n          message.error(`Failed to update role: ${response.message || 'Unknown error'}`);\r\n        }\r\n      } else {\r\n        // Create new role\r\n        const response = await requestBackServer({\r\n          method: 'PUT',\r\n          endpoint: '/roles',\r\n          data: payload,\r\n        });\r\n\r\n        if (response.statusCode === 201 || response.statusCode === 200) {\r\n          message.success('Role created successfully');\r\n          setDrawerVisible(false);\r\n          form.resetFields();\r\n          setPermissions({});\r\n          fetchRoles();\r\n        } else {\r\n          message.error(`Failed to create role: ${response.message || 'Unknown error'}`);\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error submitting role:', error);\r\n      if (error.errorFields) {\r\n        message.error('Please fill in all required fields');\r\n      } else {\r\n        message.error('Error submitting role');\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setDrawerVisible(false);\r\n    form.resetFields();\r\n    setPermissions({});\r\n    setEditingRole(null);\r\n  };\r\n\r\n  const handlePaginationChange = (page: number, pageSize: number) => {\r\n    setPagination(prev => ({\r\n      ...prev,\r\n      current: page,\r\n      pageSize,\r\n    }));\r\n  };\r\n\r\n  // Add actions column\r\n  const columns: any = [\r\n    ...rolesColumns,\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      render: (_: any, record: any) => (\r\n        <div style={{ display: 'flex', gap: '16px', justifyContent: 'center' }}>\r\n          <EditOutlined\r\n            style={{ cursor: 'pointer', color: '#1890ff', fontSize: '16px' }}\r\n            onClick={() => handleEdit(record)}\r\n          />\r\n          <DeleteOutlined\r\n            style={{ cursor: 'pointer', color: '#ff4d4f', fontSize: '16px' }}\r\n            onClick={() => handleDelete(record)}\r\n          />\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ marginBottom: 16, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <h1 style={{ margin: 0 }}>Roles</h1>\r\n        <button\r\n          onClick={handleAdd}\r\n          style={{\r\n            padding: '8px 16px',\r\n            background: '#1890ff',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n          }}\r\n        >\r\n          <PlusOutlined /> Add Role\r\n        </button>\r\n      </div>\r\n\r\n      <GlobalTable\r\n        columns={columns}\r\n        data={roles}\r\n        loading={loading}\r\n        totalCount={pagination.total}\r\n        pageLimit={pagination.pageSize}\r\n        onPaginationChange={handlePaginationChange}\r\n        rowKeyField=\"_id\"\r\n      />\r\n\r\n      <GlobalDrawer\r\n        title={editingRole ? 'Edit Role' : 'Create Role'}\r\n        open={drawerVisible}\r\n        onClose={handleCancel}\r\n        width={900}\r\n      >\r\n        <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\r\n          <RolePermissionForm\r\n            form={form}\r\n            initialPermissions={permissions}\r\n            onPermissionsChange={setPermissions}\r\n          />\r\n          \r\n          <div style={{ marginTop: 24, display: 'flex', justifyContent: 'flex-end', gap: 12 }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              style={{\r\n                padding: '8px 24px',\r\n                background: '#fff',\r\n                color: '#000',\r\n                border: '1px solid #d9d9d9',\r\n                borderRadius: '4px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              style={{\r\n                padding: '8px 24px',\r\n                background: submitting ? '#d9d9d9' : '#1890ff',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: submitting ? 'not-allowed' : 'pointer',\r\n              }}\r\n            >\r\n              {submitting ? 'Submitting...' : 'Submit'}\r\n            </button>\r\n          </div>\r\n        </Form>\r\n      </GlobalDrawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(RolesCrudNew);\r\n\r\n","import React, { memo } from 'react';\r\nimport RolesCrudNew from './RolesCrudNew';\r\n\r\n/**\r\n * Roles CRUD Page - Main Entry Point\r\n * \r\n * Updated to use new permission system that sends `permissions` array\r\n * instead of `allowedMenuKeys` to the backend.\r\n */\r\nconst RolesCrud: React.FC = () => {\r\n  return <RolesCrudNew />;\r\n};\r\n\r\nexport default memo(RolesCrud);\r\n"],"names":["API_ERROR_CODES","constructor","baseURL","api","isRefreshing","refreshSubscribers","hasShownSessionExpiredMessage","this","axios","create","timeout","headers","interceptors","request","use","config","token","getAuthToken","concat","method","includes","toLowerCase","csrfToken","getCSRFToken","response","async","originalRequest","error","status","_retry","_error$response$data","_error$response$data2","errorMessage","data","exception","message","content","duration","Promise","reject","resolve","push","newAccessToken","refreshAccessToken","forEach","callback","refreshError","console","clearAuthData","window","location","href","refreshToken","getRefreshToken","warn","_response$data","post","defaults","statusCode","accessToken","newRefreshToken","result","setAccessToken","setRefreshToken","send","url","endpoint","signal","handleResponse","isAxiosError","name","pagination","handleError","_error$response$data3","_API_ERROR_CODES$SERV","backendUrl","isElectron","checkIfElectron","initializeBackendUrl","electronAPI","getBackendUrl","process","getApiUrl","path","arguments","length","undefined","baseUrl","cleanPath","startsWith","isElectronApp","waitForBackend","startTime","Date","now","fetch","ok","setTimeout","getAppVersion","getPlatform","platform","apiService","service","electronBackendService","APIService","initializeApiService","_extends","Object","assign","bind","target","i","source","key","prototype","hasOwnProperty","call","apply","PlusOutlined","props","ref","React","AntdIcon","icon","PlusOutlinedSvg","AVAILABLE_RESOURCES","resource","label","category","description","menus","groupedResourcesCache","Map","Title","Text","Typography","TextArea","Input","_ref","form","initialPermissions","onPermissionsChange","permissions","setPermissions","useState","groupedResources","reduce","acc","roleTypesData","isLoading","roleTypesLoading","apiSlice","useGetRoleTypeQuery","roleTypeOptions","useMemo","_result","map","rt","value","useEffect","keys","handleCheckboxChange","action","checked","prev","_objectSpread","can_create","can_read","can_update","can_delete","handleSelectAllForAction","updated","res","getPermissionsArray","entries","filter","_ref2","_","perms","_ref3","_jsxs","style","width","children","_jsx","Form","Item","rules","required","placeholder","Select","allowClear","showSearch","optionFilterProp","loading","opt","Option","rows","Divider","orientation","Space","level","margin","Tag","color","Card","size","marginBottom","background","Row","gutter","align","Col","span","strong","textAlign","Checkbox","onChange","e","maxHeight","overflowY","paddingRight","_ref4","resources","title","allChecked","padding","borderBottom","direction","handleSelectAllForResource","fontSize","type","hidden","rolesColumns","dataIndex","render","text","borderRadius","fontWeight","backgroundColor","border","ellipsis","RolesCrudNew","useForm","roles","setRoles","setLoading","drawerVisible","setDrawerVisible","editingRole","setEditingRole","submitting","setSubmitting","setPagination","current","pageSize","total","fetchRoles","requestBackServer","pageNumber","pageLimit","paginationData","_response$result","totalCount","handleCancel","resetFields","columns","record","display","gap","justifyContent","EditOutlined","cursor","onClick","setFieldsValue","roles_type","_id","_response$result2","resourcesArray","permsData","item","warning","handleEdit","DeleteOutlined","Modal","confirm","okText","okType","cancelText","onOk","success","handleDelete","alignItems","handleAdd","GlobalTable","onPaginationChange","handlePaginationChange","page","rowKeyField","GlobalDrawer","open","onClose","layout","onFinish","values","validateFields","permissionsArray","payload","errorFields","RolePermissionForm","marginTop","disabled","memo","RolesCrud"],"sourceRoot":""}