"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[8090],{48090:(n,e,t)=>{t.d(e,{downloadAsPDF:()=>d,printAsPDF:()=>a});var o=t(16569),i=t(7828),r=t(65239),l=t.n(r);const a=async function(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bill";try{var i;o.Ay.loading("Preparing ".concat("bill"===t?"Bill":"Invoice"," for printing..."),0);const r=document.createElement("iframe");r.style.position="absolute",r.style.width="0",r.style.height="0",r.style.border="none",r.style.visibility="hidden",document.body.appendChild(r);const l=r.contentDocument||(null===(i=r.contentWindow)||void 0===i?void 0:i.document);l&&(l.open(),l.write('\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <meta charset="UTF-8">\n            <title>'.concat(e,"</title>\n            <style>\n              * {\n                margin: 0;\n                padding: 0;\n                box-sizing: border-box;\n              }\n              body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n              }\n              @media print {\n                @page {\n                  size: A4;\n                  margin: 0;\n                }\n                body {\n                  margin: 0;\n                  padding: 0;\n                }\n              }\n            </style>\n          </head>\n          <body>\n            ").concat(n,"\n          </body>\n        </html>\n      ")),l.close(),o.Ay.destroy(),setTimeout((()=>{try{var n,e;null===(n=r.contentWindow)||void 0===n||n.focus(),null===(e=r.contentWindow)||void 0===e||e.print(),o.Ay.success("".concat("bill"===t?"Bill":"Invoice"," ready to print"))}catch(i){console.error("Error triggering print:",i),o.Ay.error("Failed to open print dialog")}setTimeout((()=>{document.body.contains(r)&&document.body.removeChild(r)}),1e3)}),500))}catch(r){console.error("Error preparing print:",r),o.Ay.destroy(),o.Ay.error("Failed to prepare print. Please try again.")}},d=async function(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bill";try{o.Ay.loading("Generating ".concat("bill"===t?"Bill":"Invoice"," PDF..."),0);const r=document.createElement("div");r.style.position="absolute",r.style.left="-9999px",r.style.top="0",r.style.width="190mm",r.style.padding="0",r.style.backgroundColor="white",r.innerHTML=n,document.body.appendChild(r),await new Promise((n=>setTimeout(n,500)));const a=await l()(r,{useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1,width:r.scrollWidth,height:r.scrollHeight});document.body.removeChild(r);const d=210,s=297,c=a.height*d/a.width,y=new i.Ay({orientation:"portrait",unit:"mm",format:"a4"}),g=a.toDataURL("image/png");if(c<=1.5*s)if(c>s){const n=d*(s/c),e=s,t=(d-n)/2;y.addImage(g,"PNG",t,0,n,e)}else y.addImage(g,"PNG",0,0,d,c);else{let n=c,e=0;for(;n>0;){e>0&&y.addPage();const t=-e*s;y.addImage(g,"PNG",0,t,d,c),n-=s,e++}}y.save("".concat(e,".pdf")),o.Ay.destroy(),o.Ay.success("".concat("bill"===t?"Bill":"Invoice"," PDF downloaded successfully!"))}catch(r){console.error("Error generating PDF:",r),o.Ay.destroy(),o.Ay.error("Failed to generate PDF. Please try again.")}}}}]);
//# sourceMappingURL=8090.e965c2f5.chunk.js.map