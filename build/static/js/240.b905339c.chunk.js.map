{"version":3,"file":"static/js/240.b905339c.chunk.js","mappings":"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","sources":["pages/ProductStocks/List.tsx"],"sourcesContent":["import React, { useEffect, useState, useMemo, useCallback, memo } from \"react\";\r\nimport { useApiActions } from \"../../services/api/useApiActions\";\r\nimport { useDynamicSelector } from \"../../services/redux\";\r\nimport GlobalTable from \"../../components/antd/GlobalTable\";\r\nimport { Input, Row, Space, Tag, Typography } from \"antd\";\r\nconst { Text } = Typography;\r\nconst StockAvailable = () => {\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n  });\r\n  const { StockAvailable } = useApiActions();\r\n  const { items: StockItems, loading: stock_get_loading } = useDynamicSelector(\r\n    StockAvailable.getIdentifier(\"GetProductStockCount\")\r\n  );\r\n\r\n  const handleSearch = useCallback((value: string) => {\r\n    setSearchText(value);\r\n    setPagination({ ...pagination, current: 1 }); // Reset to first page on search\r\n    if(value.length > 2 || value.length === 0)\r\n    StockAvailable(\"GetProductStockCount\", { \r\n      searchString: value,\r\n      pageNumber: 1,\r\n      pageLimit: pagination.pageSize,\r\n    });\r\n  }, [StockAvailable, pagination]);\r\n\r\n  const handlePaginationChange = (pageNumber: number, pageLimit: number) => {\r\n    setPagination({ current: pageNumber, pageSize: pageLimit });\r\n    StockAvailable(\"GetProductStockCount\", {\r\n      searchString: searchText,\r\n      pageNumber,\r\n      pageLimit,\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Product\",\r\n      key: \"product\",\r\n      render: (_:any, record:any) => (\r\n        <Space direction=\"vertical\" size={2}>\r\n          <Text strong>{record.productItem.name}</Text>\r\n          <Text type=\"secondary\">SKU: {record.productItem.sku}</Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Category\",\r\n      key: \"category\",\r\n      render: (_:any, record:any) => {\r\n        const category = record.productItem.CategoryItem;\r\n        return (\r\n          <Tag color=\"blue\">\r\n            {category?.category_name || \"N/A\"}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Variant\",\r\n      key: \"variant\",\r\n      render: (_:any, record:any) => {\r\n        const v = record.productItem.VariantItem;\r\n        return (\r\n          <Space direction=\"vertical\" size={0}>\r\n            <Text>{v?.variant_name}</Text>\r\n            <Tag color=\"purple\">{v?.pack_size} {v?.unit} / {v?.pack_type}</Tag>\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Available\",\r\n      key: \"quantity\",\r\n      render: (_:any, record:any) => (\r\n        <Space direction=\"vertical\" size={0}>\r\n          <Text>\r\n            <strong>{record.totalAvailableQuantity}</strong> Pack(s)\r\n          </Text>\r\n          <Text type=\"secondary\">\r\n            + {record.totalAvailableLooseQuantity} Loose\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    StockAvailable(\"GetProductStockCount\", { \r\n      searchString: searchText,\r\n      pageNumber: pagination.current,\r\n      pageLimit: pagination.pageSize,\r\n    });\r\n  }, [StockAvailable]);\r\n\r\n  return (\r\n    <>\r\n      <Row justify=\"space-between\" align=\"middle\" style={{ marginBottom: 16 }}>\r\n        <h1>{\"Product Stocks\"}</h1>\r\n        <div style={{ display: \"flex\", gap: \"16px\" }}>\r\n          <Input\r\n            placeholder={`Search ${\"Products\"}`}\r\n            value={searchText}\r\n            onChange={(e) => handleSearch(e.target.value)}\r\n            style={{ width: 300 }}\r\n          />\r\n        </div>\r\n      </Row>\r\n      <GlobalTable\r\n        columns={[...columns]}\r\n        data={Array.isArray(StockItems?.result) ? StockItems.result : []}\r\n        rowKey=\"_id\"\r\n        loading={stock_get_loading}\r\n        totalCount={StockItems?.pagination?.totalCount || 0}\r\n        pageLimit={StockItems?.pagination?.pageLimit || 10}\r\n        onPaginationChange={handlePaginationChange}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(StockAvailable);\r\n"],"names":["Text","Typography","StockAvailable","_StockItems$paginatio","_StockItems$paginatio2","searchText","setSearchText","useState","pagination","setPagination","current","pageSize","useApiActions","items","StockItems","loading","stock_get_loading","useDynamicSelector","getIdentifier","handleSearch","useCallback","value","_objectSpread","length","searchString","pageNumber","pageLimit","columns","title","key","render","_","record","_jsxs","Space","direction","size","children","_jsx","strong","productItem","name","type","sku","category","CategoryItem","Tag","color","category_name","v","VariantItem","variant_name","pack_size","unit","pack_type","totalAvailableQuantity","totalAvailableLooseQuantity","useEffect","_Fragment","Row","justify","align","style","marginBottom","display","gap","Input","placeholder","concat","onChange","e","target","width","GlobalTable","data","Array","isArray","result","rowKey","totalCount","onPaginationChange","handlePaginationChange","memo"],"sourceRoot":""}