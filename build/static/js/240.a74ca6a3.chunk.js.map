{"version":3,"file":"static/js/240.a74ca6a3.chunk.js","mappings":"gQAIA,MAAM,KAAEA,GAASC,EAAAA,EACXC,EAAiBA,KAAO,IAADC,EAAAC,EAC3B,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,KACtCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,CAC3CG,QAAS,EACTC,SAAU,MAIJC,KAAMC,EAAWC,UAAWC,EAAiB,QAAEC,GAAYC,EAAAA,GAASC,6BAA6B,CACvGC,aAAcd,EAAWe,OAAS,GAA2B,IAAtBf,EAAWe,OAAef,OAAagB,EAC9EC,WAAYd,EAAWE,QACvBa,UAAWf,EAAWG,WAGlBa,GAAaC,EAAAA,EAAAA,UAAQ,IAAMZ,GAAa,CAAC,GAAG,CAACA,IAE7Ca,GAAeC,EAAAA,EAAAA,cAAaC,IAChCtB,EAAcsB,GACdnB,GAAaoB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIrB,GAAU,IAAEE,QAAS,MACrCkB,EAAMR,OAAS,GAAsB,IAAjBQ,EAAMR,SAE3BJ,MAED,CAACR,EAAYQ,IAQVc,EAAU,CACd,CACEC,MAAO,UACPC,IAAK,UACLC,OAAQA,CAACC,EAAOC,KACdC,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CAACC,UAAU,WAAWC,KAAM,EAAEC,SAAA,EAClCC,EAAAA,EAAAA,KAACzC,EAAI,CAAC0C,QAAM,EAAAF,SAAEL,EAAOQ,YAAYC,QACjCR,EAAAA,EAAAA,MAACpC,EAAI,CAAC6C,KAAK,YAAWL,SAAA,CAAC,QAAML,EAAOQ,YAAYG,WAItD,CACEf,MAAO,WACPC,IAAK,WACLC,OAAQA,CAACC,EAAOC,KACd,MAAMY,EAAWZ,EAAOQ,YAAYK,aACpC,OACEP,EAAAA,EAAAA,KAACQ,EAAAA,EAAG,CAACC,MAAM,OAAMV,UACN,OAARO,QAAQ,IAARA,OAAQ,EAARA,EAAUI,gBAAiB,UAKpC,CACEpB,MAAO,UACPC,IAAK,UACLC,OAAQA,CAACC,EAAOC,KACd,MAAMiB,EAAIjB,EAAOQ,YAAYU,YAC7B,OACEjB,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CAACC,UAAU,WAAWC,KAAM,EAAEC,SAAA,EAClCC,EAAAA,EAAAA,KAACzC,EAAI,CAAAwC,SAAG,OAADY,QAAC,IAADA,OAAC,EAADA,EAAGE,gBACVlB,EAAAA,EAAAA,MAACa,EAAAA,EAAG,CAACC,MAAM,SAAQV,SAAA,CAAG,OAADY,QAAC,IAADA,OAAC,EAADA,EAAGG,UAAU,IAAG,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGI,KAAK,MAAK,OAADJ,QAAC,IAADA,OAAC,EAADA,EAAGK,kBAK3D,CACE1B,MAAO,YACPC,IAAK,WACLC,OAAQA,CAACC,EAAOC,KACdC,EAAAA,EAAAA,MAACC,EAAAA,EAAK,CAACC,UAAU,WAAWC,KAAM,EAAEC,SAAA,EAClCJ,EAAAA,EAAAA,MAACpC,EAAI,CAAAwC,SAAA,EACHC,EAAAA,EAAAA,KAAA,UAAAD,SAASL,EAAOuB,yBAAgC,eAElDtB,EAAAA,EAAAA,MAACpC,EAAI,CAAC6C,KAAK,YAAWL,SAAA,CAAC,KAClBL,EAAOwB,4BAA4B,iBAShD,OACEvB,EAAAA,EAAAA,MAAAwB,EAAAA,SAAA,CAAApB,SAAA,EACEJ,EAAAA,EAAAA,MAACyB,EAAAA,EAAG,CAACC,QAAQ,gBAAgBC,MAAM,SAASC,MAAO,CAAEC,aAAc,IAAKzB,SAAA,EACtEC,EAAAA,EAAAA,KAAA,MAAAD,SAAK,oBACLC,EAAAA,EAAAA,KAAA,OAAKuB,MAAO,CAAEE,QAAS,OAAQC,IAAK,QAAS3B,UAC3CC,EAAAA,EAAAA,KAAC2B,EAAAA,EAAK,CACJC,YAAW,UAAAC,OAAY,YACvB1C,MAAOvB,EACPkE,SAAWC,GAAM9C,EAAa8C,EAAEC,OAAO7C,OACvCoC,MAAO,CAAEU,MAAO,aAItBjC,EAAAA,EAAAA,KAACkC,EAAAA,EAAW,CACV7C,QAAS,IAAIA,GACblB,KAAMgE,MAAMC,QAAmB,OAAVrD,QAAU,IAAVA,OAAU,EAAVA,EAAoBsD,QAAWtD,EAAmBsD,OAAS,GAChFC,OAAO,MACPC,QAASjE,EACTkE,YAAuB,OAAVzD,QAAU,IAAVA,GAA8B,QAApBrB,EAAVqB,EAAoBhB,kBAAU,IAAAL,OAApB,EAAXA,EAAiC8E,aAAc,EAC3D1D,WAAsB,OAAVC,QAAU,IAAVA,GAA8B,QAApBpB,EAAVoB,EAAoBhB,kBAAU,IAAAJ,OAApB,EAAXA,EAAiCmB,YAAa,GACzD2D,mBAhFyBC,CAAC7D,EAAoBC,KAClDd,EAAc,CAAEC,QAASY,EAAYX,SAAUY,IAE/CP,WAmFJ,GAAeoE,EAAAA,EAAAA,MAAKlF,E","sources":["pages/ProductStocks/List.tsx"],"sourcesContent":["import React, { useState, useMemo, useCallback, memo } from \"react\";\r\nimport { apiSlice } from \"../../services/redux/api/apiSlice\";\r\nimport GlobalTable from \"../../components/antd/GlobalTable\";\r\nimport { Input, Row, Space, Tag, Typography } from \"antd\";\r\nconst { Text } = Typography;\r\nconst StockAvailable = () => {\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n  });\r\n\r\n  // Use RTK Query for stock data\r\n  const { data: stockData, isLoading: stock_get_loading, refetch } = apiSlice.useGetProductStockCountQuery({\r\n    searchString: searchText.length > 2 || searchText.length === 0 ? searchText : undefined,\r\n    pageNumber: pagination.current,\r\n    pageLimit: pagination.pageSize,\r\n  });\r\n\r\n  const StockItems = useMemo(() => stockData || {}, [stockData]);\r\n\r\n  const handleSearch = useCallback((value: string) => {\r\n    setSearchText(value);\r\n    setPagination({ ...pagination, current: 1 }); // Reset to first page on search\r\n    if(value.length > 2 || value.length === 0) {\r\n      // RTK Query will automatically refetch when parameters change\r\n      refetch();\r\n    }\r\n  }, [pagination, refetch]);\r\n\r\n  const handlePaginationChange = (pageNumber: number, pageLimit: number) => {\r\n    setPagination({ current: pageNumber, pageSize: pageLimit });\r\n    // RTK Query will automatically refetch when parameters change\r\n    refetch();\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Product\",\r\n      key: \"product\",\r\n      render: (_:any, record:any) => (\r\n        <Space direction=\"vertical\" size={2}>\r\n          <Text strong>{record.productItem.name}</Text>\r\n          <Text type=\"secondary\">SKU: {record.productItem.sku}</Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Category\",\r\n      key: \"category\",\r\n      render: (_:any, record:any) => {\r\n        const category = record.productItem.CategoryItem;\r\n        return (\r\n          <Tag color=\"blue\">\r\n            {category?.category_name || \"N/A\"}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Variant\",\r\n      key: \"variant\",\r\n      render: (_:any, record:any) => {\r\n        const v = record.productItem.VariantItem;\r\n        return (\r\n          <Space direction=\"vertical\" size={0}>\r\n            <Text>{v?.variant_name}</Text>\r\n            <Tag color=\"purple\">{v?.pack_size} {v?.unit} / {v?.pack_type}</Tag>\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Available\",\r\n      key: \"quantity\",\r\n      render: (_:any, record:any) => (\r\n        <Space direction=\"vertical\" size={0}>\r\n          <Text>\r\n            <strong>{record.totalAvailableQuantity}</strong> Pack(s)\r\n          </Text>\r\n          <Text type=\"secondary\">\r\n            + {record.totalAvailableLooseQuantity} Loose\r\n          </Text>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // RTK Query automatically fetches on mount and when params change\r\n\r\n  return (\r\n    <>\r\n      <Row justify=\"space-between\" align=\"middle\" style={{ marginBottom: 16 }}>\r\n        <h1>{\"Product Stocks\"}</h1>\r\n        <div style={{ display: \"flex\", gap: \"16px\" }}>\r\n          <Input\r\n            placeholder={`Search ${\"Products\"}`}\r\n            value={searchText}\r\n            onChange={(e) => handleSearch(e.target.value)}\r\n            style={{ width: 300 }}\r\n          />\r\n        </div>\r\n      </Row>\r\n      <GlobalTable\r\n        columns={[...columns]}\r\n        data={Array.isArray((StockItems as any)?.result) ? (StockItems as any).result : []}\r\n        rowKey=\"_id\"\r\n        loading={stock_get_loading}\r\n        totalCount={(StockItems as any)?.pagination?.totalCount || 0}\r\n        pageLimit={(StockItems as any)?.pagination?.pageLimit || 10}\r\n        onPaginationChange={handlePaginationChange}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(StockAvailable);\r\n"],"names":["Text","Typography","StockAvailable","_pagination","_pagination2","searchText","setSearchText","useState","pagination","setPagination","current","pageSize","data","stockData","isLoading","stock_get_loading","refetch","apiSlice","useGetProductStockCountQuery","searchString","length","undefined","pageNumber","pageLimit","StockItems","useMemo","handleSearch","useCallback","value","_objectSpread","columns","title","key","render","_","record","_jsxs","Space","direction","size","children","_jsx","strong","productItem","name","type","sku","category","CategoryItem","Tag","color","category_name","v","VariantItem","variant_name","pack_size","unit","pack_type","totalAvailableQuantity","totalAvailableLooseQuantity","_Fragment","Row","justify","align","style","marginBottom","display","gap","Input","placeholder","concat","onChange","e","target","width","GlobalTable","Array","isArray","result","rowKey","loading","totalCount","onPaginationChange","handlePaginationChange","memo"],"sourceRoot":""}