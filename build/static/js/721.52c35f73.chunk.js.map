{"version":3,"file":"static/js/721.52c35f73.chunk.js","mappings":"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","sources":["pages/StockOut/crud.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { DatePicker, Input, InputNumber, Select } from \"antd\";\r\nimport { GenericCrudPage } from \"../../components/common/GenericCrudPage\";\r\nimport type { StockOut } from \"../../types/entities\";\r\nimport { apiSlice } from '../../services/redux/api/apiSlice';\r\nimport { useInfiniteDropdown } from \"../../hooks/useInfiniteDropdown\";\r\n\r\nconst { Option } = Select;\r\n\r\ntype StockAudit = {\r\n  _id: string;\r\n  batch_no: string;\r\n  category_name: string;\r\n  ProductItem?: {\r\n    name?: string;\r\n    VariantItem?: {\r\n      variant_name?: string;\r\n    };\r\n  };\r\n};\r\n\r\nconst StockOutCrud: React.FC = () => {\r\n  // Use infinite scroll for StockAudit dropdown\r\n  const stockAuditDropdown = useInfiniteDropdown({\r\n    queryHook: apiSlice.useGetStockAuditQuery,\r\n    limit: 20,\r\n  });\r\n\r\n  type StockOutRecord = {\r\n    stock_audit_items?: {\r\n      batch_no?: string;\r\n      ProductItem?: {\r\n        name?: string;\r\n        category?: string;\r\n        VariantItem?: {\r\n          variant_name?: string;\r\n        };\r\n      };\r\n      pack_size?: string;\r\n      pack_type?: string;\r\n    };\r\n    out_reason?: string;\r\n    quantity?: number;\r\n    batch_no?: string;\r\n  };\r\n\r\n  const stockOutConfig = {\r\n    title: \"Stock Out\",\r\n    columns: [\r\n      {\r\n        title: \"Product\",\r\n        key: \"product\",\r\n        render: (_: any, record: StockOutRecord) =>\r\n          [\r\n            record.stock_audit_items?.ProductItem?.name,\r\n            record.stock_audit_items?.ProductItem?.VariantItem?.variant_name,\r\n            record?.stock_audit_items?.batch_no\r\n          ]\r\n            .filter(Boolean)\r\n            .join(\" - \") || \"N/A\",\r\n      },\r\n      {\r\n        title: \"Out Reason\",\r\n        dataIndex: \"out_reason\",\r\n        key: \"out_reason\",\r\n      },\r\n      {\r\n        title: \"Quantity\",\r\n        dataIndex: \"quantity\",\r\n        key: \"quantity\",\r\n      },\r\n      {\r\n        title: \"Pack Size\",\r\n        key: \"pack_size\",\r\n        render: (_: any, record: StockOutRecord) =>\r\n          record.stock_audit_items?.pack_size || \"N/A\",\r\n      },\r\n    ],\r\n    formItems: [\r\n      {\r\n        label: \"Stock In Batch\",\r\n        name: \"stock_audit_id\",\r\n        rules: [{ required: true, message: \"Please select the stock batch\" }],\r\n        component: (\r\n          <Select\r\n            placeholder=\"Select stock batch\"\r\n            loading={stockAuditDropdown.loading && stockAuditDropdown.items.length === 0}\r\n            showSearch\r\n            allowClear\r\n            onSearch={stockAuditDropdown.setSearchString}\r\n            onPopupScroll={stockAuditDropdown.handlePopupScroll}\r\n            filterOption={false}\r\n            dropdownRender={(menu) => (\r\n              <>\r\n                {menu}\r\n                {stockAuditDropdown.hasMore && stockAuditDropdown.items.length > 0 && (\r\n                  <div style={{ textAlign: 'center', padding: '8px', color: '#999' }}>\r\n                    {stockAuditDropdown.loading ? 'Loading...' : 'Scroll for more'}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          >\r\n            {stockAuditDropdown.items.map((cat: StockAudit) => (\r\n              <Option key={cat._id} value={cat._id}>\r\n                {cat?.ProductItem?.name} - {cat?.ProductItem?.VariantItem?.variant_name} - {cat?.batch_no}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        ),\r\n      },\r\n      {\r\n        label: \"Quantity\",\r\n        name: \"quantity\",\r\n        rules: [{ required: true, message: \"Enter quantity to remove\" }],\r\n        component: (\r\n          <InputNumber min={1} placeholder=\"e.g., 5\" style={{ width: \"100%\" }} />\r\n        ),\r\n      },\r\n      {\r\n        label: \"Reason\",\r\n        name: \"out_reason\",\r\n        rules: [{ required: true, message: \"Please enter the reason\" }],\r\n        component: (\r\n          <Select placeholder=\"Reason for stock out\">\r\n            <Select.Option value=\"expired\">Expired</Select.Option>\r\n            <Select.Option value=\"damaged\">Damaged</Select.Option>\r\n            <Select.Option value=\"internal_use\">Internal Use</Select.Option>\r\n            <Select.Option value=\"bulk_sale\">Bulk Sale</Select.Option>\r\n            <Select.Option value=\"return_to_vendor\">\r\n              Return to Vendor\r\n            </Select.Option>\r\n          </Select>\r\n        ),\r\n      },\r\n      {\r\n        label: \"Out Date\",\r\n        name: \"out_date\",\r\n        rules: [{ required: true, message: \"Please select the date\" }],\r\n        component: (\r\n          <DatePicker placeholder=\"Select Date\" style={{ width: \"100%\" }} />\r\n        ),\r\n      },\r\n      {\r\n        label: \"Note\",\r\n        name: \"note\",\r\n        rules: [],\r\n        component: <Input.TextArea rows={3} placeholder=\"Optional note\" />,\r\n      },\r\n    ],\r\n    entityName: \"StockOut\",\r\n    formColumns: 2,\r\n  };\r\n\r\n  return <GenericCrudPage config={stockOutConfig} />;\r\n};\r\n\r\nexport default StockOutCrud;\r\n"],"names":["Option","Select","StockOutCrud","stockAuditDropdown","useInfiniteDropdown","queryHook","apiSlice","useGetStockAuditQuery","limit","stockOutConfig","title","columns","key","render","_","record","_record$stock_audit_i","_record$stock_audit_i2","_record$stock_audit_i3","_record$stock_audit_i4","_record$stock_audit_i5","_record$stock_audit_i6","stock_audit_items","ProductItem","name","VariantItem","variant_name","batch_no","filter","Boolean","join","dataIndex","_record$stock_audit_i7","pack_size","formItems","label","rules","required","message","component","_jsx","placeholder","loading","items","length","showSearch","allowClear","onSearch","setSearchString","onPopupScroll","handlePopupScroll","filterOption","dropdownRender","menu","_jsxs","_Fragment","children","hasMore","style","textAlign","padding","color","map","cat","_cat$ProductItem","_cat$ProductItem2","_cat$ProductItem2$Var","value","_id","InputNumber","min","width","DatePicker","Input","TextArea","rows","entityName","formColumns","GenericCrudPage","config"],"sourceRoot":""}