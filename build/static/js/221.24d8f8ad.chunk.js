"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[221],{37221:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var n=a(65043),r=a(74883),i=a(74198),s=a(76399),t=a(70579);const o=[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,t.jsx)("strong",{children:e})},{title:"Username",dataIndex:"user_name",key:"user_name",render:e=>(0,t.jsx)("span",{style:{color:"#1890ff"},children:e})},{title:"Email",dataIndex:"email",key:"email"},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Role",dataIndex:"roleItems",key:"role_id",render:e=>(0,t.jsx)(s.A,{color:"geekblue",children:null===e||void 0===e?void 0:e.name})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,t.jsx)(s.A,{color:e?"green":"volcano",children:e?"Active":"Inactive"})}];var d=a(36621),m=a(26553),u=a(12624);const c=function(){let{roles:e=[],organisation:l=[],branches:a=[],selectedOrganisationId:n=null,userItemRole:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{label:"Full Name",name:"name",rules:[{required:!0,message:"Please enter full name"}],component:(0,t.jsx)(d.A,{placeholder:"Enter full name"})},{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Enter a valid email"}],component:(0,t.jsx)(d.A,{placeholder:"Enter email"})},{label:"Username",name:"user_name",rules:[{required:!0,message:"Please enter username"}],component:(0,t.jsx)(d.A,{placeholder:"Enter username"})},{label:"Mobile Number",name:"mobile",rules:[{required:!0,message:"Please enter mobile number"},{pattern:/^[0-9]{10}$/,message:"Enter valid 10-digit mobile number"}],component:(0,t.jsx)(d.A,{placeholder:"Enter mobile number",maxLength:10})},{label:"Password",name:"password",rules:[{required:!0,message:"Please enter password"}],component:(0,t.jsx)(d.A.Password,{placeholder:"Enter password"})},{label:"Role",name:"role_id",rules:[{required:!0,message:"Please select a role"}],component:(0,t.jsx)(m.A,{placeholder:"Select role",allowClear:!0,showSearch:!0,children:e.map((e=>(0,t.jsx)(m.A.Option,{value:e.value,children:e.label},e.value)))})},..."OrganisationAdmin"!==r&&"BranchAdmin"!==r?[{label:"Organisation",name:"organisation_id",rules:[{required:!0,message:"Please select a organisation"}],component:(0,t.jsx)(m.A,{placeholder:"Select organisation",allowClear:!0,showSearch:!0,children:l.map((e=>(0,t.jsx)(m.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],..."BranchAdmin"!==r?[{label:"Branch",name:"branch_id",rules:[{required:!1,message:"Please select a branch"}],component:(0,t.jsx)(m.A,{placeholder:"Select branch",allowClear:!0,showSearch:!0,disabled:"BranchAdmin"===r&&!n,children:("BranchAdmin"!==r?a:a.filter((e=>("string"===typeof n||"number"===typeof n)&&e.organisation_id===n))).map((e=>(0,t.jsx)(m.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],{label:"Active Status",name:"status",valuePropName:"checked",component:(0,t.jsx)(u.A,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}]};var h=a(83537),v=a(95005),p=a(62305),g=a(89472);const b=()=>{var e,l,a,s;const{getEntityApi:d}=(0,h.p)(),m=["Roles","Organisations","Braches"].map(d),[u,b,A]=m,{items:x}=(0,v.S)(u.getIdentifier("GetAll")),{items:I}=(0,v.S)(b.getIdentifier("GetAll")),{items:_}=(0,v.S)(A.getIdentifier("GetAll")),f=(0,n.useMemo)((()=>(0,g.HW)()),[]),j=(null===f||void 0===f||null===(e=f.roleItems)||void 0===e?void 0:e.name)||(null===f||void 0===f?void 0:f.usertype)||(null===f||void 0===f?void 0:f.user_role)||"";(0,n.useEffect)((()=>{[u,b].forEach((e=>e("GetAll"))),"tenant"===j&&"superadmin"===j||A("GetAll")}),[u,b]);const k=(null===x||void 0===x||null===(l=x.result)||void 0===l?void 0:l.map((e=>({label:e.name,value:e._id}))))||[],y=(null===I||void 0===I||null===(a=I.result)||void 0===a?void 0:a.map((e=>({label:e.org_name||e.name,value:e._id}))))||[],S=(null===_||void 0===_||null===(s=_.result)||void 0===s?void 0:s.map((e=>({label:e.branch_name||e.name,value:e._id,organisation_id:e.organisation_id||e.org_id}))))||[],[w]=p.A.useForm(),[E,B]=(0,n.useState)(null);return(0,t.jsx)(r.r,{config:{title:"Users",columns:o,formItems:c({roles:k,organisation:y,branches:S,selectedOrganisationId:E,userItemRole:j}),apiRoutes:(0,i._V)("BillingUsers"),formColumns:2},onValuesChange:(e,l)=>{var a;void 0!==e.organisation_id&&(a=e.organisation_id,A("GetAll",{organisation_id:a}),B(void 0===a||""===a?null:a),w.setFieldsValue({branch_id:void 0}))},enableDynamicFields:!0,entityName:"users"})},A=(0,n.memo)(b)}}]);
//# sourceMappingURL=221.24d8f8ad.chunk.js.map