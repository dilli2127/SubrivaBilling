/*! For license information please see 355.a276fd21.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[355],{21355:(e,n,i)=>{i.r(n),i.d(n,{default:()=>be});var s=i(89379),a=i(65043),t=i(83833),l=i(26553),r=i(62305),o=i(16569),c=i(89073),d=i(47419),m=i(11645),h=i(98105),p=i(14524),x=i(85192);const u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855.7 210.8l-42.4-42.4a8.03 8.03 0 00-11.3 0L168.3 801.9a8.03 8.03 0 000 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0L855.6 222c3.2-3 3.2-8.1.1-11.2zM304 448c79.4 0 144-64.6 144-144s-64.6-144-144-144-144 64.6-144 144 64.6 144 144 144zm0-216c39.7 0 72 32.3 72 72s-32.3 72-72 72-72-32.3-72-72 32.3-72 72-72zm416 344c-79.4 0-144 64.6-144 144s64.6 144 144 144 144-64.6 144-144-64.6-144-144-144zm0 216c-39.7 0-72-32.3-72-72s32.3-72 72-72 72 32.3 72 72-32.3 72-72 72z"}}]},name:"percentage",theme:"outlined"};var v=i(66381);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},_.apply(this,arguments)}const j=(e,n)=>a.createElement(v.A,_({},e,{ref:n,icon:u}));const y=a.forwardRef(j);var g=i(36091),A=i(94834),f=i(46237);const b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"};function S(){return S=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},S.apply(this,arguments)}const w=(e,n)=>a.createElement(v.A,S({},e,{ref:n,icon:b}));const N=a.forwardRef(w);var C=i(1045);const I="Settings_settingsContainer__kj-pI",k="Settings_pageHeader__H4a97",T="Settings_pageTitle__TlV+s",P="Settings_tabsCard__P-nek",R="Settings_sectionTitle__Vpoel",O="Settings_settingsForm__UU11S",M="Settings_logoPreview__mTRGE",V="Settings_formActions__hSL8G",G="Settings_infoBox__bNA9f",L="Settings_successBox__fy43A",B="Settings_warningBox__53Aae",z="Settings_printerTestButton__QyyS9",E="Settings_defaultsGrid__qu3mL",F="Settings_notificationItem__YwxfM",H="Settings_notificationLabel__eRv69",U="Settings_notificationTitle__xzsIM",D="Settings_notificationDesc__JAi46";var X=i(83537),q=i(97031),W=i(89472);var Y=i(66507),Z=i(36621),J=i(27723),K=i(95206);const Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function $(){return $=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},$.apply(this,arguments)}const ee=(e,n)=>a.createElement(v.A,$({},e,{ref:n,icon:Q}));const ne=a.forwardRef(ee);var ie=i(88143),se=i(70579);const{TextArea:ae}=Z.A,{Option:te}=l.A,le=e=>{let{form:n,loading:i,onSave:s,onReset:t,uploadedLogoUrl:o,onLogoUpload:c}=e;const h=(0,a.useMemo)((()=>["Retail Store","Mobile And Laptop Store","Medical / Pharmacy","Grocery Store","Restaurant / Cafe","Electronics","Clothing / Fashion","Hardware Store","Wholesale","Other"]),[]),p=(0,a.useMemo)((()=>o||n.getFieldValue("company_logo")||""),[o,n]);return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(x.A,{}),"Company Information"]}),(0,se.jsx)("div",{className:G,children:"This information will appear on your invoices and reports"}),(0,se.jsxs)(d.A,{gutter:16,children:[(0,se.jsxs)(m.A,{span:24,children:[(0,se.jsx)(r.A.Item,{label:"Company Logo",name:"company_logo",extra:"Upload your company logo (PNG, JPG - Max 2MB)",children:(0,se.jsx)(J.A,{beforeUpload:c,showUploadList:!1,accept:"image/*",children:(0,se.jsx)(K.Ay,{icon:(0,se.jsx)(ne,{}),children:"Upload Logo"})})}),p&&(0,se.jsx)("img",{src:p,alt:"Company Logo",className:M})]}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Company Name",name:"company_name",rules:[{required:!0,message:"Please enter company name"}],children:(0,se.jsx)(Z.A,{placeholder:"Enter company name"})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Business Type",name:"business_type",children:(0,se.jsx)(l.A,{placeholder:"Select business type",showSearch:!0,children:h.map((e=>(0,se.jsx)(te,{value:e,children:e},e)))})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"GSTIN / Tax ID",name:"company_gstin",children:(0,se.jsx)(Z.A,{placeholder:"e.g., 29AABCU9603R1ZX"})})}),(0,se.jsx)(m.A,{span:24,children:(0,se.jsx)(r.A.Item,{label:"Address",name:"company_address",rules:[{required:!0,message:"Please enter address"}],children:(0,se.jsx)(ae,{rows:2,placeholder:"Enter complete address"})})}),(0,se.jsx)(m.A,{span:8,children:(0,se.jsx)(r.A.Item,{label:"City",name:"company_city",rules:[{required:!0}],children:(0,se.jsx)(Z.A,{placeholder:"City"})})}),(0,se.jsx)(m.A,{span:8,children:(0,se.jsx)(r.A.Item,{label:"State",name:"company_state",rules:[{required:!0}],children:(0,se.jsx)(Z.A,{placeholder:"State"})})}),(0,se.jsx)(m.A,{span:8,children:(0,se.jsx)(r.A.Item,{label:"Pincode",name:"company_pincode",rules:[{required:!0}],children:(0,se.jsx)(Z.A,{placeholder:"Pincode"})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Phone Number",name:"company_phone",rules:[{required:!0}],children:(0,se.jsx)(Z.A,{placeholder:"+91 XXXXX XXXXX"})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Email Address",name:"company_email",rules:[{type:"email"}],children:(0,se.jsx)(Z.A,{placeholder:"company@example.com"})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Website",name:"company_website",children:(0,se.jsx)(Z.A,{placeholder:"https://www.example.com"})})})]}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:t,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Company Settings"})]})]})};var re=i(12624),oe=i(8354),ce=i(6051);const{Option:de}=l.A,me=e=>{let{form:n,loading:i,onSave:s,onReset:a}=e;const t=(0,C.Zp)();return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(y,{}),"Tax Configuration"]}),(0,se.jsx)("div",{className:G,children:"Global tax settings. Tax rates are configured per category, and tax inclusion is handled at billing level."}),(0,se.jsx)(r.A.Item,{label:"Enable Tax/GST",name:"tax_enabled",valuePropName:"checked",extra:"Enable or disable tax calculation across the entire application",children:(0,se.jsx)(re.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,se.jsx)(r.A.Item,{label:"Tax Type",name:"tax_type",extra:"Select the type of tax applicable to your business",children:(0,se.jsxs)(l.A,{children:[(0,se.jsx)(de,{value:"GST",children:"GST (India)"}),(0,se.jsx)(de,{value:"VAT",children:"VAT"}),(0,se.jsx)(de,{value:"Sales Tax",children:"Sales Tax"})]})}),(0,se.jsx)(oe.A,{children:"Tax Rate Configuration"}),(0,se.jsxs)("div",{className:B,children:["\u26a0\ufe0f ",(0,se.jsx)("strong",{children:"Tax Rates:"})," Configured individually for each product category.",(0,se.jsx)("br",{}),"Go to ",(0,se.jsx)("strong",{children:"Products \u2192 Category"})," to set specific tax rates (e.g., Food: 5%, Electronics: 18%)."]}),(0,se.jsx)(ce.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,se.jsx)(K.Ay,{type:"dashed",icon:(0,se.jsx)(y,{}),onClick:()=>t("/category_crud"),block:!0,children:"Go to Category Management"})}),(0,se.jsx)(oe.A,{children:"Tax Inclusion"}),(0,se.jsxs)("div",{className:B,children:["\u26a0\ufe0f ",(0,se.jsx)("strong",{children:"Tax Inclusive/Exclusive:"})," Handled at the billing level.",(0,se.jsx)("br",{}),"You can choose tax inclusion per bill in the ",(0,se.jsx)("strong",{children:"Billing Page"}),"."]}),(0,se.jsx)(ce.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,se.jsx)(K.Ay,{type:"dashed",icon:(0,se.jsx)(g.A,{}),onClick:()=>t("/retaill_billing"),block:!0,children:"Go to Billing Page"})}),(0,se.jsx)(oe.A,{}),(0,se.jsxs)("div",{className:L,children:["\u2705 ",(0,se.jsx)("strong",{children:"Your Tax System Architecture:"}),(0,se.jsx)("br",{}),"\u2022 ",(0,se.jsx)("strong",{children:"Global (Here):"})," Enable/Disable tax & Tax type (GST/VAT)",(0,se.jsx)("br",{}),"\u2022 ",(0,se.jsx)("strong",{children:"Category Level:"})," Tax rates per product category",(0,se.jsx)("br",{}),"\u2022 ",(0,se.jsx)("strong",{children:"Billing Level:"})," Tax inclusive/exclusive per bill"]}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:a,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Tax Settings"})]})]})};var he=i(7866);const{TextArea:pe}=Z.A,xe=e=>{let{form:n,loading:i,onSave:s,onReset:a}=e;return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(g.A,{}),"Invoice Settings"]}),(0,se.jsx)("div",{className:G,children:"Customize how your invoices are generated and displayed"}),(0,se.jsxs)(d.A,{gutter:16,children:[(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Invoice Prefix",name:"invoice_prefix",rules:[{required:!0}],extra:"e.g., INV, BILL, REC",children:(0,se.jsx)(Z.A,{placeholder:"INV"})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Starting Invoice Number",name:"invoice_starting_number",rules:[{required:!0}],children:(0,se.jsx)(he.A,{min:1,style:{width:"100%"}})})})]}),(0,se.jsx)(r.A.Item,{label:"Invoice Footer Text",name:"invoice_footer",extra:"This text will appear at the bottom of invoices",children:(0,se.jsx)(pe,{rows:3,placeholder:"Thank you for your business!"})}),(0,se.jsx)(r.A.Item,{label:"Terms & Conditions",name:"invoice_terms",children:(0,se.jsx)(pe,{rows:4,placeholder:"Enter terms and conditions..."})}),(0,se.jsx)(oe.A,{children:"Display Options"}),(0,se.jsxs)(ce.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,se.jsx)(r.A.Item,{label:"Show Logo on Invoice",name:"show_logo_on_invoice",valuePropName:"checked",children:(0,se.jsx)(re.A,{})}),(0,se.jsx)(r.A.Item,{label:"Show Terms & Conditions on Invoice",name:"show_terms_on_invoice",valuePropName:"checked",children:(0,se.jsx)(re.A,{})})]}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:a,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Invoice Settings"})]})]})},{Option:ue}=l.A,ve=e=>{let{form:n,loading:i,onSave:s,onReset:a,onTestPrinter:t}=e;return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(A.A,{}),"Thermal Printer Configuration"]}),(0,se.jsx)("div",{className:B,children:"\u26a0\ufe0f Make sure your thermal printer is connected before testing"}),(0,se.jsx)(r.A.Item,{label:"Enable Thermal Printer",name:"thermal_printer_enabled",valuePropName:"checked",children:(0,se.jsx)(re.A,{})}),(0,se.jsxs)(d.A,{gutter:16,children:[(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Printer Port",name:"printer_port",children:(0,se.jsxs)(l.A,{children:[(0,se.jsx)(ue,{value:"COM1",children:"COM1"}),(0,se.jsx)(ue,{value:"COM2",children:"COM2"}),(0,se.jsx)(ue,{value:"COM3",children:"COM3"}),(0,se.jsx)(ue,{value:"USB",children:"USB"}),(0,se.jsx)(ue,{value:"Bluetooth",children:"Bluetooth"})]})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Baud Rate",name:"printer_baud_rate",children:(0,se.jsxs)(l.A,{children:[(0,se.jsx)(ue,{value:9600,children:"9600"}),(0,se.jsx)(ue,{value:19200,children:"19200"}),(0,se.jsx)(ue,{value:38400,children:"38400"}),(0,se.jsx)(ue,{value:115200,children:"115200"})]})})}),(0,se.jsx)(m.A,{span:12,children:(0,se.jsx)(r.A.Item,{label:"Paper Width (mm)",name:"paper_width",children:(0,se.jsxs)(l.A,{children:[(0,se.jsx)(ue,{value:58,children:"58mm (2 inch)"}),(0,se.jsx)(ue,{value:80,children:"80mm (3 inch)"})]})})})]}),(0,se.jsx)(r.A.Item,{label:"Auto Print After Bill",name:"auto_print",valuePropName:"checked",children:(0,se.jsx)(re.A,{})}),(0,se.jsx)(K.Ay,{type:"dashed",icon:(0,se.jsx)(A.A,{}),onClick:t,className:z,children:"Test Printer"}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:a,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Printer Settings"})]})]})},{Option:_e}=l.A,je=e=>{let{form:n,loading:i,onSave:s,onReset:a}=e;return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(f.A,{}),"Default Values"]}),(0,se.jsx)("div",{className:G,children:"These values will be pre-selected when creating new records"}),(0,se.jsx)("div",{className:E,children:(0,se.jsx)(r.A.Item,{label:"Default Payment Mode",name:"default_payment_mode",children:(0,se.jsxs)(l.A,{children:[(0,se.jsx)(_e,{value:"cash",children:"\ud83d\udcb5 Cash"}),(0,se.jsx)(_e,{value:"upi",children:"\ud83d\udcf1 UPI"}),(0,se.jsx)(_e,{value:"card",children:"\ud83d\udcb3 Card"}),(0,se.jsx)(_e,{value:"credit",children:"\ud83d\udcdd Credit"})]})})}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:a,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Default Values"})]})]})},ye=e=>{let{form:n,loading:i,onSave:s,onReset:a}=e;return(0,se.jsxs)(r.A,{form:n,layout:"vertical",className:O,children:[(0,se.jsxs)("div",{className:R,children:[(0,se.jsx)(N,{}),"Notification Preferences"]}),(0,se.jsx)("div",{className:G,children:"Control how and when you receive notifications"}),(0,se.jsxs)("div",{className:F,children:[(0,se.jsxs)("div",{className:H,children:[(0,se.jsx)("div",{className:U,children:"Email Notifications"}),(0,se.jsx)("div",{className:D,children:"Receive notifications via email"})]}),(0,se.jsx)(r.A.Item,{name:"email_notifications",valuePropName:"checked",noStyle:!0,children:(0,se.jsx)(re.A,{})})]}),(0,se.jsxs)("div",{className:F,children:[(0,se.jsxs)("div",{className:H,children:[(0,se.jsx)("div",{className:U,children:"SMS Notifications"}),(0,se.jsx)("div",{className:D,children:"Receive notifications via SMS"})]}),(0,se.jsx)(r.A.Item,{name:"sms_notifications",valuePropName:"checked",noStyle:!0,children:(0,se.jsx)(re.A,{})})]}),(0,se.jsx)(oe.A,{}),(0,se.jsxs)("div",{className:F,children:[(0,se.jsxs)("div",{className:H,children:[(0,se.jsx)("div",{className:U,children:"Low Stock Alerts"}),(0,se.jsx)("div",{className:D,children:"Get notified when product stock is low"})]}),(0,se.jsx)(r.A.Item,{name:"low_stock_alert",valuePropName:"checked",noStyle:!0,children:(0,se.jsx)(re.A,{})})]}),(0,se.jsx)(r.A.Item,{label:"Low Stock Threshold",name:"low_stock_threshold",extra:"Notify when stock goes below this quantity",children:(0,se.jsx)(he.A,{min:0,style:{width:200}})}),(0,se.jsx)(oe.A,{}),(0,se.jsxs)("div",{className:F,children:[(0,se.jsxs)("div",{className:H,children:[(0,se.jsx)("div",{className:U,children:"Payment Reminders"}),(0,se.jsx)("div",{className:D,children:"Send reminders for pending payments"})]}),(0,se.jsx)(r.A.Item,{name:"payment_reminder",valuePropName:"checked",noStyle:!0,children:(0,se.jsx)(re.A,{})})]}),(0,se.jsxs)("div",{className:F,children:[(0,se.jsxs)("div",{className:H,children:[(0,se.jsx)("div",{className:U,children:"Daily Report Email"}),(0,se.jsx)("div",{className:D,children:"Receive daily sales report via email"})]}),(0,se.jsx)(r.A.Item,{name:"daily_report_email",valuePropName:"checked",noStyle:!0,children:(0,se.jsx)(re.A,{})})]}),(0,se.jsxs)("div",{className:V,children:[(0,se.jsx)(K.Ay,{onClick:a,children:"Reset"}),(0,se.jsx)(K.Ay,{type:"primary",icon:(0,se.jsx)(ie.A,{}),onClick:s,loading:i,children:"Save Notification Settings"})]})]})},{Title:ge,Text:Ae}=t.A,{Option:fe}=l.A,be=()=>{const[e]=r.A.useForm(),[n,i]=(0,a.useState)(!1),[t,u]=(0,a.useState)("company"),{handleFileUpload:v,url:_}=(()=>{const[e,n]=(0,a.useState)(null);return{url:e,handleFileUpload:async e=>{try{const i=new FormData;i.append("file",e);const s=await fetch("http://localhost:8247/file-upload",{method:"POST",body:i}),a=await s.json();if(a.result&&a.result.file){const e=a.result.file;return n(e),o.Ay.success("File uploaded successfully!"),e}throw n(""),new Error("File upload failed")}catch(i){o.Ay.error("File upload failed!")}}}})(),[j,b]=((0,C.Zp)(),(0,a.useState)("all")),[S,w]=(0,a.useState)("all"),R=(0,a.useMemo)((()=>(0,W.HW)()),[]),{userRole:O,isSuperAdmin:M,isTenant:V}=(0,a.useMemo)((()=>{const e=Y.A.getItem("scope"),n=(null===e||void 0===e?void 0:e.userType)||(null===R||void 0===R?void 0:R.user_type)||(null===R||void 0===R?void 0:R.usertype)||(null===R||void 0===R?void 0:R.user_role)||"";return{userRole:n,isSuperAdmin:"superadmin"===n.toLowerCase(),isTenant:"tenant"===n.toLowerCase()}}),[R]),{getEntityApi:G}=(0,X.p)(),L=G("Settings"),B=G("Organisations"),z=G("Tenant"),{items:E}=(0,q.Sm)(L.getIdentifier("Get")),{items:F}=(0,q.Sm)(B.getIdentifier("Get")),{items:H}=(0,q.Sm)(z.getIdentifier("GetAll")),{items:U}=(0,q.Sm)(B.getIdentifier("GetAll"));(0,a.useEffect)((()=>{Z(),M?z("GetAll"):V&&B("GetAll")}),[]);const D=(0,a.useCallback)((e=>{b(e||"all"),w("all"),e&&"all"!==e&&B("GetAll",{tenant_id:e})}),[B]),Z=(0,a.useCallback)((async()=>{try{let n="all"!==S?S:null;var e;if(!n)n=(null===R||void 0===R?void 0:R.organisation_id)||(null===R||void 0===R||null===(e=R.organisationItems)||void 0===e?void 0:e._id);n&&await B("Get",{},n),await L("Get",{},n||(null===R||void 0===R?void 0:R._id))}catch(n){console.error("Error loading settings:",n)}}),[S,R,B,L]);(0,a.useEffect)((()=>{S&&"all"!==S&&Z()}),[S,Z]),(0,a.useEffect)((()=>{if(null!==E&&void 0!==E&&E.result||null!==F&&void 0!==F&&F.result){const n=(null===E||void 0===E?void 0:E.result)||{},i=(null===F||void 0===F?void 0:F.result)||{};e.setFieldsValue({company_name:i.org_name||"",company_address:i.address||"",company_city:i.city||"",company_state:i.state||"",company_pincode:i.pincode||"",company_gstin:i.gst_number||"",company_phone:i.phone||"",company_email:i.email||"",company_website:i.website||"",company_logo:i.logo_url||"",business_type:i.business_type||"",tax_enabled:!1!==n.tax_enabled,tax_type:n.tax_type||"GST",invoice_prefix:n.invoice_prefix||"INV",invoice_starting_number:n.invoice_starting_number||1,invoice_footer:n.invoice_footer||"",show_logo_on_invoice:!1!==n.show_logo_on_invoice,show_terms_on_invoice:!1!==n.show_terms_on_invoice,invoice_terms:n.invoice_terms||"",thermal_printer_enabled:n.thermal_printer_enabled||!1,printer_port:n.printer_port||"COM1",printer_baud_rate:n.printer_baud_rate||9600,paper_width:n.paper_width||80,auto_print:n.auto_print||!1,default_payment_mode:n.default_payment_mode||"cash",email_notifications:!1!==n.email_notifications,sms_notifications:n.sms_notifications||!1,low_stock_alert:!1!==n.low_stock_alert,low_stock_threshold:n.low_stock_threshold||10,payment_reminder:n.payment_reminder||!1,daily_report_email:n.daily_report_email||!1})}}),[E,F,e]);const J=(0,a.useCallback)((async()=>{try{if((M||V)&&"all"===S)return void o.Ay.error("Please select an organisation before updating settings");const a=await e.validateFields();i(!0);let l="all"!==S?S:null;var n;if(!l)l=(null===R||void 0===R?void 0:R.organisation_id)||(null===R||void 0===R||null===(n=R.organisationItems)||void 0===n?void 0:n._id);if((M||V)&&!l)return void o.Ay.error("Please select an organisation before updating settings");if("company"===t&&l&&await B("Update",{org_name:a.company_name,address:a.company_address,city:a.company_city,state:a.company_state,pincode:a.company_pincode,gst_number:a.company_gstin,phone:a.company_phone,email:a.company_email,website:a.company_website,logo_url:_||a.company_logo,business_type:a.business_type},l),"company"!==t){let e={};"tax"===t?e={tax_enabled:a.tax_enabled,tax_type:a.tax_type}:"invoice"===t?e={invoice_prefix:a.invoice_prefix,invoice_starting_number:a.invoice_starting_number,invoice_footer:a.invoice_footer,invoice_terms:a.invoice_terms,show_logo_on_invoice:a.show_logo_on_invoice,show_terms_on_invoice:a.show_terms_on_invoice}:"printer"===t?e={thermal_printer_enabled:a.thermal_printer_enabled,printer_port:a.printer_port,printer_baud_rate:a.printer_baud_rate,paper_width:a.paper_width,auto_print:a.auto_print}:"defaults"===t?e={default_payment_mode:a.default_payment_mode}:"notifications"===t&&(e={email_notifications:a.email_notifications,sms_notifications:a.sms_notifications,low_stock_alert:a.low_stock_alert,low_stock_threshold:a.low_stock_threshold,payment_reminder:a.payment_reminder,daily_report_email:a.daily_report_email});const n=null===E||void 0===E?void 0:E.result,i=n&&(n._id||n.id||"object"===typeof n&&Object.keys(n).some((e=>"_id"!==e&&"id"!==e&&null!==n[e]&&void 0!==n[e]))),r=l||(null===R||void 0===R?void 0:R._id);if(i){const i=n._id||n.id||r;await L("Update",(0,s.A)((0,s.A)({},e),{},{organisation_id:r}),i)}else await L("Create",(0,s.A)((0,s.A)({},e),{},{organisation_id:r}),r);await L("Get",{},r)}const r={company:"Company Settings",tax:"Tax & GST Settings",invoice:"Invoice Settings",printer:"Printer Settings",defaults:"Default Values",notifications:"Notification Settings"};o.Ay.success("".concat(r[t]||"Settings"," saved successfully! \ud83c\udf89"))}catch(a){o.Ay.error(a.message||"Failed to save settings")}finally{i(!1)}}),[M,V,S,R,t,B,L,_,E]),K=(0,a.useCallback)((()=>{e.resetFields(),o.Ay.info("Form reset to last saved values")}),[e]),Q=(0,a.useCallback)((async n=>{try{const i=await v(n);e.setFieldValue("company_logo",i),o.Ay.success("Logo uploaded successfully!")}catch(i){o.Ay.error("Failed to upload logo")}return!1}),[v,e]),$=(0,a.useCallback)((()=>{o.Ay.info("Printing test page... Check your thermal printer")}),[]),ee=(0,a.useMemo)((()=>{var e;return(null===H||void 0===H||null===(e=H.result)||void 0===e?void 0:e.map((e=>({label:e.organization_name||e.tenant_name,value:e._id}))))||[]}),[H]),ne=(0,a.useMemo)((()=>{var e;return(null===U||void 0===U||null===(e=U.result)||void 0===e?void 0:e.map((e=>({label:e.org_name||e.organization_name||e.name,value:e._id}))))||[]}),[U]);return(0,se.jsxs)("div",{className:I,children:[(0,se.jsx)("div",{className:k,children:(0,se.jsxs)(ge,{level:2,className:T,children:[(0,se.jsx)(p.A,{}),"Settings"]})}),(M||V)&&(0,se.jsx)(c.A,{style:{marginBottom:16},children:(0,se.jsxs)(d.A,{gutter:16,children:[M&&(0,se.jsxs)(m.A,{xs:24,sm:12,md:8,children:[(0,se.jsx)("div",{style:{marginBottom:8},children:(0,se.jsx)(Ae,{strong:!0,children:"Tenant"})}),(0,se.jsxs)(l.A,{style:{width:"100%"},placeholder:"Select Tenant",value:j,onChange:D,showSearch:!0,optionFilterProp:"children",allowClear:!0,children:[(0,se.jsx)(fe,{value:"all",children:"All Tenants"}),ee.map((e=>(0,se.jsx)(fe,{value:e.value,children:e.label},e.value)))]})]}),(M||V)&&(0,se.jsxs)(m.A,{xs:24,sm:12,md:8,children:[(0,se.jsx)("div",{style:{marginBottom:8},children:(0,se.jsx)(Ae,{strong:!0,children:"Organisation"})}),(0,se.jsxs)(l.A,{style:{width:"100%"},placeholder:"Select Organisation",value:S,onChange:w,showSearch:!0,optionFilterProp:"children",allowClear:!0,disabled:M&&("all"===j||!j),children:[(0,se.jsx)(fe,{value:"all",children:"All Organisations"}),ne.map((e=>(0,se.jsx)(fe,{value:e.value,children:e.label},e.value)))]})]})]})}),(0,se.jsx)(c.A,{className:P,children:(0,se.jsx)(h.A,{activeKey:t,onChange:u,type:"card",items:[{key:"company",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(x.A,{})," Company"]}),children:(0,se.jsx)(le,{form:e,loading:n,onSave:J,onReset:K,uploadedLogoUrl:_,onLogoUpload:Q})},{key:"tax",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(y,{})," Tax & GST"]}),children:(0,se.jsx)(me,{form:e,loading:n,onSave:J,onReset:K})},{key:"invoice",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(g.A,{})," Invoice"]}),children:(0,se.jsx)(xe,{form:e,loading:n,onSave:J,onReset:K})},{key:"printer",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(A.A,{})," Printer"]}),children:(0,se.jsx)(ve,{form:e,loading:n,onSave:J,onReset:K,onTestPrinter:$})},{key:"defaults",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(f.A,{})," Defaults"]}),children:(0,se.jsx)(je,{form:e,loading:n,onSave:J,onReset:K})},{key:"notifications",label:(0,se.jsxs)("span",{children:[(0,se.jsx)(N,{})," Notifications"]}),children:(0,se.jsx)(ye,{form:e,loading:n,onSave:J,onReset:K})}]})})]})}},88143:(e,n,i)=>{i.d(n,{A:()=>o});var s=i(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var t=i(66381);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},l.apply(this,arguments)}const r=(e,n)=>s.createElement(t.A,l({},e,{ref:n,icon:a}));const o=s.forwardRef(r)},94834:(e,n,i)=>{i.d(n,{A:()=>o});var s=i(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var t=i(66381);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},l.apply(this,arguments)}const r=(e,n)=>s.createElement(t.A,l({},e,{ref:n,icon:a}));const o=s.forwardRef(r)}}]);
//# sourceMappingURL=355.a276fd21.chunk.js.map