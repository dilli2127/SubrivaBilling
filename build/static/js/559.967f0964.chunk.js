"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[559],{86559:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(65043),a=n(91686),o=n(70644),s=n(95206),l=n(73146),d=n(1045),r=n(98350),c=n(70579);const u=()=>{const{entityName:e,entityDef:t,loading:n,hasError:u,isEntityValid:y,dynamicApiRoutes:m,defaultColumns:f,goBack:p,goToEntityDefinitions:h}=(()=>{const{entityName:e}=(0,d.g)(),t=(0,d.Zp)(),[n,a]=(0,i.useState)(null),{data:o,isLoading:s,error:l,refetch:u}=r.lh.useGetEntityDefinitionQuery({entity_name:e},{skip:!e}),y=(0,i.useMemo)((()=>o?(null===o||void 0===o?void 0:o.result)||o:null),[o]),m=l||null;(0,i.useEffect)((()=>{const t=Array.isArray(y)?y:(null===y||void 0===y?void 0:y.result)||[];if(t&&Array.isArray(t)&&t.length>0&&e){const n=t.find((t=>t.entity_name===e));a(n||null)}}),[y,e]);const f=(0,i.useMemo)((()=>({identifier:"GetEntityDefinition",method:"POST",endpoint:"/entity_definition"})),[]),p=(0,i.useMemo)((()=>{if(!e)return null;const t="/".concat(e);return{get:{method:"POST",endpoint:t,identifier:"GetAll_".concat(e)},create:{method:"PUT",endpoint:t,identifier:"Add_".concat(e)},update:{method:"POST",endpoint:t,identifier:"Update_".concat(e)},delete:{method:"DELETE",endpoint:t,identifier:"Delete_".concat(e)}}}),[e]),h=(0,i.useMemo)((()=>[{title:"ID",dataIndex:"_id",key:"_id",render:e=>(0,c.jsxs)("span",{style:{fontFamily:"monospace",fontSize:"13px",fontWeight:500,color:"#1890ff"},children:[e.substring(0,8),"..."]})},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:e=>(0,c.jsx)("span",{style:{fontSize:"13px",color:"#666"},children:new Date(e).toLocaleDateString()})},{title:"Updated",dataIndex:"updatedAt",key:"updatedAt",render:e=>(0,c.jsx)("span",{style:{fontSize:"13px",color:"#666"},children:new Date(e).toLocaleDateString()})}]),[]),g=(0,i.useMemo)((()=>Boolean(n&&n.is_active)),[n]),A=(0,i.useMemo)((()=>m||!s&&!g),[m,s,g]),x=(0,i.useCallback)((()=>{t("/entities")}),[t]),D=(0,i.useCallback)((()=>{t("/entity-definitions")}),[t]);return{entityName:e,entityDef:n,loading:s,error:m,hasError:A,isEntityValid:g,dynamicApiRoutes:p,defaultColumns:h,fetchEntityDefinition:u,goBack:x,goToEntityDefinitions:D,entityDefRoute:f}})(),g=(0,i.useMemo)((()=>t&&e?{title:t.plural_name,entityName:e,columns:f,formItems:[],formColumns:2,drawerWidth:700,skipMetadataWrapping:!0,metadataFieldName:"custom_data",enableDynamicFields:!0,enableSuperAdminFilters:!0}:null),[t,e,f]),A=(0,i.useCallback)(((e,n)=>{t&&!n.entity_name&&(n.entity_name=t.entity_name)}),[t]);return n?(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,c.jsx)(a.A,{size:"large",tip:"Loading ".concat(e," definition...")})}):!u&&y&&g?(0,c.jsx)(l.r,{config:g,enableDynamicFields:!0,showDynamicColumnsInTable:!0,entityName:null===t||void 0===t?void 0:t.entity_name,enableSuperAdminFilters:!0,onValuesChange:A}):(0,c.jsx)(o.Ay,{status:"404",title:"Entity Not Found",subTitle:'The entity "'.concat(e,'" does not exist or is not active.'),extra:(0,c.jsxs)("div",{children:[(0,c.jsx)(s.Ay,{type:"primary",onClick:p,style:{marginRight:8},children:"Back to Entities"}),(0,c.jsx)(s.Ay,{onClick:h,children:"Manage Entity Definitions"})]})})}}}]);
//# sourceMappingURL=559.967f0964.chunk.js.map