"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[719],{82719:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ee});var a=l(65043),r=l(89472),s=l(66507),n=l(83833),o=l(93504),i=l(26553),d=l(62305),c=l(89073),u=l(47419),x=l(11645),p=l(6051),m=l(96651),h=l(95206),v=l(98105),g=l(62751),j=l(96603),y=l(32513),f=l(1199),A=l(90617),S=l(92003),b=l(94834),_=l(14524),R=l(6881),k=l(98463),I=l(32700),F=l(93761),C=l(53722),w=l(40295),T=l(38818),D=l(76401),P=l(67630),Y=l(12959),G=l(60446),L=l.n(G);const z="Reports_container__+ISRf";var M=l(83537),O=l(95005),E=l(89379),B=l(16569),V=l(22119);const K=e=>{switch(e){case"1":default:return"comprehensive";case"2":return"financial";case"3":return"sales";case"4":return"customer";case"5":return"inventory";case"6":return"staff";case"7":return"payment"}},N=e=>{const[t,l]=(0,a.useState)(!1),[r,s]=(0,a.useState)("excel"),[n,o]=(0,a.useState)(["summary","charts","tables"]);return{exportModalVisible:t,setExportModalVisible:l,exportFormat:r,setExportFormat:s,exportOptions:n,setExportOptions:o,handleExport:()=>{var t,a,s,n;const o=K(e.activeTab),i="".concat(o,"_").concat(e.selectedTenant,"_").concat(e.selectedOrganisation,"_").concat(e.selectedBranch,"_").concat(null===(t=e.dateRange)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.format("YYYY-MM-DD"),"_").concat(null===(s=e.dateRange)||void 0===s||null===(n=s[1])||void 0===n?void 0:n.format("YYYY-MM-DD")),d=e.reportCache[i];if(!d)return void B.Ay.error("No data available to export. Please apply filters first.");const c={tenantOptions:e.tenantOptions,organisationOptions:e.organisationOptions,branchOptions:e.branchOptions,selectedTenant:e.selectedTenant,selectedOrganisation:e.selectedOrganisation,selectedBranch:e.selectedBranch,dateRange:e.dateRange,isSuperAdmin:e.isSuperAdmin,isTenant:e.isTenant};"excel"===r?((e,t,l)=>{var a,r,s,n,o,i,d,c,u,x,p,m;let h=[];const v="".concat(t,"_report_").concat(L()().format("YYYY-MM-DD")),{getTenantLabel:g,getOrganisationLabel:j,getBranchLabel:y}=(e=>({getTenantLabel:()=>{if("all"===e.selectedTenant)return"All Tenants";const t=e.tenantOptions.find((t=>t.value===e.selectedTenant));return(null===t||void 0===t?void 0:t.label)||e.selectedTenant},getOrganisationLabel:()=>{if("all"===e.selectedOrganisation)return"All Organisations";const t=e.organisationOptions.find((t=>t.value===e.selectedOrganisation));return(null===t||void 0===t?void 0:t.label)||e.selectedOrganisation},getBranchLabel:()=>{if("all"===e.selectedBranch)return"All Branches";const t=e.branchOptions.find((t=>t.value===e.selectedBranch));return(null===t||void 0===t?void 0:t.label)||e.selectedBranch}}))(l);switch(t){case"inventory":h=[["Inventory Report","","",""],["Date Range:",null===(a=l.dateRange)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.format("YYYY-MM-DD"),"to",null===(s=l.dateRange)||void 0===s||null===(n=s[1])||void 0===n?void 0:n.format("YYYY-MM-DD")],...l.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...l.isSuperAdmin||l.isTenant?[["Organisation:",j(),"",""]]:[],["Branch:",y(),"",""],["","","",""],["Total Products","Stock Value","Low Stock Items","Out of Stock"],[e.totalProducts,"\u20b9".concat(e.stockValue.toLocaleString()),e.lowStockItems,e.outOfStock],["","","",""],["Category","Sales","Profit","Margin"],...e.categoryData.map((e=>[e.name,"\u20b9".concat(e.sales.toLocaleString()),"\u20b9".concat(e.profit.toLocaleString()),"".concat(e.margin,"%")]))];break;case"sales":h=[["Sales Report","","",""],["Date Range:",null===(o=l.dateRange)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.format("YYYY-MM-DD"),"to",null===(d=l.dateRange)||void 0===d||null===(c=d[1])||void 0===c?void 0:c.format("YYYY-MM-DD")],...l.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...l.isSuperAdmin||l.isTenant?[["Organisation:",j(),"",""]]:[],["Branch:",y(),"",""],["","","",""],["Total Sales","Avg Order Value","Conversion Rate",""],["\u20b9".concat(e.totalSales.toLocaleString()),"\u20b9".concat(e.avgOrderValue),"".concat(e.conversionRate,"%"),""],["","","",""],["Customer Name","Total Purchase","Orders","Outstanding"],...e.topCustomers.map((e=>[e.name,"\u20b9".concat(e.totalPurchase.toLocaleString()),e.orders,"\u20b9".concat(e.outstanding.toLocaleString())]))];break;default:h=[["Report Data","","",""],["Date Range:",null===(u=l.dateRange)||void 0===u||null===(x=u[0])||void 0===x?void 0:x.format("YYYY-MM-DD"),"to",null===(p=l.dateRange)||void 0===p||null===(m=p[1])||void 0===m?void 0:m.format("YYYY-MM-DD")],...l.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...l.isSuperAdmin||l.isTenant?[["Organisation:",j(),"",""]]:[],["Branch:",y(),"",""],["","","",""],...Object.entries(e).map((e=>{let[t,l]=e;return[t,l,"",""]}))]}const f=h.map((e=>e.join(","))).join("\n"),A=new Blob([f],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a"),b=URL.createObjectURL(A);S.setAttribute("href",b),S.setAttribute("download","".concat(v,".csv")),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S),B.Ay.success("".concat(t," report exported to Excel successfully!"))})(d,o,c):"pdf"===r?B.Ay.info("PDF export functionality will be implemented with a PDF library"):((e,t)=>{const l=Object.entries(e).map((e=>{let[t,l]=e;return"".concat(t,",").concat(l)})).join("\n"),a=new Blob([l],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),s=URL.createObjectURL(a);r.setAttribute("href",s),r.setAttribute("download","".concat(t,"_report_").concat(L()().format("YYYY-MM-DD"),".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),B.Ay.success("".concat(t," report exported to CSV successfully!"))})(d,o),l(!1)},handlePrint:()=>{B.Ay.info("Preparing report for printing..."),window.print()}}};var W=l(26612),q=l(99472),U=l(79129),H=l(68855),Q=l(50108),X=l(61646),J=l(87734),Z=l(52185),$=l(6026),ee=l(86150),te=l(21327),le=l(38643),ae=l(90168),re=l(87890),se=l(4240),ne=l(17869),oe=l(82291),ie=l(70579);const{Text:de}=n.A,ce=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],ue=()=>{var e,t,l,a,r,s,n,o,i;const{Reports:d}=(0,V.V)(),p=(0,O.S)(d.getIdentifier("GetSalesReport")),m=(0,O.S)(d.getIdentifier("GetProfitLossReport")),h=(0,O.S)(d.getIdentifier("GetCustomerSalesReport")),v=(0,O.S)(d.getIdentifier("GetStockReport")),g=(0,O.S)(d.getIdentifier("GetPaymentCollectionReport")),j=(0,O.S)(d.getIdentifier("GetProductSalesReport")),y=(null===p||void 0===p||null===(e=p.result)||void 0===e?void 0:e.summary)||{},A=(null===m||void 0===m?void 0:m.result)||{},S=(null===h||void 0===h||null===(t=h.result)||void 0===t?void 0:t.customers)||[],b=(null===v||void 0===v||null===(l=v.result)||void 0===l?void 0:l.summary)||{},_=(null===g||void 0===g||null===(a=g.result)||void 0===a?void 0:a.summary)||{},R=(null===j||void 0===j||null===(r=j.result)||void 0===r?void 0:r.products)||[],k=(null===p||void 0===p||null===(s=p.result)||void 0===s?void 0:s.sales)||[],w=parseFloat(y.total_revenue)||0,T=parseFloat(null===(n=A.profit)||void 0===n?void 0:n.net_profit)||0,P=parseInt(y.total_bills)||0,Y=S.length,G=parseFloat(y.average_bill_value)||0,L=parseFloat(null===(o=A.profit)||void 0===o?void 0:o.profit_margin_percentage)||0,z=parseFloat(b.total_stock_value)||0,M=parseFloat(_.total_collected)||0,E=S.filter((e=>parseFloat(e.total_purchase)>0)),B=E.length>0?E.reduce(((e,t)=>e+parseFloat(t.total_purchase)),0)/E.length:0,K=[{name:"High Value",value:E.filter((e=>parseFloat(e.total_purchase)>1.5*B)).length,color:"#52c41a",percentage:E.length>0?(E.filter((e=>parseFloat(e.total_purchase)>1.5*B)).length/E.length*100).toFixed(1):0},{name:"Medium Value",value:E.filter((e=>{const t=parseFloat(e.total_purchase);return t>=.7*B&&t<=1.5*B})).length,color:"#1890ff",percentage:E.length>0?(E.filter((e=>{const t=parseFloat(e.total_purchase);return t>=.7*B&&t<=1.5*B})).length/E.length*100).toFixed(1):0},{name:"Low Value",value:E.filter((e=>parseFloat(e.total_purchase)<.7*B&&parseFloat(e.total_purchase)>0)).length,color:"#fa8c16",percentage:E.length>0?(E.filter((e=>parseFloat(e.total_purchase)<.7*B&&parseFloat(e.total_purchase)>0)).length/E.length*100).toFixed(1):0}].filter((e=>e.value>0)),N=R.slice(0,6).map((e=>({name:(e.name||"Unknown").substring(0,20),sales:parseFloat(e.total_revenue)||0,quantity:parseInt(e.total_quantity_sold)||0}))),ue=(_.payment_mode_breakdown||[]).map((e=>({method:e.payment_mode||"Cash",amount:parseFloat(e.total_amount)||0,percentage:M>0?(parseFloat(e.total_amount)/M*100).toFixed(1):0}))),xe=Array.isArray(k)&&k.length>0&&null!==(i=k[0])&&void 0!==i&&i.period?k.map((e=>({period:e.period,sales:parseFloat(e.total_sales)||0,transactions:parseInt(e.total_transactions)||0}))):[];return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff"},children:[(0,ie.jsx)(D.A,{style:{fontSize:32,marginBottom:8}}),(0,ie.jsx)(W.A,{title:(0,ie.jsx)(de,{style:{color:"#fff"},children:"Total Revenue"}),value:w,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,ie.jsxs)(de,{style:{color:"#fff",fontSize:12},children:[P," Bills \u2022 Avg: \u20b9",G.toFixed(2)]})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"#fff"},children:[(0,ie.jsx)(I.A,{style:{fontSize:32,marginBottom:8}}),(0,ie.jsx)(W.A,{title:(0,ie.jsx)(de,{style:{color:"#fff"},children:"Net Profit"}),value:T,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,ie.jsxs)(de,{style:{color:"#fff",fontSize:12},children:["Margin: ",L,"%"]})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"#fff"},children:[(0,ie.jsx)(F.A,{style:{fontSize:32,marginBottom:8}}),(0,ie.jsx)(W.A,{title:(0,ie.jsx)(de,{style:{color:"#fff"},children:"Stock Value"}),value:z,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,ie.jsxs)(de,{style:{color:"#fff",fontSize:12},children:[parseInt(b.total_items)||0," Items in stock"]})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"#fff"},children:[(0,ie.jsx)(C.A,{style:{fontSize:32,marginBottom:8}}),(0,ie.jsx)(W.A,{title:(0,ie.jsx)(de,{style:{color:"#fff"},children:"Customers"}),value:Y,valueStyle:{color:"#fff",fontSize:24}}),(0,ie.jsxs)(de,{style:{color:"#fff",fontSize:12},children:[E.length," Active customers"]})]})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:16,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(U.A,{})," Sales Trend"]}),style:{borderRadius:12},children:xe.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(X.X,{data:xe,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"period"}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"transactions",fill:"#8884d8",name:"Transactions"}),(0,ie.jsx)(ae.N,{type:"monotone",dataKey:"sales",stroke:"#82ca9d",strokeWidth:3,name:"Sales (\u20b9)"})]})}):(0,ie.jsx)(q.A,{description:"(daily/monthly/yearly) to see trends"})})}),(0,ie.jsx)(x.A,{xs:24,lg:8,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(H.A,{})," Customer Segments"]}),style:{borderRadius:12},children:K.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(re.r,{children:[(0,ie.jsx)(se.F,{data:K,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percentage:l}=e;return"".concat(t,": ").concat(l,"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:K.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:e.color},"cell-".concat(t))))}),(0,ie.jsx)(ee.m,{})]})}):(0,ie.jsx)(q.A,{description:"No customer data available"})})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(f.A,{})," Top Products"]}),style:{borderRadius:12},children:N.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(oe.E,{data:N,layout:"vertical",children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{type:"number"}),(0,ie.jsx)($.h,{dataKey:"name",type:"category",width:120}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"sales",fill:"#8884d8",name:"Revenue (\u20b9)"})]})}):(0,ie.jsx)(q.A,{description:"No product data available"})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Payment Method Distribution",style:{borderRadius:12},children:ue.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(re.r,{children:[(0,ie.jsx)(se.F,{data:ue,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{method:t,percentage:l}=e;return"".concat(t,": ").concat(l,"%")},outerRadius:80,fill:"#8884d8",dataKey:"amount",children:ue.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:ce[t%ce.length]},"cell-".concat(t))))}),(0,ie.jsx)(ee.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,ie.jsx)(q.A,{description:"No payment data available"})})})]})]})};var xe=l(39249);const{Text:pe}=n.A,me=()=>{var e,t,l,a,r,s,n,o,i,d,p,m;const{Reports:h}=(0,V.V)(),v=(0,O.S)(h.getIdentifier("GetProfitLossReport")),g=(0,O.S)(h.getIdentifier("GetExpenseReport")),j=(0,O.S)(h.getIdentifier("GetGSTReport")),y=(null===v||void 0===v?void 0:v.result)||{},f=(null===g||void 0===g||null===(e=g.result)||void 0===e||e.expenses,(null===g||void 0===g||null===(t=g.result)||void 0===t?void 0:t.summary)||{}),A=(null===j||void 0===j||null===(l=j.result)||void 0===l?void 0:l.summary)||{},S=parseFloat(null===(a=y.revenue)||void 0===a?void 0:a.total_sales_revenue)||0,b=parseFloat(null===(r=y.revenue)||void 0===r?void 0:r.total_discount_given)||0,_=parseFloat(null===(s=y.revenue)||void 0===s?void 0:s.net_revenue)||S-b,R=parseFloat(null===(n=y.costs)||void 0===n?void 0:n.cost_of_goods_sold)||0,k=parseFloat(null===(o=y.costs)||void 0===o?void 0:o.operating_expenses)||0,I=parseFloat(null===(i=y.costs)||void 0===i?void 0:i.total_costs)||0,F=parseFloat(null===(d=y.profit)||void 0===d?void 0:d.gross_profit)||0,C=parseFloat(null===(p=y.profit)||void 0===p?void 0:p.net_profit)||0,w=parseFloat(null===(m=y.profit)||void 0===m?void 0:m.profit_margin_percentage)||0,T=parseFloat(A.total_gst_collected)||0,D=[{category:"Total Revenue",amount:S,type:"income"},{category:"Discount Given",amount:-b,type:"expense"},{category:"Net Revenue",amount:_,type:"income"},{category:"Cost of Goods Sold",amount:-R,type:"expense"},{category:"Gross Profit",amount:F,type:"income"},{category:"Operating Expenses",amount:-k,type:"expense"},{category:"Net Profit",amount:C,type:"profit"}],P=(f.category_breakdown||[]).map((e=>({category:e.category||"Other",amount:parseFloat(e.total_amount)||0,count:parseInt(e.expense_count)||0})));return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,md:6,children:(0,ie.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#f6ffed"},children:(0,ie.jsx)(W.A,{title:"Total Revenue",value:S,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})})}),(0,ie.jsx)(x.A,{xs:24,md:6,children:(0,ie.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#fff7e6"},children:(0,ie.jsx)(W.A,{title:"Total Costs",value:I,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})})}),(0,ie.jsx)(x.A,{xs:24,md:6,children:(0,ie.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#e6f7ff"},children:(0,ie.jsx)(W.A,{title:"Net Profit",value:C,prefix:"\u20b9",precision:2,valueStyle:{color:C>=0?"#1890ff":"#ff4d4f"}})})}),(0,ie.jsx)(x.A,{xs:24,md:6,children:(0,ie.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#f9f0ff"},children:(0,ie.jsx)(W.A,{title:"Profit Margin",value:w,suffix:"%",precision:2,valueStyle:{color:"#722ed1"}})})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Profit & Loss Statement",style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:D,columns:[{title:"Category",dataIndex:"category",key:"category",render:(e,t)=>(0,ie.jsx)(pe,{strong:"profit"===t.type,children:e})},{title:"Amount",dataIndex:"amount",key:"amount",align:"right",render:(e,t)=>(0,ie.jsxs)(pe,{strong:"profit"===t.type,style:{color:("income"===t.type||"profit"===t.type)&&e>=0?"#52c41a":"#ff4d4f"},children:["\u20b9",Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})}],pagination:!1,size:"small",locale:{emptyText:"No financial data available"}})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Expense Breakdown by Category",style:{borderRadius:12},children:P.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:350,children:(0,ie.jsxs)(oe.E,{data:P,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"category",angle:-45,textAnchor:"end",height:100}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"amount",fill:"#ff7a45",name:"Amount (\u20b9)"}),(0,ie.jsx)(le.y,{dataKey:"count",fill:"#1890ff",name:"Count"})]})}):(0,ie.jsx)(q.A,{description:"No expense data available"})})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,md:12,children:(0,ie.jsxs)(c.A,{title:"Revenue & Cost Breakdown",style:{borderRadius:12},children:[(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Gross Profit",value:F,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a",fontSize:"20px"}})}),(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"COGS",value:R,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f",fontSize:"20px"}})})]}),(0,ie.jsxs)(u.A,{gutter:16,style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"GST Collected",value:T,prefix:"\u20b9",precision:2,valueStyle:{color:"#1890ff",fontSize:"18px"}})}),(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Discount Given",value:b,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16",fontSize:"18px"}})})]})]})}),(0,ie.jsx)(x.A,{xs:24,md:12,children:(0,ie.jsxs)(c.A,{title:"Expense Summary",style:{borderRadius:12},children:[(0,ie.jsxs)(u.A,{gutter:16,children:[(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Total Expenses",value:parseFloat(f.total_expense_amount)||0,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f",fontSize:"20px"}})}),(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Expense Count",value:parseInt(f.total_expense_count)||0,valueStyle:{color:"#1890ff",fontSize:"20px"}})})]}),(0,ie.jsxs)(u.A,{gutter:16,style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Avg Expense",value:parseFloat(f.average_expense)||0,prefix:"\u20b9",precision:2,valueStyle:{color:"#722ed1",fontSize:"18px"}})}),(0,ie.jsx)(x.A,{xs:12,children:(0,ie.jsx)(W.A,{title:"Operating Exp",value:k,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16",fontSize:"18px"}})})]})]})})]})]})};var he=l(57692),ve=l(76399),ge=l(6426),je=l(75748);const ye=()=>{var e,t,l,a,r;const{Reports:s}=(0,V.V)(),n=(0,O.S)(s.getIdentifier("GetSalesReport")),o=(0,O.S)(s.getIdentifier("GetProductSalesReport")),i=(0,O.S)(s.getIdentifier("GetTopProductsReport")),d=(null===n||void 0===n||null===(e=n.result)||void 0===e?void 0:e.summary)||{},p=(null===o||void 0===o||null===(t=o.result)||void 0===t?void 0:t.products)||[],m=(null===i||void 0===i||null===(l=i.result)||void 0===l?void 0:l.top_products)||[],h=(null===n||void 0===n||null===(a=n.result)||void 0===a?void 0:a.sales)||[],v=d.average_bill_value||0,g=d.total_revenue||0,j=(d.total_bills,d.total_collected||0),y=d.total_outstanding||0,f=g>0?Math.min(g/(1.2*g)*100,100):0,A=g>0?Math.min(j/g*100,100):0,S=g>0?Math.min(y/g*100,100):0,b=p.slice(0,10).map((e=>({name:e.name||"Unknown",sales:parseFloat(e.total_revenue)||0,quantity:parseInt(e.total_quantity_sold)||0}))),_=Array.isArray(h)&&h.length>0&&null!==(r=h[0])&&void 0!==r&&r.period?h.map((e=>({period:e.period,revenue:parseFloat(e.total_sales)||0,transactions:parseInt(e.total_transactions)||0}))):[];return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:12,md:6,children:(0,ie.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,ie.jsx)(W.A,{title:"Total Revenue",value:g,prefix:"\u20b9",precision:2,valueStyle:{color:"#1890ff"}}),(0,ie.jsx)(he.A,{percent:Math.round(f),size:"small"})]})}),(0,ie.jsx)(x.A,{xs:12,md:6,children:(0,ie.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,ie.jsx)(W.A,{title:"Avg Bill Value",value:v,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}}),(0,ie.jsx)(he.A,{percent:Math.round(.8*f),size:"small",strokeColor:"#52c41a"})]})}),(0,ie.jsx)(x.A,{xs:12,md:6,children:(0,ie.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,ie.jsx)(W.A,{title:"Total Collected",value:j,prefix:"\u20b9",precision:2,valueStyle:{color:"#722ed1"}}),(0,ie.jsx)(he.A,{percent:Math.round(A),size:"small",strokeColor:"#722ed1"})]})}),(0,ie.jsx)(x.A,{xs:12,md:6,children:(0,ie.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,ie.jsx)(W.A,{title:"Outstanding",value:y,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}}),(0,ie.jsx)(he.A,{percent:Math.round(S),size:"small",strokeColor:"#fa8c16"})]})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Top Products by Revenue",style:{borderRadius:12},children:b.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(oe.E,{data:b,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"sales",fill:"#1890ff",name:"Revenue (\u20b9)"})]})}):(0,ie.jsx)(q.A,{description:"No product sales data available"})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Sales Trend",style:{borderRadius:12},children:_.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(je.b,{data:_,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"period"}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(ae.N,{type:"monotone",dataKey:"revenue",stroke:"#1890ff",name:"Revenue (\u20b9)"}),(0,ie.jsx)(ae.N,{type:"monotone",dataKey:"transactions",stroke:"#52c41a",name:"Transactions"})]})}):(0,ie.jsx)(q.A,{description:"No trend data available"})})})]}),(0,ie.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,ie.jsx)(x.A,{xs:24,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(ge.A,{})," Top 10 Products"]}),style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:m,rowKey:"_id",columns:[{title:"Rank",key:"rank",width:70,render:(e,t,l)=>(0,ie.jsxs)(ve.A,{color:0===l?"gold":1===l?"silver":2===l?"bronze":"default",children:["#",l+1]})},{title:"Product Name",dataIndex:"name",key:"name",render:(e,t)=>(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{style:{fontWeight:500},children:e}),t.VariantItem&&(0,ie.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.VariantItem.variant_name})]})},{title:"Total Revenue",dataIndex:"total_revenue",key:"total_revenue",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.total_revenue)-parseFloat(t.total_revenue)},{title:"Quantity Sold",dataIndex:"total_quantity_sold",key:"total_quantity_sold",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_quantity_sold)-parseInt(t.total_quantity_sold)},{title:"Orders",dataIndex:"total_orders",key:"total_orders",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_orders)-parseInt(t.total_orders)}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No product data available"}})})})})]})};var fe=l(10253);const Ae=()=>{var e,t;const{Reports:l}=(0,V.V)(),a=(0,O.S)(l.getIdentifier("GetCustomerSalesReport")),r=(0,O.S)(l.getIdentifier("GetTopCustomersReport")),s=(null===a||void 0===a||null===(e=a.result)||void 0===e?void 0:e.customers)||[],n=(null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.top_customers)||[],o=s.length,i=s.filter((e=>parseFloat(e.total_purchase)>0)),d=i.length>0?i.reduce(((e,t)=>e+parseFloat(t.total_purchase)),0)/i.length:0,p=i.filter((e=>parseFloat(e.total_purchase)>1.5*d)),m=(()=>{const e=[{name:"High Value",value:0,color:"#52c41a",min:1.5*d},{name:"Medium Value",value:0,color:"#1890ff",min:.7*d,max:1.5*d},{name:"Low Value",value:0,color:"#fa8c16",max:.7*d},{name:"Inactive",value:0,color:"#d9d9d9",max:0}];return s.forEach((t=>{const l=parseFloat(t.total_purchase);l>1.5*d?e[0].value++:l>=.7*d?e[1].value++:l>0?e[2].value++:e[3].value++})),e.filter((e=>e.value>0))})(),h=n.slice(0,10).map((e=>{var t;return{name:(null===(t=e.name)||void 0===t?void 0:t.substring(0,15))||"Unknown",purchase:parseFloat(e.total_purchase)||0,bills:parseInt(e.total_bills)||0}}));return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(C.A,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Total Customers",value:o})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(fe.A,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Active Customers",value:i.length,valueStyle:{color:"#52c41a"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(T.A,{style:{fontSize:32,color:"#722ed1",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"VIP Customers",value:p.length,valueStyle:{color:"#722ed1"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(D.A,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Avg Lifetime Value",value:d,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})]})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Customer Segmentation",style:{borderRadius:12},children:m.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(re.r,{children:[(0,ie.jsx)(se.F,{data:m,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,value:l}=e;return"".concat(t,": ").concat(l)},outerRadius:100,fill:"#8884d8",dataKey:"value",children:m.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:e.color},"cell-".concat(t))))}),(0,ie.jsx)(ee.m,{})]})}):(0,ie.jsx)(q.A,{description:"No customer data available"})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Top 10 Customers by Purchase",style:{borderRadius:12},children:h.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(oe.E,{data:h,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"purchase",fill:"#1890ff",name:"Purchase (\u20b9)"})]})}):(0,ie.jsx)(q.A,{description:"No customer data available"})})})]}),(0,ie.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,ie.jsx)(x.A,{xs:24,children:(0,ie.jsx)(c.A,{title:"Customer Details",style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:n,rowKey:"_id",columns:[{title:"Customer Name",dataIndex:"name",key:"name",render:(e,t)=>(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{style:{fontWeight:500},children:e||"Unknown"}),t.phone&&(0,ie.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.phone})]})},{title:"Total Purchase",dataIndex:"total_purchase",key:"total_purchase",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.total_purchase)-parseFloat(t.total_purchase)},{title:"Bills",dataIndex:"total_bills",key:"total_bills",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_bills)-parseInt(t.total_bills)},{title:"Avg Bill Value",dataIndex:"average_bill_value",key:"average_bill_value",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.average_bill_value)-parseFloat(t.average_bill_value)},{title:"Outstanding",dataIndex:"outstanding_amount",key:"outstanding_amount",render:e=>{const t=parseFloat(e||"0");return(0,ie.jsxs)(ve.A,{color:t>0?"orange":"green",children:["\u20b9",t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})},sorter:(e,t)=>parseFloat(e.outstanding_amount)-parseFloat(t.outstanding_amount)},{title:"Status",key:"status",render:(e,t)=>{const l=parseFloat(t.outstanding_amount||"0");return(0,ie.jsx)(ve.A,{color:0===l?"success":l>0?"warning":"default",children:0===l?"Clear":"Pending"})}}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No customer data available"}})})})})]})};var Se=l(69559),be=l(95240);const _e=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],Re=()=>{var e,t,l,a,r,s;const{Reports:n}=(0,V.V)(),o=(0,O.S)(n.getIdentifier("GetStockReport")),i=(0,O.S)(n.getIdentifier("GetStockExpiryReport")),d=(null===o||void 0===o||null===(e=o.result)||void 0===e?void 0:e.stock_details)||[],p=(null===o||void 0===o||null===(t=o.result)||void 0===t?void 0:t.summary)||{},m=(null===o||void 0===o||null===(l=o.result)||void 0===l?void 0:l.low_stock_items)||[],h=(null===i||void 0===i||null===(a=i.result)||void 0===a?void 0:a.expiring_stock)||[],v=(null===i||void 0===i||null===(r=i.result)||void 0===r?void 0:r.summary)||{},g=(null===i||void 0===i||null===(s=i.result)||void 0===s?void 0:s.expiry_breakdown)||{},j=parseInt(p.total_items)||0,y=parseFloat(p.total_stock_value)||0,f=parseInt(p.low_stock_count)||0,A=(parseInt(v.expired_count),parseInt(v.within_7_days_count)||0),S=new Map;d.forEach((e=>{var t,l;const a=(null===(t=e.ProductItem)||void 0===t||null===(l=t.CategoryItem)||void 0===l?void 0:l.category_name)||"Uncategorized",r=(parseInt(e.available_quantity)||0)*(parseFloat(e.buy_price)||0);if(S.has(a)){const e=S.get(a);S.set(a,{value:e.value+r,count:e.count+1})}else S.set(a,{value:r,count:1})}));const b=Array.from(S.entries()).map((e=>{let[t,l]=e;return{name:t,value:l.value,count:l.count}})),_=[{name:"Expired",count:(g.expired||[]).length,color:"#ff4d4f"},{name:"Within 7 days",count:(g.within_7_days||[]).length,color:"#ff7a45"},{name:"Within 30 days",count:(g.within_30_days||[]).length,color:"#ffa940"},{name:"Within 90 days",count:(g.within_90_days||[]).length,color:"#ffc53d"}].filter((e=>e.count>0));return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(w.A,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Total Items",value:j})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(D.A,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Stock Value",value:y,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(Se.A,{style:{fontSize:32,color:"#ff4d4f",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Low Stock Items",value:f,valueStyle:{color:"#ff4d4f"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(be.A,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Expiring Soon (7d)",value:A,valueStyle:{color:"#fa8c16"}})]})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Category-wise Stock Value",style:{borderRadius:12},children:b.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(re.r,{children:[(0,ie.jsx)(se.F,{data:b,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:l}=e;return"".concat(t,": ").concat((100*l).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:b.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:_e[t%_e.length]},"cell-".concat(t))))}),(0,ie.jsx)(ee.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,ie.jsx)(q.A,{description:"No stock data available"})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Stock Expiry Timeline",style:{borderRadius:12},children:_.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(oe.E,{data:_,children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{dataKey:"name"}),(0,ie.jsx)($.h,{}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"count",fill:"#ff7a45",name:"Items Count",children:_.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:e.color},"cell-".concat(t))))})]})}):(0,ie.jsx)(q.A,{description:"No expiry data available"})})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Se.A,{style:{color:"#ff4d4f"}})," Low Stock Items"]}),style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:m,rowKey:e=>"".concat(e.product,"-").concat(e.variant),columns:[{title:"Product",dataIndex:"product",key:"product",render:(e,t)=>(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{style:{fontWeight:500},children:e||"Unknown"}),t.variant&&(0,ie.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.variant})]})},{title:"Available",dataIndex:"available_quantity",key:"available_quantity",render:(e,t)=>(0,ie.jsxs)(ve.A,{color:"red",children:[e," ",t.available_loose_quantity>0&&"+ ".concat(t.available_loose_quantity," loose")]})}],pagination:{pageSize:5},size:"small",locale:{emptyText:"No low stock items"}})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(be.A,{style:{color:"#fa8c16"}})," Expiring Soon"]}),style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:h.slice(0,10),rowKey:"_id",columns:[{title:"Product",key:"product",render:e=>{var t,l;return(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{style:{fontWeight:500},children:(null===(t=e.ProductItem)||void 0===t?void 0:t.name)||"Unknown"}),(null===(l=e.ProductItem)||void 0===l?void 0:l.VariantItem)&&(0,ie.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:e.ProductItem.VariantItem.variant_name})]})}},{title:"Expiry Date",dataIndex:"expiry_date",key:"expiry_date",render:e=>{const t=L()(e).diff(L()(),"day"),l=t<0?"red":t<=7?"orange":"yellow";return(0,ie.jsxs)(ve.A,{color:l,children:[L()(e).format("DD MMM YYYY"),t<0&&" (Expired)",t>=0&&" (".concat(t,"d)")]})}},{title:"Qty",dataIndex:"available_quantity",key:"available_quantity"}],pagination:{pageSize:5},size:"small",locale:{emptyText:"No expiring items"}})})})]}),(0,ie.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,ie.jsx)(x.A,{xs:24,children:(0,ie.jsx)(c.A,{title:"Category-wise Stock Analysis",style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:b,rowKey:"name",columns:[{title:"Category",dataIndex:"name",key:"name"},{title:"Items Count",dataIndex:"count",key:"count",sorter:(e,t)=>e.count-t.count},{title:"Stock Value",dataIndex:"value",key:"value",render:e=>"\u20b9".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>e.value-t.value},{title:"Percentage",key:"percentage",render:(e,t)=>{const l=t.value/y*100;return(0,ie.jsx)(he.A,{percent:Math.round(l),size:"small",status:l>20?"success":"normal"})}}],pagination:!1,size:"small",locale:{emptyText:"No category data available"}})})})})]})};var ke=l(64960),Ie=l(65514),Fe=l(49866),Ce=l(53721),we=l(35258);const Te=[{name:"Rahul Verma",sales:245e3,orders:89,conversion:85,target:25e4},{name:"Anita Desai",sales:198e3,orders:76,conversion:78,target:2e5},{name:"Karan Mehta",sales:176e3,orders:65,conversion:72,target:18e4},{name:"Pooja Nair",sales:154e3,orders:58,conversion:68,target:15e4}],De=()=>(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(T.A,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Total Staff",value:24})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(ge.A,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Top Performer Sales",value:245e3,prefix:"\u20b9",valueStyle:{color:"#52c41a"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(fe.A,{style:{fontSize:32,color:"#722ed1",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Avg Conversion Rate",value:75.8,suffix:"%",valueStyle:{color:"#722ed1"}})]})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,ie.jsx)(f.A,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),(0,ie.jsx)(W.A,{title:"Target Achievement",value:91,suffix:"%",valueStyle:{color:"#fa8c16"}})]})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Staff Sales Performance",style:{borderRadius:12},children:(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(oe.E,{data:Te,layout:"vertical",children:[(0,ie.jsx)(J.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(Z.W,{type:"number"}),(0,ie.jsx)($.h,{dataKey:"name",type:"category",width:100}),(0,ie.jsx)(ee.m,{}),(0,ie.jsx)(te.s,{}),(0,ie.jsx)(le.y,{dataKey:"sales",fill:"#1890ff",name:"Sales (\u20b9)"}),(0,ie.jsx)(le.y,{dataKey:"target",fill:"#d3d3d3",name:"Target (\u20b9)"})]})})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Conversion Rate Comparison",style:{borderRadius:12},children:(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(ke.V,{data:Te,children:[(0,ie.jsx)(Ie.z,{}),(0,ie.jsx)(Fe.r,{dataKey:"name"}),(0,ie.jsx)(Ce.E,{angle:90,domain:[0,100]}),(0,ie.jsx)(we.V,{name:"Conversion %",dataKey:"conversion",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),(0,ie.jsx)(ee.m,{})]})})})})]}),(0,ie.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,ie.jsx)(x.A,{xs:24,children:(0,ie.jsx)(c.A,{title:"Detailed Staff Performance",style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:Te,columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Sales",dataIndex:"sales",key:"sales",render:e=>"\u20b9".concat(e.toLocaleString()),sorter:(e,t)=>e.sales-t.sales},{title:"Target",dataIndex:"target",key:"target",render:e=>"\u20b9".concat(e.toLocaleString())},{title:"Achievement",key:"achievement",render:(e,t)=>{const l=t.sales/t.target*100;return(0,ie.jsxs)(ve.A,{color:l>=100?"success":l>=80?"processing":"warning",children:[l.toFixed(1),"%"]})},sorter:(e,t)=>e.sales/e.target-t.sales/t.target},{title:"Orders",dataIndex:"orders",key:"orders",sorter:(e,t)=>e.orders-t.orders},{title:"Conversion Rate",dataIndex:"conversion",key:"conversion",render:e=>(0,ie.jsxs)("span",{children:[e,"%",(0,ie.jsx)(he.A,{percent:e,size:"small",style:{marginTop:4}})]}),sorter:(e,t)=>e.conversion-t.conversion},{title:"Status",key:"status",render:(e,t)=>{const l=t.sales/t.target*100;return(0,ie.jsx)(ve.A,{color:l>=100?"green":l>=90?"blue":l>=75?"orange":"red",children:l>=100?"Excellent":l>=90?"Good":l>=75?"Average":"Below Avg"})}}],pagination:!1,size:"small"})})})})]}),{Text:Pe}=n.A,Ye=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],Ge=()=>{var e,t,l;const{Reports:a}=(0,V.V)(),r=(0,O.S)(a.getIdentifier("GetPaymentCollectionReport")),s=(0,O.S)(a.getIdentifier("GetOutstandingPaymentsReport")),n=(null===r||void 0===r||null===(e=r.result)||void 0===e?void 0:e.summary)||{},o=n.payment_mode_breakdown||[],i=(null===s||void 0===s||null===(t=s.result)||void 0===t?void 0:t.outstanding_bills)||[],d=(null===s||void 0===s||null===(l=s.result)||void 0===l?void 0:l.summary)||{},p=parseFloat(n.total_collected)||0,m=parseFloat(d.total_outstanding_amount)||0,h=parseInt(d.total_outstanding_bills)||0,v=p>0&&m>0?(p/(p+m)*100).toFixed(2):0,g=o.map((e=>({method:e.payment_mode||"Cash",amount:parseFloat(e.total_amount)||0,transactions:parseInt(e.transaction_count)||0}))),j=g.map((e=>(0,E.A)((0,E.A)({},e),{},{percentage:p>0?(e.amount/p*100).toFixed(1):0}))),y=i.filter((e=>{const t=L()(e.date);return L()().diff(t,"day")>30})).reduce(((e,t)=>e+parseFloat(t.outstanding_amount||0)),0);return(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(u.A,{gutter:[16,16],children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#f6ffed"},children:(0,ie.jsx)(W.A,{title:"Total Collected",value:p,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#fff7e6"},children:(0,ie.jsx)(W.A,{title:"Outstanding",value:m,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#fff1f0"},children:(0,ie.jsx)(W.A,{title:"Overdue (>30d)",value:y,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f"}})})}),(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#e6f7ff"},children:(0,ie.jsx)(W.A,{title:"Collection Rate",value:v,suffix:"%",valueStyle:{color:"#1890ff"}})})})]}),(0,ie.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Payment Method Distribution",style:{borderRadius:12},children:g.length>0?(0,ie.jsx)(Q.u,{width:"100%",height:300,children:(0,ie.jsxs)(re.r,{children:[(0,ie.jsx)(se.F,{data:g,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{method:t,percentage:l}=e;return"".concat(t,": ").concat(l,"%")},outerRadius:100,fill:"#8884d8",dataKey:"amount",children:g.map(((e,t)=>(0,ie.jsx)(ne.f,{fill:Ye[t%Ye.length]},"cell-".concat(t))))}),(0,ie.jsx)(ee.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,ie.jsx)(q.A,{description:"No payment method data available"})})}),(0,ie.jsx)(x.A,{xs:24,lg:12,children:(0,ie.jsx)(c.A,{title:"Payment Method Breakdown",style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:j,rowKey:"method",columns:[{title:"Method",dataIndex:"method",key:"method"},{title:"Amount",dataIndex:"amount",key:"amount",render:e=>"\u20b9".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))},{title:"Transactions",dataIndex:"transactions",key:"transactions"},{title:"Share",dataIndex:"percentage",key:"percentage",render:e=>(0,ie.jsxs)("span",{children:[e,"%",(0,ie.jsx)(he.A,{percent:parseFloat(e.toString()),size:"small",style:{marginTop:4}})]})}],pagination:!1,size:"small",locale:{emptyText:"No payment data available"}})})})]}),(0,ie.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,ie.jsx)(x.A,{xs:24,children:(0,ie.jsx)(c.A,{title:"Outstanding Receivables (".concat(h," Bills)"),style:{borderRadius:12},children:(0,ie.jsx)(xe.A,{dataSource:i,rowKey:"_id",columns:[{title:"Invoice No",dataIndex:"invoice_no",key:"invoice_no",render:e=>(0,ie.jsx)(Pe,{strong:!0,children:e})},{title:"Customer",key:"customer",render:e=>{var t,l;return(0,ie.jsxs)("div",{children:[(0,ie.jsx)("div",{children:(null===(t=e.customerDetails)||void 0===t?void 0:t.name)||"Unknown"}),(null===(l=e.customerDetails)||void 0===l?void 0:l.phone)&&(0,ie.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:e.customerDetails.phone})]})}},{title:"Bill Date",dataIndex:"date",key:"date",render:e=>L()(e).format("DD MMM YYYY")},{title:"Total Amount",dataIndex:"total_amount",key:"total_amount",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))},{title:"Paid",dataIndex:"paid_amount",key:"paid_amount",render:e=>(0,ie.jsxs)(Pe,{style:{color:"#52c41a"},children:["\u20b9",parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})},{title:"Outstanding",dataIndex:"outstanding_amount",key:"outstanding_amount",render:e=>(0,ie.jsxs)(Pe,{strong:!0,style:{color:"#ff4d4f"},children:["\u20b9",parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),sorter:(e,t)=>parseFloat(e.outstanding_amount)-parseFloat(t.outstanding_amount)},{title:"Days Old",key:"daysOld",render:e=>{const t=L()().diff(L()(e.date),"day");return(0,ie.jsxs)(ve.A,{color:t>60?"red":t>30?"orange":"default",children:[t," days"]})},sorter:(e,t)=>L()().diff(L()(e.date),"day")-L()().diff(L()(t.date),"day")},{title:"Priority",key:"priority",render:(e,t)=>{const l=parseFloat(t.outstanding_amount||0),a=L()().diff(L()(t.date),"day"),r=l>5e3&&a>30?"High":l>2e3||a>45?"Medium":"Low",s="High"===r?"red":"Medium"===r?"orange":"default";return(0,ie.jsx)(ve.A,{color:s,children:r})}}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No outstanding bills"}})})})})]})},{Title:Le,Text:ze}=n.A,{RangePicker:Me}=o.A,{Option:Oe}=i.A,Ee=()=>{const[e,t]=(0,a.useState)([L()().subtract(30,"days"),L()()]),[l,n]=(0,a.useState)("all"),[o,G]=(0,a.useState)("all"),[W,q]=(0,a.useState)("all"),[U,H]=(0,a.useState)("1"),[Q]=d.A.useForm(),X=(0,a.useMemo)((()=>(0,r.HW)()),[]),J=s.A.getItem("scope"),Z=(null===J||void 0===J?void 0:J.userType)||(null===X||void 0===X?void 0:X.user_type)||(null===X||void 0===X?void 0:X.usertype)||(null===X||void 0===X?void 0:X.user_role)||"",$="superadmin"===Z.toLowerCase(),ee="tenant"===Z.toLowerCase(),te="organisationuser"===Z.toLowerCase(),le="branchuser"===Z.toLowerCase(),{getEntityApi:ae}=(0,M.p)(),re=ae("Tenant"),se=ae("Organisations"),ne=ae("Braches"),{items:oe}=(0,O.S)(re.getIdentifier("GetAll")),{items:de}=(0,O.S)(se.getIdentifier("GetAll")),{items:ce}=(0,O.S)(ne.getIdentifier("GetAll"));(0,a.useEffect)((()=>{$?re("GetAll"):ee?se("GetAll"):te&&ne("GetAll")}),[$,ee,te,le]);const xe=(0,a.useMemo)((()=>{var e;return(null===oe||void 0===oe||null===(e=oe.result)||void 0===e?void 0:e.map((e=>({label:e.organization_name||e.contact_name||e.username,value:e._id}))))||[]}),[oe]),pe=(0,a.useMemo)((()=>{let e=(null===de||void 0===de?void 0:de.result)||[];return $&&"all"!==l&&(e=e.filter((e=>e.tenant_id===l))),e.map((e=>({label:e.org_name||e.name,value:e._id})))}),[de,l,$]),he=(0,a.useMemo)((()=>{let e=(null===ce||void 0===ce?void 0:ce.result)||[];return"all"!==o&&(e=e.filter((e=>e.organisation_id===o||e.org_id===o))),e.map((e=>({label:e.branch_name||e.name,value:e._id})))}),[ce,o]),{loading:ve,reportCache:ge,fetchReportData:je}=(e=>{const{activeTab:t,selectedTenant:l,selectedOrganisation:r,selectedBranch:s,dateRange:n}=e,[o,i]=(0,a.useState)(!1),[d,c]=(0,a.useState)({}),{Reports:u}=(0,V.V)(),x=(0,O.S)(u.getIdentifier("GetSalesReport")),p=(0,O.S)(u.getIdentifier("GetProductSalesReport")),m=(0,O.S)(u.getIdentifier("GetCustomerSalesReport")),h=(0,O.S)(u.getIdentifier("GetStockReport")),v=(0,O.S)(u.getIdentifier("GetProfitLossReport")),g=(0,O.S)(u.getIdentifier("GetOutstandingPaymentsReport")),j=(0,O.S)(u.getIdentifier("GetPaymentCollectionReport")),y=(0,O.S)(u.getIdentifier("GetExpenseReport")),f=(0,O.S)(u.getIdentifier("GetGSTReport")),A=(0,O.S)(u.getIdentifier("GetTopProductsReport")),S=(0,O.S)(u.getIdentifier("GetTopCustomersReport")),b=(0,O.S)(u.getIdentifier("GetStockExpiryReport"));(0,a.useEffect)((()=>{var e,a;const o=K(t),i="".concat(o,"_").concat(l,"_").concat(r,"_").concat(s,"_").concat(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),"_").concat(null===n||void 0===n||null===(a=n[1])||void 0===a?void 0:a.format("YYYY-MM-DD"));let d=null;switch(o){case"sales":(null!==x&&void 0!==x&&x.result||null!==p&&void 0!==p&&p.result||null!==A&&void 0!==A&&A.result)&&(d={salesReport:null===x||void 0===x?void 0:x.result,productSales:null===p||void 0===p?void 0:p.result,topProducts:null===A||void 0===A?void 0:A.result});break;case"customer":(null!==m&&void 0!==m&&m.result||null!==S&&void 0!==S&&S.result)&&(d={customerSales:null===m||void 0===m?void 0:m.result,topCustomers:null===S||void 0===S?void 0:S.result});break;case"inventory":(null!==h&&void 0!==h&&h.result||null!==b&&void 0!==b&&b.result)&&(d={stock:null===h||void 0===h?void 0:h.result,expiry:null===b||void 0===b?void 0:b.result});break;case"financial":(null!==v&&void 0!==v&&v.result||null!==y&&void 0!==y&&y.result||null!==f&&void 0!==f&&f.result)&&(d={profitLoss:null===v||void 0===v?void 0:v.result,expenses:null===y||void 0===y?void 0:y.result,gst:null===f||void 0===f?void 0:f.result});break;case"payment":(null!==j&&void 0!==j&&j.result||null!==g&&void 0!==g&&g.result)&&(d={collections:null===j||void 0===j?void 0:j.result,outstanding:null===g||void 0===g?void 0:g.result});break;case"comprehensive":(null!==x&&void 0!==x&&x.result||null!==v&&void 0!==v&&v.result)&&(d={sales:null===x||void 0===x?void 0:x.result,profitLoss:null===v||void 0===v?void 0:v.result,customers:null===m||void 0===m?void 0:m.result,stock:null===h||void 0===h?void 0:h.result,payments:null===j||void 0===j?void 0:j.result})}d&&c((e=>(0,E.A)((0,E.A)({},e),{},{[i]:d})))}),[t,l,r,s,n,x,p,m,h,v,g,j,y,f,A,S,b]);const _=(0,a.useCallback)((()=>{var e,a,o,c;const x=K(t),p="".concat(x,"_").concat(l,"_").concat(r,"_").concat(s,"_").concat(null===n||void 0===n||null===(e=n[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),"_").concat(null===n||void 0===n||null===(a=n[1])||void 0===a?void 0:a.format("YYYY-MM-DD"));if(d[p])return void B.Ay.success("Report data loaded from cache");i(!0);const m={start_date:null===n||void 0===n||null===(o=n[0])||void 0===o?void 0:o.format("YYYY-MM-DD"),end_date:null===n||void 0===n||null===(c=n[1])||void 0===c?void 0:c.format("YYYY-MM-DD")};try{switch(x){case"sales":u("GetSalesReport",m),u("GetProductSalesReport",m),u("GetTopProductsReport",(0,E.A)((0,E.A)({},m),{},{limit:10}));break;case"customer":u("GetCustomerSalesReport",m),u("GetTopCustomersReport",(0,E.A)((0,E.A)({},m),{},{limit:10}));break;case"inventory":u("GetStockReport",{}),u("GetStockExpiryReport",{days_threshold:30});break;case"financial":u("GetProfitLossReport",m),u("GetExpenseReport",m),u("GetGSTReport",m);break;case"payment":u("GetPaymentCollectionReport",m),u("GetOutstandingPaymentsReport",{});break;case"comprehensive":u("GetSalesReport",m),u("GetProfitLossReport",m),u("GetCustomerSalesReport",m),u("GetStockReport",{}),u("GetPaymentCollectionReport",m)}setTimeout((()=>{i(!1)}),500)}catch(h){i(!1),B.Ay.error("Failed to fetch report data"),console.error("Report fetch error:",h)}}),[t,l,r,s,n,d,u]);return{loading:o,reportCache:d,fetchReportData:_,salesReportData:x,productSalesData:p,customerSalesData:m,stockReportData:h,profitLossData:v,outstandingPaymentsData:g,paymentCollectionData:j,expenseData:y,gstData:f,topProductsData:A,topCustomersData:S,stockExpiryData:b}})({activeTab:U,selectedTenant:l,selectedOrganisation:o,selectedBranch:W,dateRange:e,isSuperAdmin:$}),{exportModalVisible:fe,setExportModalVisible:Se,exportFormat:be,setExportFormat:_e,exportOptions:ke,setExportOptions:Ie,handleExport:Fe,handlePrint:Ce}=N({activeTab:U,reportCache:ge,selectedTenant:l,selectedOrganisation:o,selectedBranch:W,dateRange:e,tenantOptions:xe,organisationOptions:pe,branchOptions:he,isSuperAdmin:$,isTenant:ee});return(0,a.useEffect)((()=>{const e=e=>{if(e.ctrlKey)switch(e.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":e.preventDefault(),H(e.key);break;case"r":case"R":e.preventDefault(),je();break;case"e":case"E":e.preventDefault(),Se(!0);break;case"p":case"P":e.preventDefault(),Ce()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[je,Ce,Se]),(0,a.useEffect)((()=>{je()}),[je]),(0,ie.jsxs)("div",{className:z,children:[(0,ie.jsxs)(c.A,{style:{marginBottom:24,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,ie.jsxs)(u.A,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[(0,ie.jsxs)(x.A,{children:[(0,ie.jsxs)(Le,{level:2,style:{margin:0,color:"#1890ff"},children:[(0,ie.jsx)(f.A,{style:{marginRight:8}}),"Advanced Business Reports"]}),(0,ie.jsx)(ze,{type:"secondary",children:"Comprehensive analytics & insights with advanced reporting"})]}),(0,ie.jsx)(x.A,{children:(0,ie.jsxs)(p.A,{wrap:!0,children:[(0,ie.jsx)(m.A,{title:"Refresh Data (Ctrl+R)",children:(0,ie.jsx)(h.Ay,{icon:(0,ie.jsx)(A.A,{}),onClick:je,loading:ve,children:"Refresh"})}),(0,ie.jsx)(m.A,{title:"Export Report (Ctrl+E)",children:(0,ie.jsx)(h.Ay,{icon:(0,ie.jsx)(S.A,{}),onClick:()=>Se(!0),type:"primary",children:"Export"})}),(0,ie.jsx)(m.A,{title:"Print Report (Ctrl+P)",children:(0,ie.jsx)(h.Ay,{icon:(0,ie.jsx)(b.A,{}),onClick:Ce,children:"Print"})}),(0,ie.jsx)(m.A,{title:"Settings",children:(0,ie.jsx)(h.Ay,{icon:(0,ie.jsx)(_.A,{}),type:"dashed"})})]})})]}),(0,ie.jsxs)(u.A,{gutter:16,align:"middle",children:[(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(p.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,ie.jsxs)(ze,{strong:!0,children:[(0,ie.jsx)(R.A,{})," Date Range:"]}),(0,ie.jsx)(Me,{value:e,onChange:e=>t(e),style:{width:"100%"}})]})}),$&&(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(p.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,ie.jsx)(ze,{strong:!0,children:"Tenant:"}),(0,ie.jsxs)(i.A,{value:l,onChange:e=>{n(e),G("all"),q("all"),"all"!==e&&se("GetAll",{tenant_id:e})},style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var l;return String(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},children:[(0,ie.jsx)(Oe,{value:"all",children:"All Tenants"}),xe.map((e=>(0,ie.jsx)(Oe,{value:e.value,children:e.label},e.value)))]})]})}),($||ee)&&!te&&!le&&(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(p.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,ie.jsx)(ze,{strong:!0,children:"Organisation:"}),(0,ie.jsxs)(i.A,{value:o,onChange:e=>{G(e),q("all"),"all"!==e&&ne("GetAll",{organisation_id:e})},style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var l;return String(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},disabled:$&&"all"===l,placeholder:$&&"all"===l?"Select tenant first":"Select organisation",children:[(0,ie.jsx)(Oe,{value:"all",children:"All Organisations"}),pe.map((e=>(0,ie.jsx)(Oe,{value:e.value,children:e.label},e.value)))]})]})}),($||ee||te)&&!le&&(0,ie.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,ie.jsxs)(p.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,ie.jsx)(ze,{strong:!0,children:"Branch:"}),(0,ie.jsxs)(i.A,{value:W,onChange:q,style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var l;return String(null!==(l=null===t||void 0===t?void 0:t.label)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())},disabled:($||ee)&&"all"===o,placeholder:($||ee)&&"all"===o?"Select organisation first":"Select branch",children:[(0,ie.jsx)(Oe,{value:"all",children:"All Branches"}),he.map((e=>(0,ie.jsx)(Oe,{value:e.value,children:e.label},e.value)))]})]})}),(0,ie.jsx)(x.A,{xs:24,sm:24,md:6,children:(0,ie.jsx)(h.Ay,{type:"primary",icon:(0,ie.jsx)(k.A,{}),onClick:je,loading:ve,style:{marginTop:22,width:"100%"},size:"large",children:"Apply Filters"})})]})]}),(0,ie.jsx)(v.A,{activeKey:U,onChange:H,type:"card",size:"large",style:{backgroundColor:"#fff",padding:16,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},items:[{key:"1",label:(0,ie.jsx)(m.A,{title:"Comprehensive Overview (Ctrl+1)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(f.A,{})," Comprehensive"]})}),children:(0,ie.jsx)(ue,{})},{key:"2",label:(0,ie.jsx)(m.A,{title:"Financial Analysis (Ctrl+2)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(I.A,{})," Financial"]})}),children:(0,ie.jsx)(me,{})},{key:"3",label:(0,ie.jsx)(m.A,{title:"Sales Analytics (Ctrl+3)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(F.A,{})," Sales"]})}),children:(0,ie.jsx)(ye,{})},{key:"4",label:(0,ie.jsx)(m.A,{title:"Customer Analytics (Ctrl+4)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(C.A,{})," Customers"]})}),children:(0,ie.jsx)(Ae,{})},{key:"5",label:(0,ie.jsx)(m.A,{title:"Inventory Report (Ctrl+5)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(w.A,{})," Inventory"]})}),children:(0,ie.jsx)(Re,{})},{key:"6",label:(0,ie.jsx)(m.A,{title:"Staff Performance (Ctrl+6)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(T.A,{})," Staff"]})}),children:(0,ie.jsx)(De,{})},{key:"7",label:(0,ie.jsx)(m.A,{title:"Payment Analysis (Ctrl+7)",children:(0,ie.jsxs)("span",{children:[(0,ie.jsx)(D.A,{})," Payments"]})}),children:(0,ie.jsx)(Ge,{})}]}),(0,ie.jsx)(g.A,{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(S.A,{})," Export Report"]}),open:fe,onCancel:()=>Se(!1),onOk:Fe,okText:"Export",cancelText:"Cancel",width:500,children:(0,ie.jsxs)(d.A,{form:Q,layout:"vertical",children:[(0,ie.jsx)(d.A.Item,{label:"Export Format",children:(0,ie.jsxs)(j.Ay.Group,{value:be,onChange:e=>_e(e.target.value),buttonStyle:"solid",children:[(0,ie.jsxs)(j.Ay.Button,{value:"pdf",children:[(0,ie.jsx)(P.A,{})," PDF"]}),(0,ie.jsxs)(j.Ay.Button,{value:"excel",children:[(0,ie.jsx)(Y.A,{})," Excel"]}),(0,ie.jsx)(j.Ay.Button,{value:"csv",children:"CSV"})]})}),(0,ie.jsx)(d.A.Item,{label:"Include in Export",children:(0,ie.jsx)(y.A.Group,{value:ke,onChange:e=>Ie(e),style:{width:"100%"},children:(0,ie.jsxs)(u.A,{children:[(0,ie.jsx)(x.A,{span:24,children:(0,ie.jsx)(y.A,{value:"summary",children:"Summary Statistics"})}),(0,ie.jsx)(x.A,{span:24,children:(0,ie.jsx)(y.A,{value:"charts",children:"Charts & Graphs"})}),(0,ie.jsx)(x.A,{span:24,children:(0,ie.jsx)(y.A,{value:"tables",children:"Detailed Tables"})}),(0,ie.jsx)(x.A,{span:24,children:(0,ie.jsx)(y.A,{value:"trends",children:"Trend Analysis"})})]})})}),(0,ie.jsx)(d.A.Item,{label:"Date Range",children:(0,ie.jsx)(Me,{style:{width:"100%"},value:e})})]})})]})}}}]);
//# sourceMappingURL=719.f11fd56c.chunk.js.map