{"version":3,"file":"static/js/619.eacd7d59.chunk.js","mappings":"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","sources":["helpers/constants.ts","services/api/apiService.ts","services/electronBackend.ts","services/api/index.ts","pages/Permissions/PermissionManagement.tsx","../node_modules/@ant-design/icons-svg/es/asn/SaveOutlined.js","../node_modules/@ant-design/icons/es/icons/SaveOutlined.js"],"sourcesContent":["export const API_ERROR_CODES = {\r\n  OK: 200,\r\n  CREATED: 201,\r\n  UPDATED: 202,\r\n  DELETED: 203,\r\n  DUPLICATE: 409,\r\n  BAD_REQUEST: 400,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  SERVICE_UNAVAILABLE: 503,\r\n};\r\n\r\nexport const EMPTY_STRING = \"\";\r\n\r\n","import axios, { AxiosInstance, AxiosError, InternalAxiosRequestConfig } from 'axios';\r\nimport { message } from 'antd';\r\nimport { API_ERROR_CODES } from '../../helpers/constants';\r\nimport { getAuthToken, getRefreshToken, setAccessToken, setRefreshToken, clearAuthData } from '../../helpers/auth';\r\nimport { getCSRFToken } from '../../helpers/csrfToken';\r\n\r\nexport interface ApiResponse<T> {\r\n    statusCode: number;\r\n    result:any\r\n    message: string;\r\n    data?: T; // Optional, only present on success\r\n    pagination:{};\r\n}\r\n\r\nexport interface ApiRequest {\r\n    method: string;\r\n    endpoint: string;\r\n    data?: any; // Optional, only present on success\r\n    signal?: AbortSignal; // For request cancellation\r\n}\r\n\r\nclass APIService {\r\n    private api: AxiosInstance;\r\n    private isRefreshing: boolean = false;\r\n    private refreshSubscribers: Array<(token: string) => void> = [];\r\n    private hasShownSessionExpiredMessage: boolean = false;\r\n\r\n    constructor(baseURL: string) {\r\n        this.api = axios.create({\r\n            baseURL,\r\n            timeout: 60000, // 60 seconds timeout for slow connections\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // Token header will be set by the interceptor\r\n            },\r\n        });\r\n\r\n        // Add request interceptor for token and CSRF\r\n        this.api.interceptors.request.use((config) => {\r\n            const token = getAuthToken();\r\n            if (token) {\r\n                config.headers['Token'] = token;\r\n                // Also add Authorization header for modern APIs\r\n                config.headers['Authorization'] = `Bearer ${token}`;\r\n            }\r\n            \r\n            // Add CSRF token for state-changing requests\r\n            if (config.method && ['post', 'put', 'patch', 'delete'].includes(config.method.toLowerCase())) {\r\n                const csrfToken = getCSRFToken();\r\n                config.headers['X-CSRF-Token'] = csrfToken;\r\n            }\r\n            \r\n            return config;\r\n        });\r\n\r\n        // Add response interceptor for automatic token refresh on 401\r\n        this.api.interceptors.response.use(\r\n            response => response,\r\n            async (error: AxiosError) => {\r\n                const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n                \r\n                if (error.response && error.response.status === 401 && !originalRequest._retry) {\r\n                    const errorMessage = (error.response.data as any)?.exception || \r\n                                       (error.response.data as any)?.message || '';\r\n                    \r\n                    // Check if it's a permission denied error (not token expiration)\r\n                    if (errorMessage.toLowerCase().includes('access denied') || \r\n                        errorMessage.toLowerCase().includes('insufficient permissions') ||\r\n                        errorMessage.toLowerCase().includes('permission')) {\r\n                        // Permission denied - don't clear auth, just show error\r\n                        message.error({\r\n                            content: 'You do not have permission to perform this action.',\r\n                            duration: 5,\r\n                        });\r\n                        return Promise.reject(error);\r\n                    }\r\n                    \r\n                    // Token expired - try to refresh\r\n                    if (this.isRefreshing) {\r\n                        // If already refreshing, queue this request\r\n                        return new Promise((resolve) => {\r\n                            this.refreshSubscribers.push((token: string) => {\r\n                                if (originalRequest.headers) {\r\n                                    originalRequest.headers['Token'] = token;\r\n                                    originalRequest.headers['Authorization'] = `Bearer ${token}`;\r\n                                }\r\n                                resolve(this.api.request(originalRequest));\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    originalRequest._retry = true;\r\n                    this.isRefreshing = true;\r\n\r\n                    try {\r\n                        const newAccessToken = await this.refreshAccessToken();\r\n                        \r\n                        if (newAccessToken) {\r\n                            // Update token in original request\r\n                            if (originalRequest.headers) {\r\n                                originalRequest.headers['Token'] = newAccessToken;\r\n                                originalRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\r\n                            }\r\n                            \r\n                            // Process queued requests\r\n                            this.refreshSubscribers.forEach(callback => callback(newAccessToken));\r\n                            this.refreshSubscribers = [];\r\n                            \r\n                            // Retry original request\r\n                            return this.api.request(originalRequest);\r\n                        }\r\n                    } catch (refreshError) {\r\n                        // Refresh failed - logout user\r\n                        console.error('Token refresh failed:', refreshError);\r\n                        \r\n                        // Show error message only once to avoid multiple toasts\r\n                        if (!this.hasShownSessionExpiredMessage) {\r\n                            this.hasShownSessionExpiredMessage = true;\r\n                            message.error('Your session has expired. Please login again.');\r\n                        }\r\n                        \r\n                        clearAuthData();\r\n                        window.location.href = '#/billing_login';\r\n                        return Promise.reject(refreshError);\r\n                    } finally {\r\n                        this.isRefreshing = false;\r\n                    }\r\n                }\r\n                \r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    // Refresh access token using refresh token\r\n    private async refreshAccessToken(): Promise<string | null> {\r\n        const refreshToken = getRefreshToken();\r\n        \r\n        if (!refreshToken) {\r\n            console.warn('No refresh token available');\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                `${this.api.defaults.baseURL}/auth/refresh-token`,\r\n                { refreshToken },\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (response.data?.statusCode === 200) {\r\n                const { accessToken, refreshToken: newRefreshToken } = response.data.result;\r\n                \r\n                // Store new tokens\r\n                setAccessToken(accessToken);\r\n                if (newRefreshToken) {\r\n                    setRefreshToken(newRefreshToken);\r\n                }\r\n                \r\n                return accessToken;\r\n            }\r\n            \r\n            return null;\r\n        } catch (error) {\r\n            console.error('Failed to refresh access token:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // Method to send requests to the API\r\n    async send<T>(request:ApiRequest): Promise<ApiResponse<T | null>> {\r\n        try {\r\n            const { data } = await this.api.request<ApiResponse<T>>({\r\n                method: request.method,\r\n                url: request.endpoint,\r\n                data: request.data,\r\n                signal: request.signal, // Add abort signal for cancellation\r\n            });\r\n            return this.handleResponse(data);\r\n        } catch (error) {\r\n            // Check if request was cancelled\r\n            if (axios.isAxiosError(error) && error.name === 'CanceledError') {\r\n                return {\r\n                    statusCode: 0,\r\n                    message: 'Request cancelled',\r\n                    result: null,\r\n                    pagination: {}\r\n                };\r\n            }\r\n            return this.handleError<T>(error);\r\n        }\r\n    }\r\n\r\n    // Handle successful responses\r\n    private handleResponse<T>(response: ApiResponse<T>): ApiResponse<T> {\r\n        // Check for 401 status code in response body (some APIs return 401 in body, not HTTP status)\r\n        if (response.statusCode === 401) {\r\n            const errorMessage = (response as any).exception || response.message || '';\r\n            \r\n            // Check if it's a permission denied error (not token expiration)\r\n            if (errorMessage.toLowerCase().includes('access denied') || \r\n                errorMessage.toLowerCase().includes('insufficient permissions') ||\r\n                errorMessage.toLowerCase().includes('permission')) {\r\n                // Permission denied - don't clear auth, just show error\r\n                message.error({\r\n                    content: 'You do not have permission to perform this action.',\r\n                    duration: 5,\r\n                });\r\n                return response;\r\n            }\r\n            \r\n            // Token expired - logout user\r\n            if (!this.hasShownSessionExpiredMessage) {\r\n                this.hasShownSessionExpiredMessage = true;\r\n                message.error('Your session has expired. Please login again.');\r\n            }\r\n            \r\n            clearAuthData();\r\n            window.location.href = '#/billing_login';\r\n            return response;\r\n        }\r\n        \r\n        return {\r\n            statusCode: response.statusCode,\r\n            message: response.message,\r\n            result: response.result,\r\n            pagination :response.pagination\r\n        };\r\n    }\r\n\r\n    // Handle errors from Axios\r\n    private handleError<T>(error: unknown): ApiResponse<T | null> {\r\n        let errorMessage = 'API call failed';\r\n        let statusCode = API_ERROR_CODES.INTERNAL_SERVER_ERROR;\r\n\r\n        if (axios.isAxiosError(error)) {\r\n            if (error.response) {\r\n                // The request was made and the server responded with a statusCode code\r\n                statusCode = error.response.status;\r\n                errorMessage = error.response.data?.message || 'An error occurred';\r\n            } else if (error.request) {\r\n                // Network error or timeout\r\n                errorMessage = 'No response received from server';\r\n                statusCode = API_ERROR_CODES.SERVICE_UNAVAILABLE ?? 503;\r\n            } else {\r\n                // Something happened in setting up the request\r\n                errorMessage = error.message;\r\n            }\r\n        }\r\n\r\n        return {\r\n            statusCode,\r\n            message: errorMessage,\r\n            result: null,\r\n            pagination: {}\r\n        };\r\n    }\r\n}\r\n\r\nexport default APIService;\r\n","/**\r\n * Electron Backend Service\r\n * Handles communication between the React frontend and the embedded backend server\r\n */\r\n\r\n// Using environment variables directly\r\n\r\n// Type declarations are in src/hooks/useElectron.ts\r\n\r\nclass ElectronBackendService {\r\n  private backendUrl: string | null = null;\r\n  private isElectron: boolean = false;\r\n\r\n  constructor() {\r\n    this.isElectron = this.checkIfElectron();\r\n    this.initializeBackendUrl();\r\n  }\r\n\r\n  /**\r\n   * Check if the app is running in Electron\r\n   */\r\n  private checkIfElectron(): boolean {\r\n    return !!(window && window.electronAPI);\r\n  }\r\n\r\n  /**\r\n   * Initialize the backend URL\r\n   */\r\n  private async initializeBackendUrl(): Promise<void> {\r\n    if (this.isElectron && window.electronAPI) {\r\n      try {\r\n        this.backendUrl = await window.electronAPI.getBackendUrl();\r\n      } catch (error) {\r\n        console.error('Failed to get backend URL from Electron:', error);\r\n        // Fallback to environment variable or default\r\n        this.backendUrl = 'http://localhost:8247'; // Force your port\r\n      }\r\n    } else {\r\n      // If not in Electron, use environment variable or fallback\r\n      this.backendUrl = 'http://localhost:8247'; // Force your port\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the backend base URL\r\n   */\r\n  public async getBackendUrl(): Promise<string> {\r\n    if (!this.backendUrl) {\r\n      await this.initializeBackendUrl();\r\n    }\r\n    return this.backendUrl || process.env.REACT_APP_API_URL || 'http://localhost:8247';\r\n  }\r\n\r\n  /**\r\n   * Get the full API URL with path\r\n   */\r\n  public async getApiUrl(path: string = ''): Promise<string> {\r\n    const baseUrl = await this.getBackendUrl();\r\n    const cleanPath = path.startsWith('/') ? path : `/${path}`;\r\n    return `${baseUrl}/api${cleanPath}`;\r\n  }\r\n\r\n  /**\r\n   * Check if running in Electron\r\n   */\r\n  public isElectronApp(): boolean {\r\n    return this.isElectron;\r\n  }\r\n\r\n  /**\r\n   * Wait for backend to be ready\r\n   */\r\n  public async waitForBackend(timeout: number = 30000): Promise<boolean> {\r\n    const startTime = Date.now();\r\n    const backendUrl = await this.getBackendUrl();\r\n\r\n    while (Date.now() - startTime < timeout) {\r\n      try {\r\n        const response = await fetch(`${backendUrl}/api/health`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          return true;\r\n        }\r\n      } catch (error) {\r\n        // Backend not ready yet, continue waiting\r\n      }\r\n\r\n      // Wait 500ms before trying again\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get app version (Electron only)\r\n   */\r\n  public async getAppVersion(): Promise<string> {\r\n    if (this.isElectron && window.electronAPI) {\r\n      try {\r\n        return await window.electronAPI.getAppVersion();\r\n      } catch (error) {\r\n        console.error('Failed to get app version:', error);\r\n        return 'Unknown';\r\n      }\r\n    }\r\n    return 'Web Version';\r\n  }\r\n\r\n  /**\r\n   * Get platform info (Electron only)\r\n   */\r\n  public getPlatform(): string {\r\n    if (this.isElectron && window.electronAPI) {\r\n      return window.electronAPI.platform;\r\n    }\r\n    return 'web';\r\n  }\r\n}\r\n\r\n// Create and export a singleton instance\r\nconst electronBackendService = new ElectronBackendService();\r\nexport default electronBackendService;\r\n\r\n// Export the class for testing purposes\r\nexport { ElectronBackendService };\r\n","import APIService, { ApiRequest } from \"./apiService\";\r\nimport electronBackendService from \"../electronBackend\";\r\n\r\n// Initialize API service with dynamic backend URL\r\nlet apiService: APIService | null = null;\r\n\r\nconst initializeApiService = async (): Promise<APIService> => {\r\n  if (!apiService) {\r\n    let baseURL: string;\r\n    \r\n    if (electronBackendService.isElectronApp()) {\r\n      // Running in Electron - use external backend\r\n      baseURL = await electronBackendService.getBackendUrl();\r\n      \r\n      // Skip health check - backend URL configured in .env\r\n    } else {\r\n      // Running in browser - use environment variable or fallback\r\n      baseURL = process.env.REACT_APP_API_URL || \"http://localhost:8247/\";\r\n    }\r\n    \r\n    apiService = new APIService(baseURL);\r\n  }\r\n  \r\n  return apiService;\r\n};\r\n\r\nconst requestBackServer = async (request: ApiRequest) => {\r\n  const service = await initializeApiService();\r\n  return await service.send<any>(request);\r\n};\r\n\r\nexport default requestBackServer;\r\n\r\n// Export for direct access if needed\r\nexport { initializeApiService };\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Table,\r\n  Card,\r\n  Button,\r\n  Select,\r\n  message,\r\n  Spin,\r\n  Checkbox,\r\n  Space,\r\n  Typography,\r\n  Tooltip,\r\n  Tag,\r\n} from 'antd';\r\nimport {\r\n  SaveOutlined,\r\n  ReloadOutlined,\r\n  CheckCircleOutlined,\r\n  CloseCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport requestBackServer from '../../services/api';\r\nimport { RESOURCES } from '../../helpers/permissionHelper';\r\nimport './PermissionManagement.css';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Option } = Select;\r\n\r\ninterface Role {\r\n  _id: string;\r\n  name: string;\r\n  roles_type: string;\r\n  description?: string;\r\n}\r\n\r\ninterface Permission {\r\n  resource: string;\r\n  can_create: boolean;\r\n  can_read: boolean;\r\n  can_update: boolean;\r\n  can_delete: boolean;\r\n  allowed_menu_keys?: string[];\r\n}\r\n\r\ninterface PermissionsMap {\r\n  [resource: string]: Permission;\r\n}\r\n\r\nconst PermissionManagement: React.FC = () => {\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [selectedRoleId, setSelectedRoleId] = useState<string>('');\r\n  const [permissions, setPermissions] = useState<PermissionsMap>({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // Fetch all roles on component mount\r\n  useEffect(() => {\r\n    fetchRoles();\r\n  }, []);\r\n\r\n  // Fetch permissions when role is selected\r\n  useEffect(() => {\r\n    if (selectedRoleId) {\r\n      fetchRolePermissions(selectedRoleId);\r\n    }\r\n  }, [selectedRoleId]);\r\n\r\n  const fetchRoles = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await requestBackServer({\r\n        method: 'GET',\r\n        endpoint: '/roles',\r\n      });\r\n\r\n      if (response.statusCode === 200) {\r\n        const rolesData = response.result || [];\r\n        setRoles(rolesData);\r\n      } else {\r\n        message.error(`Failed to fetch roles: ${response.message || 'Unknown error'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching roles:', error);\r\n      message.error('Error fetching roles');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRolePermissions = async (roleId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await requestBackServer({\r\n        method: 'GET',\r\n        endpoint: `/permissions/role/${roleId}`,\r\n      });\r\n\r\n      if (response.statusCode === 200) {\r\n        // Handle the API response format - permissions are in 'resources' array\r\n        const resourcesArray = response.result?.resources || [];\r\n        \r\n        if (resourcesArray.length === 0) {\r\n          message.warning('No permissions found for this role. Please seed permissions first.');\r\n          setPermissions({});\r\n          return;\r\n        }\r\n        \r\n        // Convert array format to object format for the component\r\n        const permsData: PermissionsMap = {};\r\n        resourcesArray.forEach((item: any) => {\r\n          permsData[item.resource] = {\r\n            resource: item.resource,\r\n            can_create: item.can_create,\r\n            can_read: item.can_read,\r\n            can_update: item.can_update,\r\n            can_delete: item.can_delete,\r\n            allowed_menu_keys: item.allowed_menu_keys || []\r\n          };\r\n        });\r\n        \r\n        setPermissions(permsData);\r\n      } else {\r\n        message.error(`Failed to fetch permissions: ${response.message || 'Unknown error'}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching permissions:', error);\r\n      message.error('Error fetching permissions');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePermissionChange = (\r\n    resource: string,\r\n    action: 'can_create' | 'can_read' | 'can_update' | 'can_delete',\r\n    value: boolean\r\n  ) => {\r\n    setPermissions((prev) => ({\r\n      ...prev,\r\n      [resource]: {\r\n        ...prev[resource],\r\n        [action]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  const handleSelectAll = (\r\n    action: 'can_create' | 'can_read' | 'can_update' | 'can_delete',\r\n    value: boolean\r\n  ) => {\r\n    const updatedPermissions = { ...permissions };\r\n    Object.keys(updatedPermissions).forEach((resource) => {\r\n      updatedPermissions[resource] = {\r\n        ...updatedPermissions[resource],\r\n        [action]: value,\r\n      };\r\n    });\r\n    setPermissions(updatedPermissions);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!selectedRoleId) {\r\n      message.warning('Please select a role first');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const permissionsArray = Object.entries(permissions).map(\r\n        ([resource, perms]) => ({\r\n          resource,\r\n          can_create: perms.can_create || false,\r\n          can_read: perms.can_read || false,\r\n          can_update: perms.can_update || false,\r\n          can_delete: perms.can_delete || false\r\n        })\r\n      );\r\n\r\n      const response = await requestBackServer({\r\n        method: 'POST',\r\n        endpoint: '/permissions/bulk',\r\n        data: {\r\n          role_id: selectedRoleId,\r\n          permissions: permissionsArray,\r\n        },\r\n      });\r\n\r\n      if (response.statusCode === 200) {\r\n        message.success('Permissions updated successfully');\r\n        // Refresh permissions\r\n        fetchRolePermissions(selectedRoleId);\r\n      } else {\r\n        message.error(response.message || 'Failed to update permissions');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error saving permissions:', error);\r\n      message.error(\r\n        error?.response?.data?.exception || 'Error saving permissions'\r\n      );\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Resource',\r\n      dataIndex: 'resource',\r\n      key: 'resource',\r\n      width: 250,\r\n      fixed: 'left' as const,\r\n      render: (resource: string) => (\r\n        <Space>\r\n          <Text strong>{formatResourceName(resource)}</Text>\r\n          <Tag color=\"blue\">{resource}</Tag>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <Space direction=\"vertical\" size={0} align=\"center\">\r\n          <Text>Create</Text>\r\n          <Checkbox\r\n            onChange={(e) => handleSelectAll('can_create', e.target.checked)}\r\n            disabled={!selectedRoleId}\r\n          >\r\n            <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n              All\r\n            </Text>\r\n          </Checkbox>\r\n        </Space>\r\n      ),\r\n      dataIndex: 'can_create',\r\n      key: 'can_create',\r\n      align: 'center' as const,\r\n      width: 100,\r\n      render: (value: boolean, record: any) => (\r\n        <Checkbox\r\n          checked={value}\r\n          onChange={(e) =>\r\n            handlePermissionChange(\r\n              record.resource,\r\n              'can_create',\r\n              e.target.checked\r\n            )\r\n          }\r\n          disabled={!selectedRoleId}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <Space direction=\"vertical\" size={0} align=\"center\">\r\n          <Text>Read</Text>\r\n          <Checkbox\r\n            onChange={(e) => handleSelectAll('can_read', e.target.checked)}\r\n            disabled={!selectedRoleId}\r\n          >\r\n            <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n              All\r\n            </Text>\r\n          </Checkbox>\r\n        </Space>\r\n      ),\r\n      dataIndex: 'can_read',\r\n      key: 'can_read',\r\n      align: 'center' as const,\r\n      width: 100,\r\n      render: (value: boolean, record: any) => (\r\n        <Checkbox\r\n          checked={value}\r\n          onChange={(e) =>\r\n            handlePermissionChange(\r\n              record.resource,\r\n              'can_read',\r\n              e.target.checked\r\n            )\r\n          }\r\n          disabled={!selectedRoleId}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <Space direction=\"vertical\" size={0} align=\"center\">\r\n          <Text>Update</Text>\r\n          <Checkbox\r\n            onChange={(e) => handleSelectAll('can_update', e.target.checked)}\r\n            disabled={!selectedRoleId}\r\n          >\r\n            <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n              All\r\n            </Text>\r\n          </Checkbox>\r\n        </Space>\r\n      ),\r\n      dataIndex: 'can_update',\r\n      key: 'can_update',\r\n      align: 'center' as const,\r\n      width: 100,\r\n      render: (value: boolean, record: any) => (\r\n        <Checkbox\r\n          checked={value}\r\n          onChange={(e) =>\r\n            handlePermissionChange(\r\n              record.resource,\r\n              'can_update',\r\n              e.target.checked\r\n            )\r\n          }\r\n          disabled={!selectedRoleId}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: (\r\n        <Space direction=\"vertical\" size={0} align=\"center\">\r\n          <Text>Delete</Text>\r\n          <Checkbox\r\n            onChange={(e) => handleSelectAll('can_delete', e.target.checked)}\r\n            disabled={!selectedRoleId}\r\n          >\r\n            <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n              All\r\n            </Text>\r\n          </Checkbox>\r\n        </Space>\r\n      ),\r\n      dataIndex: 'can_delete',\r\n      key: 'can_delete',\r\n      align: 'center' as const,\r\n      width: 100,\r\n      render: (value: boolean, record: any) => (\r\n        <Checkbox\r\n          checked={value}\r\n          onChange={(e) =>\r\n            handlePermissionChange(\r\n              record.resource,\r\n              'can_delete',\r\n              e.target.checked\r\n            )\r\n          }\r\n          disabled={!selectedRoleId}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Summary',\r\n      key: 'summary',\r\n      align: 'center' as const,\r\n      width: 120,\r\n      render: (_: any, record: any) => {\r\n        const perms = permissions[record.resource];\r\n        const count = [\r\n          perms?.can_create,\r\n          perms?.can_read,\r\n          perms?.can_update,\r\n          perms?.can_delete,\r\n        ].filter(Boolean).length;\r\n\r\n        return (\r\n          <Space>\r\n            {count === 4 ? (\r\n              <Tag color=\"success\" icon={<CheckCircleOutlined />}>\r\n                Full Access\r\n              </Tag>\r\n            ) : count === 0 ? (\r\n              <Tag color=\"error\" icon={<CloseCircleOutlined />}>\r\n                No Access\r\n              </Tag>\r\n            ) : (\r\n              <Tag color=\"processing\">{count}/4</Tag>\r\n            )}\r\n          </Space>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  const formatResourceName = (resource: string): string => {\r\n    return resource\r\n      .split('_')\r\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n  };\r\n\r\n  const dataSource = Object.entries(permissions).map(([resource, perms]) => ({\r\n    key: resource,\r\n    resource: resource,\r\n    can_create: perms.can_create,\r\n    can_read: perms.can_read,\r\n    can_update: perms.can_update,\r\n    can_delete: perms.can_delete,\r\n  }));\r\n\r\n  const selectedRole = roles.find((r) => r._id === selectedRoleId);\r\n\r\n  return (\r\n    <div className=\"permission-management\">\r\n      <Card\r\n        title={\r\n          <Space>\r\n            <Title level={4} style={{ margin: 0 }}>\r\n              Permission Management\r\n            </Title>\r\n          </Space>\r\n        }\r\n        extra={\r\n          <Space>\r\n            <Tooltip title=\"Refresh\">\r\n              <Button\r\n                icon={<ReloadOutlined />}\r\n                onClick={() => {\r\n                  fetchRoles();\r\n                  if (selectedRoleId) {\r\n                    fetchRolePermissions(selectedRoleId);\r\n                  }\r\n                }}\r\n              >\r\n                Refresh\r\n              </Button>\r\n            </Tooltip>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<SaveOutlined />}\r\n              onClick={handleSave}\r\n              loading={saving}\r\n              disabled={!selectedRoleId}\r\n            >\r\n              Save Changes\r\n            </Button>\r\n          </Space>\r\n        }\r\n      >\r\n        <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\r\n          {/* Role Selection */}\r\n          <div>\r\n            <Text strong style={{ marginRight: 8 }}>\r\n              Select Role:\r\n            </Text>\r\n            <Select\r\n              style={{ width: 300 }}\r\n              placeholder=\"Choose a role to manage permissions\"\r\n              value={selectedRoleId || undefined}\r\n              onChange={setSelectedRoleId}\r\n              loading={loading}\r\n            >\r\n              {roles.map((role) => (\r\n                <Option key={role._id} value={role._id}>\r\n                  <Space>\r\n                    <Text>{role.name}</Text>\r\n                    <Tag color=\"blue\">{role.roles_type}</Tag>\r\n                  </Space>\r\n                </Option>\r\n              ))}\r\n            </Select>\r\n            {selectedRole && (\r\n              <Text type=\"secondary\" style={{ marginLeft: 12 }}>\r\n                {selectedRole.description}\r\n              </Text>\r\n            )}\r\n          </div>\r\n\r\n          {/* Permissions Table */}\r\n          <Spin spinning={loading}>\r\n            <Table\r\n              columns={columns}\r\n              dataSource={dataSource}\r\n              pagination={false}\r\n              scroll={{ x: 800, y: 500 }}\r\n              bordered\r\n              size=\"small\"\r\n              locale={{\r\n                emptyText: selectedRoleId\r\n                  ? 'No permissions found for this role'\r\n                  : 'Please select a role to view permissions',\r\n              }}\r\n            />\r\n          </Spin>\r\n\r\n          {/* Summary Stats */}\r\n          {selectedRoleId && dataSource.length > 0 && (\r\n            <Card size=\"small\" style={{ background: '#f5f5f5' }}>\r\n              <Space size=\"large\">\r\n                <Text>\r\n                  <Text strong>Total Resources:</Text> {dataSource.length}\r\n                </Text>\r\n                <Text>\r\n                  <Text strong>Full Access:</Text>{' '}\r\n                  {\r\n                    dataSource.filter(\r\n                      (d) =>\r\n                        d.can_create &&\r\n                        d.can_read &&\r\n                        d.can_update &&\r\n                        d.can_delete\r\n                    ).length\r\n                  }\r\n                </Text>\r\n                <Text>\r\n                  <Text strong>No Access:</Text>{' '}\r\n                  {\r\n                    dataSource.filter(\r\n                      (d) =>\r\n                        !d.can_create &&\r\n                        !d.can_read &&\r\n                        !d.can_update &&\r\n                        !d.can_delete\r\n                    ).length\r\n                  }\r\n                </Text>\r\n                <Text>\r\n                  <Text strong>Partial Access:</Text>{' '}\r\n                  {\r\n                    dataSource.filter(\r\n                      (d) =>\r\n                        [\r\n                          d.can_create,\r\n                          d.can_read,\r\n                          d.can_update,\r\n                          d.can_delete,\r\n                        ].filter(Boolean).length > 0 &&\r\n                        !(\r\n                          d.can_create &&\r\n                          d.can_read &&\r\n                          d.can_update &&\r\n                          d.can_delete\r\n                        )\r\n                    ).length\r\n                  }\r\n                </Text>\r\n              </Space>\r\n            </Card>\r\n          )}\r\n        </Space>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PermissionManagement;\r\n\r\n","// This icon file is generated automatically.\nvar SaveOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z\" } }] }, \"name\": \"save\", \"theme\": \"outlined\" };\nexport default SaveOutlined;\n","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SaveOutlinedSvg from \"@ant-design/icons-svg/es/asn/SaveOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nconst SaveOutlined = (props, ref) => /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n  ref: ref,\n  icon: SaveOutlinedSvg\n}));\n\n/**![save](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg5My4zIDI5My4zTDczMC43IDEzMC43Yy03LjUtNy41LTE2LjctMTMtMjYuNy0xNlYxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjMzOC41YzAtMTctNi43LTMzLjItMTguNy00NS4yek0zODQgMTg0aDI1NnYxMDRIMzg0VjE4NHptNDU2IDY1NkgxODRWMTg0aDEzNnYxMzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoMzIwYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIwNS44bDEzNiAxMzZWODQwek01MTIgNDQyYy03OS41IDAtMTQ0IDY0LjUtMTQ0IDE0NHM2NC41IDE0NCAxNDQgMTQ0IDE0NC02NC41IDE0NC0xNDQtNjQuNS0xNDQtMTQ0LTE0NHptMCAyMjRjLTQ0LjIgMC04MC0zNS44LTgwLTgwczM1LjgtODAgODAtODAgODAgMzUuOCA4MCA4MC0zNS44IDgwLTgwIDgweiIgLz48L3N2Zz4=) */\nconst RefIcon = /*#__PURE__*/React.forwardRef(SaveOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SaveOutlined';\n}\nexport default RefIcon;"],"names":["API_ERROR_CODES","constructor","baseURL","api","isRefreshing","refreshSubscribers","hasShownSessionExpiredMessage","this","axios","create","timeout","headers","interceptors","request","use","config","token","getAuthToken","concat","method","includes","toLowerCase","csrfToken","getCSRFToken","response","async","originalRequest","error","status","_retry","_error$response$data","_error$response$data2","errorMessage","data","exception","message","content","duration","Promise","reject","resolve","push","newAccessToken","refreshAccessToken","forEach","callback","refreshError","console","clearAuthData","window","location","href","refreshToken","getRefreshToken","warn","_response$data","post","defaults","statusCode","accessToken","newRefreshToken","result","setAccessToken","setRefreshToken","send","url","endpoint","signal","handleResponse","isAxiosError","name","pagination","handleError","_error$response$data3","_API_ERROR_CODES$SERV","backendUrl","isElectron","checkIfElectron","initializeBackendUrl","electronAPI","getBackendUrl","process","getApiUrl","path","arguments","length","undefined","baseUrl","cleanPath","startsWith","isElectronApp","waitForBackend","startTime","Date","now","fetch","ok","setTimeout","getAppVersion","getPlatform","platform","apiService","service","electronBackendService","APIService","initializeApiService","Title","Text","Typography","Option","Select","PermissionManagement","roles","setRoles","useState","selectedRoleId","setSelectedRoleId","permissions","setPermissions","loading","setLoading","saving","setSaving","useEffect","fetchRoles","fetchRolePermissions","requestBackServer","rolesData","roleId","_response$result","resourcesArray","resources","warning","permsData","item","resource","can_create","can_read","can_update","can_delete","allowed_menu_keys","handlePermissionChange","action","value","prev","_objectSpread","handleSelectAll","updatedPermissions","Object","keys","columns","title","dataIndex","key","width","fixed","render","_jsxs","Space","children","_jsx","strong","formatResourceName","Tag","color","direction","size","align","Checkbox","onChange","e","target","checked","disabled","type","style","fontSize","record","_","perms","count","filter","Boolean","icon","CheckCircleOutlined","CloseCircleOutlined","split","map","word","charAt","toUpperCase","slice","join","dataSource","entries","_ref2","selectedRole","find","r","_id","className","Card","level","margin","extra","Tooltip","Button","ReloadOutlined","onClick","SaveOutlined","permissionsArray","_ref","role_id","success","_error$response","marginRight","placeholder","role","roles_type","marginLeft","description","Spin","spinning","Table","scroll","x","y","bordered","locale","emptyText","background","d","_extends","assign","bind","i","source","prototype","hasOwnProperty","call","apply","props","ref","React","AntdIcon","SaveOutlinedSvg"],"sourceRoot":""}