/*! For license information please see 4545.04f1f1eb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[4545],{37221:(e,n,l)=>{l.r(n),l.d(n,{default:()=>h});var a=l(65043),o=l(73146),t=l(76399),r=l(70579);const s=[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,r.jsx)("strong",{children:e})},{title:"Username",dataIndex:"user_name",key:"user_name",render:e=>(0,r.jsx)("span",{style:{color:"#1890ff"},children:e})},{title:"Email",dataIndex:"email",key:"email"},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Role",dataIndex:"roleItems",key:"role_id",render:e=>(0,r.jsx)(t.A,{color:"geekblue",children:null===e||void 0===e?void 0:e.name})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,r.jsx)(t.A,{color:e?"green":"volcano",children:e?"Active":"Inactive"})}];var i=l(36621),c=l(26553),m=l(12624);const d=function(){let{roles:e=[],organisation:n=[],branches:l=[],selectedOrganisationId:a=null,userItemRole:o=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{label:"Full Name",name:"name",rules:[{required:!0,message:"Please enter full name"}],component:(0,r.jsx)(i.A,{placeholder:"Enter full name"})},{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Enter a valid email"}],component:(0,r.jsx)(i.A,{placeholder:"Enter email"})},{label:"Username",name:"user_name",rules:[{required:!0,message:"Please enter username"}],component:(0,r.jsx)(i.A,{placeholder:"Enter username"})},{label:"Mobile Number",name:"mobile",rules:[{required:!0,message:"Please enter mobile number"},{pattern:/^[0-9]{10}$/,message:"Enter valid 10-digit mobile number"}],component:(0,r.jsx)(i.A,{placeholder:"Enter mobile number",maxLength:10})},{label:"Password",name:"password",rules:[{required:!0,message:"Please enter password"}],component:(0,r.jsx)(i.A.Password,{placeholder:"Enter password"})},{label:"Role",name:"role_id",rules:[{required:!0,message:"Please select a role"}],component:(0,r.jsx)(c.A,{placeholder:"Select role",allowClear:!0,showSearch:!0,children:e.map((e=>(0,r.jsx)(c.A.Option,{value:e.value,children:e.label},e.value)))})},..."OrganisationAdmin"!==o&&"BranchAdmin"!==o?[{label:"Organisation",name:"organisation_id",rules:[{required:!0,message:"Please select a organisation"}],component:(0,r.jsx)(c.A,{placeholder:"Select organisation",allowClear:!0,showSearch:!0,children:n.map((e=>(0,r.jsx)(c.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],..."BranchAdmin"!==o?[{label:"Branch",name:"branch_id",rules:[{required:!1,message:"Please select a branch"}],component:(0,r.jsx)(c.A,{placeholder:"Select branch",allowClear:!0,showSearch:!0,disabled:"BranchAdmin"===o&&!a,children:("BranchAdmin"!==o?l:l.filter((e=>("string"===typeof a||"number"===typeof a)&&e.organisation_id===a))).map((e=>(0,r.jsx)(c.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],{label:"Active Status",name:"status",valuePropName:"checked",component:(0,r.jsx)(m.A,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}]};var u=l(62305),p=l(89472),v=l(98350),g=l(54505);const b=()=>{const{data:e}=v.lh.useGetRolesQuery({}),{organisationOptions:n}=(0,g.B)(),[l]=u.A.useForm(),[t,i]=(0,a.useState)(null),{data:c}=v.lh.useGetBranchesQuery(t?{organisation_id:t,org_id:t}:{},{skip:!t}),m=(0,a.useMemo)((()=>(null===e||void 0===e?void 0:e.result)||[]),[e]),b=(0,a.useMemo)((()=>n.map((e=>({_id:e.value,org_name:e.label,name:e.label})))),[n]),h=(0,a.useMemo)((()=>(null===c||void 0===c?void 0:c.result)||[]),[c]),f=(0,a.useMemo)((()=>(0,p.getCurrentUser)()),[]),y=(0,a.useMemo)((()=>{var e;return(null===f||void 0===f||null===(e=f.roleItems)||void 0===e?void 0:e.name)||(null===f||void 0===f?void 0:f.usertype)||(null===f||void 0===f?void 0:f.user_role)||""}),[f]),x=(0,a.useMemo)((()=>(null===m||void 0===m?void 0:m.map((e=>({label:e.name,value:e._id}))))||[]),[m]),O=(0,a.useMemo)((()=>(null===b||void 0===b?void 0:b.map((e=>({label:e.org_name||e.name,value:e._id}))))||[]),[b]),C=(0,a.useMemo)((()=>(null===h||void 0===h?void 0:h.map((e=>({label:e.branch_name||e.name,value:e._id,organisation_id:e.organisation_id||e.org_id}))))||[]),[h]);return(0,r.jsx)(o.r,{config:{title:"Users",columns:s,formItems:d({roles:x,organisation:O,branches:C,selectedOrganisationId:t,userItemRole:y}),entityName:"BillingUsers",formColumns:2},onValuesChange:(e,n)=>{var a;void 0!==e.organisation_id&&(a=e.organisation_id,i(void 0===a||""===a?null:a),l.setFieldsValue({branch_id:void 0}))},enableDynamicFields:!0,entityName:"users"})},h=(0,a.memo)(b)},60647:(e,n,l)=>{l.d(n,{A:()=>P});var a=l(65043),o=l(24255),t=l(98139),r=l.n(t),s=l(28678),i=l(18574),c=l(35296),m=l(36282),d=l(38046),u=l(98986),p=l(95206),v=l(64160),g=l(10370),b=l(76970),h=l(34382),f=l(78855);const y=(0,f.OF)("Popconfirm",(e=>(e=>{const{componentCls:n,iconCls:l,antCls:a,zIndexPopup:o,colorText:t,colorWarning:r,marginXXS:s,marginXS:i,fontSize:c,fontWeightStrong:m,colorTextHeading:d}=e;return{[n]:{zIndex:o,["&".concat(a,"-popover")]:{fontSize:c},["".concat(n,"-message")]:{marginBottom:i,display:"flex",flexWrap:"nowrap",alignItems:"start",["> ".concat(n,"-message-icon ").concat(l)]:{color:r,fontSize:c,lineHeight:1,marginInlineEnd:i},["".concat(n,"-title")]:{fontWeight:m,color:d,"&:only-child":{fontWeight:"normal"}},["".concat(n,"-description")]:{marginTop:s,color:t}},["".concat(n,"-buttons")]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:i}}}}})(e)),(e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}}),{resetStyle:!1});var x=function(e,n){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(l[a[o]]=e[a[o]])}return l};const O=e=>{const{prefixCls:n,okButtonProps:l,cancelButtonProps:t,title:r,description:s,cancelText:i,okText:m,okType:h="primary",icon:f=a.createElement(o.A,null),showCancel:y=!0,close:x,onConfirm:O,onCancel:C,onPopupClick:j}=e,{getPrefixCls:A}=a.useContext(c.QO),[P]=(0,g.A)("Popconfirm",b.A.Popconfirm),I=(0,u.b)(r),E=(0,u.b)(s);return a.createElement("div",{className:"".concat(n,"-inner-content"),onClick:j},a.createElement("div",{className:"".concat(n,"-message")},f&&a.createElement("span",{className:"".concat(n,"-message-icon")},f),a.createElement("div",{className:"".concat(n,"-message-text")},I&&a.createElement("div",{className:"".concat(n,"-title")},I),E&&a.createElement("div",{className:"".concat(n,"-description")},E))),a.createElement("div",{className:"".concat(n,"-buttons")},y&&a.createElement(p.Ay,Object.assign({onClick:C,size:"small"},t),i||(null===P||void 0===P?void 0:P.cancelText)),a.createElement(d.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,v.DU)(h)),l),actionFn:O,close:x,prefixCls:A("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},m||(null===P||void 0===P?void 0:P.okText))))},C=e=>{const{prefixCls:n,placement:l,className:o,style:t}=e,s=x(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=a.useContext(c.QO),m=i("popconfirm",n),[d]=y(m);return d(a.createElement(h.Ay,{placement:l,className:r()(m,o),style:t,content:a.createElement(O,Object.assign({prefixCls:m},s))}))};var j=function(e,n){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(l[a[o]]=e[a[o]])}return l};const A=a.forwardRef(((e,n)=>{var l,t;const{prefixCls:d,placement:u="top",trigger:p="click",okType:v="primary",icon:g=a.createElement(o.A,null),children:b,overlayClassName:h,onOpenChange:f,onVisibleChange:x,overlayStyle:C,styles:A,classNames:P}=e,I=j(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:E,className:N,style:_,classNames:k,styles:w}=(0,c.TP)("popconfirm"),[S,B]=(0,s.A)(!1,{value:null!==(l=e.open)&&void 0!==l?l:e.visible,defaultValue:null!==(t=e.defaultOpen)&&void 0!==t?t:e.defaultVisible}),T=(e,n)=>{B(e,!0),null===x||void 0===x||x(e),null===f||void 0===f||f(e,n)},M=E("popconfirm",d),R=r()(M,N,h,k.root,null===P||void 0===P?void 0:P.root),q=r()(k.body,null===P||void 0===P?void 0:P.body),[z]=y(M);return z(a.createElement(m.A,Object.assign({},(0,i.A)(I,["title"]),{trigger:p,placement:u,onOpenChange:(n,l)=>{const{disabled:a=!1}=e;a||T(n,l)},open:S,ref:n,classNames:{root:R,body:q},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},w.root),_),C),null===A||void 0===A?void 0:A.root),body:Object.assign(Object.assign({},w.body),null===A||void 0===A?void 0:A.body)},content:a.createElement(O,Object.assign({okType:v,icon:g},e,{prefixCls:M,close:e=>{T(!1,e)},onConfirm:n=>{var l;return null===(l=e.onConfirm)||void 0===l?void 0:l.call(void 0,n)},onCancel:n=>{var l;T(!1,n),null===(l=e.onCancel)||void 0===l||l.call(void 0,n)}})),"data-popover-inject":!0}),b))}));A._InternalPanelDoNotUseOrYouWillBeFired=C;const P=A},73847:(e,n,l)=>{l.d(n,{A:()=>i});var a=l(65043),o=l(78500),t=l(66381);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},r.apply(this,arguments)}const s=(e,n)=>a.createElement(t.A,r({},e,{ref:n,icon:o.A}));const i=a.forwardRef(s)}}]);
//# sourceMappingURL=4545.04f1f1eb.chunk.js.map