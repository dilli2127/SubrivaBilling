"use strict";(self.webpackChunkFOCUZ_BILLING=self.webpackChunkFOCUZ_BILLING||[]).push([[330],{23330:(e,t,l)=>{l.r(t),l.d(t,{default:()=>b});var n=l(65043),a=l(82863),i=l(74198),s=l(36621),o=l(11515),r=l(12624),d=l(70579);const c=[{label:"Organization Name",name:"org_name",rules:[{required:!0,message:"Please enter organization name!"}],component:(0,d.jsx)(s.A,{placeholder:"Enter organization name"})},{label:"Business Type",name:"business_type",rules:[{required:!0,message:"Please enter business type!"}],component:(0,d.jsx)(s.A,{placeholder:"Enter business type"})},{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email!"},{type:"email",message:"Please enter a valid email!"}],component:(0,d.jsx)(s.A,{placeholder:"Enter email"})},{label:"Phone",name:"phone",rules:[{required:!0,message:"Please enter phone number!"}],component:(0,d.jsx)(s.A,{placeholder:"Enter phone number"})},{label:"GST Number",name:"gst_number",component:(0,d.jsx)(s.A,{placeholder:"Enter GST number"})},{label:"PAN Number",name:"pan_number",component:(0,d.jsx)(s.A,{placeholder:"Enter PAN number"})},{label:"Address",name:"address",component:(0,d.jsx)(s.A.TextArea,{placeholder:"Enter address",rows:2})},{label:"City",name:"city",component:(0,d.jsx)(s.A,{placeholder:"Enter city"})},{label:"State",name:"state",component:(0,d.jsx)(s.A,{placeholder:"Enter state"})},{label:"Pincode",name:"pincode",component:(0,d.jsx)(s.A,{placeholder:"Enter pincode"})},{label:"Currency",name:"currency",component:(0,d.jsx)(s.A,{placeholder:"e.g., INR, USD"})},{label:"Timezone",name:"timezone",component:(0,d.jsx)(s.A,{placeholder:"e.g., Asia/Kolkata"})},{label:"Logo",name:"logo_url",component:(0,d.jsx)(o.A,{listType:"picture",maxCount:1,children:(0,d.jsx)("div",{children:"Click to Upload"})})},{label:"Status",name:"status",valuePropName:"checked",component:(0,d.jsx)(r.A,{checkedChildren:"Active",unCheckedChildren:"Inactive",defaultChecked:!0})}];var u=l(83833),p=l(6051),m=l(76399),h=l(87534),g=l(75388);const{Text:x}=u.A,A={title:"Organizations",columns:[{title:"Organization",dataIndex:"org_name",key:"org_name",render:e=>(0,d.jsx)(x,{strong:!0,children:e})},{title:"Phone",dataIndex:"phone",key:"phone",render:e=>(0,d.jsxs)(p.A,{children:[(0,d.jsx)(h.A,{style:{color:"#1890ff"}}),(0,d.jsx)(x,{children:e})]})},{title:"Email",dataIndex:"email",key:"email",render:e=>(0,d.jsxs)(p.A,{children:[(0,d.jsx)(g.A,{style:{color:"#722ed1"}}),(0,d.jsx)(x,{type:"secondary",children:e})]})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,d.jsx)(m.A,{color:e?"green":"volcano",children:e?"Active":"Inactive"})}],formItems:c,apiRoutes:(0,i._V)("Organisations"),formColumns:2,drawerWidth:800},j=()=>(0,d.jsx)(a.r,{config:A}),b=(0,n.memo)(j)},74198:(e,t,l)=>{l.d(t,{_V:()=>a});l(65043);var n=l(91449);l(27038);const a=e=>{const t=n.LE[e]||(0,n.lX)(e);return{get:t.getAll(),create:t.create(),update:t.update(),delete:t.delete()}}},82863:(e,t,l)=>{l.d(t,{r:()=>I});var n=l(89379),a=l(65043),i=l(96651),s=l(47419),o=l(11645),r=l(36621),d=l(26553),c=l(93504),u=l(95206),p=l(33359),m=l(9316),h=l(83003),g=l(62305),x=l(97031),A=l(91449),j=l(60446),b=l.n(j);var f=l(22671),y=l(53986),C=l(83833),v=l(88655),k=l(73847),R=l(70579);const S=["key","name","fieldKey"],w=e=>{const{FormValue:t,onSubmit:l,onCancel:i,formItems:r,onChildCancel:d,formColumns:c,splitLabelAndField:p,nested:m,nestedInputs:h,wrapperCol:x,labelCol:A,initialValues:j,loading:b,form:f,onValuesChange:w}=e,E=c||1;return(0,a.useEffect)((()=>{j&&(null===f||void 0===f||f.setFieldsValue(j))}),[j,f]),(0,R.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,R.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"600px 600px",opacity:.1,zIndex:0}}),(0,R.jsxs)(g.A,{form:f,onFinish:e=>{l?l(e):t&&t(e),null===f||void 0===f||f.resetFields()},layout:"vertical",onValuesChange:w,children:[(0,R.jsxs)(s.A,{gutter:[16,16],children:[null===r||void 0===r?void 0:r.map(((e,t)=>{var l;return(0,R.jsx)(o.A,{span:24/E,children:p?(0,R.jsxs)("div",{children:[(0,R.jsxs)(C.A.Text,{strong:!0,children:[e.label," ",(null===(l=e.rules)||void 0===l?void 0:l.some((e=>e.required)))&&(0,R.jsx)(C.A.Text,{type:"danger",children:"*"})]}),(0,R.jsx)(g.A.Item,{name:e.name,rules:e.rules,style:{marginTop:"8px"},children:e.component})]}):(0,R.jsx)(g.A.Item,{label:(0,R.jsx)(C.A.Text,{strong:!0,children:e.label}),name:e.name,rules:e.rules,labelCol:{span:A},wrapperCol:{span:x},children:e.component})},t)})),m&&(0,R.jsx)(g.A.List,{name:"nestedItems",children:(e,t)=>{let{add:l,remove:a}=t;return(0,R.jsxs)(R.Fragment,{children:[e.map((e=>{let{key:t,name:l,fieldKey:i}=e,r=(0,y.A)(e,S);return(0,R.jsxs)(s.A,{gutter:[16,16],align:"middle",children:[h.map(((e,t)=>(0,R.jsx)(o.A,{children:(0,R.jsx)(g.A.Item,(0,n.A)((0,n.A)({},r),{},{name:[l,e.name],fieldKey:[i,e.name],rules:[{required:!0,message:"Missing ".concat(e.label)}],label:e.label,children:e.component}))},t))),(0,R.jsx)(o.A,{children:(0,R.jsx)(v.A,{onClick:()=>a(l)})})]},t)})),(0,R.jsx)(s.A,{justify:"center",children:(0,R.jsx)(o.A,{children:(0,R.jsx)(u.Ay,{type:"primary",onClick:()=>l(),icon:(0,R.jsx)(k.A,{}),children:"Add More Field"})})})]})}})]}),(0,R.jsxs)(s.A,{justify:"end",gutter:[16,16],style:{padding:"16px"},children:[(0,R.jsx)(o.A,{children:(0,R.jsx)(u.Ay,{onClick:()=>{i?i():d&&d(!1),null===f||void 0===f||f.resetFields()},children:"Cancel"})}),(0,R.jsx)(o.A,{children:(0,R.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:b,children:"Submit"})})]})]})]})};var E=l(4413);function F(e,t,l){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{title:"Actions",key:"actions",render:(a,s)=>(0,R.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,R.jsx)(i.A,{title:"Edit ".concat(e),children:(0,R.jsx)(p.A,{style:{cursor:"pointer",color:"#1890ff"},onClick:()=>t(s)})}),(0,R.jsx)(i.A,{title:"Delete ".concat(e),children:(0,R.jsx)(m.A,{style:{cursor:n?"not-allowed":"pointer",color:n?"#d9d9d9":"#ff4d4f",opacity:n?.5:1},onClick:()=>!n&&l(s)})})]})}}const I=e=>{let{config:t,filters:l=[],onFilterChange:i,customButtons:p=[],onValuesChange:m}=e;const{loading:j,createLoading:y,updateLoading:C,deleteLoading:v,items:k,pagination:S,drawerVisible:I,initialValues:P,form:V,handleEdit:_,handleDelete:L,handleDrawerOpen:T,resetForm:z,handleSubmit:N,handlePaginationChange:O,columns:K,formItems:q,formColumns:D=2,drawerWidth:B,filterValues:G,setFilterValues:U}=(e=>{const t=(0,h.wA)(),[l]=g.A.useForm(),[i,s]=(0,a.useState)(!1),[o,r]=(0,a.useState)({}),[d,c]=(0,a.useState)({}),[u,p]=(0,a.useState)({current:1,pageSize:10}),{loading:m,items:j}=(0,x.Sm)(e.apiRoutes.get.identifier),{loading:f,items:y,error:C}=(0,x.Sm)(e.apiRoutes.create.identifier),{loading:v,items:k,error:R}=(0,x.Sm)(e.apiRoutes.update.identifier),{loading:S,items:w,error:E}=(0,x.Sm)(e.apiRoutes.delete.identifier),F=(0,a.useCallback)(((e,l,n,a)=>{t((0,x.s7)({method:e,endpoint:l,data:n},a))}),[t]),I=(0,a.useCallback)((()=>{const t=(0,n.A)((0,n.A)({},d),{},{pageNumber:u.current,pageLimit:u.pageSize});F(e.apiRoutes.get.method,e.apiRoutes.get.endpoint,t,e.apiRoutes.get.identifier)}),[F,e.apiRoutes.get,d,u]),P=(0,a.useCallback)((t=>{F(e.apiRoutes.create.method,e.apiRoutes.create.endpoint,t,e.apiRoutes.create.identifier)}),[F,e.apiRoutes.create]),V=(0,a.useCallback)(((t,l)=>{F(e.apiRoutes.update.method,"".concat(e.apiRoutes.update.endpoint,"/").concat(t),l,e.apiRoutes.update.identifier)}),[F,e.apiRoutes.update]),_=(0,a.useCallback)((t=>{F(e.apiRoutes.delete.method,"".concat(e.apiRoutes.delete.endpoint,"/").concat(t),{_id:t},e.apiRoutes.delete.identifier)}),[F,e.apiRoutes.delete]),L=(0,a.useCallback)(((e,t)=>{p({current:e,pageSize:t})}),[]);function T(e){return/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/.test(e)}const z=(0,a.useCallback)((e=>{const t={};for(const l in e){const n=e[l];"string"===typeof n&&T(n)&&b()(n,void 0,!0).isValid()?t[l]=b()(n):t[l]=n}r(t),s(!0)}),[]),N=(0,a.useCallback)((e=>{_(e._id)}),[_]),O=(0,a.useCallback)((()=>{s(!0)}),[]),K=(0,a.useCallback)((()=>{s(!1),r({}),l.resetFields()}),[l]),q=(0,a.useCallback)((e=>{o._id?V(o._id,e):P(e)}),[o._id,P,V]);return(0,a.useEffect)((()=>{if(200===(null===y||void 0===y?void 0:y.statusCode))(0,A.P0)("success","".concat(e.title," created successfully")),I(),K(),t((0,x.Ki)(e.apiRoutes.create.identifier));else if(C){const t=C.message||"Failed to create ".concat(e.title);(0,A.P0)("error",t)}}),[y,C,e.title,I,K,t,e.apiRoutes.create.identifier]),(0,a.useEffect)((()=>{if(200===(null===k||void 0===k?void 0:k.statusCode))(0,A.P0)("success","".concat(e.title," updated successfully")),I(),K(),t((0,x.Ki)(e.apiRoutes.update.identifier));else if(R){const t=R.message||"Failed to update ".concat(e.title);(0,A.P0)("error",t)}}),[k,R,e.title,I,K,t,e.apiRoutes.update.identifier]),(0,a.useEffect)((()=>{if(200===(null===w||void 0===w?void 0:w.statusCode))(0,A.P0)("success","".concat(e.title," deleted successfully")),I(),t((0,x.Ki)(e.apiRoutes.delete.identifier));else if(E){const t=E.message||"Failed to delete ".concat(e.title);(0,A.P0)("error",t)}}),[w,E,e.title,I,t,e.apiRoutes.delete.identifier]),(0,a.useEffect)((()=>{I()}),[I]),(0,n.A)({loading:m,createLoading:f,updateLoading:v,deleteLoading:S,items:null===j||void 0===j?void 0:j.result,pagination:null===j||void 0===j?void 0:j.pagination,drawerVisible:i,initialValues:o,form:l,filterValues:d,setFilterValues:c,handleEdit:z,handleDelete:N,handleDrawerOpen:O,resetForm:K,handleSubmit:q,handlePaginationChange:L},e)})(t),M=(0,a.useCallback)(((e,t)=>{const l=(0,n.A)((0,n.A)({},G),{},{[e]:t});U(l),i&&i(l)}),[G,U,i]),Z=(0,a.useMemo)((()=>[...K,F(t.title,_,L,v)]),[K,t.title,_,L,v]);return(0,R.jsxs)("div",{children:[(0,R.jsxs)(s.A,{justify:"space-between",align:"bottom",gutter:[16,16],style:{marginBottom:16},children:[(0,R.jsx)(o.A,{flex:"auto",children:(0,R.jsx)("h1",{style:{margin:0},children:t.title})}),(0,R.jsx)(o.A,{children:(0,R.jsxs)(s.A,{gutter:[12,12],align:"bottom",justify:"end",wrap:!0,children:[l.map((e=>{var t;return(0,R.jsxs)(o.A,{children:["input"===e.type&&(0,R.jsx)(r.A,{placeholder:e.placeholder||e.label,value:G[e.key]||"",onChange:t=>M(e.key,t.target.value),style:{width:e.width||200},disabled:y||C||v}),"select"===e.type&&(0,R.jsx)(d.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>{M(e.key,t),e.onChange&&e.onChange(t)},allowClear:!0,style:{width:e.width||200},disabled:e.disabled||y||C||v,children:null===(t=e.options)||void 0===t?void 0:t.map((e=>(0,R.jsx)(d.A.Option,{value:e.value,children:e.label},e.value)))}),"date"===e.type&&(0,R.jsx)(c.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>M(e.key,t),style:{width:e.width||200},disabled:y||C||v})]},e.key)})),(0,R.jsx)(o.A,{children:(0,R.jsx)(r.A,{placeholder:"Search ".concat(t.title),value:G.searchString||"",onChange:e=>M("searchString",e.target.value),style:{width:200},disabled:y||C||v})}),p.map((e=>(0,R.jsx)(o.A,{children:(0,R.jsx)(u.Ay,{type:e.type||"default",onClick:e.onClick,icon:e.icon,disabled:y||C||v,children:e.label})},e.key))),(0,R.jsx)(o.A,{children:(0,R.jsxs)(u.Ay,{type:"primary",onClick:T,loading:y,disabled:y,children:["Add ",t.title]})})]})})]}),(0,R.jsx)(E.A,{columns:Z,data:k,loading:j||v,rowKeyField:"_id",totalCount:(null===S||void 0===S?void 0:S.totalCount)||0,pageLimit:(null===S||void 0===S?void 0:S.pageLimit)||10,onPaginationChange:O}),(0,R.jsx)(f.A,{title:"".concat(P._id?"Edit":"Add"," ").concat(t.title),open:I,onClose:y||C?()=>{}:z,width:B,children:(0,R.jsx)(w,{form:V,formItems:q,formColumns:D,initialValues:P,onSubmit:N,onCancel:z,onValuesChange:m,loading:y||C})})]})}}}]);
//# sourceMappingURL=330.511d404b.chunk.js.map