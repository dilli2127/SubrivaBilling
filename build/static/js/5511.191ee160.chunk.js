"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[5511],{15511:(e,r,o)=>{o.r(r),o.d(r,{default:()=>G});var t=o(65043),n=o(43273),a=o(28071),l=o(89472),s=o(58209),c=o(6051),d=o(76399),i=o(9764),u=o(74563),m=o(27089),h=o(45565),p=o(92882),x=o(13699),g=o(70579);const S=t.memo((e=>{let{text:r}=e;return(0,g.jsxs)(c.A,{children:[(0,g.jsx)(i.A,{style:{color:"#1890ff"}}),(0,g.jsx)("strong",{children:r})]})})),j=t.memo((e=>{let{CategoryItem:r}=e;return(0,g.jsx)(d.A,{icon:(0,g.jsx)(u.A,{}),color:"geekblue",children:(null===r||void 0===r?void 0:r.category_name)||"-"})})),b=t.memo((e=>{let{sku:r}=e;return(0,g.jsxs)(c.A,{children:[(0,g.jsx)(m.A,{style:{color:"#722ed1"}}),(0,g.jsx)("span",{children:r||"-"})]})})),y=t.memo((e=>{let{barcode:r}=e;return(0,g.jsx)(d.A,{color:"green",icon:(0,g.jsx)(m.A,{}),children:r||"-"})})),v=t.memo((e=>{let{hsnCode:r}=e;return(0,g.jsx)(d.A,{color:"orange",children:r||"-"})})),A=t.memo((e=>{let{id:r,variantMap:o}=e;return(0,g.jsx)(d.A,{icon:(0,g.jsx)(h.A,{}),color:"purple",children:o[r]||"-"})})),C=t.memo((e=>{let{status:r}=e;return r?(0,g.jsx)(d.A,{icon:(0,g.jsx)(p.A,{twoToneColor:"#52c41a"}),color:"success",children:"Active"}):(0,g.jsx)(d.A,{icon:(0,g.jsx)(x.A,{twoToneColor:"#ff4d4f"}),color:"error",children:"Inactive"})})),k=t.memo((e=>{let{brandName:r}=e;return(0,g.jsx)(d.A,{color:"cyan",children:r||"-"})})),w=t.memo((e=>{let{businessType:r}=e;return(0,g.jsx)(d.A,{color:"blue",children:r||"-"})})),P=t.memo((e=>{let{globalProduct:r}=e;return r?(0,g.jsx)(d.A,{icon:(0,g.jsx)(p.A,{twoToneColor:"#52c41a"}),color:"success",children:"Yes"}):(0,g.jsx)(d.A,{color:"default",children:"No"})})),_=e=>{let{variantMap:r,isSuperAdmin:o}=e;return[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,g.jsx)(S,{text:e})},{title:"Category",dataIndex:"CategoryItem",key:"category",render:e=>(0,g.jsx)(j,{CategoryItem:e})},{title:"SKU",dataIndex:"sku",key:"sku",render:e=>(0,g.jsx)(b,{sku:e})},{title:"Barcode",dataIndex:"barcode",key:"barcode",render:e=>(0,g.jsx)(y,{barcode:e})},{title:"HSN Code",dataIndex:"hsn_code",key:"hsn_code",render:e=>(0,g.jsx)(v,{hsnCode:e})},{title:"Variant",dataIndex:"variant",key:"variant",render:e=>(0,g.jsx)(A,{id:e,variantMap:r})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,g.jsx)(C,{status:e})},{title:"Brand Name",dataIndex:"brand_name",key:"brand_name",render:e=>(0,g.jsx)(k,{brandName:e})},...o?[{title:"Business Type",dataIndex:"business_type",key:"business_type",render:e=>(0,g.jsx)(w,{businessType:e})},{title:"Global Product",dataIndex:"global_product",key:"global_product",render:e=>(0,g.jsx)(P,{globalProduct:e})}]:[{title:"Global Product",dataIndex:"global_product",key:"global_product",render:e=>(0,g.jsx)(P,{globalProduct:e})}]]};var I=o(26553),f=o(36621),B=o(95206),N=o(12624),F=o(47615);const{Option:D}=I.A,M=e=>{let{categoryDropdown:r,variantDropdown:o,isSuperAdmin:t,onScanClick:n,onBarcodeInputFocus:a}=e;return[{label:"Product Name",name:"name",rules:[{required:!0,message:"Please enter the product name!"}],component:(0,g.jsx)(f.A,{placeholder:"e.g., HP Toner 85A"})},{label:"Category",name:"category",rules:[{required:!0,message:"Please select a category!"}],component:(0,g.jsx)(I.A,{placeholder:"Select category",loading:r.loading&&0===r.items.length,showSearch:!0,allowClear:!0,onSearch:r.setSearchString,onPopupScroll:r.handlePopupScroll,onDropdownVisibleChange:r.onDropdownVisibleChange,filterOption:!1,notFoundContent:r.loading?"Loading categories...":0===r.items.length?"No categories found":null,dropdownRender:e=>(0,g.jsxs)(g.Fragment,{children:[e,r.hasMore&&r.items.length>0&&(0,g.jsx)("div",{style:{textAlign:"center",padding:"8px",color:"#999"},children:r.loading?"Loading...":"Scroll for more"})]}),children:r.items.map((e=>(0,g.jsx)(D,{value:e._id,children:e.category_name},e._id)))})},{label:"SKU / Code",name:"sku",rules:[],component:(0,g.jsx)(f.A,{placeholder:"e.g., HP-85A-TONER"})},{label:"Barcode",name:"barcode",rules:[],component:(0,g.jsxs)(f.A.Group,{compact:!0,children:[(0,g.jsx)(f.A,{placeholder:"e.g., 1234567890123",style:{width:"calc(100% - 40px)"},onFocus:a}),(0,g.jsx)(B.Ay,{type:"primary",icon:(0,g.jsx)(F.A,{}),onClick:n,style:{width:40}})]})},{label:"HSN Code",name:"hsn_code",rules:[],component:(0,g.jsx)(f.A,{placeholder:"e.g., 8443.32.10"})},{label:"Variant",name:"variant",rules:[{required:!0,message:"Please select a variant!"}],component:(0,g.jsx)(I.A,{placeholder:"Select variant",loading:o.loading&&0===o.items.length,showSearch:!0,allowClear:!0,onSearch:o.setSearchString,onPopupScroll:o.handlePopupScroll,onDropdownVisibleChange:o.onDropdownVisibleChange,filterOption:!1,notFoundContent:o.loading?"Loading variants...":0===o.items.length?"No variants found":null,dropdownRender:e=>(0,g.jsxs)(g.Fragment,{children:[e,o.hasMore&&o.items.length>0&&(0,g.jsx)("div",{style:{textAlign:"center",padding:"8px",color:"#999"},children:o.loading?"Loading...":"Scroll for more"})]}),children:o.items.map((e=>(0,g.jsxs)(D,{value:e._id,children:[e.variant_name," (",e.unit,")"]},e._id)))})},{label:"Status",name:"status",valuePropName:"checked",component:(0,g.jsx)(N.A,{checkedChildren:"Active",unCheckedChildren:"Inactive",defaultChecked:!0})},{label:"Brand Name",name:"brand_name",rules:[],component:(0,g.jsx)(f.A,{placeholder:"e.g., HP"})},...t?[{label:"Business Type",name:"business_type",rules:[{required:!1,message:"Please select business type!"}],component:(0,g.jsxs)(I.A,{placeholder:"Select business type",allowClear:!0,children:[(0,g.jsx)(D,{value:"Supermarket / Grocery Store",children:"Supermarket / Grocery Store"}),(0,g.jsx)(D,{value:"Medical / Pharmacy",children:"Medical / Pharmacy"}),(0,g.jsx)(D,{value:"Hardware Store",children:"Hardware Store"}),(0,g.jsx)(D,{value:"Hardware and Electronics Store",children:"Hardware and Electronics Store"}),(0,g.jsx)(D,{value:"Electronics Store",children:"Electronics Store"}),(0,g.jsx)(D,{value:"Stationery / Book Store",children:"Stationery / Book Store"}),(0,g.jsx)(D,{value:"Clothing / Textile Store",children:"Clothing / Textile Store"}),(0,g.jsx)(D,{value:"Footwear Store",children:"Footwear Store"}),(0,g.jsx)(D,{value:"Bakery / Sweet Shop",children:"Bakery / Sweet Shop"}),(0,g.jsx)(D,{value:"Fruits & Vegetables Shop",children:"Fruits & Vegetables Shop"}),(0,g.jsx)(D,{value:"Furniture Store",children:"Furniture Store"}),(0,g.jsx)(D,{value:"Automobile / Spare Parts",children:"Automobile / Spare Parts"}),(0,g.jsx)(D,{value:"Mobile Accessories Store",children:"Mobile Accessories Store"}),(0,g.jsx)(D,{value:"Cosmetics / Beauty Store",children:"Cosmetics / Beauty Store"}),(0,g.jsx)(D,{value:"Jewellery / Fancy Store",children:"Jewellery / Fancy Store"}),(0,g.jsx)(D,{value:"Pet Store",children:"Pet Store"}),(0,g.jsx)(D,{value:"General Store",children:"General Store"}),(0,g.jsx)(D,{value:"Wholesale Business",children:"Wholesale Business"}),(0,g.jsx)(D,{value:"Computer & Laptop Store",children:"Computer & Laptop Store"}),(0,g.jsx)(D,{value:"Mobile And Laptop Store",children:"Mobile And Laptop Store"}),(0,g.jsx)(D,{value:"Other",children:"Other"})]})},{label:"Global Product",name:"global_product",valuePropName:"checked",component:(0,g.jsx)(N.A,{checkedChildren:"Yes",unCheckedChildren:"No"})}]:[]]};var L=o(98350),E=o(39387);const G=()=>{const e=(0,l.getCurrentUserRole)(),r="superadmin"===(null===e||void 0===e?void 0:e.toLowerCase()),o=(0,E.x)({queryHook:L.lh.useGetCategoryQuery,limit:20}),c=(0,E.x)({queryHook:L.lh.useGetVariantQuery,limit:20}),[d,i]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),h=(0,t.useCallback)(((e,r)=>e.reduce(((e,o)=>(e[o._id]=o[r],e)),{})),[]),p=(0,t.useMemo)((()=>h(c.items,"variant_name")),[c.items,h]),x=(0,t.useCallback)((()=>i(!0)),[]),S=(0,t.useCallback)((()=>m("barcode")),[]),j=(0,t.useCallback)((e=>!e.global_product||r),[r]),b=(0,t.useCallback)((e=>!e.global_product||r),[r]),y=(0,t.useMemo)((()=>({title:"Products",columns:_({variantMap:p,isSuperAdmin:r}),formItems:M({categoryDropdown:o,variantDropdown:c,isSuperAdmin:r,onScanClick:x,onBarcodeInputFocus:S}),entityName:"Product",formColumns:2,canEdit:j,canDelete:b})),[p,o,c,r,x,S,j,b]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.p,{resource:s.eZ.PRODUCT,config:y,enableDynamicFields:!0,entityName:"products"}),(0,g.jsx)(n.A,{visible:d,onClose:()=>i(!1),onScan:e=>{if(i(!1),"barcode"===u){const r=document.querySelector('input[name="barcode"]');r&&(r.value=e,r.dispatchEvent(new Event("input",{bubbles:!0})))}},title:"Scan Product Barcode",description:"Scan barcode to add to product"})]})}},28071:(e,r,o)=>{o.d(r,{A:()=>i,p:()=>d});var t=o(89379),n=o(53986),a=(o(65043),o(73146)),l=o(58209),s=o(70579);const c=["resource","config"];function d(e){let{resource:r,config:o}=e,d=(0,n.A)(e,c);const i=(0,l.BA)(r),u=(0,l.Ev)(r),m=(0,l.W9)(r),h=(0,t.A)((0,t.A)({},o),{},{canCreate:o.canCreate?()=>i&&o.canCreate():()=>i,canEdit:o.canEdit?e=>u&&o.canEdit(e):()=>u,canDelete:o.canDelete?e=>m&&o.canDelete(e):()=>m});return(0,s.jsx)(a.r,(0,t.A)({config:h},d))}const i=d}}]);
//# sourceMappingURL=5511.191ee160.chunk.js.map