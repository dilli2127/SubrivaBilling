{"version":3,"file":"static/js/771.85f11ecf.chunk.js","mappings":"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","sources":["helpers/sanitize.ts","webpack://SUBRIVA-BILLING/./src/components/common/EmailSendModal.module.css?97c3","components/common/EmailSendModal.tsx","pages/RetaillBill/components/BillViewModal.tsx","pages/RetaillBill/templates/ClassicBillingTemplate.tsx","pages/RetaillBill/templates/registry.ts","pages/RetaillBill/templates/ModernBillingTemplate.tsx","pages/RetaillBill/BillListPage.tsx"],"sourcesContent":["// HTML sanitization utilities to prevent XSS attacks\r\nimport DOMPurify from 'dompurify';\r\n\r\n/**\r\n * Sanitize HTML content to prevent XSS\r\n * Use before rendering any user-generated HTML\r\n */\r\nexport const sanitizeHTML = (dirty: string): string => {\r\n  return DOMPurify.sanitize(dirty, {\r\n    ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'a', 'p', 'br', 'ul', 'ol', 'li', 'span'],\r\n    ALLOWED_ATTR: ['href', 'title', 'target', 'class'],\r\n    ALLOW_DATA_ATTR: false,\r\n  });\r\n};\r\n\r\n/**\r\n * Sanitize HTML for rich text editors\r\n * More permissive tag set for formatted content\r\n */\r\nexport const sanitizeRichText = (dirty: string): string => {\r\n  return DOMPurify.sanitize(dirty, {\r\n    ALLOWED_TAGS: [\r\n      'b', 'i', 'em', 'strong', 'u', 's', 'a', 'p', 'br', \r\n      'ul', 'ol', 'li', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\r\n      'blockquote', 'code', 'pre', 'span', 'div', 'hr', 'table',\r\n      'thead', 'tbody', 'tr', 'th', 'td'\r\n    ],\r\n    ALLOWED_ATTR: ['href', 'title', 'target', 'class', 'id'],\r\n    // Note: style attribute removed for security - inline styles can be risky\r\n    ALLOW_DATA_ATTR: false,\r\n  });\r\n};\r\n\r\n/**\r\n * Strip all HTML tags - use for plain text fields\r\n */\r\nexport const stripHTML = (dirty: string): string => {\r\n  return DOMPurify.sanitize(dirty, {\r\n    ALLOWED_TAGS: [],\r\n    ALLOWED_ATTR: [],\r\n  });\r\n};\r\n\r\n/**\r\n * Sanitize URL to prevent javascript: and data: URLs\r\n */\r\nexport const sanitizeURL = (url: string): string => {\r\n  const sanitized = DOMPurify.sanitize(url, {\r\n    ALLOWED_TAGS: [],\r\n    ALLOWED_ATTR: [],\r\n  });\r\n  \r\n  // Check for dangerous protocols\r\n  const lowerURL = sanitized.toLowerCase().trim();\r\n  if (\r\n    lowerURL.startsWith('javascript:') ||\r\n    lowerURL.startsWith('data:') ||\r\n    lowerURL.startsWith('vbscript:')\r\n  ) {\r\n    return '#';\r\n  }\r\n  \r\n  return sanitized;\r\n};\r\n\r\n/**\r\n * Safe component for rendering sanitized HTML\r\n * Usage: <div {...createSafeHTML(userContent)} />\r\n */\r\nexport const createSafeHTML = (dirty: string): { dangerouslySetInnerHTML: { __html: string } } => {\r\n  return {\r\n    dangerouslySetInnerHTML: {\r\n      __html: sanitizeHTML(dirty)\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Sanitize form input to prevent XSS in text fields\r\n */\r\nexport const sanitizeInput = (value: string): string => {\r\n  // Remove any HTML tags and encode special characters\r\n  return stripHTML(value)\r\n    .replace(/[<>]/g, '')\r\n    .trim();\r\n};\r\n\r\n","// extracted by mini-css-extract-plugin\nexport default {\"emailSendModal\":\"EmailSendModal_emailSendModal__BfdYk\",\"ant-modal-header\":\"EmailSendModal_ant-modal-header__8M-dy\",\"ant-modal-title\":\"EmailSendModal_ant-modal-title__UKq46\",\"emailSendHeader\":\"EmailSendModal_emailSendHeader__C2GeM\",\"anticon\":\"EmailSendModal_anticon__M+hfh\",\"ant-modal-body\":\"EmailSendModal_ant-modal-body__FQTZE\",\"emailSendContent\":\"EmailSendModal_emailSendContent__18hO-\",\"emailForm\":\"EmailSendModal_emailForm__Dz-ws\",\"formSection\":\"EmailSendModal_formSection__XePkG\",\"ant-typography\":\"EmailSendModal_ant-typography__Rf4oP\",\"ant-form-item-label\":\"EmailSendModal_ant-form-item-label__utKPG\",\"ant-input\":\"EmailSendModal_ant-input__nTmCv\",\"ant-input-affix-wrapper\":\"EmailSendModal_ant-input-affix-wrapper__uN9GE\",\"ant-input-prefix\":\"EmailSendModal_ant-input-prefix__n2R1a\",\"formActions\":\"EmailSendModal_formActions__0+vVX\",\"ant-btn\":\"EmailSendModal_ant-btn__NienV\",\"ant-btn-primary\":\"EmailSendModal_ant-btn-primary__0FF0H\",\"emailPreview\":\"EmailSendModal_emailPreview__z0YAf\",\"previewContent\":\"EmailSendModal_previewContent__i+Cpp\",\"previewHeader\":\"EmailSendModal_previewHeader__Y+2Wh\",\"previewBody\":\"EmailSendModal_previewBody__wL6Yl\",\"htmlPreview\":\"EmailSendModal_htmlPreview__Lr4X+\",\"total\":\"EmailSendModal_total__HXP29\",\"previewActions\":\"EmailSendModal_previewActions__l-Y3Y\",\"billInfo\":\"EmailSendModal_billInfo__1yHvY\",\"ant-alert\":\"EmailSendModal_ant-alert__V1924\",\"ant-alert-message\":\"EmailSendModal_ant-alert-message__a7i8z\",\"ant-alert-description\":\"EmailSendModal_ant-alert-description__2m7uE\",\"successState\":\"EmailSendModal_successState__gVP0P\",\"successIcon\":\"EmailSendModal_successIcon__levgm\",\"ant-typography-caption\":\"EmailSendModal_ant-typography-caption__bjmAF\",\"ant-spin\":\"EmailSendModal_ant-spin__m4HeQ\",\"ant-spin-dot\":\"EmailSendModal_ant-spin-dot__2ADDo\",\"slideInUp\":\"EmailSendModal_slideInUp__Mt1P+\"};","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Form, Input, Button, Space, Typography, Divider, Alert, Spin, message } from 'antd';\r\nimport { \r\n  MailOutlined, \r\n  SendOutlined, \r\n  EyeOutlined, \r\n  CloseOutlined,\r\n  CheckCircleOutlined,\r\n  ExclamationCircleOutlined\r\n} from '@ant-design/icons';\r\nimport { useApiActions } from '../../services/api/useApiActions';\r\nimport { sanitizeRichText } from '../../helpers/sanitize';\r\nimport styles from './EmailSendModal.module.css';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { TextArea } = Input;\r\n\r\ninterface EmailSendModalProps {\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  billData?: any;\r\n  customerEmail?: string;\r\n  customerName?: string;\r\n}\r\n\r\ninterface EmailPreview {\r\n  subject: string;\r\n  text: string;\r\n  html: string;\r\n}\r\n\r\nconst EmailSendModal: React.FC<EmailSendModalProps> = ({\r\n  visible,\r\n  onClose,\r\n  billData,\r\n  customerEmail,\r\n  customerName\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n  const [previewMode, setPreviewMode] = useState(false);\r\n  const [emailPreview, setEmailPreview] = useState<EmailPreview | null>(null);\r\n  const [sending, setSending] = useState(false);\r\n  const [sendSuccess, setSendSuccess] = useState(false);\r\n  \r\n  const { getEntityApi } = useApiActions();\r\n\r\n  // Initialize form with customer email\r\n  useEffect(() => {\r\n    if (visible && customerEmail) {\r\n      form.setFieldsValue({\r\n        to: customerEmail,\r\n        subject: `Invoice #${billData?.invoice_no || ''} - ${customerName || ''}`\r\n      });\r\n    }\r\n  }, [visible, customerEmail, customerName, billData, form]);\r\n\r\n  // Generate email preview\r\n  const generatePreview = async () => {\r\n    if (!billData) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Simulate generating email preview (you can replace this with actual API call)\r\n      const preview: EmailPreview = {\r\n        subject: `Invoice #${billData.invoice_no} - ${billData.customerDetails?.full_name || 'Customer'}`,\r\n        text: generateInvoiceText(billData),\r\n        html: generateInvoiceHTML(billData)\r\n      };\r\n      \r\n      setEmailPreview(preview);\r\n      setPreviewMode(true);\r\n      form.setFieldsValue({ subject: preview.subject });\r\n    } catch (error) {\r\n      message.error('Failed to generate email preview');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Generate invoice text content\r\n  const generateInvoiceText = (invoiceData: any) => {\r\n    return `\r\nDear ${invoiceData.customerDetails?.full_name || 'Valued Customer'},\r\n\r\nThank you for your business! Please find your invoice details below:\r\n\r\nInvoice Number: ${invoiceData.invoice_no}\r\nDate: ${new Date(invoiceData.date).toLocaleDateString()}\r\nTotal Amount: ₹${invoiceData.total_amount || 0}\r\n\r\nItems:\r\n${invoiceData.Items?.map((item: any) => \r\n  `- ${item.productItems?.name} (${item.qty} x ₹${item.price}) = ₹${item.amount}`\r\n).join('\\n') || 'No items'}\r\n\r\nPayment Status: ${invoiceData.is_paid ? 'Paid' : 'Pending'}\r\n\r\nThank you for choosing us!\r\n\r\nBest regards,\r\nSubriva Billing Team\r\n    `.trim();\r\n  };\r\n\r\n  // Generate invoice HTML content\r\n  const generateInvoiceHTML = (invoiceData: any) => {\r\n    return `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <style>\r\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n            .header { background: #f8f9fa; padding: 20px; text-align: center; }\r\n            .content { padding: 20px; }\r\n            .invoice-table { width: 100%; border-collapse: collapse; margin: 20px 0; }\r\n            .invoice-table th, .invoice-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\r\n            .invoice-table th { background-color: #f8f9fa; }\r\n            .total { font-weight: bold; font-size: 18px; }\r\n            .footer { background: #f8f9fa; padding: 20px; text-align: center; margin-top: 20px; }\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <div class=\"header\">\r\n            <h1>Subriva Billing</h1>\r\n            <h2>Invoice #${invoiceData.invoice_no}</h2>\r\n        </div>\r\n        \r\n        <div class=\"content\">\r\n            <p>Dear <strong>${invoiceData.customerDetails?.full_name || 'Valued Customer'}</strong>,</p>\r\n            \r\n            <p>Thank you for your business! Please find your invoice details below:</p>\r\n            \r\n            <table class=\"invoice-table\">\r\n                <tr>\r\n                    <th>Invoice Number</th>\r\n                    <td>${invoiceData.invoice_no}</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Date</th>\r\n                    <td>${new Date(invoiceData.date).toLocaleDateString()}</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Customer</th>\r\n                    <td>${invoiceData.customerDetails?.full_name || 'N/A'}</td>\r\n                </tr>\r\n            </table>\r\n            \r\n            <h3>Items:</h3>\r\n            <table class=\"invoice-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Product</th>\r\n                        <th>Quantity</th>\r\n                        <th>Price</th>\r\n                        <th>Amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    ${invoiceData.Items?.map((item: any) => `\r\n                        <tr>\r\n                            <td>${item.productItems?.name || 'N/A'}</td>\r\n                            <td>${item.qty || 0}</td>\r\n                            <td>₹${item.price || 0}</td>\r\n                            <td>₹${item.amount || 0}</td>\r\n                        </tr>\r\n                    `).join('') || '<tr><td colspan=\"4\">No items</td></tr>'}\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr class=\"total\">\r\n                        <td colspan=\"3\">Total Amount</td>\r\n                        <td>₹${invoiceData.total_amount || 0}</td>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n            \r\n            <p><strong>Payment Status:</strong> ${invoiceData.is_paid ? 'Paid' : 'Pending'}</p>\r\n        </div>\r\n        \r\n        <div class=\"footer\">\r\n            <p>Thank you for choosing us!</p>\r\n            <p><strong>Best regards,<br>Subriva Billing Team</strong></p>\r\n        </div>\r\n    </body>\r\n    </html>\r\n    `;\r\n  };\r\n\r\n  // Handle email sending\r\n  const handleSendEmail = async (values: any) => {\r\n    if (!billData) {\r\n      message.error('No bill data available');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    try {\r\n      // Call backend email API\r\n      const token = sessionStorage.getItem('token');\r\n      const csrfToken = sessionStorage.getItem('csrf-token');\r\n      \r\n      const response = await fetch(`${process.env.REACT_APP_API_URL || ''}/email/send-invoice`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'token': token || '',\r\n          'x-csrf-token': csrfToken || ''\r\n        },\r\n        body: JSON.stringify({\r\n          customerEmail: values.to,\r\n          invoiceData: billData,\r\n          subject: values.subject,\r\n          customMessage: values.message || ''\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setSendSuccess(true);\r\n        message.success(`Invoice sent successfully to ${values.to}`);\r\n        setTimeout(() => {\r\n          onClose();\r\n        }, 2000);\r\n      } else {\r\n        message.error(result.error || 'Failed to send email');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      message.error('Failed to send email. Please try again.');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = () => {\r\n    form.validateFields().then(handleSendEmail);\r\n  };\r\n\r\n  // Reset modal state when closing\r\n  const handleClose = () => {\r\n    form.resetFields();\r\n    setPreviewMode(false);\r\n    setEmailPreview(null);\r\n    setSendSuccess(false);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={\r\n        <div className={styles.emailSendHeader}>\r\n          <MailOutlined />\r\n          <span>Send Invoice via Email</span>\r\n        </div>\r\n      }\r\n      open={visible}\r\n      onCancel={handleClose}\r\n      width={900}\r\n      className={styles.emailSendModal}\r\n      footer={null}\r\n      destroyOnClose\r\n    >\r\n      <div className={styles.emailSendContent}>\r\n        {sendSuccess ? (\r\n          // Success State\r\n          <div className={styles.successState}>\r\n            <CheckCircleOutlined className={styles.successIcon} />\r\n            <Title level={3}>Email Sent Successfully!</Title>\r\n            <Text type=\"secondary\">\r\n              The invoice has been sent to {form.getFieldValue('to')}\r\n            </Text>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Email Form */}\r\n            <Form\r\n              form={form}\r\n              layout=\"vertical\"\r\n              onFinish={handleSubmit}\r\n              className={styles.emailForm}\r\n            >\r\n                <div className={styles.formSection}>\r\n                <Title level={4}>Email Details</Title>\r\n                \r\n                <Form.Item\r\n                  label=\"To\"\r\n                  name=\"to\"\r\n                  rules={[\r\n                    { required: true, message: 'Please enter recipient email' },\r\n                    { type: 'email', message: 'Please enter valid email address' }\r\n                  ]}\r\n                >\r\n                  <Input\r\n                    prefix={<MailOutlined />}\r\n                    placeholder=\"customer@example.com\"\r\n                    size=\"large\"\r\n                  />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                  label=\"Subject\"\r\n                  name=\"subject\"\r\n                  rules={[{ required: true, message: 'Please enter email subject' }]}\r\n                >\r\n                  <Input\r\n                    placeholder=\"Invoice subject\"\r\n                    size=\"large\"\r\n                  />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                  label=\"Custom Message (Optional)\"\r\n                  name=\"message\"\r\n                >\r\n                  <TextArea\r\n                    rows={3}\r\n                    placeholder=\"Add a personal message to the customer...\"\r\n                  />\r\n                </Form.Item>\r\n              </div>\r\n\r\n              <Divider />\r\n\r\n              {/* Actions */}\r\n              <div className={styles.formActions}>\r\n                <Space>\r\n                  <Button\r\n                    icon={<EyeOutlined />}\r\n                    onClick={generatePreview}\r\n                    loading={loading}\r\n                    disabled={!billData}\r\n                  >\r\n                    Preview Email\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    type=\"primary\"\r\n                    icon={<SendOutlined />}\r\n                    htmlType=\"submit\"\r\n                    loading={sending}\r\n                    disabled={!billData}\r\n                  >\r\n                    Send Email\r\n                  </Button>\r\n                  \r\n                  <Button onClick={handleClose}>\r\n                    Cancel\r\n                  </Button>\r\n                </Space>\r\n              </div>\r\n            </Form>\r\n\r\n            {/* Email Preview */}\r\n            {previewMode && emailPreview && (\r\n              <div className={styles.emailPreview}>\r\n                <Divider>Email Preview</Divider>\r\n                <div className={styles.previewContent}>\r\n                  <div className={styles.previewHeader}>\r\n                    <Title level={5}>Subject: {emailPreview.subject}</Title>\r\n                  </div>\r\n                  \r\n                  <div className={styles.previewBody}>\r\n                    <div \r\n                      className={styles.htmlPreview}\r\n                      dangerouslySetInnerHTML={{ __html: sanitizeRichText(emailPreview.html) }}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className={styles.previewActions}>\r\n                    <Button\r\n                      type=\"primary\"\r\n                      icon={<SendOutlined />}\r\n                      onClick={handleSubmit}\r\n                      loading={sending}\r\n                    >\r\n                      Send This Email\r\n                    </Button>\r\n                    <Button onClick={() => setPreviewMode(false)}>\r\n                      Back to Edit\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Bill Info */}\r\n            {billData && (\r\n              <div className={styles.billInfo}>\r\n                <Alert\r\n                  message=\"Invoice Information\"\r\n                  description={\r\n                    <div>\r\n                      <Text strong>Invoice #:</Text> {billData.invoice_no}<br />\r\n                      <Text strong>Customer:</Text> {billData.customerDetails?.full_name || 'N/A'}<br />\r\n                      <Text strong>Amount:</Text> ₹{billData.total_amount || 0}\r\n                    </div>\r\n                  }\r\n                  type=\"info\"\r\n                  showIcon\r\n                />\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EmailSendModal;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { Modal, Button, Table, Typography } from \"antd\";\r\nimport { PrinterOutlined, MailOutlined } from \"@ant-design/icons\";\r\nimport EmailSendModal from '../../../components/common/EmailSendModal';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\ninterface BillViewModalProps {\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  billData: {\r\n    invoice_no: string;\r\n    date: string;\r\n    sub_total: number;\r\n    customerDetails: any;\r\n    payment_mode: string;\r\n    Items: any[];\r\n    total_gst: number;\r\n    cgst: number;\r\n    sgst: number;\r\n    total_amount: number;\r\n    is_paid: boolean;\r\n    is_partially_paid: boolean;\r\n    paid_amount: number;\r\n    discount: number;\r\n    discount_type: string;\r\n    is_gst_included: boolean;\r\n    sale_type: \"retail\" | \"wholesale\";\r\n    value_of_goods: number;\r\n  };\r\n}\r\n\r\nconst BillViewModal: React.FC<BillViewModalProps> = ({\r\n  visible,\r\n  onClose,\r\n  billData,\r\n}) => {\r\n  const printFrameRef = useRef<HTMLIFrameElement>(null);\r\n  const [emailModalVisible, setEmailModalVisible] = useState(false);\r\n  const formatAmount = (amount: any) => {\r\n    const numAmount = Number(amount) || 0;\r\n    return numAmount.toFixed(2);\r\n  };\r\n  const shopDetails = {\r\n    name: \"Focuz Medicals\",\r\n    address: \"123 MG Road, Bangalore, Karnataka - 560001\",\r\n    gst: \"29ABCDE1234F1Z5\",\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Item\",\r\n      dataIndex: \"productItems\",\r\n      key: \"name\",\r\n      render: (_: any, record: any) => {\r\n        const product = record.productItems;\r\n        if (!product) return \"\";\r\n        const variantName = product.VariantItem?.variant_name;\r\n        return variantName ? `${product.name} - ${variantName}` : product.name;\r\n      },\r\n    },\r\n    {\r\n      title: \"Qty\",\r\n      dataIndex: \"qty\",\r\n      key: \"qty\",\r\n      width: 100,\r\n      render: (qty: any) => qty || 0,\r\n    },\r\n    {\r\n      title: \"Loose Qty\",\r\n      dataIndex: \"loose_qty\",\r\n      key: \"loose_qty\",\r\n      width: 100,\r\n      render: (loose_qty: any) => loose_qty || 0,\r\n    },\r\n    {\r\n      title: \"Price\",\r\n      dataIndex: \"price\",\r\n      key: \"price\",\r\n      width: 120,\r\n      render: (price: any) => `₹ ${formatAmount(price)}`,\r\n    },\r\n    {\r\n      title: \"Amount\",\r\n      dataIndex: \"amount\",\r\n      key: \"amount\",\r\n      width: 120,\r\n      render: (amount: any) => `₹ ${formatAmount(amount)}`,\r\n    },\r\n  ];\r\n\r\n  const handlePrint = () => {\r\n    const content = `\r\n      <html>\r\n        <head>\r\n          <title>Sale - ${billData.invoice_no}</title>\r\n          <style>\r\n            body { font-family: Arial, sans-serif; padding: 20px; color: #222; }\r\n            .shop-info { text-align: center; margin-bottom: 20px; }\r\n            .shop-info h2 { margin-bottom: 0; color: #1890ff; }\r\n            .info-flex { display: flex; justify-content: space-between; margin-bottom: 10px; }\r\n            table { width: 100%; border-collapse: collapse; margin-top: 20px; }\r\n            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\r\n            th { background-color: #f5f5f5; }\r\n            .total { text-align: right; font-weight: bold; margin-top: 10px; }\r\n            .thank-you { text-align: center; margin-top: 40px; font-size: 16px; color: #1890ff; font-weight: bold; }\r\n            @media print {\r\n              .no-print { display: none; }\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"shop-info\">\r\n            <h2>${shopDetails.name}</h2>\r\n            <p>${shopDetails.address}</p>\r\n            <p><strong>GST No:</strong> ${shopDetails.gst}</p>\r\n          </div>\r\n\r\n          <div class=\"info-flex\">\r\n            <div>\r\n              <p><strong>Invoice No:</strong> ${billData.invoice_no}</p>\r\n              <p><strong>Date:</strong> ${new Date(\r\n                billData.date\r\n              ).toLocaleDateString()}</p>\r\n            </div>\r\n            <div style=\"text-align: right;\">\r\n              <p><strong>Customer:</strong> ${\r\n                billData.customerDetails?.full_name || \"\"\r\n              }</p>\r\n              <p><strong>Payment Mode:</strong> ${\r\n                billData.payment_mode || \"\"\r\n              }</p>\r\n            </div>\r\n          </div>\r\n\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Item</th>\r\n                <th>Qty</th>\r\n                <th>Loose Qty</th>\r\n                <th>Price</th>\r\n                <th>Amount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              ${billData.Items.map((item) => {\r\n                const product = item.productItems;\r\n                const itemName = product\r\n                  ? `${product.name}${\r\n                      product.VariantItem?.variant_name\r\n                        ? ` - ${product.VariantItem.variant_name}`\r\n                        : \"\"\r\n                    }`\r\n                  : \"\";\r\n                return `\r\n                  <tr>\r\n                    <td>${itemName}</td>\r\n                    <td>${item.qty || 0}</td>\r\n                    <td>${item.loose_qty || 0}</td>\r\n                    <td>₹ ${formatAmount(item.price)}</td>\r\n                    <td>₹ ${formatAmount(item.amount)}</td>\r\n                  </tr>\r\n                `;\r\n              }).join(\"\")}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div class=\"total\">\r\n            <p>Value of Goods: ₹ ${formatAmount(billData.value_of_goods)}</p>\r\n            ${\r\n              billData.discount > 0\r\n                ? `\r\n              <p>Discount: ${\r\n                billData.discount_type === \"percentage\"\r\n                  ? billData.discount + \"%\"\r\n                  : \"₹ \" + formatAmount(billData.discount)\r\n              }</p>\r\n            `\r\n                : \"\"\r\n            }\r\n            <p>Total GST: ₹ ${formatAmount(billData.total_gst)}</p>\r\n            <p>CGST: ₹ ${formatAmount(billData.cgst || billData.total_gst / 2)}</p>\r\n            <p>SGST: ₹ ${formatAmount(billData.sgst || billData.total_gst / 2)}</p>\r\n            <p><strong>${\r\n              billData.sale_type === \"retail\" ? \"Bill Value\" : \"Invoice Value\"\r\n            }: ₹ ${formatAmount(billData.total_amount)}</strong></p>\r\n            ${\r\n              billData.is_partially_paid\r\n                ? `\r\n              <p>Paid Amount: ₹ ${formatAmount(billData.paid_amount)}</p>\r\n              <p>Remaining Amount: ₹ ${formatAmount(\r\n                Number(billData.total_amount) - Number(billData.paid_amount)\r\n              )}</p>\r\n            `\r\n                : \"\"\r\n            }\r\n            <p><strong>Payment Status:</strong> ${\r\n              billData.is_paid\r\n                ? \"Fully Paid\"\r\n                : billData.is_partially_paid\r\n                ? \"Partially Paid\"\r\n                : \"Unpaid\"\r\n            }</p>\r\n          </div>\r\n\r\n          <div class=\"thank-you\">\r\n            Thank you for shopping with us!\r\n          </div>\r\n\r\n          <script>\r\n            window.onload = function() {\r\n              window.print();\r\n              window.onafterprint = function() {\r\n                window.parent.postMessage('printComplete', '*');\r\n              };\r\n            };\r\n          </script>\r\n        </body>\r\n      </html>\r\n    `;\r\n\r\n    const iframe = printFrameRef.current;\r\n    iframe!.contentWindow!.document.open();\r\n    iframe!.contentWindow!.document.write(content);\r\n    iframe!.contentWindow!.document.close();\r\n\r\n    window.addEventListener(\"message\", (event) => {\r\n      if (event.data === \"printComplete\") {\r\n        onClose();\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        title={\r\n          <Title level={4} style={{ margin: 0, color: \"#1890ff\" }}>\r\n            Sale Details\r\n          </Title>\r\n        }\r\n        open={visible}\r\n        onCancel={onClose}\r\n        width={800}\r\n        footer={[\r\n          <Button\r\n            key=\"email\"\r\n            type=\"primary\"\r\n            icon={<MailOutlined />}\r\n            onClick={() => setEmailModalVisible(true)}\r\n          >\r\n            Send via Email\r\n          </Button>,\r\n          <Button\r\n            key=\"print\"\r\n            icon={<PrinterOutlined />}\r\n            onClick={handlePrint}\r\n          >\r\n            Print Sale\r\n          </Button>,\r\n          <Button key=\"close\" onClick={onClose}>\r\n            Close\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <div style={{ textAlign: \"center\", marginBottom: 16 }}>\r\n          <Title level={4} style={{ marginBottom: 0, color: \"#1890ff\" }}>\r\n            {shopDetails.name}\r\n          </Title>\r\n          <Text>{shopDetails.address}</Text>\r\n          <br />\r\n          <Text>\r\n            <strong>GST No:</strong> <Text code>{shopDetails.gst}</Text>\r\n          </Text>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: 20,\r\n          }}\r\n        >\r\n          <div>\r\n            <Text strong>Invoice No:</Text> {billData.invoice_no}\r\n            <br />\r\n            <Text strong>Date:</Text>{\" \"}\r\n            {new Date(billData.date).toLocaleDateString()}\r\n          </div>\r\n          <div style={{ textAlign: \"right\" }}>\r\n            <Text strong>Customer:</Text> {billData.customerDetails?.full_name}\r\n            <br />\r\n            <Text strong>Payment Mode:</Text> {billData.payment_mode}\r\n          </div>\r\n        </div>\r\n        <Table\r\n          dataSource={billData.Items}\r\n          columns={columns}\r\n          pagination={false}\r\n          bordered\r\n          summary={() => (\r\n            <Table.Summary.Row>\r\n              <Table.Summary.Cell index={0} colSpan={4}>\r\n                <Text strong>Total Amount:</Text>\r\n              </Table.Summary.Cell>\r\n              <Table.Summary.Cell index={1}>\r\n                <Text strong>₹ {formatAmount(billData.sub_total)}</Text>\r\n              </Table.Summary.Cell>\r\n            </Table.Summary.Row>\r\n          )}\r\n        />\r\n\r\n        <div style={{ marginTop: 20, textAlign: \"right\" }}>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"8px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            <Text strong>Value of Goods:</Text>\r\n            <Text>₹ {formatAmount(billData.value_of_goods)}</Text>\r\n          </div>\r\n          {billData.discount > 0 && (\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-end\",\r\n                gap: \"8px\",\r\n                marginBottom: \"8px\",\r\n              }}\r\n            >\r\n              <Text strong>Discount:</Text>\r\n              <Text>\r\n                {billData.discount_type === \"percentage\"\r\n                  ? `${billData.discount}%`\r\n                  : `₹ ${formatAmount(billData.discount)}`}\r\n              </Text>\r\n            </div>\r\n          )}\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"8px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            <Text strong>Total GST:</Text>\r\n            <Text>₹ {formatAmount(billData.total_gst)}</Text>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"8px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            <Text strong>CGST:</Text>\r\n            <Text>₹ {formatAmount(billData.cgst || billData.total_gst / 2)}</Text>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"8px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            <Text strong>SGST:</Text>\r\n            <Text>₹ {formatAmount(billData.sgst || billData.total_gst / 2)}</Text>\r\n          </div>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"flex-end\",\r\n              gap: \"8px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            <Text strong>\r\n              {billData.sale_type === \"retail\" ? \"Bill Value\" : \"Invoice Value\"}\r\n              :\r\n            </Text>\r\n            <Text>₹ {formatAmount(billData.total_amount)}</Text>\r\n          </div>\r\n          <Text strong>Payment Status: </Text>\r\n          {billData.is_paid ? (\r\n            <Text type=\"success\">Fully Paid</Text>\r\n          ) : billData.is_partially_paid ? (\r\n            <>\r\n              <Text type=\"warning\">Partially Paid</Text>\r\n              <br />\r\n              <Text>Paid Amount: ₹ {formatAmount(billData.paid_amount)}</Text>\r\n              <br />\r\n              <Text>\r\n                Remaining Amount: ₹{\" \"}\r\n                {formatAmount(\r\n                  Number(billData.total_amount) - Number(billData.paid_amount)\r\n                )}\r\n              </Text>\r\n            </>\r\n          ) : (\r\n            <Text type=\"danger\">Unpaid</Text>\r\n          )}\r\n        </div>\r\n\r\n        <div style={{ textAlign: \"center\", marginTop: 40 }}>\r\n          <Text style={{ color: \"#1890ff\", fontWeight: 500 }}>\r\n            Thank you for shopping with us!\r\n          </Text>\r\n        </div>\r\n      </Modal>\r\n\r\n      <iframe\r\n        ref={printFrameRef}\r\n        style={{ display: \"none\" }}\r\n        title=\"print-frame\"\r\n      />\r\n\r\n      {/* Email Send Modal */}\r\n      <EmailSendModal\r\n        visible={emailModalVisible}\r\n        onClose={() => setEmailModalVisible(false)}\r\n        billData={billData}\r\n        customerEmail={billData?.customerDetails?.email}\r\n        customerName={billData?.customerDetails?.full_name}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BillViewModal;\r\n","import React from 'react';\r\nimport { useUser } from '../../../components/antd/UserContext';\r\n\r\ninterface ClassicBillingTemplateProps {\r\n  billData: any;\r\n}\r\n\r\nconst ClassicBillingTemplate: React.FC<ClassicBillingTemplateProps> = ({\r\n  billData,\r\n}) => {\r\n  const userItem = useUser();\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontFamily: 'Courier New, monospace',\r\n        background: '#fff',\r\n        border: '1px solid #ddd',\r\n        maxWidth: '380px', // Thermal receipt width\r\n        margin: '20px auto',\r\n        padding: '16px',\r\n        fontSize: '12px',\r\n        color: '#000',\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div style={{ textAlign: 'center', marginBottom: '8px' }}>\r\n        <h3 style={{ margin: '4px 0', fontWeight: 'bold', fontSize: '16px' }}>\r\n          {userItem?.organisationItems?.org_name || ''}\r\n        </h3>\r\n        <div style={{ fontSize: '11px', marginBottom: '4px' }}>\r\n          {userItem?.branchItems?.address1 ||\r\n            ''}\r\n        </div>\r\n        <div style={{ fontSize: '11px' }}>\r\n          GSTIN: {userItem?.organisationItems?.gst_number || '33XXXXXXXXXXX'}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Invoice Info */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          marginBottom: '8px',\r\n        }}\r\n      >\r\n        <div>\r\n          <div>BILL NO: {billData?.invoice_no || 'INV-XXXX'}</div>\r\n          <div>\r\n            DATE:{' '}\r\n            {billData?.date\r\n              ? new Date(billData.date).toLocaleDateString()\r\n              : '-'}\r\n          </div>\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <div>\r\n            NAME:{' '}\r\n            {(billData?.customerName || '').substring(0, 20).toUpperCase()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed #000', margin: '4px 0' }}></div>\r\n\r\n      {/* Items Table */}\r\n      <table\r\n        style={{\r\n          width: '100%',\r\n          borderCollapse: 'collapse',\r\n          marginBottom: '8px',\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th style={tableHeaderStyle}>S.No</th>\r\n            <th style={tableHeaderStyle}>Item</th>\r\n            <th style={tableHeaderStyle}>Qty</th>\r\n            <th style={tableHeaderStyle}>Rate</th>\r\n            <th style={tableHeaderStyle}>MRP</th>\r\n            <th style={tableHeaderStyle}>Amt</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {billData?.items?.map((item: any, idx: number) => (\r\n            <tr key={idx}>\r\n              <td style={tableCellStyle}>{idx + 1}</td>\r\n              <td style={tableCellStyle}>\r\n                {item.name.length > 15\r\n                  ? item.name.substring(0, 15) + '...'\r\n                  : item.name}\r\n              </td>\r\n              <td style={tableCellStyle}>{item.qty}</td>\r\n              <td style={tableCellStyle}>₹{item.price}</td>\r\n              <td style={tableCellStyle}>₹{item.mrp || item.price}</td>\r\n              <td style={tableCellStyle}>₹{item.amount}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div style={{ borderTop: '1px dashed #000', margin: '4px 0' }}></div>\r\n\r\n      {/* Total Section */}\r\n      <div style={{ textAlign: 'right', fontWeight: 'bold' }}>\r\n        <div>Subtotal: ₹ {billData?.total}</div>\r\n        <div>CGST: ₹ {(billData?.cgst || (billData?.total_gst || 0) / 2).toFixed(2)}</div>\r\n        <div>SGST: ₹ {(billData?.sgst || (billData?.total_gst || 0) / 2).toFixed(2)}</div>\r\n        <div style={{ fontSize: '14px' }}>\r\n          NET AMOUNT: ₹ {billData?.total}\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px dashed #000', margin: '8px 0' }}></div>\r\n\r\n      {/* Footer */}\r\n      <div style={{ textAlign: 'center', fontSize: '11px' }}>\r\n        *** GET WELL SOON. THANK YOU ***\r\n        <br />\r\n        Goods Once Sold Cannot Be Taken Back\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst tableHeaderStyle = {\r\n  borderBottom: '1px solid #000',\r\n  padding: '2px',\r\n  textAlign: 'left' as const,\r\n  fontSize: '11px',\r\n};\r\n\r\nconst tableCellStyle = {\r\n  padding: '2px',\r\n  fontSize: '11px',\r\n};\r\n\r\nexport default ClassicBillingTemplate;\r\n","import ClassicBillingTemplate from './ClassicBillingTemplate';\r\nimport ModernBillingTemplate from './ModernBillingTemplate';\r\n\r\nexport const billingTemplates = {\r\n  classic: {\r\n    label: 'Classic',\r\n    component: ClassicBillingTemplate,\r\n    previewImg: 'https://via.placeholder.com/220x120?text=Classic',\r\n  },\r\n  modern: {\r\n    label: 'Modern',\r\n    component: ModernBillingTemplate,\r\n    previewImg: 'https://via.placeholder.com/220x120?text=Modern',\r\n  },\r\n};\r\n\r\nexport type BillingTemplateKey = keyof typeof billingTemplates; ","import React from 'react';\r\nimport { useUser } from '../../../components/antd/UserContext';\r\n\r\ninterface ModernBillingTemplateProps {\r\n  billData: any;\r\n}\r\n\r\nconst ModernBillingTemplate: React.FC<ModernBillingTemplateProps> = ({\r\n  billData,\r\n}) => {\r\n  const userItem = useUser();\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: 30,\r\n        background: '#fff',\r\n        border: '1px solid #ccc',\r\n        borderRadius: 12,\r\n        maxWidth: 850,\r\n        margin: '20px auto',\r\n        color: '#333',\r\n        fontFamily: 'Georgia, serif',\r\n        boxShadow: '0 0 10px rgba(0,0,0,0.08)',\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          borderBottom: '2px solid #333',\r\n          paddingBottom: 10,\r\n          marginBottom: 20,\r\n        }}\r\n      >\r\n        <div>\r\n          <h1 style={{ margin: 0, fontSize: 24 }}>\r\n            {userItem?.organisationItems?.org_name || 'Your Company Name'}\r\n          </h1>\r\n          <p style={{ margin: '5px 0', fontSize: 14 }}>\r\n            {userItem?.branchItems?.branch_name || 'Branch Name'}\r\n          </p>\r\n          <p style={{ margin: 0, fontSize: 12 }}>\r\n            {userItem?.branchItems?.address1 || 'Branch Address'}\r\n          </p>\r\n        </div>\r\n        <div style={{ textAlign: 'right', fontSize: 12 }}>\r\n          <p style={{ margin: 0 }}>\r\n            <strong>GSTIN:</strong>{' '}\r\n            {userItem?.organisationItems?.gst_number || '-'}\r\n          </p>\r\n          <p style={{ margin: '5px 0', fontWeight: 600 }}>\r\n            {billData?.sale_type === 'wholesale' ? 'INVOICE' : 'CASH BILL'}\r\n          </p>\r\n          <p style={{ margin: 0 }}>\r\n            <strong>Invoice #:</strong> {billData?.invoice_no || '-'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Customer Info */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          marginBottom: 20,\r\n        }}\r\n      >\r\n        <div style={{ fontSize: 13 }}>\r\n          <p style={{ margin: '2px 0' }}>\r\n            <strong>Bill To:</strong> {billData?.customerName || 'Customer Name'}\r\n          </p>\r\n          <p style={{ margin: '2px 0', color: '#555' }}>\r\n            {billData?.customerAddress || 'Customer Address'}\r\n          </p>\r\n        </div>\r\n        <div style={{ textAlign: 'right', fontSize: 13 }}>\r\n          <p style={{ margin: '2px 0' }}>\r\n            <strong>Date:</strong>{' '}\r\n            {billData?.date\r\n              ? new Date(billData.date).toLocaleDateString()\r\n              : '-'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <table\r\n        style={{\r\n          width: '100%',\r\n          borderCollapse: 'collapse',\r\n          marginBottom: 20,\r\n        }}\r\n      >\r\n        <thead>\r\n          <tr style={{ background: 'rgba(255,255,255,0.08)' }}>\r\n            <th style={{ padding: 10, textAlign: 'left' }}>Item</th>\r\n            <th style={{ padding: 10, textAlign: 'right' }}>Qty</th>\r\n            <th style={{ padding: 10, textAlign: 'right' }}>Price</th>\r\n            <th style={{ padding: 10, textAlign: 'right' }}>MRP</th>\r\n            <th style={{ padding: 10, textAlign: 'right' }}>Amount</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {billData?.items?.map((item: any, idx: number) => (\r\n            <tr\r\n              key={idx}\r\n              style={{ borderBottom: '1px solid rgba(255,255,255,0.10)' }}\r\n            >\r\n              <td style={{ padding: 10 }}>{item.name}</td>\r\n              <td style={{ padding: 10, textAlign: 'right' }}>{item.qty}</td>\r\n              <td style={{ padding: 10, textAlign: 'right' }}>\r\n                {item.price}\r\n              </td>\r\n              <td style={{ padding: 10, textAlign: 'right' }}>\r\n                {item.mrp || item.price}\r\n              </td>\r\n              <td style={{ padding: 10, textAlign: 'right' }}>\r\n                {item.amount}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Totals */}\r\n      <div style={{ textAlign: 'right', fontSize: 14 }}>\r\n        {billData?.discount > 0 && (\r\n          <p>\r\n            Discount:{' '}\r\n            {billData.discount_type === 'percentage'\r\n              ? `${billData.discount}%`\r\n              : `₹ ${billData.discount}`}\r\n          </p>\r\n        )}\r\n        <p>CGST: ₹ {(billData?.cgst || (billData?.total_gst || 0) / 2).toFixed(2)}</p>\r\n        <p>SGST: ₹ {(billData?.sgst || (billData?.total_gst || 0) / 2).toFixed(2)}</p>\r\n        <h2 style={{ margin: 0 }}>Grand Total: ₹ {billData?.total}</h2>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div\r\n        style={{\r\n          textAlign: 'center',\r\n          marginTop: 30,\r\n          fontSize: 12,\r\n          color: '#999',\r\n        }}\r\n      >\r\n        *** Thank you for shopping with us! ***\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst thStyle = {\r\n  border: '1px solid #ccc',\r\n  padding: 8,\r\n  fontSize: 13,\r\n};\r\n\r\nconst tdStyle = {\r\n  border: '1px solid #eee',\r\n  padding: 8,\r\n  fontSize: 12,\r\n};\r\n\r\nexport default ModernBillingTemplate;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Space,\r\n  Popconfirm,\r\n  Tag,\r\n  Typography,\r\n  Form,\r\n  Input,\r\n  Tooltip,\r\n  Modal,\r\n} from \"antd\";\r\nimport {\r\n  EyeOutlined,\r\n  DeleteOutlined,\r\n  PrinterOutlined,\r\n  PlusOutlined,\r\n  SearchOutlined,\r\n  DollarOutlined,\r\n  CreditCardOutlined,\r\n  UserOutlined,\r\n  CalendarOutlined,\r\n  FileTextOutlined,\r\n  MailOutlined,\r\n} from \"@ant-design/icons\";\r\nimport dayjs from \"dayjs\";\r\nimport GlobalDrawer from \"../../components/antd/GlobalDrawer\";\r\nimport { useApiActions } from \"../../services/api/useApiActions\";\r\nimport { useDynamicSelector } from \"../../services/redux\";\r\nimport BillDataGrid from \"./components/BillDataGrid\";\r\nimport BillViewModal from \"./components/BillViewModal\";\r\nimport GlobalTable from \"../../components/antd/GlobalTable\";\r\nimport { useHandleApiResponse } from \"../../components/common/useHandleApiResponse\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { dynamic_clear } from \"../../services/redux\";\r\nimport EmailSendModal from \"../../components/common/EmailSendModal\";\r\nimport { billingTemplates } from './templates/registry';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst BillListPage = () => {\r\n  const { getEntityApi } = useApiActions();\r\n  const SalesRecord = getEntityApi(\"SalesRecord\");\r\n  const { items: SalesRecordList, loading } = useDynamicSelector(\r\n    SalesRecord.getIdentifier(\"GetAll\")\r\n  );\r\n  const [selectedBill, setSelectedBill] = useState<any>(null);\r\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\r\n  const [billViewVisible, setBillViewVisible] = useState(false);\r\n  const [form] = Form.useForm();\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [pagination, setPagination] = useState({\r\n    current: 1,\r\n    pageSize: 10,\r\n  });\r\n  const [printModalVisible, setPrintModalVisible] = useState(false);\r\n  const [printBill, setPrintBill] = useState<any>(null);\r\n  const [emailModalVisible, setEmailModalVisible] = useState(false);\r\n  const [selectedBillForEmail, setSelectedBillForEmail] = useState<any>(null);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useHandleApiResponse({\r\n    action: \"delete\",\r\n    title: \"Sale\",\r\n    identifier: SalesRecord.getIdentifier(\"Delete\"),\r\n    entityApi: SalesRecord,\r\n  });\r\n\r\n  const handleDelete = async (id: string) => {\r\n    try {\r\n      await SalesRecord(\"Delete\", {}, id);\r\n      // You can add extra logic here if needed (e.g., refresh list, close modal)\r\n    } catch (error) {\r\n      // Optionally handle error here if needed, but notification is handled by the hook\r\n    }\r\n  };\r\n\r\n  const handleView = (record: any) => {\r\n    setSelectedBill(record);\r\n    form.setFieldsValue({\r\n      ...record,\r\n      date: dayjs(record.date),\r\n    });\r\n    setIsDrawerOpen(true);\r\n  };\r\n\r\n  const handleEmail = (record: any) => {\r\n    setSelectedBillForEmail(record);\r\n    setEmailModalVisible(true);\r\n  };\r\n\r\n  const handlePrint = (record: any) => {\r\n    // Map the sales record to the template's expected format\r\n    const billData = {\r\n      customerName: record.customerDetails?.full_name || '',\r\n      customerAddress: record.customerDetails?.address || '',\r\n      date: record.date,\r\n      invoice_no: record.invoice_no,\r\n      items: (record.Items || []).map((item: any) => ({\r\n        name: [\r\n          item.productItems?.name || item.product_name || '',\r\n          item.productItems?.VariantItem?.variant_name || '',\r\n        ].filter(Boolean).join(' '),\r\n        qty: item.qty,\r\n        price: item.price,\r\n        mrp:item.mrp,\r\n        amount: item.amount,\r\n      })),\r\n      total: record.total_amount || 0,\r\n      total_gst: record.total_gst || 0,\r\n      discount: record.discount || 0,\r\n      discount_type: record.discount_type || '',\r\n      gst_number: record.gst_number || record.organisationItems?.gst_number || '',\r\n    };\r\n    setPrintBill(billData);\r\n    setPrintModalVisible(true);\r\n  };\r\n\r\n  const handleSearch = (value: string) => {\r\n    setSearchText(value);\r\n    setPagination({ ...pagination, current: 1 }); // Reset to first page on search\r\n    SalesRecord(\"GetAll\", {\r\n      pageNumber: 1,\r\n      pageLimit: pagination.pageSize,\r\n      searchString: value,\r\n    });\r\n  };\r\n\r\n  const handlePaginationChange = (pageNumber: number, pageLimit: number) => {\r\n    setPagination({ current: pageNumber, pageSize: pageLimit });\r\n    SalesRecord(\"GetAll\", {\r\n      pageNumber,\r\n      pageLimit,\r\n      searchString: searchText,\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Invoice\",\r\n      dataIndex: \"invoice_no\",\r\n      key: \"invoice_no\",\r\n      render: (text: string) => (\r\n        <Tag icon={<FileTextOutlined />} color=\"blue\">\r\n          {text}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Date\",\r\n      dataIndex: \"date\",\r\n      key: \"date\",\r\n      render: (text: string) => (\r\n        <Tooltip title={dayjs(text).format(\"MMMM D, YYYY\")}>\r\n          <Tag icon={<CalendarOutlined />} color=\"purple\">\r\n            {dayjs(text).format(\"DD MMM YY\")}\r\n          </Tag>\r\n        </Tooltip>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Customer\",\r\n      dataIndex: \"customerDetails\",\r\n      key: \"customerDetails\",\r\n      render: (customerDetails: any) => (\r\n        <Space>\r\n          <UserOutlined />\r\n          <span>\r\n            <strong>{customerDetails?.full_name}</strong>\r\n            <br />\r\n            <small style={{ color: \"#999\" }}>{customerDetails?.mobile}</small>\r\n          </span>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Payment Mode\",\r\n      dataIndex: \"payment_mode\",\r\n      key: \"payment_mode\",\r\n      render: (mode: string) => {\r\n        const color =\r\n          mode === \"cash\" ? \"green\" : mode === \"upi\" ? \"geekblue\" : \"orange\";\r\n        return (\r\n          <Tag icon={<CreditCardOutlined />} color={color}>\r\n            {mode.toUpperCase()}\r\n          </Tag>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Total\",\r\n      dataIndex: \"total_amount\",\r\n      key: \"total_amount\",\r\n      render: (amount: number) => (\r\n        <Tag icon={<DollarOutlined />} color=\"gold\">\r\n          ₹ {Number(amount).toFixed(2)}\r\n        </Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Actions\",\r\n      key: \"actions\",\r\n      render: (_: any, record: any) => (\r\n        <Space size=\"middle\">\r\n          <Tooltip title=\"View Bill\">\r\n            <Button\r\n              type=\"link\"\r\n              icon={<EyeOutlined />}\r\n              onClick={() => handleView(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Send via Email\">\r\n            <Button\r\n              type=\"link\"\r\n              icon={<MailOutlined />}\r\n              onClick={() => handleEmail(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"Print\">\r\n            <Button\r\n              type=\"link\"\r\n              icon={<PrinterOutlined />}\r\n              onClick={() => handlePrint(record)}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            title=\"Are you sure to delete this bill?\"\r\n            onConfirm={() => handleDelete(record._id)}\r\n            okText=\"Yes\"\r\n            cancelText=\"No\"\r\n          >\r\n            <Tooltip title=\"Delete\">\r\n              <Button type=\"link\" icon={<DeleteOutlined />} danger />\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    SalesRecord(\"GetAll\", {\r\n      pageNumber: pagination.current,\r\n      pageLimit: pagination.pageSize,\r\n      searchString: searchText,\r\n    });\r\n  }, [SalesRecord]);\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginBottom: 16,\r\n        }}\r\n      >\r\n        <Title level={3} style={{ color: \"#1890ff\", margin: 0 }}>\r\n          Sales List\r\n        </Title>\r\n        <Space>\r\n          <Input\r\n            placeholder=\"Search by invoice no, customer name or mobile\"\r\n            prefix={<SearchOutlined />}\r\n            allowClear\r\n            style={{ width: 300 }}\r\n            onChange={(e) => handleSearch(e.target.value)}\r\n          />\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<PlusOutlined />}\r\n            onClick={() => {\r\n              setSelectedBill(null);\r\n              setIsDrawerOpen(true);\r\n            }}\r\n          >\r\n            Create New Sale\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n\r\n      <GlobalTable\r\n        data={SalesRecordList?.result}\r\n        columns={columns}\r\n        loading={loading}\r\n        bordered\r\n        rowKey=\"_id\"\r\n        totalCount={SalesRecordList?.pagination?.totalCount || 0}\r\n        pageLimit={SalesRecordList?.pagination?.pageLimit || 10}\r\n        onPaginationChange={handlePaginationChange}\r\n      />\r\n\r\n      <GlobalDrawer\r\n        title={selectedBill ? \"Edit Sale\" : \"Create New Sale\"}\r\n        onClose={() => setIsDrawerOpen(false)}\r\n        open={isDrawerOpen}\r\n        width={1200}\r\n      >\r\n        <BillDataGrid\r\n          billdata={selectedBill}\r\n          onSuccess={() => {\r\n            setIsDrawerOpen(false);\r\n            SalesRecord(\"GetAll\");\r\n          }}\r\n        />\r\n      </GlobalDrawer>\r\n\r\n      {selectedBill && (\r\n        <BillViewModal\r\n          visible={billViewVisible}\r\n          onClose={() => setBillViewVisible(false)}\r\n          billData={selectedBill}\r\n        />\r\n      )}\r\n\r\n      {/* Print Modal for Bill Template */}\r\n      <Modal\r\n        open={printModalVisible}\r\n        onCancel={() => setPrintModalVisible(false)}\r\n        footer={[\r\n          <Button key=\"print\" type=\"primary\" onClick={() => window.print()}>\r\n            Print\r\n          </Button>,\r\n          <Button key=\"close\" onClick={() => setPrintModalVisible(false)}>\r\n            Close\r\n          </Button>,\r\n        ]}\r\n        width={800}\r\n        title={printBill ? `Print Invoice #${printBill.invoice_no}` : 'Print Invoice'}\r\n        centered\r\n      >\r\n        {printBill && (() => {\r\n          const key = localStorage.getItem('billingTemplate');\r\n          const selectedTemplate: 'classic' | 'modern' = (key === 'modern' || key === 'classic') ? key : 'classic';\r\n          const TemplateComponent = billingTemplates[selectedTemplate].component;\r\n          return <TemplateComponent billData={printBill} />;\r\n        })()}\r\n      </Modal>\r\n\r\n      {/* Email Send Modal */}\r\n      <EmailSendModal\r\n        visible={emailModalVisible}\r\n        onClose={() => {\r\n          setEmailModalVisible(false);\r\n          setSelectedBillForEmail(null);\r\n        }}\r\n        billData={selectedBillForEmail}\r\n        customerEmail={selectedBillForEmail?.customerDetails?.email}\r\n        customerName={selectedBillForEmail?.customerDetails?.full_name}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BillListPage;"],"names":["Title","Text","Typography","TextArea","Input","_ref","_billData$customerDet2","visible","onClose","billData","customerEmail","customerName","form","Form","useForm","loading","setLoading","useState","previewMode","setPreviewMode","emailPreview","setEmailPreview","sending","setSending","sendSuccess","setSendSuccess","getEntityApi","useApiActions","useEffect","setFieldsValue","to","subject","concat","invoice_no","generateInvoiceText","invoiceData","_invoiceData$customer","_invoiceData$Items","customerDetails","full_name","Date","date","toLocaleDateString","total_amount","Items","map","item","_item$productItems","productItems","name","qty","price","amount","join","is_paid","trim","generateInvoiceHTML","_invoiceData$customer2","_invoiceData$customer3","_invoiceData$Items2","_item$productItems2","handleSendEmail","async","token","sessionStorage","getItem","csrfToken","response","fetch","process","method","headers","body","JSON","stringify","values","customMessage","message","result","json","success","setTimeout","error","console","handleSubmit","validateFields","then","handleClose","resetFields","_jsx","Modal","title","_jsxs","className","styles","children","MailOutlined","open","onCancel","width","footer","destroyOnClose","CheckCircleOutlined","level","type","getFieldValue","_Fragment","layout","onFinish","Item","label","rules","required","prefix","placeholder","size","rows","Divider","Space","Button","icon","EyeOutlined","onClick","_billData$customerDet","preview","text","html","disabled","SendOutlined","htmlType","dangerouslySetInnerHTML","__html","dirty","DOMPurify","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_DATA_ATTR","Alert","description","strong","showIcon","_billData$customerDet3","_billData$customerDet4","printFrameRef","useRef","emailModalVisible","setEmailModalVisible","formatAmount","Number","toFixed","shopDetails","columns","dataIndex","key","render","_","record","_product$VariantItem","product","variantName","VariantItem","variant_name","loose_qty","style","margin","color","PrinterOutlined","handlePrint","content","payment_mode","_product$VariantItem2","itemName","value_of_goods","discount","discount_type","total_gst","cgst","sgst","sale_type","is_partially_paid","paid_amount","iframe","current","contentWindow","document","write","close","window","addEventListener","event","data","textAlign","marginBottom","code","display","justifyContent","Table","dataSource","pagination","bordered","summary","Summary","Row","Cell","index","colSpan","sub_total","marginTop","gap","fontWeight","ref","EmailSendModal","email","tableHeaderStyle","borderBottom","padding","fontSize","tableCellStyle","billingTemplates","classic","component","_userItem$organisatio","_userItem$branchItems","_userItem$organisatio2","_billData$items","userItem","useUser","fontFamily","background","border","maxWidth","organisationItems","org_name","branchItems","address1","gst_number","substring","toUpperCase","borderTop","borderCollapse","items","idx","length","mrp","total","previewImg","modern","_userItem$branchItems2","borderRadius","boxShadow","paddingBottom","branch_name","customerAddress","BillListPage","_SalesRecordList$pagi","_SalesRecordList$pagi2","_selectedBillForEmail","_selectedBillForEmail2","SalesRecord","SalesRecordList","useDynamicSelector","getIdentifier","selectedBill","setSelectedBill","isDrawerOpen","setIsDrawerOpen","billViewVisible","setBillViewVisible","searchText","setSearchText","setPagination","pageSize","printModalVisible","setPrintModalVisible","printBill","setPrintBill","selectedBillForEmail","setSelectedBillForEmail","useDispatch","useHandleApiResponse","action","identifier","entityApi","Tag","FileTextOutlined","Tooltip","dayjs","format","CalendarOutlined","UserOutlined","mobile","mode","CreditCardOutlined","DollarOutlined","_objectSpread","handleView","handleEmail","_record$customerDetai","_record$customerDetai2","_record$organisationI","address","_item$productItems2$V","product_name","filter","Boolean","Popconfirm","onConfirm","id","handleDelete","_id","okText","cancelText","DeleteOutlined","danger","pageNumber","pageLimit","searchString","alignItems","SearchOutlined","allowClear","onChange","e","handleSearch","value","target","PlusOutlined","GlobalTable","rowKey","totalCount","onPaginationChange","handlePaginationChange","GlobalDrawer","BillDataGrid","billdata","onSuccess","BillViewModal","print","centered","localStorage","TemplateComponent"],"sourceRoot":""}