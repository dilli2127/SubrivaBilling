/*! For license information please see 102.5cca041e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkFOCUZ_BILLING=self.webpackChunkFOCUZ_BILLING||[]).push([[102],{33359:(e,t,i)=>{i.d(t,{A:()=>d});var l=i(65043),n=i(71360),a=i(66381);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},o.apply(this,arguments)}const s=(e,t)=>l.createElement(a.A,o({},e,{ref:t,icon:n.A}));const d=l.forwardRef(s)},49102:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var l=i(65043),n=i(26553),a=i(7866),o=i(93504),s=i(36621),d=i(4825),r=i(97031),c=i(82863),u=i(74198),p=i(70579);const{Option:m}=n.A,h=()=>{const{getEntityApi:e}=(0,d.p)(),t=e("StockAudit"),{items:i,loading:h}=(0,r.Sm)(t.getIdentifier("GetAll"));(0,l.useEffect)((()=>{t("GetAll")}),[t]);const g={title:"Stock Out",columns:[{title:"Product",key:"product",render:(e,t)=>{var i,l,n,a,o,s;return[null===(i=t.stock_audit_items)||void 0===i||null===(l=i.ProductItem)||void 0===l?void 0:l.name,null===(n=t.stock_audit_items)||void 0===n||null===(a=n.ProductItem)||void 0===a||null===(o=a.VariantItem)||void 0===o?void 0:o.variant_name,null===t||void 0===t||null===(s=t.stock_audit_items)||void 0===s?void 0:s.batch_no].filter(Boolean).join(" - ")||"N/A"}},{title:"Out Reason",dataIndex:"out_reason",key:"out_reason"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Pack Size",key:"pack_size",render:(e,t)=>{var i;return(null===(i=t.stock_audit_items)||void 0===i?void 0:i.pack_size)||"N/A"}}],formItems:[{label:"Stock In Batch",name:"stock_audit_id",rules:[{required:!0,message:"Please select the stock batch"}],component:(0,p.jsx)(n.A,{placeholder:"Select category",loading:h,showSearch:!0,allowClear:!0,children:((null===i||void 0===i?void 0:i.result)||[]).map((e=>{var t,i,l;return(0,p.jsxs)(m,{value:e._id,children:[null===e||void 0===e||null===(t=e.ProductItem)||void 0===t?void 0:t.name," -"," ",null===e||void 0===e||null===(i=e.ProductItem)||void 0===i||null===(l=i.VariantItem)||void 0===l?void 0:l.variant_name," - ",null===e||void 0===e?void 0:e.batch_no]},e._id)}))})},{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Enter quantity to remove"}],component:(0,p.jsx)(a.A,{min:1,placeholder:"e.g., 5",style:{width:"100%"}})},{label:"Reason",name:"out_reason",rules:[{required:!0,message:"Please enter the reason"}],component:(0,p.jsxs)(n.A,{placeholder:"Reason for stock out",children:[(0,p.jsx)(n.A.Option,{value:"expired",children:"Expired"}),(0,p.jsx)(n.A.Option,{value:"damaged",children:"Damaged"}),(0,p.jsx)(n.A.Option,{value:"internal_use",children:"Internal Use"}),(0,p.jsx)(n.A.Option,{value:"bulk_sale",children:"Bulk Sale"}),(0,p.jsx)(n.A.Option,{value:"return_to_vendor",children:"Return to Vendor"})]})},{label:"Out Date",name:"out_date",rules:[{required:!0,message:"Please select the date"}],component:(0,p.jsx)(o.A,{placeholder:"Select Date",style:{width:"100%"}})},{label:"Note",name:"note",rules:[],component:(0,p.jsx)(s.A.TextArea,{rows:3,placeholder:"Optional note"})}],apiRoutes:(0,u._V)("StockOut"),formColumns:2};return(0,p.jsx)(c.r,{config:g})}},74198:(e,t,i)=>{i.d(t,{_V:()=>n});i(65043);var l=i(91449);i(52614);const n=e=>{const t=l.LE[e]||(0,l.lX)(e);return{get:t.getAll(),create:t.create(),update:t.update(),delete:t.delete()}}},82863:(e,t,i)=>{i.d(t,{r:()=>V});var l=i(89379),n=i(65043),a=i(96651),o=i(47419),s=i(11645),d=i(36621),r=i(26553),c=i(93504),u=i(95206),p=i(33359),m=i(9316),h=i(83003),g=i(62305),v=i(97031),f=i(91449),A=i(60446),x=i.n(A);var y=i(22671),j=i(53986),b=i(83833),C=i(88655),k=i(73847),_=i(70579);const R=["key","name","fieldKey"],w=e=>{const{FormValue:t,onSubmit:i,onCancel:a,formItems:d,onChildCancel:r,formColumns:c,splitLabelAndField:p,nested:m,nestedInputs:h,wrapperCol:v,labelCol:f,initialValues:A,loading:x,form:y,onValuesChange:w}=e,S=c||1;return(0,n.useEffect)((()=>{A&&(null===y||void 0===y||y.setFieldsValue(A))}),[A,y]),(0,_.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,_.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"600px 600px",opacity:.1,zIndex:0}}),(0,_.jsxs)(g.A,{form:y,onFinish:e=>{i?i(e):t&&t(e),null===y||void 0===y||y.resetFields()},layout:"vertical",onValuesChange:w,children:[(0,_.jsxs)(o.A,{gutter:[16,16],children:[null===d||void 0===d?void 0:d.map(((e,t)=>{var i;return(0,_.jsx)(s.A,{span:24/S,children:p?(0,_.jsxs)("div",{children:[(0,_.jsxs)(b.A.Text,{strong:!0,children:[e.label," ",(null===(i=e.rules)||void 0===i?void 0:i.some((e=>e.required)))&&(0,_.jsx)(b.A.Text,{type:"danger",children:"*"})]}),(0,_.jsx)(g.A.Item,{name:e.name,rules:e.rules,style:{marginTop:"8px"},children:e.component})]}):(0,_.jsx)(g.A.Item,{label:(0,_.jsx)(b.A.Text,{strong:!0,children:e.label}),name:e.name,rules:e.rules,labelCol:{span:f},wrapperCol:{span:v},children:e.component})},t)})),m&&(0,_.jsx)(g.A.List,{name:"nestedItems",children:(e,t)=>{let{add:i,remove:n}=t;return(0,_.jsxs)(_.Fragment,{children:[e.map((e=>{let{key:t,name:i,fieldKey:a}=e,d=(0,j.A)(e,R);return(0,_.jsxs)(o.A,{gutter:[16,16],align:"middle",children:[h.map(((e,t)=>(0,_.jsx)(s.A,{children:(0,_.jsx)(g.A.Item,(0,l.A)((0,l.A)({},d),{},{name:[i,e.name],fieldKey:[a,e.name],rules:[{required:!0,message:"Missing ".concat(e.label)}],label:e.label,children:e.component}))},t))),(0,_.jsx)(s.A,{children:(0,_.jsx)(C.A,{onClick:()=>n(i)})})]},t)})),(0,_.jsx)(o.A,{justify:"center",children:(0,_.jsx)(s.A,{children:(0,_.jsx)(u.Ay,{type:"primary",onClick:()=>i(),icon:(0,_.jsx)(k.A,{}),children:"Add More Field"})})})]})}})]}),(0,_.jsxs)(o.A,{justify:"end",gutter:[16,16],style:{padding:"16px"},children:[(0,_.jsx)(s.A,{children:(0,_.jsx)(u.Ay,{onClick:()=>{a?a():r&&r(!1),null===y||void 0===y||y.resetFields()},children:"Cancel"})}),(0,_.jsx)(s.A,{children:(0,_.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})]})]})};var S=i(4413);function I(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{title:"Actions",key:"actions",render:(n,o)=>(0,_.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,_.jsx)(a.A,{title:"Edit ".concat(e),children:(0,_.jsx)(p.A,{style:{cursor:"pointer",color:"#1890ff"},onClick:()=>t(o)})}),(0,_.jsx)(a.A,{title:"Delete ".concat(e),children:(0,_.jsx)(m.A,{style:{cursor:l?"not-allowed":"pointer",color:l?"#d9d9d9":"#ff4d4f",opacity:l?.5:1},onClick:()=>!l&&i(o)})})]})}}const V=e=>{let{config:t,filters:i=[],onFilterChange:a,customButtons:p=[],onValuesChange:m}=e;const{loading:A,createLoading:j,updateLoading:b,deleteLoading:C,items:k,pagination:R,drawerVisible:V,initialValues:F,form:O,handleEdit:P,handleDelete:L,handleDrawerOpen:E,resetForm:q,handleSubmit:z,handlePaginationChange:D,columns:B,formItems:K,formColumns:T=2,drawerWidth:N,filterValues:G,setFilterValues:M}=(e=>{const t=(0,h.wA)(),[i]=g.A.useForm(),[a,o]=(0,n.useState)(!1),[s,d]=(0,n.useState)({}),[r,c]=(0,n.useState)({}),[u,p]=(0,n.useState)({current:1,pageSize:10}),{loading:m,items:A}=(0,v.Sm)(e.apiRoutes.get.identifier),{loading:y,items:j,error:b}=(0,v.Sm)(e.apiRoutes.create.identifier),{loading:C,items:k,error:_}=(0,v.Sm)(e.apiRoutes.update.identifier),{loading:R,items:w,error:S}=(0,v.Sm)(e.apiRoutes.delete.identifier),I=(0,n.useCallback)(((e,i,l,n)=>{t((0,v.s7)({method:e,endpoint:i,data:l},n))}),[t]),V=(0,n.useCallback)((()=>{const t=(0,l.A)((0,l.A)({},r),{},{pageNumber:u.current,pageLimit:u.pageSize});I(e.apiRoutes.get.method,e.apiRoutes.get.endpoint,t,e.apiRoutes.get.identifier)}),[I,e.apiRoutes.get,r,u]),F=(0,n.useCallback)((t=>{I(e.apiRoutes.create.method,e.apiRoutes.create.endpoint,t,e.apiRoutes.create.identifier)}),[I,e.apiRoutes.create]),O=(0,n.useCallback)(((t,i)=>{I(e.apiRoutes.update.method,"".concat(e.apiRoutes.update.endpoint,"/").concat(t),i,e.apiRoutes.update.identifier)}),[I,e.apiRoutes.update]),P=(0,n.useCallback)((t=>{I(e.apiRoutes.delete.method,"".concat(e.apiRoutes.delete.endpoint,"/").concat(t),{_id:t},e.apiRoutes.delete.identifier)}),[I,e.apiRoutes.delete]),L=(0,n.useCallback)(((e,t)=>{p({current:e,pageSize:t})}),[]);function E(e){return/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/.test(e)}const q=(0,n.useCallback)((e=>{const t={};for(const i in e){const l=e[i];"string"===typeof l&&E(l)&&x()(l,void 0,!0).isValid()?t[i]=x()(l):t[i]=l}d(t),o(!0)}),[]),z=(0,n.useCallback)((e=>{P(e._id)}),[P]),D=(0,n.useCallback)((()=>{o(!0)}),[]),B=(0,n.useCallback)((()=>{o(!1),d({}),i.resetFields()}),[i]),K=(0,n.useCallback)((e=>{s._id?O(s._id,e):F(e)}),[s._id,F,O]);return(0,n.useEffect)((()=>{if(200===(null===j||void 0===j?void 0:j.statusCode))(0,f.P0)("success","".concat(e.title," created successfully")),V(),B(),t((0,v.Ki)(e.apiRoutes.create.identifier));else if(b){const t=b.message||"Failed to create ".concat(e.title);(0,f.P0)("error",t)}}),[j,b,e.title,V,B,t,e.apiRoutes.create.identifier]),(0,n.useEffect)((()=>{if(200===(null===k||void 0===k?void 0:k.statusCode))(0,f.P0)("success","".concat(e.title," updated successfully")),V(),B(),t((0,v.Ki)(e.apiRoutes.update.identifier));else if(_){const t=_.message||"Failed to update ".concat(e.title);(0,f.P0)("error",t)}}),[k,_,e.title,V,B,t,e.apiRoutes.update.identifier]),(0,n.useEffect)((()=>{if(200===(null===w||void 0===w?void 0:w.statusCode))(0,f.P0)("success","".concat(e.title," deleted successfully")),V(),t((0,v.Ki)(e.apiRoutes.delete.identifier));else if(S){const t=S.message||"Failed to delete ".concat(e.title);(0,f.P0)("error",t)}}),[w,S,e.title,V,t,e.apiRoutes.delete.identifier]),(0,n.useEffect)((()=>{V()}),[V]),(0,l.A)({loading:m,createLoading:y,updateLoading:C,deleteLoading:R,items:null===A||void 0===A?void 0:A.result,pagination:null===A||void 0===A?void 0:A.pagination,drawerVisible:a,initialValues:s,form:i,filterValues:r,setFilterValues:c,handleEdit:q,handleDelete:z,handleDrawerOpen:D,resetForm:B,handleSubmit:K,handlePaginationChange:L},e)})(t),U=(0,n.useCallback)(((e,t)=>{const i=(0,l.A)((0,l.A)({},G),{},{[e]:t});M(i),a&&a(i)}),[G,M,a]),Z=(0,n.useMemo)((()=>[...B,I(t.title,P,L,C)]),[B,t.title,P,L,C]);return(0,_.jsxs)("div",{children:[(0,_.jsxs)(o.A,{justify:"space-between",align:"bottom",gutter:[16,16],style:{marginBottom:16},children:[(0,_.jsx)(s.A,{flex:"auto",children:(0,_.jsx)("h1",{style:{margin:0},children:t.title})}),(0,_.jsx)(s.A,{children:(0,_.jsxs)(o.A,{gutter:[12,12],align:"bottom",justify:"end",wrap:!0,children:[i.map((e=>{var t;return(0,_.jsxs)(s.A,{children:["input"===e.type&&(0,_.jsx)(d.A,{placeholder:e.placeholder||e.label,value:G[e.key]||"",onChange:t=>U(e.key,t.target.value),style:{width:e.width||200},disabled:j||b||C}),"select"===e.type&&(0,_.jsx)(r.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>{U(e.key,t),e.onChange&&e.onChange(t)},allowClear:!0,style:{width:e.width||200},disabled:e.disabled||j||b||C,children:null===(t=e.options)||void 0===t?void 0:t.map((e=>(0,_.jsx)(r.A.Option,{value:e.value,children:e.label},e.value)))}),"date"===e.type&&(0,_.jsx)(c.A,{placeholder:e.placeholder||e.label,value:G[e.key],onChange:t=>U(e.key,t),style:{width:e.width||200},disabled:j||b||C})]},e.key)})),(0,_.jsx)(s.A,{children:(0,_.jsx)(d.A,{placeholder:"Search ".concat(t.title),value:G.searchString||"",onChange:e=>U("searchString",e.target.value),style:{width:200},disabled:j||b||C})}),p.map((e=>(0,_.jsx)(s.A,{children:(0,_.jsx)(u.Ay,{type:e.type||"default",onClick:e.onClick,icon:e.icon,disabled:j||b||C,children:e.label})},e.key))),(0,_.jsx)(s.A,{children:(0,_.jsxs)(u.Ay,{type:"primary",onClick:E,loading:j,disabled:j,children:["Add ",t.title]})})]})})]}),(0,_.jsx)(S.A,{columns:Z,data:k,loading:A||C,rowKeyField:"_id",totalCount:(null===R||void 0===R?void 0:R.totalCount)||0,pageLimit:(null===R||void 0===R?void 0:R.pageLimit)||10,onPaginationChange:D}),(0,_.jsx)(y.A,{title:"".concat(F._id?"Edit":"Add"," ").concat(t.title),open:V,onClose:j||b?()=>{}:q,width:N,children:(0,_.jsx)(w,{form:O,formItems:K,formColumns:T,initialValues:F,onSubmit:z,onCancel:q,onValuesChange:m,loading:j||b})})]})}}}]);
//# sourceMappingURL=102.5cca041e.chunk.js.map