"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[681],{42681:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Be});var l=a(65043),r=a(89472),n=a(66507),s=a(83833),o=a(93504),i=a(26553),d=a(62305),c=a(89073),u=a(47419),x=a(11645),h=a(6051),p=a(96651),m=a(95206),v=a(98105),g=a(76399),f=a(62751),y=a(96603),j=a(32513),A=a(1199),b=a(90617),_=a(92003),S=a(94834),k=a(14524),R=a(6881),D=a(98463),F=a(32700),C=a(93761),w=a(53722),O=a(40295),T=a(38818),M=a(76401),I=a(67630),Y=a(12959),L=a(60446),P=a.n(L);const z="Reports_container__+ISRf";var E=a(98350),B=a(89379),N=a(16569);const K=e=>{switch(e){case"1":default:return"comprehensive";case"2":return"financial";case"3":return"sales";case"4":return"customer";case"5":return"inventory";case"6":return"staff";case"7":return"payment"}},V=e=>{const[t,a]=(0,l.useState)(!1),[r,n]=(0,l.useState)("excel"),[s,o]=(0,l.useState)(["summary","charts","tables"]);return{exportModalVisible:t,setExportModalVisible:a,exportFormat:r,setExportFormat:n,exportOptions:s,setExportOptions:o,handleExport:()=>{var t,l,n,s;const o=K(e.activeTab),i="".concat(o,"_").concat(e.selectedTenant,"_").concat(e.selectedOrganisation,"_").concat(e.selectedBranch,"_").concat(null===(t=e.dateRange)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.format("YYYY-MM-DD"),"_").concat(null===(n=e.dateRange)||void 0===n||null===(s=n[1])||void 0===s?void 0:s.format("YYYY-MM-DD")),d=e.reportCache[i];if(!d)return void N.Ay.error("No data available to export. Please apply filters first.");const c={tenantOptions:e.tenantOptions,organisationOptions:e.organisationOptions,branchOptions:e.branchOptions,selectedTenant:e.selectedTenant,selectedOrganisation:e.selectedOrganisation,selectedBranch:e.selectedBranch,dateRange:e.dateRange,isSuperAdmin:e.isSuperAdmin,isTenant:e.isTenant};"excel"===r?((e,t,a)=>{var l,r,n,s,o,i,d,c,u,x,h,p;let m=[];const v="".concat(t,"_report_").concat(P()().format("YYYY-MM-DD")),{getTenantLabel:g,getOrganisationLabel:f,getBranchLabel:y}=(e=>({getTenantLabel:()=>{if("all"===e.selectedTenant)return"All Tenants";const t=e.tenantOptions.find((t=>t.value===e.selectedTenant));return(null===t||void 0===t?void 0:t.label)||e.selectedTenant},getOrganisationLabel:()=>{if("all"===e.selectedOrganisation)return"All Organisations";const t=e.organisationOptions.find((t=>t.value===e.selectedOrganisation));return(null===t||void 0===t?void 0:t.label)||e.selectedOrganisation},getBranchLabel:()=>{if("all"===e.selectedBranch)return"All Branches";const t=e.branchOptions.find((t=>t.value===e.selectedBranch));return(null===t||void 0===t?void 0:t.label)||e.selectedBranch}}))(a);switch(t){case"inventory":m=[["Inventory Report","","",""],["Date Range:",null===(l=a.dateRange)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.format("YYYY-MM-DD"),"to",null===(n=a.dateRange)||void 0===n||null===(s=n[1])||void 0===s?void 0:s.format("YYYY-MM-DD")],...a.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...a.isSuperAdmin||a.isTenant?[["Organisation:",f(),"",""]]:[],["Branch:",y(),"",""],["","","",""],["Total Products","Stock Value","Low Stock Items","Out of Stock"],[e.totalProducts,"\u20b9".concat(e.stockValue.toLocaleString()),e.lowStockItems,e.outOfStock],["","","",""],["Category","Sales","Profit","Margin"],...e.categoryData.map((e=>[e.name,"\u20b9".concat(e.sales.toLocaleString()),"\u20b9".concat(e.profit.toLocaleString()),"".concat(e.margin,"%")]))];break;case"sales":m=[["Sales Report","","",""],["Date Range:",null===(o=a.dateRange)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.format("YYYY-MM-DD"),"to",null===(d=a.dateRange)||void 0===d||null===(c=d[1])||void 0===c?void 0:c.format("YYYY-MM-DD")],...a.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...a.isSuperAdmin||a.isTenant?[["Organisation:",f(),"",""]]:[],["Branch:",y(),"",""],["","","",""],["Total Sales","Avg Order Value","Conversion Rate",""],["\u20b9".concat(e.totalSales.toLocaleString()),"\u20b9".concat(e.avgOrderValue),"".concat(e.conversionRate,"%"),""],["","","",""],["Customer Name","Total Purchase","Orders","Outstanding"],...e.topCustomers.map((e=>[e.name,"\u20b9".concat(e.totalPurchase.toLocaleString()),e.orders,"\u20b9".concat(e.outstanding.toLocaleString())]))];break;default:m=[["Report Data","","",""],["Date Range:",null===(u=a.dateRange)||void 0===u||null===(x=u[0])||void 0===x?void 0:x.format("YYYY-MM-DD"),"to",null===(h=a.dateRange)||void 0===h||null===(p=h[1])||void 0===p?void 0:p.format("YYYY-MM-DD")],...a.isSuperAdmin?[["Tenant:",g(),"",""]]:[],...a.isSuperAdmin||a.isTenant?[["Organisation:",f(),"",""]]:[],["Branch:",y(),"",""],["","","",""],...Object.entries(e).map((e=>{let[t,a]=e;return[t,a,"",""]}))]}const j=m.map((e=>e.join(","))).join("\n"),A=new Blob([j],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a"),_=URL.createObjectURL(A);b.setAttribute("href",_),b.setAttribute("download","".concat(v,".csv")),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b),N.Ay.success("".concat(t," report exported to Excel successfully!"))})(d,o,c):"pdf"===r?N.Ay.info("PDF export functionality will be implemented with a PDF library"):((e,t)=>{const a=Object.entries(e).map((e=>{let[t,a]=e;return"".concat(t,",").concat(a)})).join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(l);r.setAttribute("href",n),r.setAttribute("download","".concat(t,"_report_").concat(P()().format("YYYY-MM-DD"),".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),N.Ay.success("".concat(t," report exported to CSV successfully!"))})(d,o),a(!1)},handlePrint:()=>{N.Ay.info("Preparing report for printing..."),window.print()}}};var G=a(70579);const W=(0,l.createContext)(void 0),q=e=>{let{value:t,children:a}=e;return(0,G.jsx)(W.Provider,{value:t,children:a})},U=()=>{const e=(0,l.useContext)(W);if(!e)throw new Error("useReportDataContext must be used within ReportDataProvider");return e};var Q=a(26612),H=a(99472),X=a(79129),J=a(68855),Z=a(50108),$=a(61646),ee=a(87734),te=a(52185),ae=a(6026),le=a(86150),re=a(21327),ne=a(38643),se=a(90168),oe=a(60163),ie=a(4240),de=a(17869),ce=a(82291);const{Text:ue}=s.A,xe=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],he=()=>{var e,t,a;const{salesReportData:l,profitLossData:r,customerSalesData:n,stockReportData:s,paymentCollectionData:o,productSalesData:i}=U(),d=(null===l||void 0===l?void 0:l.result)||{},h=(null===r||void 0===r?void 0:r.result)||{},p=(null===n||void 0===n?void 0:n.result)||{},m=(null===s||void 0===s?void 0:s.result)||{},v=(null===o||void 0===o?void 0:o.result)||{},g=(null===i||void 0===i?void 0:i.result)||{},f=(null===d||void 0===d?void 0:d.summary)||{},y=h||{},j=(null===p||void 0===p?void 0:p.customers)||[],b=(null===m||void 0===m?void 0:m.summary)||{},_=(null===v||void 0===v?void 0:v.summary)||{},S=(null===g||void 0===g?void 0:g.products)||[],k=(null===d||void 0===d?void 0:d.sales)||[],R=parseFloat(f.total_revenue)||0,D=parseFloat(null===(e=y.profit)||void 0===e?void 0:e.net_profit)||0,O=parseInt(f.total_bills)||0,T=j.length,I=parseFloat(f.average_bill_value)||0,Y=parseFloat(null===(t=y.profit)||void 0===t?void 0:t.profit_margin_percentage)||0,L=parseFloat(b.total_stock_value)||0,P=parseFloat(_.total_collected)||0,z=j.filter((e=>parseFloat(e.total_purchase)>0)),E=z.length>0?z.reduce(((e,t)=>e+parseFloat(t.total_purchase)),0)/z.length:0,B=[{name:"High Value",value:z.filter((e=>parseFloat(e.total_purchase)>1.5*E)).length,color:"#52c41a",percentage:z.length>0?(z.filter((e=>parseFloat(e.total_purchase)>1.5*E)).length/z.length*100).toFixed(1):0},{name:"Medium Value",value:z.filter((e=>{const t=parseFloat(e.total_purchase);return t>=.7*E&&t<=1.5*E})).length,color:"#1890ff",percentage:z.length>0?(z.filter((e=>{const t=parseFloat(e.total_purchase);return t>=.7*E&&t<=1.5*E})).length/z.length*100).toFixed(1):0},{name:"Low Value",value:z.filter((e=>parseFloat(e.total_purchase)<.7*E&&parseFloat(e.total_purchase)>0)).length,color:"#fa8c16",percentage:z.length>0?(z.filter((e=>parseFloat(e.total_purchase)<.7*E&&parseFloat(e.total_purchase)>0)).length/z.length*100).toFixed(1):0}].filter((e=>e.value>0)),N=S.slice(0,6).map((e=>({name:(e.name||"Unknown").substring(0,20),sales:parseFloat(e.total_revenue)||0,quantity:parseInt(e.total_quantity_sold)||0}))),K=(_.payment_mode_breakdown||[]).map((e=>({method:e.payment_mode||"Cash",amount:parseFloat(e.total_amount)||0,percentage:P>0?(parseFloat(e.total_amount)/P*100).toFixed(1):0}))),V=Array.isArray(k)&&k.length>0&&null!==(a=k[0])&&void 0!==a&&a.period?k.map((e=>({period:e.period,sales:parseFloat(e.total_sales)||0,transactions:parseInt(e.total_transactions)||0}))):[];return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff"},children:[(0,G.jsx)(M.A,{style:{fontSize:32,marginBottom:8}}),(0,G.jsx)(Q.A,{title:(0,G.jsx)(ue,{style:{color:"#fff"},children:"Total Revenue"}),value:R,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,G.jsxs)(ue,{style:{color:"#fff",fontSize:12},children:[O," Bills \u2022 Avg: \u20b9",I.toFixed(2)]})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"#fff"},children:[(0,G.jsx)(F.A,{style:{fontSize:32,marginBottom:8}}),(0,G.jsx)(Q.A,{title:(0,G.jsx)(ue,{style:{color:"#fff"},children:"Net Profit"}),value:D,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,G.jsxs)(ue,{style:{color:"#fff",fontSize:12},children:["Margin: ",Y,"%"]})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"#fff"},children:[(0,G.jsx)(C.A,{style:{fontSize:32,marginBottom:8}}),(0,G.jsx)(Q.A,{title:(0,G.jsx)(ue,{style:{color:"#fff"},children:"Stock Value"}),value:L,prefix:"\u20b9",precision:2,valueStyle:{color:"#fff",fontSize:24}}),(0,G.jsxs)(ue,{style:{color:"#fff",fontSize:12},children:[parseInt(b.total_items)||0," Items in stock"]})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12,background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"#fff"},children:[(0,G.jsx)(w.A,{style:{fontSize:32,marginBottom:8}}),(0,G.jsx)(Q.A,{title:(0,G.jsx)(ue,{style:{color:"#fff"},children:"Customers"}),value:T,valueStyle:{color:"#fff",fontSize:24}}),(0,G.jsxs)(ue,{style:{color:"#fff",fontSize:12},children:[z.length," Active customers"]})]})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:16,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(X.A,{})," Sales Trend"]}),style:{borderRadius:12},children:V.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)($.X,{data:V,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"period"}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"transactions",fill:"#8884d8",name:"Transactions"}),(0,G.jsx)(se.N,{type:"monotone",dataKey:"sales",stroke:"#82ca9d",strokeWidth:3,name:"Sales (\u20b9)"})]})}):(0,G.jsx)(H.A,{description:"(daily/monthly/yearly) to see trends"})})}),(0,G.jsx)(x.A,{xs:24,lg:8,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(J.A,{})," Customer Segments"]}),style:{borderRadius:12},children:B.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(oe.r,{children:[(0,G.jsx)(ie.F,{data:B,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percentage:a}=e;return"".concat(t,": ").concat(a,"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:B.map(((e,t)=>(0,G.jsx)(de.f,{fill:e.color},"cell-".concat(t))))}),(0,G.jsx)(le.m,{})]})}):(0,G.jsx)(H.A,{description:"No customer data available"})})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(A.A,{})," Top Products"]}),style:{borderRadius:12},children:N.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(ce.E,{data:N,layout:"vertical",children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{type:"number"}),(0,G.jsx)(ae.h,{dataKey:"name",type:"category",width:120}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"sales",fill:"#8884d8",name:"Revenue (\u20b9)"})]})}):(0,G.jsx)(H.A,{description:"No product data available"})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Payment Method Distribution",style:{borderRadius:12},children:K.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(oe.r,{children:[(0,G.jsx)(ie.F,{data:K,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{method:t,percentage:a}=e;return"".concat(t,": ").concat(a,"%")},outerRadius:80,fill:"#8884d8",dataKey:"amount",children:K.map(((e,t)=>(0,G.jsx)(de.f,{fill:xe[t%xe.length]},"cell-".concat(t))))}),(0,G.jsx)(le.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,G.jsx)(H.A,{description:"No payment data available"})})})]})]})};var pe=a(39249);const{Text:me}=s.A,ve=()=>{var e,t,a,l,r,n,s,o,i;const{profitLossData:d,expenseData:h,gstData:p}=U(),m=(null===d||void 0===d?void 0:d.result)||{},v=(null===h||void 0===h?void 0:h.result)||{},g=(null===p||void 0===p?void 0:p.result)||{},f=(null===v||void 0===v||v.expenses,(null===v||void 0===v?void 0:v.summary)||{}),y=(null===g||void 0===g?void 0:g.summary)||{},j=parseFloat(null===(e=m.revenue)||void 0===e?void 0:e.total_sales_revenue)||0,A=parseFloat(null===(t=m.revenue)||void 0===t?void 0:t.total_discount_given)||0,b=parseFloat(null===(a=m.revenue)||void 0===a?void 0:a.net_revenue)||j-A,_=parseFloat(null===(l=m.costs)||void 0===l?void 0:l.cost_of_goods_sold)||0,S=parseFloat(null===(r=m.costs)||void 0===r?void 0:r.operating_expenses)||0,k=parseFloat(null===(n=m.costs)||void 0===n?void 0:n.total_costs)||0,R=parseFloat(null===(s=m.profit)||void 0===s?void 0:s.gross_profit)||0,D=parseFloat(null===(o=m.profit)||void 0===o?void 0:o.net_profit)||0,F=parseFloat(null===(i=m.profit)||void 0===i?void 0:i.profit_margin_percentage)||0,C=parseFloat(y.total_gst_collected)||0,w=[{category:"Total Revenue",amount:j,type:"income"},{category:"Discount Given",amount:-A,type:"expense"},{category:"Net Revenue",amount:b,type:"income"},{category:"Cost of Goods Sold",amount:-_,type:"expense"},{category:"Gross Profit",amount:R,type:"income"},{category:"Operating Expenses",amount:-S,type:"expense"},{category:"Net Profit",amount:D,type:"profit"}],O=(f.category_breakdown||[]).map((e=>({category:e.category||"Other",amount:parseFloat(e.total_amount)||0,count:parseInt(e.expense_count)||0})));return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:24,md:6,children:(0,G.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#f6ffed"},children:(0,G.jsx)(Q.A,{title:"Total Revenue",value:j,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})})}),(0,G.jsx)(x.A,{xs:24,md:6,children:(0,G.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#fff7e6"},children:(0,G.jsx)(Q.A,{title:"Total Costs",value:k,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})})}),(0,G.jsx)(x.A,{xs:24,md:6,children:(0,G.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#e6f7ff"},children:(0,G.jsx)(Q.A,{title:"Net Profit",value:D,prefix:"\u20b9",precision:2,valueStyle:{color:D>=0?"#1890ff":"#ff4d4f"}})})}),(0,G.jsx)(x.A,{xs:24,md:6,children:(0,G.jsx)(c.A,{style:{borderRadius:12,textAlign:"center",background:"#f9f0ff"},children:(0,G.jsx)(Q.A,{title:"Profit Margin",value:F,suffix:"%",precision:2,valueStyle:{color:"#722ed1"}})})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Profit & Loss Statement",style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:w,columns:[{title:"Category",dataIndex:"category",key:"category",render:(e,t)=>(0,G.jsx)(me,{strong:"profit"===t.type,children:e})},{title:"Amount",dataIndex:"amount",key:"amount",align:"right",render:(e,t)=>(0,G.jsxs)(me,{strong:"profit"===t.type,style:{color:("income"===t.type||"profit"===t.type)&&e>=0?"#52c41a":"#ff4d4f"},children:["\u20b9",Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})}],pagination:!1,size:"small",locale:{emptyText:"No financial data available"}})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Expense Breakdown by Category",style:{borderRadius:12},children:O.length>0?(0,G.jsx)(Z.u,{width:"100%",height:350,children:(0,G.jsxs)(ce.E,{data:O,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"category",angle:-45,textAnchor:"end",height:100}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"amount",fill:"#ff7a45",name:"Amount (\u20b9)"}),(0,G.jsx)(ne.y,{dataKey:"count",fill:"#1890ff",name:"Count"})]})}):(0,G.jsx)(H.A,{description:"No expense data available"})})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,md:12,children:(0,G.jsxs)(c.A,{title:"Revenue & Cost Breakdown",style:{borderRadius:12},children:[(0,G.jsxs)(u.A,{gutter:16,children:[(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Gross Profit",value:R,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a",fontSize:"20px"}})}),(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"COGS",value:_,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f",fontSize:"20px"}})})]}),(0,G.jsxs)(u.A,{gutter:16,style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"GST Collected",value:C,prefix:"\u20b9",precision:2,valueStyle:{color:"#1890ff",fontSize:"18px"}})}),(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Discount Given",value:A,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16",fontSize:"18px"}})})]})]})}),(0,G.jsx)(x.A,{xs:24,md:12,children:(0,G.jsxs)(c.A,{title:"Expense Summary",style:{borderRadius:12},children:[(0,G.jsxs)(u.A,{gutter:16,children:[(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Total Expenses",value:parseFloat(f.total_expense_amount)||0,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f",fontSize:"20px"}})}),(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Expense Count",value:parseInt(f.total_expense_count)||0,valueStyle:{color:"#1890ff",fontSize:"20px"}})})]}),(0,G.jsxs)(u.A,{gutter:16,style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Avg Expense",value:parseFloat(f.average_expense)||0,prefix:"\u20b9",precision:2,valueStyle:{color:"#722ed1",fontSize:"18px"}})}),(0,G.jsx)(x.A,{xs:12,children:(0,G.jsx)(Q.A,{title:"Operating Exp",value:S,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16",fontSize:"18px"}})})]})]})})]})]})};var ge=a(57692),fe=a(6426),ye=a(75748);const je=()=>{var e;const{salesReportData:t,productSalesData:a,topProductsData:l}=U(),r=(null===t||void 0===t?void 0:t.result)||{},n=(null===a||void 0===a?void 0:a.result)||{},s=(null===l||void 0===l?void 0:l.result)||{},o=(null===r||void 0===r?void 0:r.summary)||{},i=(null===n||void 0===n?void 0:n.products)||[],d=(null===s||void 0===s?void 0:s.top_products)||[],h=(null===r||void 0===r?void 0:r.sales)||[],p=o.average_bill_value||0,m=o.total_revenue||0,v=(o.total_bills,o.total_collected||0),f=o.total_outstanding||0,y=m>0?Math.min(m/(1.2*m)*100,100):0,j=m>0?Math.min(v/m*100,100):0,A=m>0?Math.min(f/m*100,100):0,b=i.slice(0,10).map((e=>({name:e.name||"Unknown",sales:parseFloat(e.total_revenue)||0,quantity:parseInt(e.total_quantity_sold)||0}))),_=Array.isArray(h)&&h.length>0&&null!==(e=h[0])&&void 0!==e&&e.period?h.map((e=>({period:e.period,revenue:parseFloat(e.total_sales)||0,transactions:parseInt(e.total_transactions)||0}))):[];return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:12,md:6,children:(0,G.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,G.jsx)(Q.A,{title:"Total Revenue",value:m,prefix:"\u20b9",precision:2,valueStyle:{color:"#1890ff"}}),(0,G.jsx)(ge.A,{percent:Math.round(y),size:"small"})]})}),(0,G.jsx)(x.A,{xs:12,md:6,children:(0,G.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,G.jsx)(Q.A,{title:"Avg Bill Value",value:p,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}}),(0,G.jsx)(ge.A,{percent:Math.round(.8*y),size:"small",strokeColor:"#52c41a"})]})}),(0,G.jsx)(x.A,{xs:12,md:6,children:(0,G.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,G.jsx)(Q.A,{title:"Total Collected",value:v,prefix:"\u20b9",precision:2,valueStyle:{color:"#722ed1"}}),(0,G.jsx)(ge.A,{percent:Math.round(j),size:"small",strokeColor:"#722ed1"})]})}),(0,G.jsx)(x.A,{xs:12,md:6,children:(0,G.jsxs)(c.A,{bordered:!1,style:{borderRadius:12},children:[(0,G.jsx)(Q.A,{title:"Outstanding",value:f,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}}),(0,G.jsx)(ge.A,{percent:Math.round(A),size:"small",strokeColor:"#fa8c16"})]})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Top Products by Revenue",style:{borderRadius:12},children:b.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(ce.E,{data:b,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"sales",fill:"#1890ff",name:"Revenue (\u20b9)"})]})}):(0,G.jsx)(H.A,{description:"No product sales data available"})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Sales Trend",style:{borderRadius:12},children:_.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(ye.b,{data:_,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"period"}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(se.N,{type:"monotone",dataKey:"revenue",stroke:"#1890ff",name:"Revenue (\u20b9)"}),(0,G.jsx)(se.N,{type:"monotone",dataKey:"transactions",stroke:"#52c41a",name:"Transactions"})]})}):(0,G.jsx)(H.A,{description:"No trend data available"})})})]}),(0,G.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,G.jsx)(x.A,{xs:24,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(fe.A,{})," Top 10 Products"]}),style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:d,rowKey:"_id",columns:[{title:"Rank",key:"rank",width:70,render:(e,t,a)=>(0,G.jsxs)(g.A,{color:0===a?"gold":1===a?"silver":2===a?"bronze":"default",children:["#",a+1]})},{title:"Product Name",dataIndex:"name",key:"name",render:(e,t)=>(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{style:{fontWeight:500},children:e}),t.VariantItem&&(0,G.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.VariantItem.variant_name})]})},{title:"Total Revenue",dataIndex:"total_revenue",key:"total_revenue",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.total_revenue)-parseFloat(t.total_revenue)},{title:"Quantity Sold",dataIndex:"total_quantity_sold",key:"total_quantity_sold",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_quantity_sold)-parseInt(t.total_quantity_sold)},{title:"Orders",dataIndex:"total_orders",key:"total_orders",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_orders)-parseInt(t.total_orders)}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No product data available"}})})})})]})};var Ae=a(10253);const be=()=>{const{customerSalesData:e,topCustomersData:t}=U(),a=(null===e||void 0===e?void 0:e.result)||{},l=(null===t||void 0===t?void 0:t.result)||{},r=(null===a||void 0===a?void 0:a.customers)||[],n=(null===l||void 0===l?void 0:l.top_customers)||[],s=r.length,o=r.filter((e=>parseFloat(e.total_purchase)>0)),i=o.length>0?o.reduce(((e,t)=>e+parseFloat(t.total_purchase)),0)/o.length:0,d=o.filter((e=>parseFloat(e.total_purchase)>1.5*i)),h=(()=>{const e=[{name:"High Value",value:0,color:"#52c41a",min:1.5*i},{name:"Medium Value",value:0,color:"#1890ff",min:.7*i,max:1.5*i},{name:"Low Value",value:0,color:"#fa8c16",max:.7*i},{name:"Inactive",value:0,color:"#d9d9d9",max:0}];return r.forEach((t=>{const a=parseFloat(t.total_purchase);a>1.5*i?e[0].value++:a>=.7*i?e[1].value++:a>0?e[2].value++:e[3].value++})),e.filter((e=>e.value>0))})(),p=n.slice(0,10).map((e=>{var t;return{name:(null===(t=e.name)||void 0===t?void 0:t.substring(0,15))||"Unknown",purchase:parseFloat(e.total_purchase)||0,bills:parseInt(e.total_bills)||0}}));return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(w.A,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Total Customers",value:s})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(Ae.A,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Active Customers",value:o.length,valueStyle:{color:"#52c41a"}})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(T.A,{style:{fontSize:32,color:"#722ed1",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"VIP Customers",value:d.length,valueStyle:{color:"#722ed1"}})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(M.A,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Avg Lifetime Value",value:i,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})]})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Customer Segmentation",style:{borderRadius:12},children:h.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(oe.r,{children:[(0,G.jsx)(ie.F,{data:h,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},outerRadius:100,fill:"#8884d8",dataKey:"value",children:h.map(((e,t)=>(0,G.jsx)(de.f,{fill:e.color},"cell-".concat(t))))}),(0,G.jsx)(le.m,{})]})}):(0,G.jsx)(H.A,{description:"No customer data available"})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Top 10 Customers by Purchase",style:{borderRadius:12},children:p.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(ce.E,{data:p,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"purchase",fill:"#1890ff",name:"Purchase (\u20b9)"})]})}):(0,G.jsx)(H.A,{description:"No customer data available"})})})]}),(0,G.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,G.jsx)(x.A,{xs:24,children:(0,G.jsx)(c.A,{title:"Customer Details",style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:n,rowKey:"_id",columns:[{title:"Customer Name",dataIndex:"name",key:"name",render:(e,t)=>(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{style:{fontWeight:500},children:e||"Unknown"}),t.phone&&(0,G.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.phone})]})},{title:"Total Purchase",dataIndex:"total_purchase",key:"total_purchase",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.total_purchase)-parseFloat(t.total_purchase)},{title:"Bills",dataIndex:"total_bills",key:"total_bills",render:e=>parseInt(e||"0").toLocaleString(),sorter:(e,t)=>parseInt(e.total_bills)-parseInt(t.total_bills)},{title:"Avg Bill Value",dataIndex:"average_bill_value",key:"average_bill_value",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>parseFloat(e.average_bill_value)-parseFloat(t.average_bill_value)},{title:"Outstanding",dataIndex:"outstanding_amount",key:"outstanding_amount",render:e=>{const t=parseFloat(e||"0");return(0,G.jsxs)(g.A,{color:t>0?"orange":"green",children:["\u20b9",t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})},sorter:(e,t)=>parseFloat(e.outstanding_amount)-parseFloat(t.outstanding_amount)},{title:"Status",key:"status",render:(e,t)=>{const a=parseFloat(t.outstanding_amount||"0");return(0,G.jsx)(g.A,{color:0===a?"success":a>0?"warning":"default",children:0===a?"Clear":"Pending"})}}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No customer data available"}})})})})]})};var _e=a(69559),Se=a(95240);const ke=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],Re=()=>{var e;const{stockReportData:t,stockExpiryData:a}=U(),l=(null===t||void 0===t?void 0:t.result)||{},r=(null===a||void 0===a?void 0:a.result)||{},n=(null===l||void 0===l?void 0:l.stock_details)||[],s=(null===l||void 0===l?void 0:l.summary)||{},o=(null===l||void 0===l?void 0:l.low_stock_items)||[],i=(null===r||void 0===r?void 0:r.expiring_stock)||[],d=(null===r||void 0===r?void 0:r.summary)||{},h=(null===r||void 0===r||null===(e=r.result)||void 0===e?void 0:e.expiry_breakdown)||{},p=parseInt(s.total_items)||0,m=parseFloat(s.total_stock_value)||0,v=parseInt(s.low_stock_count)||0,f=(parseInt(d.expired_count),parseInt(d.within_7_days_count)||0),y=new Map;n.forEach((e=>{var t,a;const l=(null===(t=e.ProductItem)||void 0===t||null===(a=t.CategoryItem)||void 0===a?void 0:a.category_name)||"Uncategorized",r=(parseInt(e.available_quantity)||0)*(parseFloat(e.buy_price)||0);if(y.has(l)){const e=y.get(l);y.set(l,{value:e.value+r,count:e.count+1})}else y.set(l,{value:r,count:1})}));const j=Array.from(y.entries()).map((e=>{let[t,a]=e;return{name:t,value:a.value,count:a.count}})),A=[{name:"Expired",count:(h.expired||[]).length,color:"#ff4d4f"},{name:"Within 7 days",count:(h.within_7_days||[]).length,color:"#ff7a45"},{name:"Within 30 days",count:(h.within_30_days||[]).length,color:"#ffa940"},{name:"Within 90 days",count:(h.within_90_days||[]).length,color:"#ffc53d"}].filter((e=>e.count>0));return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(O.A,{style:{fontSize:32,color:"#1890ff",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Total Items",value:p})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(M.A,{style:{fontSize:32,color:"#52c41a",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Stock Value",value:m,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(_e.A,{style:{fontSize:32,color:"#ff4d4f",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Low Stock Items",value:v,valueStyle:{color:"#ff4d4f"}})]})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(c.A,{style:{textAlign:"center",borderRadius:12},children:[(0,G.jsx)(Se.A,{style:{fontSize:32,color:"#fa8c16",marginBottom:8}}),(0,G.jsx)(Q.A,{title:"Expiring Soon (7d)",value:f,valueStyle:{color:"#fa8c16"}})]})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Category-wise Stock Value",style:{borderRadius:12},children:j.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(oe.r,{children:[(0,G.jsx)(ie.F,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:a}=e;return"".concat(t,": ").concat((100*a).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:j.map(((e,t)=>(0,G.jsx)(de.f,{fill:ke[t%ke.length]},"cell-".concat(t))))}),(0,G.jsx)(le.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,G.jsx)(H.A,{description:"No stock data available"})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Stock Expiry Timeline",style:{borderRadius:12},children:A.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(ce.E,{data:A,children:[(0,G.jsx)(ee.d,{strokeDasharray:"3 3"}),(0,G.jsx)(te.W,{dataKey:"name"}),(0,G.jsx)(ae.h,{}),(0,G.jsx)(le.m,{}),(0,G.jsx)(re.s,{}),(0,G.jsx)(ne.y,{dataKey:"count",fill:"#ff7a45",name:"Items Count",children:A.map(((e,t)=>(0,G.jsx)(de.f,{fill:e.color},"cell-".concat(t))))})]})}):(0,G.jsx)(H.A,{description:"No expiry data available"})})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(_e.A,{style:{color:"#ff4d4f"}})," Low Stock Items"]}),style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:o,rowKey:e=>"".concat(e.product,"-").concat(e.variant),columns:[{title:"Product",dataIndex:"product",key:"product",render:(e,t)=>(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{style:{fontWeight:500},children:e||"Unknown"}),t.variant&&(0,G.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:t.variant})]})},{title:"Available",dataIndex:"available_quantity",key:"available_quantity",render:(e,t)=>(0,G.jsxs)(g.A,{color:"red",children:[e," ",t.available_loose_quantity>0&&"+ ".concat(t.available_loose_quantity," loose")]})}],pagination:{pageSize:5},size:"small",locale:{emptyText:"No low stock items"}})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Se.A,{style:{color:"#fa8c16"}})," Expiring Soon"]}),style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:i.slice(0,10),rowKey:"_id",columns:[{title:"Product",key:"product",render:e=>{var t,a;return(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{style:{fontWeight:500},children:(null===(t=e.ProductItem)||void 0===t?void 0:t.name)||"Unknown"}),(null===(a=e.ProductItem)||void 0===a?void 0:a.VariantItem)&&(0,G.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:e.ProductItem.VariantItem.variant_name})]})}},{title:"Expiry Date",dataIndex:"expiry_date",key:"expiry_date",render:e=>{const t=P()(e).diff(P()(),"day"),a=t<0?"red":t<=7?"orange":"yellow";return(0,G.jsxs)(g.A,{color:a,children:[P()(e).format("DD MMM YYYY"),t<0&&" (Expired)",t>=0&&" (".concat(t,"d)")]})}},{title:"Qty",dataIndex:"available_quantity",key:"available_quantity"}],pagination:{pageSize:5},size:"small",locale:{emptyText:"No expiring items"}})})})]}),(0,G.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,G.jsx)(x.A,{xs:24,children:(0,G.jsx)(c.A,{title:"Category-wise Stock Analysis",style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:j,rowKey:"name",columns:[{title:"Category",dataIndex:"name",key:"name"},{title:"Items Count",dataIndex:"count",key:"count",sorter:(e,t)=>e.count-t.count},{title:"Stock Value",dataIndex:"value",key:"value",render:e=>"\u20b9".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),sorter:(e,t)=>e.value-t.value},{title:"Percentage",key:"percentage",render:(e,t)=>{const a=t.value/m*100;return(0,G.jsx)(ge.A,{percent:Math.round(a),size:"small",status:a>20?"success":"normal"})}}],pagination:!1,size:"small",locale:{emptyText:"No category data available"}})})})})]})};var De=a(70644),Fe=a(41334),Ce=a(45229);const{Paragraph:we,Text:Oe}=s.A,Te=()=>(0,G.jsx)(c.A,{style:{borderRadius:12,minHeight:400,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,G.jsx)(De.Ay,{icon:(0,G.jsx)(Fe.A,{style:{color:"#1890ff"}}),title:(0,G.jsx)(Oe,{strong:!0,style:{fontSize:24},children:"Staff Performance Report"}),subTitle:(0,G.jsxs)("div",{style:{marginTop:16},children:[(0,G.jsx)(Ce.A,{style:{fontSize:48,color:"#faad14",marginBottom:16}}),(0,G.jsx)(we,{style:{fontSize:16,color:"#595959"},children:"This feature is currently under development"}),(0,G.jsx)(we,{style:{fontSize:14,color:"#8c8c8c"},children:"We're working on bringing you comprehensive staff performance analytics including:"}),(0,G.jsxs)("ul",{style:{textAlign:"left",display:"inline-block",color:"#595959"},children:[(0,G.jsx)("li",{children:"Individual staff sales performance metrics"}),(0,G.jsx)("li",{children:"Target achievement tracking"}),(0,G.jsx)("li",{children:"Conversion rate analysis"}),(0,G.jsx)("li",{children:"Performance comparison charts"}),(0,G.jsx)("li",{children:"Staff productivity reports"})]}),(0,G.jsx)(we,{style:{fontSize:14,color:"#8c8c8c",marginTop:16},children:"Stay tuned for updates!"})]}),status:"info"})}),{Text:Me}=s.A,Ie=["#1890ff","#52c41a","#722ed1","#fa8c16","#13c2c2","#eb2f96"],Ye=()=>{const{paymentCollectionData:e,outstandingPaymentsData:t}=U(),a=(null===e||void 0===e?void 0:e.result)||{},l=(null===t||void 0===t?void 0:t.result)||{},r=(null===a||void 0===a?void 0:a.summary)||{},n=r.payment_mode_breakdown||[],s=(null===l||void 0===l?void 0:l.outstanding_bills)||[],o=(null===l||void 0===l?void 0:l.summary)||{},i=parseFloat(r.total_collected)||0,d=parseFloat(o.total_outstanding_amount)||0,h=parseInt(o.total_outstanding_bills)||0,p=i>0&&d>0?(i/(i+d)*100).toFixed(2):0,m=n.map((e=>({method:e.payment_mode||"Cash",amount:parseFloat(e.total_amount)||0,transactions:parseInt(e.transaction_count)||0}))),v=m.map((e=>(0,B.A)((0,B.A)({},e),{},{percentage:i>0?(e.amount/i*100).toFixed(1):0}))),f=s.filter((e=>{const t=P()(e.date);return P()().diff(t,"day")>30})).reduce(((e,t)=>e+parseFloat(t.outstanding_amount||0)),0);return(0,G.jsxs)("div",{children:[(0,G.jsxs)(u.A,{gutter:[16,16],children:[(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#f6ffed"},children:(0,G.jsx)(Q.A,{title:"Total Collected",value:i,prefix:"\u20b9",precision:2,valueStyle:{color:"#52c41a"}})})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#fff7e6"},children:(0,G.jsx)(Q.A,{title:"Outstanding",value:d,prefix:"\u20b9",precision:2,valueStyle:{color:"#fa8c16"}})})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#fff1f0"},children:(0,G.jsx)(Q.A,{title:"Overdue (>30d)",value:f,prefix:"\u20b9",precision:2,valueStyle:{color:"#ff4d4f"}})})}),(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsx)(c.A,{style:{textAlign:"center",borderRadius:12,background:"#e6f7ff"},children:(0,G.jsx)(Q.A,{title:"Collection Rate",value:p,suffix:"%",valueStyle:{color:"#1890ff"}})})})]}),(0,G.jsxs)(u.A,{gutter:[16,16],style:{marginTop:16},children:[(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Payment Method Distribution",style:{borderRadius:12},children:m.length>0?(0,G.jsx)(Z.u,{width:"100%",height:300,children:(0,G.jsxs)(oe.r,{children:[(0,G.jsx)(ie.F,{data:m,cx:"50%",cy:"50%",labelLine:!0,label:e=>{let{method:t,percentage:a}=e;return"".concat(t,": ").concat(a,"%")},outerRadius:100,fill:"#8884d8",dataKey:"amount",children:m.map(((e,t)=>(0,G.jsx)(de.f,{fill:Ie[t%Ie.length]},"cell-".concat(t))))}),(0,G.jsx)(le.m,{formatter:e=>"\u20b9".concat(e.toLocaleString())})]})}):(0,G.jsx)(H.A,{description:"No payment method data available"})})}),(0,G.jsx)(x.A,{xs:24,lg:12,children:(0,G.jsx)(c.A,{title:"Payment Method Breakdown",style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:v,rowKey:"method",columns:[{title:"Method",dataIndex:"method",key:"method"},{title:"Amount",dataIndex:"amount",key:"amount",render:e=>"\u20b9".concat(e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))},{title:"Transactions",dataIndex:"transactions",key:"transactions"},{title:"Share",dataIndex:"percentage",key:"percentage",render:e=>(0,G.jsxs)("span",{children:[e,"%",(0,G.jsx)(ge.A,{percent:parseFloat(e.toString()),size:"small",style:{marginTop:4}})]})}],pagination:!1,size:"small",locale:{emptyText:"No payment data available"}})})})]}),(0,G.jsx)(u.A,{gutter:[16,16],style:{marginTop:16},children:(0,G.jsx)(x.A,{xs:24,children:(0,G.jsx)(c.A,{title:"Outstanding Receivables (".concat(h," Bills)"),style:{borderRadius:12},children:(0,G.jsx)(pe.A,{dataSource:s,rowKey:"_id",columns:[{title:"Invoice No",dataIndex:"invoice_no",key:"invoice_no",render:e=>(0,G.jsx)(Me,{strong:!0,children:e})},{title:"Customer",key:"customer",render:e=>{var t,a;return(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{children:(null===(t=e.customerDetails)||void 0===t?void 0:t.name)||"Unknown"}),(null===(a=e.customerDetails)||void 0===a?void 0:a.phone)&&(0,G.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:e.customerDetails.phone})]})}},{title:"Bill Date",dataIndex:"date",key:"date",render:e=>P()(e).format("DD MMM YYYY")},{title:"Total Amount",dataIndex:"total_amount",key:"total_amount",render:e=>"\u20b9".concat(parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))},{title:"Paid",dataIndex:"paid_amount",key:"paid_amount",render:e=>(0,G.jsxs)(Me,{style:{color:"#52c41a"},children:["\u20b9",parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})},{title:"Outstanding",dataIndex:"outstanding_amount",key:"outstanding_amount",render:e=>(0,G.jsxs)(Me,{strong:!0,style:{color:"#ff4d4f"},children:["\u20b9",parseFloat(e||"0").toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),sorter:(e,t)=>parseFloat(e.outstanding_amount)-parseFloat(t.outstanding_amount)},{title:"Days Old",key:"daysOld",render:e=>{const t=P()().diff(P()(e.date),"day");return(0,G.jsxs)(g.A,{color:t>60?"red":t>30?"orange":"default",children:[t," days"]})},sorter:(e,t)=>P()().diff(P()(e.date),"day")-P()().diff(P()(t.date),"day")},{title:"Priority",key:"priority",render:(e,t)=>{const a=parseFloat(t.outstanding_amount||0),l=P()().diff(P()(t.date),"day"),r=a>5e3&&l>30?"High":a>2e3||l>45?"Medium":"Low",n="High"===r?"red":"Medium"===r?"orange":"default";return(0,G.jsx)(g.A,{color:n,children:r})}}],pagination:{pageSize:10},size:"small",locale:{emptyText:"No outstanding bills"}})})})})]})},{Title:Le,Text:Pe}=s.A,{RangePicker:ze}=o.A,{Option:Ee}=i.A,Be=()=>{const[e,t]=(0,l.useState)([P()().subtract(30,"days"),P()()]),[a,s]=(0,l.useState)("all"),[o,L]=(0,l.useState)("all"),[W,U]=(0,l.useState)("all"),[Q,H]=(0,l.useState)("1"),[X]=d.A.useForm(),J=(0,l.useMemo)((()=>(0,r.HW)()),[]),Z=n.A.getItem("scope"),$=(null===Z||void 0===Z?void 0:Z.userType)||(null===J||void 0===J?void 0:J.user_type)||(null===J||void 0===J?void 0:J.usertype)||(null===J||void 0===J?void 0:J.user_role)||"",ee="superadmin"===$.toLowerCase(),te="tenant"===$.toLowerCase(),ae="organisationuser"===$.toLowerCase(),le="branchuser"===$.toLowerCase(),{data:re}=(0,E.uw)({},{skip:!ee}),{data:ne}=(0,E.FE)({},{skip:!ee&&!te}),{data:se}=(0,E.Sg)({},{skip:le}),oe=(null===re||void 0===re?void 0:re.result)||[],ie=(null===ne||void 0===ne?void 0:ne.result)||[],de=(null===se||void 0===se?void 0:se.result)||[],ce=(0,l.useMemo)((()=>(Array.isArray(oe)?oe:[]).map((e=>({label:e.organization_name||e.contact_name||e.username,value:e._id})))),[oe]),ue=(0,l.useMemo)((()=>{let e=Array.isArray(ie)?ie:[];return ee&&"all"!==a&&(e=e.filter((e=>e.tenant_id===a))),e.map((e=>({label:e.org_name||e.name,value:e._id})))}),[ie,a,ee]),xe=(0,l.useMemo)((()=>{let e=Array.isArray(de)?de:[];return"all"!==o&&(e=e.filter((e=>e.organisation_id===o||e.org_id===o))),e.map((e=>({label:e.branch_name||e.name,value:e._id})))}),[de,o]),{loading:pe,reportCache:me,fetchReportData:ge,salesReportData:fe,productSalesData:ye,customerSalesData:Ae,stockReportData:_e,profitLossData:Se,outstandingPaymentsData:ke,paymentCollectionData:De,expenseData:Fe,gstData:Ce,topProductsData:we,topCustomersData:Oe,stockExpiryData:Me}=(e=>{const{activeTab:t,selectedTenant:a,selectedOrganisation:r,selectedBranch:n,dateRange:s}=e,[o,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)({}),u=(0,l.useRef)(null),x=(0,l.useMemo)((()=>{var e,t;return{start_date:null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),end_date:null===s||void 0===s||null===(t=s[1])||void 0===t?void 0:t.format("YYYY-MM-DD")}}),[s]),h=(0,l.useMemo)((()=>(0,B.A)((0,B.A)({},x),{},{limit:10})),[x]),p=(0,l.useMemo)((()=>(0,B.A)((0,B.A)({},x),{},{limit:10})),[x]),m=(0,l.useMemo)((()=>({days_threshold:30})),[]),v=(0,l.useMemo)((()=>({})),[]),g=K(t),f="sales"===g,y="sales"===g,j="sales"===g,A="customer"===g,b="customer"===g,_="inventory"===g,S="inventory"===g,k="financial"===g,R="financial"===g,D="financial"===g,F="payment"===g,C="payment"===g,w="comprehensive"===g,O=w,T=w,M=w,I=w,Y=w,{data:L,refetch:P}=E.lh.useGetSalesReportQuery(x,{skip:!f&&!O,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:z,refetch:V}=E.lh.useGetProductSalesReportQuery(x,{skip:!y&&!O,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:G,refetch:W}=E.lh.useGetCustomerSalesReportQuery(x,{skip:!A&&!M,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:q,refetch:U}=E.lh.useGetStockReportQuery(v,{skip:!_&&!I,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:Q,refetch:H}=E.lh.useGetProfitLossReportQuery(x,{skip:!k&&!T,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:X,refetch:J}=E.lh.useGetOutstandingPaymentsReportQuery(v,{skip:!C,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:Z,refetch:$}=E.lh.useGetPaymentCollectionReportQuery(x,{skip:!F&&!Y,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:ee,refetch:te}=E.lh.useGetExpenseReportQuery(x,{skip:!R,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:ae,refetch:le}=E.lh.useGetGSTReportQuery(x,{skip:!D,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:re,refetch:ne}=E.lh.useGetTopProductsReportQuery(h,{skip:!j,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:se,refetch:oe}=E.lh.useGetTopCustomersReportQuery(p,{skip:!b,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),{data:ie,refetch:de}=E.lh.useGetStockExpiryReportQuery(m,{skip:!S,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1}),ce=(0,l.useMemo)((()=>({result:(null===L||void 0===L?void 0:L.result)||L,loading:!1})),[L]),ue=(0,l.useMemo)((()=>({result:(null===z||void 0===z?void 0:z.result)||z,loading:!1})),[z]),xe=(0,l.useMemo)((()=>({result:(null===G||void 0===G?void 0:G.result)||G,loading:!1})),[G]),he=(0,l.useMemo)((()=>({result:(null===q||void 0===q?void 0:q.result)||q,loading:!1})),[q]),pe=(0,l.useMemo)((()=>({result:(null===Q||void 0===Q?void 0:Q.result)||Q,loading:!1})),[Q]),me=(0,l.useMemo)((()=>({result:(null===X||void 0===X?void 0:X.result)||X,loading:!1})),[X]),ve=(0,l.useMemo)((()=>({result:(null===Z||void 0===Z?void 0:Z.result)||Z,loading:!1})),[Z]),ge=(0,l.useMemo)((()=>({result:(null===ee||void 0===ee?void 0:ee.result)||ee,loading:!1})),[ee]),fe=(0,l.useMemo)((()=>({result:(null===ae||void 0===ae?void 0:ae.result)||ae,loading:!1})),[ae]),ye=(0,l.useMemo)((()=>({result:(null===re||void 0===re?void 0:re.result)||re,loading:!1})),[re]),je=(0,l.useMemo)((()=>({result:(null===se||void 0===se?void 0:se.result)||se,loading:!1})),[se]),Ae=(0,l.useMemo)((()=>({result:(null===ie||void 0===ie?void 0:ie.result)||ie,loading:!1})),[ie]);(0,l.useEffect)((()=>{var e,l;const o=K(t),i="".concat(o,"_").concat(a,"_").concat(r,"_").concat(n,"_").concat(null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),"_").concat(null===s||void 0===s||null===(l=s[1])||void 0===l?void 0:l.format("YYYY-MM-DD"));let d=null;switch(o){case"sales":(null!==ce&&void 0!==ce&&ce.result||null!==ue&&void 0!==ue&&ue.result||null!==ye&&void 0!==ye&&ye.result)&&(d={salesReport:null===ce||void 0===ce?void 0:ce.result,productSales:null===ue||void 0===ue?void 0:ue.result,topProducts:null===ye||void 0===ye?void 0:ye.result});break;case"customer":(null!==xe&&void 0!==xe&&xe.result||null!==je&&void 0!==je&&je.result)&&(d={customerSales:null===xe||void 0===xe?void 0:xe.result,topCustomers:null===je||void 0===je?void 0:je.result});break;case"inventory":(null!==he&&void 0!==he&&he.result||null!==Ae&&void 0!==Ae&&Ae.result)&&(d={stock:null===he||void 0===he?void 0:he.result,expiry:null===Ae||void 0===Ae?void 0:Ae.result});break;case"financial":(null!==pe&&void 0!==pe&&pe.result||null!==ge&&void 0!==ge&&ge.result||null!==fe&&void 0!==fe&&fe.result)&&(d={profitLoss:null===pe||void 0===pe?void 0:pe.result,expenses:null===ge||void 0===ge?void 0:ge.result,gst:null===fe||void 0===fe?void 0:fe.result});break;case"payment":(null!==ve&&void 0!==ve&&ve.result||null!==me&&void 0!==me&&me.result)&&(d={collections:null===ve||void 0===ve?void 0:ve.result,outstanding:null===me||void 0===me?void 0:me.result});break;case"comprehensive":(null!==ce&&void 0!==ce&&ce.result||null!==pe&&void 0!==pe&&pe.result)&&(d={sales:null===ce||void 0===ce?void 0:ce.result,profitLoss:null===pe||void 0===pe?void 0:pe.result,customers:null===xe||void 0===xe?void 0:xe.result,stock:null===he||void 0===he?void 0:he.result,payments:null===ve||void 0===ve?void 0:ve.result})}d&&c((e=>(0,B.A)((0,B.A)({},e),{},{[i]:d})))}),[t,a,r,n,s,ce,ue,xe,he,pe,me,ve,ge,fe,ye,je,Ae]);const be=(0,l.useCallback)((()=>{var e,l;const o=K(t),c="".concat(o,"_").concat(a,"_").concat(r,"_").concat(n,"_").concat(null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),"_").concat(null===s||void 0===s||null===(l=s[1])||void 0===l?void 0:l.format("YYYY-MM-DD"));if(d[c])N.Ay.success("Report data loaded from cache");else{i(!0),u.current&&(clearTimeout(u.current),u.current=null);try{switch(o){case"sales":P(),V(),ne();break;case"customer":W(),oe();break;case"inventory":U(),de();break;case"financial":H(),te(),le();break;case"payment":$(),J();break;case"comprehensive":P(),H(),W(),U(),$()}u.current=setTimeout((()=>{i(!1),u.current=null}),500)}catch(x){i(!1),N.Ay.error("Failed to fetch report data"),console.error("Report fetch error:",x)}}}),[t,a,r,n,s,d,P,V,ne,W,oe,U,de,H,te,le,$,J]);return(0,l.useEffect)((()=>()=>{u.current&&(clearTimeout(u.current),u.current=null)}),[]),{loading:o,reportCache:d,fetchReportData:be,salesReportData:ce,productSalesData:ue,customerSalesData:xe,stockReportData:he,profitLossData:pe,outstandingPaymentsData:me,paymentCollectionData:ve,expenseData:ge,gstData:fe,topProductsData:ye,topCustomersData:je,stockExpiryData:Ae}})({activeTab:Q,selectedTenant:a,selectedOrganisation:o,selectedBranch:W,dateRange:e,isSuperAdmin:ee}),{exportModalVisible:Ie,setExportModalVisible:Be,exportFormat:Ne,setExportFormat:Ke,exportOptions:Ve,setExportOptions:Ge,handleExport:We,handlePrint:qe}=V({activeTab:Q,reportCache:me,selectedTenant:a,selectedOrganisation:o,selectedBranch:W,dateRange:e,tenantOptions:ce,organisationOptions:ue,branchOptions:xe,isSuperAdmin:ee,isTenant:te});return(0,l.useEffect)((()=>{const e=e=>{if(e.ctrlKey)switch(e.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":e.preventDefault(),H(e.key);break;case"r":case"R":e.preventDefault(),ge();break;case"e":case"E":e.preventDefault(),Be(!0);break;case"p":case"P":e.preventDefault(),qe()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[ge,qe,Be]),(0,G.jsxs)("div",{className:z,children:[(0,G.jsxs)(c.A,{style:{marginBottom:24,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,G.jsxs)(u.A,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[(0,G.jsxs)(x.A,{children:[(0,G.jsxs)(Le,{level:2,style:{margin:0,color:"#1890ff"},children:[(0,G.jsx)(A.A,{style:{marginRight:8}}),"Advanced Business Reports"]}),(0,G.jsx)(Pe,{type:"secondary",children:"Comprehensive analytics & insights with advanced reporting"})]}),(0,G.jsx)(x.A,{children:(0,G.jsxs)(h.A,{wrap:!0,children:[(0,G.jsx)(p.A,{title:"Refresh Data (Ctrl+R)",children:(0,G.jsx)(m.Ay,{icon:(0,G.jsx)(b.A,{}),onClick:ge,loading:pe,children:"Refresh"})}),(0,G.jsx)(p.A,{title:"Export Report (Ctrl+E)",children:(0,G.jsx)(m.Ay,{icon:(0,G.jsx)(_.A,{}),onClick:()=>Be(!0),type:"primary",children:"Export"})}),(0,G.jsx)(p.A,{title:"Print Report (Ctrl+P)",children:(0,G.jsx)(m.Ay,{icon:(0,G.jsx)(S.A,{}),onClick:qe,children:"Print"})}),(0,G.jsx)(p.A,{title:"Settings",children:(0,G.jsx)(m.Ay,{icon:(0,G.jsx)(k.A,{}),type:"dashed"})})]})})]}),(0,G.jsxs)(u.A,{gutter:16,align:"middle",children:[(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(h.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,G.jsxs)(Pe,{strong:!0,children:[(0,G.jsx)(R.A,{})," Date Range:"]}),(0,G.jsx)(ze,{value:e,onChange:e=>t(e),style:{width:"100%"}})]})}),ee&&(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(h.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,G.jsx)(Pe,{strong:!0,children:"Tenant:"}),(0,G.jsxs)(i.A,{value:a,onChange:e=>{s(e),L("all"),U("all")},style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var a;return String(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},children:[(0,G.jsx)(Ee,{value:"all",children:"All Tenants"}),ce.map((e=>(0,G.jsx)(Ee,{value:e.value,children:e.label},e.value)))]})]})}),(ee||te)&&!ae&&!le&&(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(h.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,G.jsx)(Pe,{strong:!0,children:"Organisation:"}),(0,G.jsxs)(i.A,{value:o,onChange:e=>{L(e),U("all")},style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var a;return String(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},disabled:ee&&"all"===a,placeholder:ee&&"all"===a?"Select tenant first":"Select organisation",children:[(0,G.jsx)(Ee,{value:"all",children:"All Organisations"}),ue.map((e=>(0,G.jsx)(Ee,{value:e.value,children:e.label},e.value)))]})]})}),(ee||te||ae)&&!le&&(0,G.jsx)(x.A,{xs:24,sm:12,md:6,children:(0,G.jsxs)(h.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,G.jsx)(Pe,{strong:!0,children:"Branch:"}),(0,G.jsxs)(i.A,{value:W,onChange:U,style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var a;return String(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},disabled:(ee||te)&&"all"===o,placeholder:(ee||te)&&"all"===o?"Select organisation first":"Select branch",children:[(0,G.jsx)(Ee,{value:"all",children:"All Branches"}),xe.map((e=>(0,G.jsx)(Ee,{value:e.value,children:e.label},e.value)))]})]})}),(0,G.jsx)(x.A,{xs:24,sm:24,md:6,children:(0,G.jsx)(m.Ay,{type:"primary",icon:(0,G.jsx)(D.A,{}),onClick:ge,loading:pe,style:{marginTop:22,width:"100%"},size:"large",children:"Apply Filters"})})]})]}),(0,G.jsx)(q,{value:{salesReportData:fe,productSalesData:ye,customerSalesData:Ae,stockReportData:_e,profitLossData:Se,outstandingPaymentsData:ke,paymentCollectionData:De,expenseData:Fe,gstData:Ce,topProductsData:we,topCustomersData:Oe,stockExpiryData:Me,loading:pe},children:(0,G.jsx)(v.A,{activeKey:Q,onChange:H,type:"card",size:"large",style:{backgroundColor:"#fff",padding:16,borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},items:[{key:"1",label:(0,G.jsx)(p.A,{title:"Comprehensive Overview (Ctrl+1)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(A.A,{})," Comprehensive"]})}),children:(0,G.jsx)(he,{})},{key:"2",label:(0,G.jsx)(p.A,{title:"Financial Analysis (Ctrl+2)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(F.A,{})," Financial"]})}),children:(0,G.jsx)(ve,{})},{key:"3",label:(0,G.jsx)(p.A,{title:"Sales Analytics (Ctrl+3)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(C.A,{})," Sales"]})}),children:(0,G.jsx)(je,{})},{key:"4",label:(0,G.jsx)(p.A,{title:"Customer Analytics (Ctrl+4)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(w.A,{})," Customers"]})}),children:(0,G.jsx)(be,{})},{key:"5",label:(0,G.jsx)(p.A,{title:"Inventory Report (Ctrl+5)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(O.A,{})," Inventory"]})}),children:(0,G.jsx)(Re,{})},{key:"6",label:(0,G.jsx)(p.A,{title:"Staff Performance (Under Development)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(T.A,{})," Staff",(0,G.jsx)(g.A,{color:"orange",style:{marginLeft:8,fontSize:10},children:"Dev"})]})}),children:(0,G.jsx)(Te,{})},{key:"7",label:(0,G.jsx)(p.A,{title:"Payment Analysis (Ctrl+7)",children:(0,G.jsxs)("span",{children:[(0,G.jsx)(M.A,{})," Payments"]})}),children:(0,G.jsx)(Ye,{})}]})}),(0,G.jsx)(f.A,{title:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(_.A,{})," Export Report"]}),open:Ie,onCancel:()=>Be(!1),onOk:We,okText:"Export",cancelText:"Cancel",width:500,children:(0,G.jsxs)(d.A,{form:X,layout:"vertical",children:[(0,G.jsx)(d.A.Item,{label:"Export Format",children:(0,G.jsxs)(y.Ay.Group,{value:Ne,onChange:e=>Ke(e.target.value),buttonStyle:"solid",children:[(0,G.jsxs)(y.Ay.Button,{value:"pdf",children:[(0,G.jsx)(I.A,{})," PDF"]}),(0,G.jsxs)(y.Ay.Button,{value:"excel",children:[(0,G.jsx)(Y.A,{})," Excel"]}),(0,G.jsx)(y.Ay.Button,{value:"csv",children:"CSV"})]})}),(0,G.jsx)(d.A.Item,{label:"Include in Export",children:(0,G.jsx)(j.A.Group,{value:Ve,onChange:e=>Ge(e),style:{width:"100%"},children:(0,G.jsxs)(u.A,{children:[(0,G.jsx)(x.A,{span:24,children:(0,G.jsx)(j.A,{value:"summary",children:"Summary Statistics"})}),(0,G.jsx)(x.A,{span:24,children:(0,G.jsx)(j.A,{value:"charts",children:"Charts & Graphs"})}),(0,G.jsx)(x.A,{span:24,children:(0,G.jsx)(j.A,{value:"tables",children:"Detailed Tables"})}),(0,G.jsx)(x.A,{span:24,children:(0,G.jsx)(j.A,{value:"trends",children:"Trend Analysis"})})]})})}),(0,G.jsx)(d.A.Item,{label:"Date Range",children:(0,G.jsx)(ze,{style:{width:"100%"},value:e})})]})})]})}}}]);
//# sourceMappingURL=681.17bc3da3.chunk.js.map