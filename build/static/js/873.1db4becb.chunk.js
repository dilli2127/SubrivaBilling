/*! For license information please see 873.1db4becb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[873],{83873:(e,t,n)=>{n.r(t),n.d(t,{default:()=>me});var i=n(89379),o=n(65043),l=n(83833),s=n(62305),r=n(76399),a=n(96651),d=n(6051),c=n(95206),p=n(24255),x=n(98139),m=n.n(x),g=n(28678),u=n(18574),h=n(35296),v=n(36282),y=n(38046),j=n(98986),f=n(64160),b=n(10370),A=n(76970),S=n(34382),C=n(78855);const _=(0,C.OF)("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:i,zIndexPopup:o,colorText:l,colorWarning:s,marginXXS:r,marginXS:a,fontSize:d,fontWeightStrong:c,colorTextHeading:p}=e;return{[t]:{zIndex:o,["&".concat(i,"-popover")]:{fontSize:d},["".concat(t,"-message")]:{marginBottom:a,display:"flex",flexWrap:"nowrap",alignItems:"start",["> ".concat(t,"-message-icon ").concat(n)]:{color:s,fontSize:d,lineHeight:1,marginInlineEnd:a},["".concat(t,"-title")]:{fontWeight:c,color:p,"&:only-child":{fontWeight:"normal"}},["".concat(t,"-description")]:{marginTop:r,color:l}},["".concat(t,"-buttons")]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:a}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});var w=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const I=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:i,title:l,description:s,cancelText:r,okText:a,okType:d="primary",icon:x=o.createElement(p.A,null),showCancel:m=!0,close:g,onConfirm:u,onCancel:v,onPopupClick:S}=e,{getPrefixCls:C}=o.useContext(h.QO),[_]=(0,b.A)("Popconfirm",A.A.Popconfirm),w=(0,j.b)(l),I=(0,j.b)(s);return o.createElement("div",{className:"".concat(t,"-inner-content"),onClick:S},o.createElement("div",{className:"".concat(t,"-message")},x&&o.createElement("span",{className:"".concat(t,"-message-icon")},x),o.createElement("div",{className:"".concat(t,"-message-text")},w&&o.createElement("div",{className:"".concat(t,"-title")},w),I&&o.createElement("div",{className:"".concat(t,"-description")},I))),o.createElement("div",{className:"".concat(t,"-buttons")},m&&o.createElement(c.Ay,Object.assign({onClick:v,size:"small"},i),r||(null===_||void 0===_?void 0:_.cancelText)),o.createElement(y.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,f.DU)(d)),n),actionFn:u,close:g,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},a||(null===_||void 0===_?void 0:_.okText))))},N=e=>{const{prefixCls:t,placement:n,className:i,style:l}=e,s=w(e,["prefixCls","placement","className","style"]),{getPrefixCls:r}=o.useContext(h.QO),a=r("popconfirm",t),[d]=_(a);return d(o.createElement(S.Ay,{placement:n,className:m()(a,i),style:l,content:o.createElement(I,Object.assign({prefixCls:a},s))}))};var T=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const k=o.forwardRef(((e,t)=>{var n,i;const{prefixCls:l,placement:s="top",trigger:r="click",okType:a="primary",icon:d=o.createElement(p.A,null),children:c,overlayClassName:x,onOpenChange:y,onVisibleChange:j,overlayStyle:f,styles:b,classNames:A}=e,S=T(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:C,className:w,style:N,classNames:k,styles:O}=(0,h.TP)("popconfirm"),[P,B]=(0,g.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(i=e.defaultOpen)&&void 0!==i?i:e.defaultVisible}),z=(e,t)=>{B(e,!0),null===j||void 0===j||j(e),null===y||void 0===y||y(e,t)},D=C("popconfirm",l),E=m()(D,w,x,k.root,null===A||void 0===A?void 0:A.root),G=m()(k.body,null===A||void 0===A?void 0:A.body),[V]=_(D);return V(o.createElement(v.A,Object.assign({},(0,u.A)(S,["title"]),{trigger:r,placement:s,onOpenChange:(t,n)=>{const{disabled:i=!1}=e;i||z(t,n)},open:P,ref:t,classNames:{root:E,body:G},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},O.root),N),f),null===b||void 0===b?void 0:b.root),body:Object.assign(Object.assign({},O.body),null===b||void 0===b?void 0:b.body)},content:o.createElement(I,Object.assign({okType:a,icon:d},e,{prefixCls:D,close:e=>{z(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,t)},onCancel:t=>{var n;z(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)}})),"data-popover-inject":!0}),c))}));k._InternalPanelDoNotUseOrYouWillBeFired=N;const O=k;var P=n(36621),B=n(62751),z=n(36091),D=n(6881),E=n(53722);const G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var V=n(66381);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L.apply(this,arguments)}const M=(e,t)=>o.createElement(V.A,L({},e,{ref:t,icon:G}));const F=o.forwardRef(M);var X=n(76401),W=n(61118),R=n(94834),q=n(9316),U=n(72411),Y=n(73847),H=n(60446),Q=n.n(H),K=n(22671),J=n(4825),Z=n(97031),$=n(19468),ee=n(39249),te=n(70579);const{Title:ne,Text:ie}=l.A,oe=e=>{var t;let{visible:n,onClose:i,billData:l}=e;const s=(0,o.useRef)(null),r=e=>(Number(e)||0).toFixed(2),a="Focuz Medicals",d="123 MG Road, Bangalore, Karnataka - 560001",p="29ABCDE1234F1Z5",x=[{title:"Item",dataIndex:"productItems",key:"name",render:(e,t)=>{var n;const i=t.productItems;if(!i)return"";const o=null===(n=i.VariantItem)||void 0===n?void 0:n.variant_name;return o?"".concat(i.name," - ").concat(o):i.name}},{title:"Qty",dataIndex:"qty",key:"qty",width:100,render:e=>e||0},{title:"Loose Qty",dataIndex:"loose_qty",key:"loose_qty",width:100,render:e=>e||0},{title:"Price",dataIndex:"price",key:"price",width:120,render:e=>"\u20b9 ".concat(r(e))},{title:"Amount",dataIndex:"amount",key:"amount",width:120,render:e=>"\u20b9 ".concat(r(e))}];return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)(B.A,{title:(0,te.jsx)(ne,{level:4,style:{margin:0,color:"#1890ff"},children:"Sale Details"}),open:n,onCancel:i,width:800,footer:[(0,te.jsx)(c.Ay,{type:"primary",icon:(0,te.jsx)(R.A,{}),onClick:()=>{var e;const t="\n      <html>\n        <head>\n          <title>Sale - ".concat(l.invoice_no,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; color: #222; }\n            .shop-info { text-align: center; margin-bottom: 20px; }\n            .shop-info h2 { margin-bottom: 0; color: #1890ff; }\n            .info-flex { display: flex; justify-content: space-between; margin-bottom: 10px; }\n            table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n            th { background-color: #f5f5f5; }\n            .total { text-align: right; font-weight: bold; margin-top: 10px; }\n            .thank-you { text-align: center; margin-top: 40px; font-size: 16px; color: #1890ff; font-weight: bold; }\n            @media print {\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="shop-info">\n            <h2>').concat(a,"</h2>\n            <p>").concat(d,"</p>\n            <p><strong>GST No:</strong> ").concat(p,'</p>\n          </div>\n\n          <div class="info-flex">\n            <div>\n              <p><strong>Invoice No:</strong> ').concat(l.invoice_no,"</p>\n              <p><strong>Date:</strong> ").concat(new Date(l.date).toLocaleDateString(),'</p>\n            </div>\n            <div style="text-align: right;">\n              <p><strong>Customer:</strong> ').concat((null===(e=l.customerDetails)||void 0===e?void 0:e.full_name)||"","</p>\n              <p><strong>Payment Mode:</strong> ").concat(l.payment_mode||"","</p>\n            </div>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Item</th>\n                <th>Qty</th>\n                <th>Loose Qty</th>\n                <th>Price</th>\n                <th>Amount</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(l.Items.map((e=>{var t;const n=e.productItems,i=n?"".concat(n.name).concat(null!==(t=n.VariantItem)&&void 0!==t&&t.variant_name?" - ".concat(n.VariantItem.variant_name):""):"";return"\n                  <tr>\n                    <td>".concat(i,"</td>\n                    <td>").concat(e.qty||0,"</td>\n                    <td>").concat(e.loose_qty||0,"</td>\n                    <td>\u20b9 ").concat(r(e.price),"</td>\n                    <td>\u20b9 ").concat(r(e.amount),"</td>\n                  </tr>\n                ")})).join(""),'\n            </tbody>\n          </table>\n\n          <div class="total">\n            <p>Value of Goods: \u20b9 ').concat(r(l.value_of_goods),"</p>\n            ").concat(l.discount>0?"\n              <p>Discount: ".concat("percentage"===l.discount_type?l.discount+"%":"\u20b9 "+r(l.discount),"</p>\n            "):"","\n            <p>Total GST: \u20b9 ").concat(r(l.total_gst),"</p>\n            <p>CGST: \u20b9 ").concat(r(l.cgst||l.total_gst/2),"</p>\n            <p>SGST: \u20b9 ").concat(r(l.sgst||l.total_gst/2),"</p>\n            <p><strong>").concat("retail"===l.sale_type?"Bill Value":"Invoice Value",": \u20b9 ").concat(r(l.total_amount),"</strong></p>\n            ").concat(l.is_partially_paid?"\n              <p>Paid Amount: \u20b9 ".concat(r(l.paid_amount),"</p>\n              <p>Remaining Amount: \u20b9 ").concat(r(Number(l.total_amount)-Number(l.paid_amount)),"</p>\n            "):"","\n            <p><strong>Payment Status:</strong> ").concat(l.is_paid?"Fully Paid":l.is_partially_paid?"Partially Paid":"Unpaid","</p>\n          </div>\n\n          <div class=\"thank-you\">\n            Thank you for shopping with us!\n          </div>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              window.onafterprint = function() {\n                window.parent.postMessage('printComplete', '*');\n              };\n            };\n          <\/script>\n        </body>\n      </html>\n    "),n=s.current;n.contentWindow.document.open(),n.contentWindow.document.write(t),n.contentWindow.document.close(),window.addEventListener("message",(e=>{"printComplete"===e.data&&i()}))},children:"Print Sale"},"print"),(0,te.jsx)(c.Ay,{onClick:i,children:"Close"},"close")],children:[(0,te.jsxs)("div",{style:{textAlign:"center",marginBottom:16},children:[(0,te.jsx)(ne,{level:4,style:{marginBottom:0,color:"#1890ff"},children:a}),(0,te.jsx)(ie,{children:d}),(0,te.jsx)("br",{}),(0,te.jsxs)(ie,{children:[(0,te.jsx)("strong",{children:"GST No:"})," ",(0,te.jsx)(ie,{code:!0,children:p})]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:20},children:[(0,te.jsxs)("div",{children:[(0,te.jsx)(ie,{strong:!0,children:"Invoice No:"})," ",l.invoice_no,(0,te.jsx)("br",{}),(0,te.jsx)(ie,{strong:!0,children:"Date:"})," ",new Date(l.date).toLocaleDateString()]}),(0,te.jsxs)("div",{style:{textAlign:"right"},children:[(0,te.jsx)(ie,{strong:!0,children:"Customer:"})," ",null===(t=l.customerDetails)||void 0===t?void 0:t.full_name,(0,te.jsx)("br",{}),(0,te.jsx)(ie,{strong:!0,children:"Payment Mode:"})," ",l.payment_mode]})]}),(0,te.jsx)(ee.A,{dataSource:l.Items,columns:x,pagination:!1,bordered:!0,summary:()=>(0,te.jsxs)(ee.A.Summary.Row,{children:[(0,te.jsx)(ee.A.Summary.Cell,{index:0,colSpan:4,children:(0,te.jsx)(ie,{strong:!0,children:"Total Amount:"})}),(0,te.jsx)(ee.A.Summary.Cell,{index:1,children:(0,te.jsxs)(ie,{strong:!0,children:["\u20b9 ",r(l.sub_total)]})})]})}),(0,te.jsxs)("div",{style:{marginTop:20,textAlign:"right"},children:[(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsx)(ie,{strong:!0,children:"Value of Goods:"}),(0,te.jsxs)(ie,{children:["\u20b9 ",r(l.value_of_goods)]})]}),l.discount>0&&(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsx)(ie,{strong:!0,children:"Discount:"}),(0,te.jsx)(ie,{children:"percentage"===l.discount_type?"".concat(l.discount,"%"):"\u20b9 ".concat(r(l.discount))})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsx)(ie,{strong:!0,children:"Total GST:"}),(0,te.jsxs)(ie,{children:["\u20b9 ",r(l.total_gst)]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsx)(ie,{strong:!0,children:"CGST:"}),(0,te.jsxs)(ie,{children:["\u20b9 ",r(l.cgst||l.total_gst/2)]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsx)(ie,{strong:!0,children:"SGST:"}),(0,te.jsxs)(ie,{children:["\u20b9 ",r(l.sgst||l.total_gst/2)]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"8px"},children:[(0,te.jsxs)(ie,{strong:!0,children:["retail"===l.sale_type?"Bill Value":"Invoice Value",":"]}),(0,te.jsxs)(ie,{children:["\u20b9 ",r(l.total_amount)]})]}),(0,te.jsx)(ie,{strong:!0,children:"Payment Status: "}),l.is_paid?(0,te.jsx)(ie,{type:"success",children:"Fully Paid"}):l.is_partially_paid?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ie,{type:"warning",children:"Partially Paid"}),(0,te.jsx)("br",{}),(0,te.jsxs)(ie,{children:["Paid Amount: \u20b9 ",r(l.paid_amount)]}),(0,te.jsx)("br",{}),(0,te.jsxs)(ie,{children:["Remaining Amount: \u20b9"," ",r(Number(l.total_amount)-Number(l.paid_amount))]})]}):(0,te.jsx)(ie,{type:"danger",children:"Unpaid"})]}),(0,te.jsx)("div",{style:{textAlign:"center",marginTop:40},children:(0,te.jsx)(ie,{style:{color:"#1890ff",fontWeight:500},children:"Thank you for shopping with us!"})})]}),(0,te.jsx)("iframe",{ref:s,style:{display:"none"},title:"print-frame"})]})};var le=n(4413),se=n(94211),re=n(83003),ae=n(22115);const de={borderBottom:"1px solid #000",padding:"2px",textAlign:"left",fontSize:"11px"},ce={padding:"2px",fontSize:"11px"},pe={classic:{label:"Classic",component:e=>{var t,n,i,o;let{billData:l}=e;const s=(0,ae.J)();return(0,te.jsxs)("div",{style:{fontFamily:"Courier New, monospace",background:"#fff",border:"1px solid #ddd",maxWidth:"380px",margin:"20px auto",padding:"16px",fontSize:"12px",color:"#000"},children:[(0,te.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[(0,te.jsx)("h3",{style:{margin:"4px 0",fontWeight:"bold",fontSize:"16px"},children:(null===s||void 0===s||null===(t=s.organisationItems)||void 0===t?void 0:t.org_name)||""}),(0,te.jsx)("div",{style:{fontSize:"11px",marginBottom:"4px"},children:(null===s||void 0===s||null===(n=s.branchItems)||void 0===n?void 0:n.address1)||""}),(0,te.jsxs)("div",{style:{fontSize:"11px"},children:["GSTIN: ",(null===s||void 0===s||null===(i=s.organisationItems)||void 0===i?void 0:i.gst_number)||"33XXXXXXXXXXX"]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{children:["BILL NO: ",(null===l||void 0===l?void 0:l.invoice_no)||"INV-XXXX"]}),(0,te.jsxs)("div",{children:["DATE:"," ",null!==l&&void 0!==l&&l.date?new Date(l.date).toLocaleDateString():"-"]})]}),(0,te.jsx)("div",{style:{textAlign:"right"},children:(0,te.jsxs)("div",{children:["NAME:"," ",((null===l||void 0===l?void 0:l.customerName)||"").substring(0,20).toUpperCase()]})})]}),(0,te.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"4px 0"}}),(0,te.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"8px"},children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{children:[(0,te.jsx)("th",{style:de,children:"S.No"}),(0,te.jsx)("th",{style:de,children:"Item"}),(0,te.jsx)("th",{style:de,children:"Qty"}),(0,te.jsx)("th",{style:de,children:"Rate"}),(0,te.jsx)("th",{style:de,children:"MRP"}),(0,te.jsx)("th",{style:de,children:"Amt"})]})}),(0,te.jsx)("tbody",{children:null===l||void 0===l||null===(o=l.items)||void 0===o?void 0:o.map(((e,t)=>(0,te.jsxs)("tr",{children:[(0,te.jsx)("td",{style:ce,children:t+1}),(0,te.jsx)("td",{style:ce,children:e.name.length>15?e.name.substring(0,15)+"...":e.name}),(0,te.jsx)("td",{style:ce,children:e.qty}),(0,te.jsxs)("td",{style:ce,children:["\u20b9",e.price]}),(0,te.jsxs)("td",{style:ce,children:["\u20b9",e.mrp||e.price]}),(0,te.jsxs)("td",{style:ce,children:["\u20b9",e.amount]})]},t)))})]}),(0,te.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"4px 0"}}),(0,te.jsxs)("div",{style:{textAlign:"right",fontWeight:"bold"},children:[(0,te.jsxs)("div",{children:["Subtotal: \u20b9 ",null===l||void 0===l?void 0:l.total]}),(0,te.jsxs)("div",{children:["CGST: \u20b9 ",((null===l||void 0===l?void 0:l.cgst)||((null===l||void 0===l?void 0:l.total_gst)||0)/2).toFixed(2)]}),(0,te.jsxs)("div",{children:["SGST: \u20b9 ",((null===l||void 0===l?void 0:l.sgst)||((null===l||void 0===l?void 0:l.total_gst)||0)/2).toFixed(2)]}),(0,te.jsxs)("div",{style:{fontSize:"14px"},children:["NET AMOUNT: \u20b9 ",null===l||void 0===l?void 0:l.total]})]}),(0,te.jsx)("div",{style:{borderTop:"1px dashed #000",margin:"8px 0"}}),(0,te.jsxs)("div",{style:{textAlign:"center",fontSize:"11px"},children:["*** GET WELL SOON. THANK YOU ***",(0,te.jsx)("br",{}),"Goods Once Sold Cannot Be Taken Back"]})]})},previewImg:"https://via.placeholder.com/220x120?text=Classic"},modern:{label:"Modern",component:e=>{var t,n,i,o,l;let{billData:s}=e;const r=(0,ae.J)();return(0,te.jsxs)("div",{style:{padding:30,background:"#fff",border:"1px solid #ccc",borderRadius:12,maxWidth:850,margin:"20px auto",color:"#333",fontFamily:"Georgia, serif",boxShadow:"0 0 10px rgba(0,0,0,0.08)"},children:[(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",borderBottom:"2px solid #333",paddingBottom:10,marginBottom:20},children:[(0,te.jsxs)("div",{children:[(0,te.jsx)("h1",{style:{margin:0,fontSize:24},children:(null===r||void 0===r||null===(t=r.organisationItems)||void 0===t?void 0:t.org_name)||"Your Company Name"}),(0,te.jsx)("p",{style:{margin:"5px 0",fontSize:14},children:(null===r||void 0===r||null===(n=r.branchItems)||void 0===n?void 0:n.branch_name)||"Branch Name"}),(0,te.jsx)("p",{style:{margin:0,fontSize:12},children:(null===r||void 0===r||null===(i=r.branchItems)||void 0===i?void 0:i.address1)||"Branch Address"})]}),(0,te.jsxs)("div",{style:{textAlign:"right",fontSize:12},children:[(0,te.jsxs)("p",{style:{margin:0},children:[(0,te.jsx)("strong",{children:"GSTIN:"})," ",(null===r||void 0===r||null===(o=r.organisationItems)||void 0===o?void 0:o.gst_number)||"-"]}),(0,te.jsx)("p",{style:{margin:"5px 0",fontWeight:600},children:"wholesale"===(null===s||void 0===s?void 0:s.sale_type)?"INVOICE":"CASH BILL"}),(0,te.jsxs)("p",{style:{margin:0},children:[(0,te.jsx)("strong",{children:"Invoice #:"})," ",(null===s||void 0===s?void 0:s.invoice_no)||"-"]})]})]}),(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:20},children:[(0,te.jsxs)("div",{style:{fontSize:13},children:[(0,te.jsxs)("p",{style:{margin:"2px 0"},children:[(0,te.jsx)("strong",{children:"Bill To:"})," ",(null===s||void 0===s?void 0:s.customerName)||"Customer Name"]}),(0,te.jsx)("p",{style:{margin:"2px 0",color:"#555"},children:(null===s||void 0===s?void 0:s.customerAddress)||"Customer Address"})]}),(0,te.jsx)("div",{style:{textAlign:"right",fontSize:13},children:(0,te.jsxs)("p",{style:{margin:"2px 0"},children:[(0,te.jsx)("strong",{children:"Date:"})," ",null!==s&&void 0!==s&&s.date?new Date(s.date).toLocaleDateString():"-"]})})]}),(0,te.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:20},children:[(0,te.jsx)("thead",{children:(0,te.jsxs)("tr",{style:{background:"rgba(255,255,255,0.08)"},children:[(0,te.jsx)("th",{style:{padding:10,textAlign:"left"},children:"Item"}),(0,te.jsx)("th",{style:{padding:10,textAlign:"right"},children:"Qty"}),(0,te.jsx)("th",{style:{padding:10,textAlign:"right"},children:"Price"}),(0,te.jsx)("th",{style:{padding:10,textAlign:"right"},children:"MRP"}),(0,te.jsx)("th",{style:{padding:10,textAlign:"right"},children:"Amount"})]})}),(0,te.jsx)("tbody",{children:null===s||void 0===s||null===(l=s.items)||void 0===l?void 0:l.map(((e,t)=>(0,te.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.10)"},children:[(0,te.jsx)("td",{style:{padding:10},children:e.name}),(0,te.jsx)("td",{style:{padding:10,textAlign:"right"},children:e.qty}),(0,te.jsx)("td",{style:{padding:10,textAlign:"right"},children:e.price}),(0,te.jsx)("td",{style:{padding:10,textAlign:"right"},children:e.mrp||e.price}),(0,te.jsx)("td",{style:{padding:10,textAlign:"right"},children:e.amount})]},t)))})]}),(0,te.jsxs)("div",{style:{textAlign:"right",fontSize:14},children:[(null===s||void 0===s?void 0:s.discount)>0&&(0,te.jsxs)("p",{children:["Discount:"," ","percentage"===s.discount_type?"".concat(s.discount,"%"):"\u20b9 ".concat(s.discount)]}),(0,te.jsxs)("p",{children:["CGST: \u20b9 ",((null===s||void 0===s?void 0:s.cgst)||((null===s||void 0===s?void 0:s.total_gst)||0)/2).toFixed(2)]}),(0,te.jsxs)("p",{children:["SGST: \u20b9 ",((null===s||void 0===s?void 0:s.sgst)||((null===s||void 0===s?void 0:s.total_gst)||0)/2).toFixed(2)]}),(0,te.jsxs)("h2",{style:{margin:0},children:["Grand Total: \u20b9 ",null===s||void 0===s?void 0:s.total]})]}),(0,te.jsx)("div",{style:{textAlign:"center",marginTop:30,fontSize:12,color:"#999"},children:"*** Thank you for shopping with us! ***"})]})},previewImg:"https://via.placeholder.com/220x120?text=Modern"}},{Title:xe}=l.A,me=()=>{var e,t;const{getEntityApi:n}=(0,J.p)(),l=n("SalesRecord"),{items:p,loading:x}=(0,Z.Sm)(l.getIdentifier("GetAll")),[m,g]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[j]=s.A.useForm(),[f,b]=(0,o.useState)(""),[A,S]=(0,o.useState)({current:1,pageSize:10}),[C,_]=(0,o.useState)(!1),[w,I]=(0,o.useState)(null);(0,re.wA)();(0,se.z)({action:"delete",title:"Sale",identifier:l.getIdentifier("Delete"),entityApi:l});const N=[{title:"Invoice",dataIndex:"invoice_no",key:"invoice_no",render:e=>(0,te.jsx)(r.A,{icon:(0,te.jsx)(z.A,{}),color:"blue",children:e})},{title:"Date",dataIndex:"date",key:"date",render:e=>(0,te.jsx)(a.A,{title:Q()(e).format("MMMM D, YYYY"),children:(0,te.jsx)(r.A,{icon:(0,te.jsx)(D.A,{}),color:"purple",children:Q()(e).format("DD MMM YY")})})},{title:"Customer",dataIndex:"customerDetails",key:"customerDetails",render:e=>(0,te.jsxs)(d.A,{children:[(0,te.jsx)(E.A,{}),(0,te.jsxs)("span",{children:[(0,te.jsx)("strong",{children:null===e||void 0===e?void 0:e.full_name}),(0,te.jsx)("br",{}),(0,te.jsx)("small",{style:{color:"#999"},children:null===e||void 0===e?void 0:e.mobile})]})]})},{title:"Payment Mode",dataIndex:"payment_mode",key:"payment_mode",render:e=>{const t="cash"===e?"green":"upi"===e?"geekblue":"orange";return(0,te.jsx)(r.A,{icon:(0,te.jsx)(F,{}),color:t,children:e.toUpperCase()})}},{title:"Total",dataIndex:"total_amount",key:"total_amount",render:e=>(0,te.jsxs)(r.A,{icon:(0,te.jsx)(X.A,{}),color:"gold",children:["\u20b9 ",Number(e).toFixed(2)]})},{title:"Actions",key:"actions",render:(e,t)=>(0,te.jsxs)(d.A,{size:"middle",children:[(0,te.jsx)(a.A,{title:"View Bill",children:(0,te.jsx)(c.Ay,{type:"link",icon:(0,te.jsx)(W.A,{}),onClick:()=>(e=>{g(e),j.setFieldsValue((0,i.A)((0,i.A)({},e),{},{date:Q()(e.date)})),h(!0)})(t)})}),(0,te.jsx)(a.A,{title:"Print",children:(0,te.jsx)(c.Ay,{type:"link",icon:(0,te.jsx)(R.A,{}),onClick:()=>(e=>{var t,n,i;const o={customerName:(null===(t=e.customerDetails)||void 0===t?void 0:t.full_name)||"",customerAddress:(null===(n=e.customerDetails)||void 0===n?void 0:n.address)||"",date:e.date,invoice_no:e.invoice_no,items:(e.Items||[]).map((e=>{var t,n,i;return{name:[(null===(t=e.productItems)||void 0===t?void 0:t.name)||e.product_name||"",(null===(n=e.productItems)||void 0===n||null===(i=n.VariantItem)||void 0===i?void 0:i.variant_name)||""].filter(Boolean).join(" "),qty:e.qty,price:e.price,mrp:e.mrp,amount:e.amount}})),total:e.total_amount||0,total_gst:e.total_gst||0,discount:e.discount||0,discount_type:e.discount_type||"",gst_number:e.gst_number||(null===(i=e.organisationItems)||void 0===i?void 0:i.gst_number)||""};I(o),_(!0)})(t)})}),(0,te.jsx)(O,{title:"Are you sure to delete this bill?",onConfirm:()=>(async e=>{try{await l("Delete",{},e)}catch(t){}})(t._id),okText:"Yes",cancelText:"No",children:(0,te.jsx)(a.A,{title:"Delete",children:(0,te.jsx)(c.Ay,{type:"link",icon:(0,te.jsx)(q.A,{}),danger:!0})})})]})}];return(0,o.useEffect)((()=>{l("GetAll",{pageNumber:A.current,pageLimit:A.pageSize,searchString:f})}),[l]),(0,te.jsxs)("div",{style:{padding:24},children:[(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,te.jsx)(xe,{level:3,style:{color:"#1890ff",margin:0},children:"Sales List"}),(0,te.jsxs)(d.A,{children:[(0,te.jsx)(P.A,{placeholder:"Search by invoice no, customer name or mobile",prefix:(0,te.jsx)(U.A,{}),allowClear:!0,style:{width:300},onChange:e=>{return t=e.target.value,b(t),S((0,i.A)((0,i.A)({},A),{},{current:1})),void l("GetAll",{pageNumber:1,pageLimit:A.pageSize,searchString:t});var t}}),(0,te.jsx)(c.Ay,{type:"primary",icon:(0,te.jsx)(Y.A,{}),onClick:()=>{g(null),h(!0)},children:"Create New Sale"})]})]}),(0,te.jsx)(le.A,{data:null===p||void 0===p?void 0:p.result,columns:N,loading:x,bordered:!0,rowKey:"_id",totalCount:(null===p||void 0===p||null===(e=p.pagination)||void 0===e?void 0:e.totalCount)||0,pageLimit:(null===p||void 0===p||null===(t=p.pagination)||void 0===t?void 0:t.pageLimit)||10,onPaginationChange:(e,t)=>{S({current:e,pageSize:t}),l("GetAll",{pageNumber:e,pageLimit:t,searchString:f})}}),(0,te.jsx)(K.A,{title:m?"Edit Sale":"Create New Sale",onClose:()=>h(!1),open:u,width:1200,children:(0,te.jsx)($.A,{billdata:m,onSuccess:()=>{h(!1),l("GetAll")}})}),m&&(0,te.jsx)(oe,{visible:v,onClose:()=>y(!1),billData:m}),(0,te.jsx)(B.A,{open:C,onCancel:()=>_(!1),footer:[(0,te.jsx)(c.Ay,{type:"primary",onClick:()=>window.print(),children:"Print"},"print"),(0,te.jsx)(c.Ay,{onClick:()=>_(!1),children:"Close"},"close")],width:800,title:w?"Print Invoice #".concat(w.invoice_no):"Print Invoice",centered:!0,children:w&&(()=>{const e=localStorage.getItem("billingTemplate"),t=pe["modern"===e||"classic"===e?e:"classic"].component;return(0,te.jsx)(t,{billData:w})})()})]})}}}]);
//# sourceMappingURL=873.1db4becb.chunk.js.map