/*! For license information please see 465.39fdaeb8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkFOCUZ_BILLING=self.webpackChunkFOCUZ_BILLING||[]).push([[465],{9764:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(65043);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm62.6-651.7l224.6 19 19 224.6L477.5 694 233.9 450.5l311.9-311.9zm60.16 186.23a48 48 0 1067.88-67.89 48 48 0 10-67.88 67.89zM889.7 539.8l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"outlined"};var l=a(66381);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}const o=(e,t)=>n.createElement(l.A,s({},e,{ref:t,icon:i}));const r=n.forwardRef(o)},27089:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(65043);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"};var l=a(66381);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(this,arguments)}const o=(e,t)=>n.createElement(l.A,s({},e,{ref:t,icon:i}));const r=n.forwardRef(o)},74198:(e,t,a)=>{a.d(t,{_V:()=>i});a(65043);var n=a(91449);a(52614);const i=e=>{const t=n.LE[e]||(0,n.lX)(e);return{get:t.getAll(),create:t.create(),update:t.update(),delete:t.delete()}}},77465:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var n=a(65043),i=a(26553),l=a(6051),s=a(76399),o=a(36621),r=a(12624),c=a(91449),d=a(97031),u=a(83003),h=a(9764);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};var m=a(66381);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g.apply(this,arguments)}const f=(e,t)=>n.createElement(m.A,g({},e,{ref:t,icon:p}));const v=n.forwardRef(f);var x=a(27089);const j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y.apply(this,arguments)}const A=(e,t)=>n.createElement(m.A,y({},e,{ref:t,icon:j}));const b=n.forwardRef(A);var C=a(92882),k=a(13699),w=a(82863),V=a(74198),z=a(70579);const{Option:S}=i.A,R=()=>{const e=(0,u.wA)(),t=(0,c.zm)("Variant"),a=(0,c.zm)("Category"),p=t("Get"),m=a("Get"),{loading:g,items:f}=(0,d.Sm)(p.identifier),{loading:j,items:y}=(0,d.Sm)(m.identifier),[A,R]=(0,n.useState)({}),[L,O]=(0,n.useState)({}),_=(0,n.useCallback)((()=>{[p,m].forEach((t=>{e((0,d.s7)({method:t.method,endpoint:t.endpoint,data:{}},t.identifier))}))}),[e,p,m]);(0,n.useEffect)((()=>{_()}),[_]);const I=(e,t)=>e.reduce(((e,a)=>(e[a._id]=a[t],e)),{});(0,n.useEffect)((()=>{R(I((null===f||void 0===f?void 0:f.result)||[],"variant_name"))}),[f]),(0,n.useEffect)((()=>{O(I((null===y||void 0===y?void 0:y.result)||[],"category_name"))}),[y]);const P=(0,n.useMemo)((()=>({title:"Products",columns:[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,z.jsxs)(l.A,{children:[(0,z.jsx)(h.A,{style:{color:"#1890ff"}}),(0,z.jsx)("strong",{children:e})]})},{title:"Category",dataIndex:"CategoryItem",key:"category",render:e=>(0,z.jsx)(s.A,{icon:(0,z.jsx)(v,{}),color:"geekblue",children:(null===e||void 0===e?void 0:e.category_name)||"-"})},{title:"SKU",dataIndex:"sku",key:"sku",render:e=>(0,z.jsxs)(l.A,{children:[(0,z.jsx)(x.A,{style:{color:"#722ed1"}}),(0,z.jsx)("span",{children:e||"-"})]})},{title:"Variant",dataIndex:"variant",key:"variant",render:e=>(0,z.jsx)(s.A,{icon:(0,z.jsx)(b,{}),color:"purple",children:A[e]||"-"})},{title:"Status",dataIndex:"status",key:"status",render:e=>e?(0,z.jsx)(s.A,{icon:(0,z.jsx)(C.A,{twoToneColor:"#52c41a"}),color:"success",children:"Active"}):(0,z.jsx)(s.A,{icon:(0,z.jsx)(k.A,{twoToneColor:"#ff4d4f"}),color:"error",children:"Inactive"})}],formItems:[{label:"Product Name",name:"name",rules:[{required:!0,message:"Please enter the product name!"}],component:(0,z.jsx)(o.A,{placeholder:"e.g., HP Toner 85A"})},{label:"Category",name:"category",rules:[{required:!0,message:"Please select a category!"}],component:(0,z.jsx)(i.A,{placeholder:"Select category",loading:j,showSearch:!0,allowClear:!0,children:((null===y||void 0===y?void 0:y.result)||[]).map((e=>(0,z.jsx)(S,{value:e._id,children:e.category_name},e._id)))})},{label:"SKU / Code",name:"sku",rules:[],component:(0,z.jsx)(o.A,{placeholder:"Optional SKU code"})},{label:"Variant",name:"variant",rules:[{required:!0,message:"Please select a variant!"}],component:(0,z.jsx)(i.A,{placeholder:"Select variant",loading:g,allowClear:!0,showSearch:!0,children:((null===f||void 0===f?void 0:f.result)||[]).map((e=>(0,z.jsxs)(S,{value:e._id,children:[e.variant_name," - ",e.unit," - ",e.pack_type," (",e.pack_size,")"]},e._id)))})},{label:"Status",name:"status",valuePropName:"checked",component:(0,z.jsx)(r.A,{checkedChildren:"Active",unCheckedChildren:"Inactive",defaultChecked:!0})}],apiRoutes:(0,V._V)("Product"),formColumns:2})),[A,L,f,y,g,j]);return(0,z.jsx)(w.r,{config:P})}},82863:(e,t,a)=>{a.d(t,{r:()=>L});var n=a(89379),i=a(65043),l=a(96651),s=a(47419),o=a(11645),r=a(36621),c=a(26553),d=a(93504),u=a(95206),h=a(33359),p=a(9316),m=a(83003),g=a(62305),f=a(97031),v=a(91449),x=a(60446),j=a.n(x);var y=a(22671),A=a(53986),b=a(83833),C=a(88655),k=a(73847),w=a(70579);const V=["key","name","fieldKey"],z=e=>{const{FormValue:t,onSubmit:a,onCancel:l,formItems:r,onChildCancel:c,formColumns:d,splitLabelAndField:h,nested:p,nestedInputs:m,wrapperCol:f,labelCol:v,initialValues:x,loading:j,form:y,onValuesChange:z}=e,S=d||1;return(0,i.useEffect)((()=>{x&&(null===y||void 0===y||y.setFieldsValue(x))}),[x,y]),(0,w.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,w.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"600px 600px",opacity:.1,zIndex:0}}),(0,w.jsxs)(g.A,{form:y,onFinish:e=>{a?a(e):t&&t(e),null===y||void 0===y||y.resetFields()},layout:"vertical",onValuesChange:z,children:[(0,w.jsxs)(s.A,{gutter:[16,16],children:[null===r||void 0===r?void 0:r.map(((e,t)=>{var a;return(0,w.jsx)(o.A,{span:24/S,children:h?(0,w.jsxs)("div",{children:[(0,w.jsxs)(b.A.Text,{strong:!0,children:[e.label," ",(null===(a=e.rules)||void 0===a?void 0:a.some((e=>e.required)))&&(0,w.jsx)(b.A.Text,{type:"danger",children:"*"})]}),(0,w.jsx)(g.A.Item,{name:e.name,rules:e.rules,style:{marginTop:"8px"},children:e.component})]}):(0,w.jsx)(g.A.Item,{label:(0,w.jsx)(b.A.Text,{strong:!0,children:e.label}),name:e.name,rules:e.rules,labelCol:{span:v},wrapperCol:{span:f},children:e.component})},t)})),p&&(0,w.jsx)(g.A.List,{name:"nestedItems",children:(e,t)=>{let{add:a,remove:i}=t;return(0,w.jsxs)(w.Fragment,{children:[e.map((e=>{let{key:t,name:a,fieldKey:l}=e,r=(0,A.A)(e,V);return(0,w.jsxs)(s.A,{gutter:[16,16],align:"middle",children:[m.map(((e,t)=>(0,w.jsx)(o.A,{children:(0,w.jsx)(g.A.Item,(0,n.A)((0,n.A)({},r),{},{name:[a,e.name],fieldKey:[l,e.name],rules:[{required:!0,message:"Missing ".concat(e.label)}],label:e.label,children:e.component}))},t))),(0,w.jsx)(o.A,{children:(0,w.jsx)(C.A,{onClick:()=>i(a)})})]},t)})),(0,w.jsx)(s.A,{justify:"center",children:(0,w.jsx)(o.A,{children:(0,w.jsx)(u.Ay,{type:"primary",onClick:()=>a(),icon:(0,w.jsx)(k.A,{}),children:"Add More Field"})})})]})}})]}),(0,w.jsxs)(s.A,{justify:"end",gutter:[16,16],style:{padding:"16px"},children:[(0,w.jsx)(o.A,{children:(0,w.jsx)(u.Ay,{onClick:()=>{l?l():c&&c(!1),null===y||void 0===y||y.resetFields()},children:"Cancel"})}),(0,w.jsx)(o.A,{children:(0,w.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:j,children:"Submit"})})]})]})]})};var S=a(4413);function R(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{title:"Actions",key:"actions",render:(i,s)=>(0,w.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,w.jsx)(l.A,{title:"Edit ".concat(e),children:(0,w.jsx)(h.A,{style:{cursor:"pointer",color:"#1890ff"},onClick:()=>t(s)})}),(0,w.jsx)(l.A,{title:"Delete ".concat(e),children:(0,w.jsx)(p.A,{style:{cursor:n?"not-allowed":"pointer",color:n?"#d9d9d9":"#ff4d4f",opacity:n?.5:1},onClick:()=>!n&&a(s)})})]})}}const L=e=>{let{config:t,filters:a=[],onFilterChange:l,customButtons:h=[],onValuesChange:p}=e;const{loading:x,createLoading:A,updateLoading:b,deleteLoading:C,items:k,pagination:V,drawerVisible:L,initialValues:O,form:_,handleEdit:I,handleDelete:P,handleDrawerOpen:F,resetForm:E,handleSubmit:H,handlePaginationChange:M,columns:K,formItems:T,formColumns:B=2,drawerWidth:N,filterValues:q,setFilterValues:D}=(e=>{const t=(0,m.wA)(),[a]=g.A.useForm(),[l,s]=(0,i.useState)(!1),[o,r]=(0,i.useState)({}),[c,d]=(0,i.useState)({}),[u,h]=(0,i.useState)({current:1,pageSize:10}),{loading:p,items:x}=(0,f.Sm)(e.apiRoutes.get.identifier),{loading:y,items:A,error:b}=(0,f.Sm)(e.apiRoutes.create.identifier),{loading:C,items:k,error:w}=(0,f.Sm)(e.apiRoutes.update.identifier),{loading:V,items:z,error:S}=(0,f.Sm)(e.apiRoutes.delete.identifier),R=(0,i.useCallback)(((e,a,n,i)=>{t((0,f.s7)({method:e,endpoint:a,data:n},i))}),[t]),L=(0,i.useCallback)((()=>{const t=(0,n.A)((0,n.A)({},c),{},{pageNumber:u.current,pageLimit:u.pageSize});R(e.apiRoutes.get.method,e.apiRoutes.get.endpoint,t,e.apiRoutes.get.identifier)}),[R,e.apiRoutes.get,c,u]),O=(0,i.useCallback)((t=>{R(e.apiRoutes.create.method,e.apiRoutes.create.endpoint,t,e.apiRoutes.create.identifier)}),[R,e.apiRoutes.create]),_=(0,i.useCallback)(((t,a)=>{R(e.apiRoutes.update.method,"".concat(e.apiRoutes.update.endpoint,"/").concat(t),a,e.apiRoutes.update.identifier)}),[R,e.apiRoutes.update]),I=(0,i.useCallback)((t=>{R(e.apiRoutes.delete.method,"".concat(e.apiRoutes.delete.endpoint,"/").concat(t),{_id:t},e.apiRoutes.delete.identifier)}),[R,e.apiRoutes.delete]),P=(0,i.useCallback)(((e,t)=>{h({current:e,pageSize:t})}),[]);function F(e){return/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})?)?$/.test(e)}const E=(0,i.useCallback)((e=>{const t={};for(const a in e){const n=e[a];"string"===typeof n&&F(n)&&j()(n,void 0,!0).isValid()?t[a]=j()(n):t[a]=n}r(t),s(!0)}),[]),H=(0,i.useCallback)((e=>{I(e._id)}),[I]),M=(0,i.useCallback)((()=>{s(!0)}),[]),K=(0,i.useCallback)((()=>{s(!1),r({}),a.resetFields()}),[a]),T=(0,i.useCallback)((e=>{o._id?_(o._id,e):O(e)}),[o._id,O,_]);return(0,i.useEffect)((()=>{if(200===(null===A||void 0===A?void 0:A.statusCode))(0,v.P0)("success","".concat(e.title," created successfully")),L(),K(),t((0,f.Ki)(e.apiRoutes.create.identifier));else if(b){const t=b.message||"Failed to create ".concat(e.title);(0,v.P0)("error",t)}}),[A,b,e.title,L,K,t,e.apiRoutes.create.identifier]),(0,i.useEffect)((()=>{if(200===(null===k||void 0===k?void 0:k.statusCode))(0,v.P0)("success","".concat(e.title," updated successfully")),L(),K(),t((0,f.Ki)(e.apiRoutes.update.identifier));else if(w){const t=w.message||"Failed to update ".concat(e.title);(0,v.P0)("error",t)}}),[k,w,e.title,L,K,t,e.apiRoutes.update.identifier]),(0,i.useEffect)((()=>{if(200===(null===z||void 0===z?void 0:z.statusCode))(0,v.P0)("success","".concat(e.title," deleted successfully")),L(),t((0,f.Ki)(e.apiRoutes.delete.identifier));else if(S){const t=S.message||"Failed to delete ".concat(e.title);(0,v.P0)("error",t)}}),[z,S,e.title,L,t,e.apiRoutes.delete.identifier]),(0,i.useEffect)((()=>{L()}),[L]),(0,n.A)({loading:p,createLoading:y,updateLoading:C,deleteLoading:V,items:null===x||void 0===x?void 0:x.result,pagination:null===x||void 0===x?void 0:x.pagination,drawerVisible:l,initialValues:o,form:a,filterValues:c,setFilterValues:d,handleEdit:E,handleDelete:H,handleDrawerOpen:M,resetForm:K,handleSubmit:T,handlePaginationChange:P},e)})(t),U=(0,i.useCallback)(((e,t)=>{const a=(0,n.A)((0,n.A)({},q),{},{[e]:t});D(a),l&&l(a)}),[q,D,l]),G=(0,i.useMemo)((()=>[...K,R(t.title,I,P,C)]),[K,t.title,I,P,C]);return(0,w.jsxs)("div",{children:[(0,w.jsxs)(s.A,{justify:"space-between",align:"bottom",gutter:[16,16],style:{marginBottom:16},children:[(0,w.jsx)(o.A,{flex:"auto",children:(0,w.jsx)("h1",{style:{margin:0},children:t.title})}),(0,w.jsx)(o.A,{children:(0,w.jsxs)(s.A,{gutter:[12,12],align:"bottom",justify:"end",wrap:!0,children:[a.map((e=>{var t;return(0,w.jsxs)(o.A,{children:["input"===e.type&&(0,w.jsx)(r.A,{placeholder:e.placeholder||e.label,value:q[e.key]||"",onChange:t=>U(e.key,t.target.value),style:{width:e.width||200},disabled:A||b||C}),"select"===e.type&&(0,w.jsx)(c.A,{placeholder:e.placeholder||e.label,value:q[e.key],onChange:t=>{U(e.key,t),e.onChange&&e.onChange(t)},allowClear:!0,style:{width:e.width||200},disabled:e.disabled||A||b||C,children:null===(t=e.options)||void 0===t?void 0:t.map((e=>(0,w.jsx)(c.A.Option,{value:e.value,children:e.label},e.value)))}),"date"===e.type&&(0,w.jsx)(d.A,{placeholder:e.placeholder||e.label,value:q[e.key],onChange:t=>U(e.key,t),style:{width:e.width||200},disabled:A||b||C})]},e.key)})),(0,w.jsx)(o.A,{children:(0,w.jsx)(r.A,{placeholder:"Search ".concat(t.title),value:q.searchString||"",onChange:e=>U("searchString",e.target.value),style:{width:200},disabled:A||b||C})}),h.map((e=>(0,w.jsx)(o.A,{children:(0,w.jsx)(u.Ay,{type:e.type||"default",onClick:e.onClick,icon:e.icon,disabled:A||b||C,children:e.label})},e.key))),(0,w.jsx)(o.A,{children:(0,w.jsxs)(u.Ay,{type:"primary",onClick:F,loading:A,disabled:A,children:["Add ",t.title]})})]})})]}),(0,w.jsx)(S.A,{columns:G,data:k,loading:x||C,rowKeyField:"_id",totalCount:(null===V||void 0===V?void 0:V.totalCount)||0,pageLimit:(null===V||void 0===V?void 0:V.pageLimit)||10,onPaginationChange:M}),(0,w.jsx)(y.A,{title:"".concat(O._id?"Edit":"Add"," ").concat(t.title),open:L,onClose:A||b?()=>{}:E,width:N,children:(0,w.jsx)(z,{form:_,formItems:T,formColumns:B,initialValues:O,onSubmit:H,onCancel:E,onValuesChange:p,loading:A||b})})]})}}}]);
//# sourceMappingURL=465.39fdaeb8.chunk.js.map