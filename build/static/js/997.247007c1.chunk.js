/*! For license information please see 997.247007c1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[997],{6881:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(65043),n=l(51762),i=l(66381);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},r.apply(this,arguments)}const o=(e,t)=>a.createElement(i.A,r({},e,{ref:t,icon:n.A}));const s=a.forwardRef(o)},9764:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm62.6-651.7l224.6 19 19 224.6L477.5 694 233.9 450.5l311.9-311.9zm60.16 186.23a48 48 0 1067.88-67.89 48 48 0 10-67.88 67.89zM889.7 539.8l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"outlined"};var i=l(66381);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},r.apply(this,arguments)}const o=(e,t)=>a.createElement(i.A,r({},e,{ref:t,icon:n}));const s=a.forwardRef(o)},78997:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ne});var a=l(89379),n=l(65043),i=l(62305),r=l(83537),o=l(97031),s=l(74883),d=l(74198),c=l(76399),u=l(96651),m=l(6051),h=l(95206),p=l(60446),v=l.n(p),y=l(27089),x=l(9764),g=l(53722),A=l(85192);const b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};var j=l(66381);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},f.apply(this,arguments)}const _=(e,t)=>n.createElement(j.A,f({},e,{ref:t,icon:b}));const S=n.forwardRef(_);var k=l(73092),w=l(76401),I=l(6881),O=l(45229),q=l(9933),C=l(46237),P=l(39470),L=l(80132);const R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},V.apply(this,arguments)}const E=(e,t)=>n.createElement(j.A,V({},e,{ref:t,icon:R}));const F=n.forwardRef(E);const B={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},D.apply(this,arguments)}const M=(e,t)=>n.createElement(j.A,D({},e,{ref:t,icon:B}));const Y=n.forwardRef(M);var z=l(70579);const G=e=>{let{onAllocate:t,onRevert:l,onStockout:a,onStorageAllocate:n}=e;return[{title:"Invoice ID",dataIndex:"invoice_id",key:"invoice_id",render:e=>(0,z.jsx)(c.A,{icon:(0,z.jsx)(y.A,{}),color:"blue",children:e})},{title:"Product",dataIndex:"ProductItem",key:"product",render:e=>(0,z.jsx)(u.A,{title:null===e||void 0===e?void 0:e.name,children:(0,z.jsxs)("span",{children:[(0,z.jsx)(x.A,{style:{marginRight:4}}),null===e||void 0===e?void 0:e.name]})})},{title:"Vendor",dataIndex:"VendorItem",key:"vendor",render:e=>(0,z.jsx)(u.A,{title:null===e||void 0===e?void 0:e.vendor_name,children:(0,z.jsxs)("span",{children:[(0,z.jsx)(g.A,{style:{marginRight:4}}),(null===e||void 0===e?void 0:e.vendor_name)||"-"]})})},{title:"Warehouse",dataIndex:"WarehouseItem",key:"warehouse",render:e=>(0,z.jsx)(u.A,{title:null===e||void 0===e?void 0:e.warehouse_name,children:(0,z.jsxs)("span",{children:[(0,z.jsx)(A.A,{style:{marginRight:4}}),(null===e||void 0===e?void 0:e.warehouse_name)||"-"]})})},{title:"Batch Number",dataIndex:"batch_no",key:"batch_no",render:e=>(0,z.jsx)(c.A,{icon:(0,z.jsx)(S,{}),color:"purple",children:e||"-"})},{title:"Buy Price",dataIndex:"buy_price",key:"buy_price",render:e=>(0,z.jsxs)("span",{children:[(0,z.jsx)(k.A,{style:{marginRight:4}}),"\u20b9",e]})},{title:"Selling Price",dataIndex:"sell_price",key:"sell_price",render:e=>(0,z.jsxs)("span",{children:[(0,z.jsx)(w.A,{style:{marginRight:4}}),"\u20b9",e||"-"]})},{title:"Buy Date",dataIndex:"buyed_date",key:"buyed_date",render:e=>(0,z.jsxs)("span",{children:[(0,z.jsx)(I.A,{style:{marginRight:4}}),v()(e).format("DD/MM/YYYY")]})},{title:"MFG Date",dataIndex:"mfg_date",key:"mfg_date",render:e=>(0,z.jsxs)("span",{children:[(0,z.jsx)(O.A,{style:{marginRight:4}}),e?v()(e).format("DD/MM/YYYY"):"-"]})},{title:"Expiry Date",dataIndex:"expiry_date",key:"expiry_date",render:e=>{const t=v()(e),l=v()(),a=t.isBefore(l),n=t.diff(l,"days")<=30&&t.diff(l,"days")>0;let i="green";return a?i="red":n&&(i="orange"),(0,z.jsxs)(c.A,{color:i,children:[(0,z.jsx)(I.A,{style:{marginRight:4}}),e?v()(e).format("DD/MM/YYYY"):"-"]})}},{title:"Payment Status",dataIndex:"payment_status",key:"payment_status",render:e=>(0,z.jsx)(c.A,{color:"paid"===e?"green":"partial"===e?"orange":"red",children:e})},{title:"Total Cost",dataIndex:"total_cost",key:"total_cost",render:e=>(0,z.jsxs)("span",{style:{fontWeight:"bold"},children:["\u20b9",e]})},{title:"Quantity",dataIndex:"quantity",key:"quantity",render:e=>(0,z.jsxs)(c.A,{color:"green",children:[(0,z.jsx)(q.A,{})," ",e]})},{title:"Available Qty",dataIndex:"available_quantity",key:"available_quantity",render:e=>(0,z.jsx)(c.A,{color:e>0?"green":"red",children:e})},{title:"Available Qty to Rack",dataIndex:"rack_available_to_allocate",key:"rack_available_to_allocate",render:e=>(0,z.jsx)(c.A,{color:e>0?"green":"red",children:e})},{title:"Status",dataIndex:"status",key:"status",render:(e,t)=>{const l=t.available_quantity||0,a=t.expiry_date?v()(t.expiry_date):null,n=v()();let i="Active",r="green",o=(0,z.jsx)(C.A,{});return 0===l?(i="Out of Stock",r="red",o=(0,z.jsx)(P.A,{})):a&&a.isBefore(n)?(i="Expired",r="red",o=(0,z.jsx)(P.A,{})):a&&a.diff(n,"days")<=30&&(i="Near Expiry",r="orange",o=(0,z.jsx)(P.A,{})),(0,z.jsx)(c.A,{color:r,icon:o,children:i})}},{title:"Stock Handle",key:"stock_handle",width:280,render:(e,i)=>{const r=0===(i.available_quantity||0);return(0,z.jsxs)(m.A,{size:"small",children:[(0,z.jsx)(u.A,{title:"Allocate Stock",children:(0,z.jsx)(h.Ay,{type:"primary",size:"small",icon:(0,z.jsx)(q.A,{}),onClick:()=>t(i),disabled:r,style:{fontSize:"10px",height:"24px",padding:"0 6px"},children:"Allocate"})}),(0,z.jsx)(u.A,{title:"Storage Allocate",children:(0,z.jsx)(h.Ay,{type:"primary",size:"small",icon:(0,z.jsx)(L.A,{}),onClick:()=>n(i),disabled:r,style:{fontSize:"10px",height:"24px",padding:"0 6px",backgroundColor:"#52c41a",borderColor:"#52c41a"},children:"Storage"})}),(0,z.jsx)(u.A,{title:"Revert Changes",children:(0,z.jsx)(h.Ay,{type:"default",size:"small",icon:(0,z.jsx)(F,{}),onClick:()=>l(i),style:{fontSize:"10px",height:"24px",padding:"0 6px"},children:"Revert"})}),(0,z.jsx)(u.A,{title:"Mark as Stockout",children:(0,z.jsx)(h.Ay,{type:"default",size:"small",icon:(0,z.jsx)(Y,{}),onClick:()=>a(i),style:{fontSize:"10px",height:"24px",padding:"0 6px"},children:"Stockout"})})]})}}]};var N=l(26553),Q=l(36621),T=l(7866),H=l(93504);const{Option:W}=N.A,U=(e,t,l,a,n,i)=>{var r,o,s;return[{label:"Invoice / Reference ID",name:"invoice_id",rules:[{required:!0,message:"Enter invoice or reference ID!"}],component:(0,z.jsx)(Q.A,{placeholder:"e.g., INV-1001"})},{label:"Product",name:"product",rules:[{required:!0,message:"Please select a product!"}],component:(0,z.jsx)(N.A,{placeholder:"Select product",showSearch:!0,allowClear:!0,loading:a,optionFilterProp:"children",filterOption:(e,t)=>"string"===typeof(null===t||void 0===t?void 0:t.children)&&t.children.toLowerCase().includes(e.toLowerCase()),children:null===e||void 0===e||null===(r=e.result)||void 0===r?void 0:r.map((e=>{var t;return(0,z.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:"".concat(e.name," ").concat(null===e||void 0===e||null===(t=e.VariantItem)||void 0===t?void 0:t.variant_name)},null===e||void 0===e?void 0:e._id)}))})},{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Enter quantity!"}],component:(0,z.jsx)(T.A,{min:1,placeholder:"e.g., 10",style:{width:"100%"}})},{label:"Available Quantity",name:"available_quantity",rules:[{required:!0,message:"Enter available quantity!"}],component:(0,z.jsx)(T.A,{min:1,placeholder:"e.g., 10",style:{width:"100%"}})},{label:"Buying Price (per unit)",name:"buy_price",rules:[{required:!0,message:"Enter buying price!"}],component:(0,z.jsx)(T.A,{min:0,step:.01,placeholder:"\u20b90.00",style:{width:"100%"}})},{label:"MRP (per unit)",name:"mrp",rules:[{required:!0,message:"Enter buying price!"}],component:(0,z.jsx)(T.A,{min:0,step:.01,placeholder:"\u20b90.00",style:{width:"100%"}})},{label:"Selling Price",name:"sell_price",rules:[],component:(0,z.jsx)(T.A,{min:0,step:.01,placeholder:"\u20b90.00",style:{width:"100%"}})},{label:"Batch Number",name:"batch_no",rules:[],component:(0,z.jsx)(Q.A,{placeholder:"Optional batch number"})},{label:"Manufacturing Date",name:"mfg_date",rules:[],component:(0,z.jsx)(H.A,{format:"YYYY-MM-DD",style:{width:"100%"}})},{label:"Expiry Date",name:"expiry_date",rules:[{required:!0,message:"Enter expiry date!"},e=>{let{getFieldValue:t}=e;return{validator(e,l){const a=t("mfg_date");return a&&l&&l.isBefore(a)?Promise.reject(new Error("Expiry must be after MFG date")):Promise.resolve()}}}],component:(0,z.jsx)(H.A,{format:"YYYY-MM-DD",style:{width:"100%"}})},{label:"Vendor",name:"vendor",rules:[],component:(0,z.jsx)(N.A,{placeholder:"Select Vendor",showSearch:!0,allowClear:!0,loading:n,optionFilterProp:"children",filterOption:(e,t)=>"string"===typeof(null===t||void 0===t?void 0:t.children)&&t.children.toLowerCase().includes(e.toLowerCase()),children:null===t||void 0===t||null===(o=t.result)||void 0===o?void 0:o.map((e=>(0,z.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:"".concat(e.vendor_name," ").concat(null===e||void 0===e?void 0:e.company_name)},null===e||void 0===e?void 0:e._id)))})},{label:"Buyed Date",name:"buyed_date",initialValue:v()(),rules:[{required:!0,message:"Select the buyed date"}],component:(0,z.jsx)(H.A,{format:"YYYY-MM-DD",style:{width:"100%"}})},{label:"Payment Status",name:"payment_status",rules:[{required:!0,message:"Select payment status!"}],component:(0,z.jsxs)(N.A,{placeholder:"Select payment status",children:[(0,z.jsx)(W,{value:"paid",children:"Paid"}),(0,z.jsx)(W,{value:"pending",children:"Pending"}),(0,z.jsx)(W,{value:"partial",children:"Partial"})]})},{label:"Warehouse / Location",name:"warehouse_location",rules:[],component:(0,z.jsx)(N.A,{placeholder:"Select warehouse",showSearch:!0,allowClear:!0,loading:i,optionFilterProp:"children",filterOption:(e,t)=>"string"===typeof(null===t||void 0===t?void 0:t.children)&&t.children.toLowerCase().includes(e.toLowerCase()),children:null===l||void 0===l||null===(s=l.result)||void 0===s?void 0:s.map((e=>(0,z.jsx)(N.A.Option,{value:null===e||void 0===e?void 0:e._id,children:"".concat(e.warehouse_name," ").concat(null===e||void 0===e?void 0:e.warehouse_code)},null===e||void 0===e?void 0:e._id)))})},{label:"Note",name:"note",rules:[],component:(0,z.jsx)(Q.A.TextArea,{rows:2,placeholder:"Optional remarks"})},{label:"Total Cost",name:"total_cost",rules:[],component:(0,z.jsx)(T.A,{placeholder:"Auto-calculated",disabled:!0,style:{width:"100%"}})}]};var J=l(22671);const{Option:K}=N.A,X=e=>{let{open:t,onClose:l,onSubmit:a,record:r,branchList:o,branchLoading:s,createLoading:d=!1}=e;const[c]=i.A.useForm(),u=((e,t)=>{var l;return[{name:"branch_id",label:"Branch",rules:[{required:!0,message:"Please select a branch"}],component:(0,z.jsx)(N.A,{placeholder:"Select branch",loading:t,showSearch:!0,optionFilterProp:"children",children:null===e||void 0===e||null===(l=e.result)||void 0===l?void 0:l.map((e=>(0,z.jsx)(K,{value:e._id,children:e.branch_name},e._id)))})},{name:"added_quantity",label:"Quantity",rules:[{required:!0,message:"Please enter quantity"}],component:(0,z.jsx)(T.A,{min:1,style:{width:"100%"}})},{label:"Note",name:"note",rules:[],component:(0,z.jsx)(Q.A.TextArea,{rows:3,placeholder:"Optional notes"})}]})(o,s);return(0,n.useEffect)((()=>{t&&c.resetFields()}),[t,c,r]),(0,z.jsx)(J.A,{title:"Allocate Stock",open:t,onClose:l,width:400,children:(0,z.jsxs)(i.A,{form:c,layout:"vertical",onFinish:a,initialValues:{},children:[u.map((e=>(0,z.jsx)(i.A.Item,{name:e.name,label:e.label,rules:e.rules,children:e.component},e.name))),(0,z.jsx)(i.A.Item,{children:(0,z.jsx)(h.Ay,{type:"primary",htmlType:"submit",block:!0,disabled:d,loading:d,children:"Allocate"})})]})})},{Option:Z}=N.A,$=e=>{let{open:t,onClose:l,onSubmit:a,record:r,branchList:o,branchLoading:s,loading:d}=e;const[c]=i.A.useForm(),u=((e,t,l)=>{var a;return[{name:"branch_id",label:"Branch",rules:[{required:!0,message:"Please select a branch"}],component:(0,z.jsx)(N.A,{placeholder:"Select branch",loading:t,showSearch:!0,optionFilterProp:"children",children:null===e||void 0===e||null===(a=e.result)||void 0===a?void 0:a.map((e=>(0,z.jsx)(Z,{value:e._id,children:e.branch_name},e._id)))})},{name:"available_stock",label:"Available Stock",rules:[{required:!1,message:"Please enter available stock"}],component:(0,z.jsx)(T.A,{min:1,style:{width:"100%"},disabled:!0,value:(null===l||void 0===l?void 0:l.available_quantity)||0})},{name:"quantity",label:"Quantity",rules:[{required:!0,message:"Please enter quantity"}],component:(0,z.jsx)(T.A,{min:1,style:{width:"100%"}})}]})(o,s,r);return(0,n.useEffect)((()=>{t&&c.resetFields()}),[t,c,r]),(0,z.jsx)(J.A,{title:"Revert Stock",open:t,onClose:l,width:400,children:(0,z.jsxs)(i.A,{form:c,layout:"vertical",onFinish:a,initialValues:{},children:[u.map((e=>(0,z.jsx)(i.A.Item,{name:e.name,label:e.label,rules:e.rules,children:e.component},e.name))),(0,z.jsx)(i.A.Item,{children:(0,z.jsx)(h.Ay,{type:"primary",htmlType:"submit",block:!0,loading:d,disabled:d,children:"Revert"})})]})})},{Option:ee}=N.A,te=e=>{let{open:t,onClose:l,onSubmit:a,record:r,loading:o=!1}=e;const[s]=i.A.useForm(),d=(e=>{var t,l,a;return[{name:"stock_audit_id",label:"Stock In Batch",rules:[{required:!0,message:"Please select the stock batch"}],initialValue:null===e||void 0===e?void 0:e._id,component:(0,z.jsx)(N.A,{disabled:!0,children:(0,z.jsxs)(ee,{value:null===e||void 0===e?void 0:e._id,children:[null===e||void 0===e||null===(t=e.ProductItem)||void 0===t?void 0:t.name," - ",null===e||void 0===e||null===(l=e.ProductItem)||void 0===l||null===(a=l.VariantItem)||void 0===a?void 0:a.variant_name," - ",null===e||void 0===e?void 0:e.batch_no]})})},{name:"quantity",label:"Quantity",rules:[{required:!0,message:"Enter quantity to remove"}],component:(0,z.jsx)(T.A,{min:1,placeholder:"e.g., 5",style:{width:"100%"}})},{name:"out_reason",label:"Reason",rules:[{required:!0,message:"Please enter the reason"}],component:(0,z.jsxs)(N.A,{placeholder:"Reason for stock out",children:[(0,z.jsx)(N.A.Option,{value:"expired",children:"Expired"}),(0,z.jsx)(N.A.Option,{value:"damaged",children:"Damaged"}),(0,z.jsx)(N.A.Option,{value:"internal_use",children:"Internal Use"}),(0,z.jsx)(N.A.Option,{value:"bulk_sale",children:"Bulk Sale"}),(0,z.jsx)(N.A.Option,{value:"return_to_vendor",children:"Return to Vendor"})]})},{name:"out_date",label:"Out Date",rules:[{required:!0,message:"Please select the date"}],component:(0,z.jsx)(H.A,{placeholder:"Select Date",style:{width:"100%"}})},{name:"note",label:"Note",rules:[],component:(0,z.jsx)(Q.A.TextArea,{rows:3,placeholder:"Optional note"})}]})(r);return(0,n.useEffect)((()=>{t&&s.resetFields()}),[t,s]),(0,z.jsx)(J.A,{title:"Stock Out",open:t,onClose:l,width:400,children:(0,z.jsxs)(i.A,{form:s,layout:"vertical",onFinish:a,children:[d.map((e=>(0,z.jsx)(i.A.Item,{name:e.name,label:e.label,rules:e.rules,initialValue:e.initialValue,children:e.component},e.name))),(0,z.jsx)(i.A.Item,{children:(0,z.jsx)(h.Ay,{type:"primary",htmlType:"submit",block:!0,loading:o,disabled:o,children:"Stockout"})})]})})};var le=l(16874),ae=l(94211);const ne=()=>{const[e]=i.A.useForm(),[t,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),[p,v]=(0,n.useState)(null),[y,x]=(0,n.useState)(!1),[g,A]=(0,n.useState)(null),[b,j]=(0,n.useState)(!1),[f,_]=(0,n.useState)(null),{getEntityApi:S,StockRevertFromBranch:k}=(0,r.p)(),w=S("Product"),I=S("Vendor"),O=S("Warehouse"),q=S("Braches"),C=S("BranchStock"),P=S("StockAudit"),L=S("StockOut"),R=S("Rack"),V=S("StockStorage"),{items:E,loading:F}=(0,o.Sm)(w.getIdentifier("Get")),{items:B,loading:D}=(0,o.Sm)(I.getIdentifier("GetAll")),{items:M,loading:Y}=(0,o.Sm)(O.getIdentifier("GetAll")),{items:N,loading:Q}=(0,o.Sm)(q.getIdentifier("GetAll")),{items:T,loading:H}=(0,o.Sm)(R.getIdentifier("GetAll")),{loading:W}=(0,o.Sm)(C.getIdentifier("Create")),{loading:J}=(0,o.Sm)(L.getIdentifier("Create")),{loading:K}=(0,o.Sm)(k.getIdentifier("RevertStock"));(0,n.useEffect)((()=>{const t=e.getFieldValue("quantity"),l=e.getFieldValue("buy_price");t&&l&&e.setFieldsValue({total_cost:t*l})}),[e,e.getFieldValue("quantity"),e.getFieldValue("buy_price")]),(0,n.useEffect)((()=>{w("Get"),I("GetAll"),O("GetAll"),q("GetAll"),R("GetAll")}),[w,I,O,q,R]),(0,ae.z)({action:"create",title:"Stock allocation",identifier:C.getIdentifier("Create"),entityApi:P}),(0,ae.z)({action:"update",title:"Stock updated",identifier:k.getIdentifier("RevertStock"),entityApi:P}),(0,ae.z)({action:"create",title:"Stock Out",identifier:L.getIdentifier("Create"),entityApi:P}),(0,ae.z)({action:"create",title:"Storage Allocate",identifier:V.getIdentifier("Create"),entityApi:P});const Z={title:"Stock Audit",columns:G({onAllocate:e=>{u(e),l(!0)},onRevert:e=>{v(e),h(!0)},onStockout:e=>{A(e),x(!0)},onStorageAllocate:e=>{_(e),j(!0)}}),formItems:U(E,B,M,F,D,Y),apiRoutes:(0,d._V)("StockAudit"),formColumns:3,drawerWidth:1200};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.r,{config:Z}),(0,z.jsx)(X,{open:t,onClose:()=>l(!1),onSubmit:async e=>{var t;await C("Create",(0,a.A)((0,a.A)({},e),{},{stock_audit_id:c._id,product:null===(t=c.ProductItem)||void 0===t?void 0:t._id,batch_no:c.batch_no,mfg_date:c.mfg_date,mrp:c.mrp,expiry_date:c.expiry_date,invoice_id:c.invoice_id,sell_price:c.sell_price,available_loose_quantity:c.available_loose_quantity,available_quantity:c.available_quantity})),l(!1),u(null)},record:c,branchList:N,branchLoading:Q,createLoading:W}),(0,z.jsx)($,{open:m,onClose:()=>h(!1),onSubmit:async e=>{await k("RevertStock",(0,a.A)((0,a.A)({},e),{},{stock_audit_id:p._id})),h(!1),v(null)},record:p,branchList:N,branchLoading:Q,loading:K}),(0,z.jsx)(te,{open:y,onClose:()=>x(!1),onSubmit:async e=>{await L("Create",(0,a.A)((0,a.A)({},e),{},{stock_audit_id:g._id})),x(!1),A(null)},record:g,loading:J}),(0,z.jsx)(le.A,{open:b,onClose:()=>j(!1),onSubmit:async e=>{await V("Create",(0,a.A)((0,a.A)({},e),{},{stock_audit_id:null===f||void 0===f?void 0:f._id})),j(!1),_(null)},record:f,rackList:T,rackLoading:H,createLoading:W})]})}}}]);
//# sourceMappingURL=997.247007c1.chunk.js.map