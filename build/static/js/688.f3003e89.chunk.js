"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[688],{11688:(e,s,l)=>{l.r(s),l.d(s,{default:()=>J});var i=l(89379),r=l(65043),n=l(83833),a=l(62305),o=l(16569),d=l(47419),t=l(11645),c=l(89073),m=l(45964),u=l(76399),x=l(8354),h=l(20691),v=l(95206),p=l(36621),j=l(6051),A=l(62751),f=l(53722),g=l(61831),y=l(33359),_=l(75388),U=l(87534),w=l(88143),b=l(15615),P=l(98617),I=l(22115),C=l(89472),N=l(83003),F=l(97031),Q=l(94265);const B="UserProfile_userProfileContainer__XwCLZ",z="UserProfile_userProfileHeader__Y56wV",E="UserProfile_profileCard__1Unoq",S="UserProfile_profileOverview__UF9E+",k="UserProfile_profileAvatarSection__XRZX6",V="UserProfile_profileAvatar__LXaoj",T="UserProfile_profileDetails__RVszn",L="UserProfile_securityCard__GTvZJ",q="UserProfile_securitySection__Cdg-f",X="UserProfile_securityItem__5y8Cl",R="UserProfile_securityItemContent__Ui8X7";var D=l(70579);const{Title:G,Text:Z}=n.A,J=()=>{var e,s,l,n,J;const K=(0,I.J)(),[M,O]=(0,r.useState)(!1),[H,Y]=(0,r.useState)(!1),[$]=a.A.useForm(),[W]=a.A.useForm(),ee=(0,N.wA)(),{loading:se,items:le}=(0,F.Sm)(Q.QQ.BillingUsers.Update.identifier);(0,r.useEffect)((()=>{K&&$.setFieldsValue({name:K.name,email:K.email,mobile:K.mobile,user_name:K.username||""})}),[K,$]),(0,r.useEffect)((()=>{if(200===(null===le||void 0===le?void 0:le.statusCode)){var e;o.Ay.success("Profile updated successfully!");const s=(0,i.A)((0,i.A)({},K),{},{name:$.getFieldValue("name")||(null===K||void 0===K?void 0:K.name)||"",email:$.getFieldValue("email")||(null===K||void 0===K?void 0:K.email)||"",mobile:$.getFieldValue("mobile")||(null===K||void 0===K?void 0:K.mobile)||"",clientcode:(null===K||void 0===K?void 0:K.clientcode)||"",usertype:(null===K||void 0===K?void 0:K.usertype)||"",active:null===(e=null===K||void 0===K?void 0:K.active)||void 0===e||e});(0,C.sX)(s),O(!1),Y(!1),W.resetFields(),ee((0,F.Ki)(Q.QQ.BillingUsers.Update.identifier)),window.location.reload()}else null!==le&&void 0!==le&&le.statusCode&&200!==le.statusCode&&(o.Ay.error((null===le||void 0===le?void 0:le.message)||"Failed to update profile"),ee((0,F.Ki)(Q.QQ.BillingUsers.Update.identifier)))}),[le,ee,K,$,W]);const ie=(null===K||void 0===K||null===(e=K.roleItems)||void 0===e?void 0:e.name)||(null===K||void 0===K?void 0:K.usertype)||(null===K||void 0===K?void 0:K.user_role)||"User",re=(null===K||void 0===K||null===(s=K.organisationItems)||void 0===s?void 0:s.org_name)||(null===K||void 0===K||null===(l=K.organisationItems)||void 0===l?void 0:l.name)||"N/A",ne=(null===K||void 0===K||null===(n=K.branchItems)||void 0===n?void 0:n.branch_name)||(null===K||void 0===K||null===(J=K.branchItems)||void 0===J?void 0:J.name)||"N/A";return(0,D.jsxs)("div",{className:B,children:[(0,D.jsxs)("div",{className:z,children:[(0,D.jsxs)(G,{level:2,children:[(0,D.jsx)(f.A,{})," My Profile"]}),(0,D.jsx)(Z,{type:"secondary",children:"View and manage your account information"})]}),(0,D.jsxs)(d.A,{gutter:[24,24],children:[(0,D.jsx)(t.A,{xs:24,lg:8,children:(0,D.jsxs)(c.A,{className:"".concat(E," ").concat(S),children:[(0,D.jsxs)("div",{className:k,children:[(0,D.jsx)(m.A,{size:120,className:V,children:(ae=null===K||void 0===K?void 0:K.name,ae?ae.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2):"U")}),(0,D.jsx)(G,{level:4,style:{marginTop:16,marginBottom:4},children:(null===K||void 0===K?void 0:K.name)||"User Name"}),(0,D.jsxs)(Z,{type:"secondary",children:["@",(null===K||void 0===K?void 0:K.username)||(null===K||void 0===K?void 0:K.name)||"username"]}),(0,D.jsx)("div",{style:{marginTop:16},children:(0,D.jsx)(u.A,{color:"blue",style:{fontSize:14,padding:"4px 12px"},children:ie})})]}),(0,D.jsx)(x.A,{}),(0,D.jsxs)(h.A,{column:1,size:"small",children:[(0,D.jsx)(h.A.Item,{label:(0,D.jsxs)("span",{children:[(0,D.jsx)(g.A,{})," Organisation"]}),children:(0,D.jsx)(Z,{strong:!0,children:re})}),(0,D.jsx)(h.A.Item,{label:(0,D.jsxs)("span",{children:[(0,D.jsx)(g.A,{})," Branch"]}),children:(0,D.jsx)(Z,{strong:!0,children:ne})})]})]})}),(0,D.jsxs)(t.A,{xs:24,lg:16,children:[(0,D.jsx)(c.A,{className:"".concat(E," ").concat(T),title:"Personal Information",extra:!M&&(0,D.jsx)(v.Ay,{type:"primary",icon:(0,D.jsx)(y.A,{}),onClick:()=>O(!0),children:"Edit Profile"}),children:(0,D.jsxs)(a.A,{form:$,layout:"vertical",onFinish:e=>{if(null===K||void 0===K||!K._id)return void o.Ay.error("User ID not found");const s={name:e.name,email:e.email,mobile:e.mobile};ee((0,F.s7)({method:Q.QQ.BillingUsers.Update.method,endpoint:"".concat(Q.QQ.BillingUsers.Update.endpoint).concat(K._id),data:s},Q.QQ.BillingUsers.Update.identifier))},disabled:!M,children:[(0,D.jsxs)(d.A,{gutter:16,children:[(0,D.jsx)(t.A,{xs:24,md:12,children:(0,D.jsx)(a.A.Item,{label:"Full Name",name:"name",rules:[{required:!0,message:"Please enter your full name"}],children:(0,D.jsx)(p.A,{prefix:(0,D.jsx)(f.A,{}),placeholder:"Enter full name",size:"large"})})}),(0,D.jsx)(t.A,{xs:24,md:12,children:(0,D.jsx)(a.A.Item,{label:"Username",name:"user_name",children:(0,D.jsx)(p.A,{prefix:(0,D.jsx)(f.A,{}),placeholder:"Username",size:"large",disabled:!0})})})]}),(0,D.jsxs)(d.A,{gutter:16,children:[(0,D.jsx)(t.A,{xs:24,md:12,children:(0,D.jsx)(a.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Enter a valid email"}],children:(0,D.jsx)(p.A,{prefix:(0,D.jsx)(_.A,{}),placeholder:"Enter email",size:"large"})})}),(0,D.jsx)(t.A,{xs:24,md:12,children:(0,D.jsx)(a.A.Item,{label:"Mobile Number",name:"mobile",rules:[{required:!0,message:"Please enter your mobile number"},{pattern:/^[0-9]{10}$/,message:"Enter valid 10-digit mobile number"}],children:(0,D.jsx)(p.A,{prefix:(0,D.jsx)(U.A,{}),placeholder:"Enter mobile number",maxLength:10,size:"large"})})})]}),M&&(0,D.jsx)(a.A.Item,{children:(0,D.jsxs)(j.A,{children:[(0,D.jsx)(v.Ay,{type:"primary",htmlType:"submit",icon:(0,D.jsx)(w.A,{}),loading:se,size:"large",children:"Save Changes"}),(0,D.jsx)(v.Ay,{onClick:()=>{O(!1),$.setFieldsValue({name:null===K||void 0===K?void 0:K.name,email:null===K||void 0===K?void 0:K.email,mobile:null===K||void 0===K?void 0:K.mobile,user_name:(null===K||void 0===K?void 0:K.username)||""})},icon:(0,D.jsx)(b.A,{}),size:"large",children:"Cancel"})]})})]})}),(0,D.jsx)(c.A,{className:"".concat(E," ").concat(L),title:"Security Settings",style:{marginTop:24},children:(0,D.jsx)("div",{className:q,children:(0,D.jsxs)("div",{className:X,children:[(0,D.jsx)(P.A,{style:{fontSize:24,color:"#1890ff"}}),(0,D.jsxs)("div",{className:R,children:[(0,D.jsx)(Z,{strong:!0,children:"Password"}),(0,D.jsx)("br",{}),(0,D.jsx)(Z,{type:"secondary",children:"Update your password to keep your account secure"})]}),(0,D.jsx)(v.Ay,{type:"default",onClick:()=>Y(!0),children:"Change Password"})]})})})]})]}),(0,D.jsx)(A.A,{title:"Change Password",open:H,onCancel:()=>{Y(!1),W.resetFields()},footer:null,width:500,children:(0,D.jsxs)(a.A,{form:W,layout:"vertical",onFinish:e=>{null!==K&&void 0!==K&&K._id?ee((0,F.s7)({method:Q.QQ.BillingUsers.Update.method,endpoint:"".concat(Q.QQ.BillingUsers.Update.endpoint).concat(K._id),data:{password:e.new_password}},Q.QQ.BillingUsers.Update.identifier)):o.Ay.error("User ID not found")},children:[(0,D.jsx)(a.A.Item,{label:"New Password",name:"new_password",rules:[{required:!0,message:"Please enter new password"},{min:6,message:"Password must be at least 6 characters"}],hasFeedback:!0,children:(0,D.jsx)(p.A.Password,{prefix:(0,D.jsx)(P.A,{}),placeholder:"Enter new password",size:"large"})}),(0,D.jsx)(a.A.Item,{label:"Confirm New Password",name:"confirm_password",dependencies:["new_password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password"},e=>{let{getFieldValue:s}=e;return{validator:(e,l)=>l&&s("new_password")!==l?Promise.reject(new Error("The two passwords do not match!")):Promise.resolve()}}],children:(0,D.jsx)(p.A.Password,{prefix:(0,D.jsx)(P.A,{}),placeholder:"Confirm new password",size:"large"})}),(0,D.jsx)(a.A.Item,{style:{marginBottom:0},children:(0,D.jsxs)(j.A,{children:[(0,D.jsx)(v.Ay,{type:"primary",htmlType:"submit",loading:se,size:"large",children:"Update Password"}),(0,D.jsx)(v.Ay,{onClick:()=>{Y(!1),W.resetFields()},size:"large",children:"Cancel"})]})})]})})]});var ae}}}]);
//# sourceMappingURL=688.f3003e89.chunk.js.map