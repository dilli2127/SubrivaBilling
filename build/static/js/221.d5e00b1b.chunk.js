"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[221],{37221:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var n=l(65043),r=l(73146),s=l(76399),o=l(70579);const i=[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,o.jsx)("strong",{children:e})},{title:"Username",dataIndex:"user_name",key:"user_name",render:e=>(0,o.jsx)("span",{style:{color:"#1890ff"},children:e})},{title:"Email",dataIndex:"email",key:"email"},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Role",dataIndex:"roleItems",key:"role_id",render:e=>(0,o.jsx)(s.A,{color:"geekblue",children:null===e||void 0===e?void 0:e.name})},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,o.jsx)(s.A,{color:e?"green":"volcano",children:e?"Active":"Inactive"})}];var t=l(36621),d=l(26553),m=l(12624);const u=function(){let{roles:e=[],organisation:a=[],branches:l=[],selectedOrganisationId:n=null,userItemRole:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{label:"Full Name",name:"name",rules:[{required:!0,message:"Please enter full name"}],component:(0,o.jsx)(t.A,{placeholder:"Enter full name"})},{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Enter a valid email"}],component:(0,o.jsx)(t.A,{placeholder:"Enter email"})},{label:"Username",name:"user_name",rules:[{required:!0,message:"Please enter username"}],component:(0,o.jsx)(t.A,{placeholder:"Enter username"})},{label:"Mobile Number",name:"mobile",rules:[{required:!0,message:"Please enter mobile number"},{pattern:/^[0-9]{10}$/,message:"Enter valid 10-digit mobile number"}],component:(0,o.jsx)(t.A,{placeholder:"Enter mobile number",maxLength:10})},{label:"Password",name:"password",rules:[{required:!0,message:"Please enter password"}],component:(0,o.jsx)(t.A.Password,{placeholder:"Enter password"})},{label:"Role",name:"role_id",rules:[{required:!0,message:"Please select a role"}],component:(0,o.jsx)(d.A,{placeholder:"Select role",allowClear:!0,showSearch:!0,children:e.map((e=>(0,o.jsx)(d.A.Option,{value:e.value,children:e.label},e.value)))})},..."OrganisationAdmin"!==r&&"BranchAdmin"!==r?[{label:"Organisation",name:"organisation_id",rules:[{required:!0,message:"Please select a organisation"}],component:(0,o.jsx)(d.A,{placeholder:"Select organisation",allowClear:!0,showSearch:!0,children:a.map((e=>(0,o.jsx)(d.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],..."BranchAdmin"!==r?[{label:"Branch",name:"branch_id",rules:[{required:!1,message:"Please select a branch"}],component:(0,o.jsx)(d.A,{placeholder:"Select branch",allowClear:!0,showSearch:!0,disabled:"BranchAdmin"===r&&!n,children:("BranchAdmin"!==r?l:l.filter((e=>("string"===typeof n||"number"===typeof n)&&e.organisation_id===n))).map((e=>(0,o.jsx)(d.A.Option,{value:e.value,children:e.label},e.value)))})}]:[],{label:"Active Status",name:"status",valuePropName:"checked",component:(0,o.jsx)(m.A,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}]};var c=l(62305),h=l(89472),v=l(98350),b=l(54505);const p=()=>{const{data:e}=v.lh.useGetRolesQuery({}),{organisationOptions:a}=(0,b.B)(),[l]=c.A.useForm(),[s,t]=(0,n.useState)(null),{data:d}=v.lh.useGetBranchesQuery(s?{organisation_id:s,org_id:s}:{},{skip:!s}),m=(0,n.useMemo)((()=>(null===e||void 0===e?void 0:e.result)||[]),[e]),p=(0,n.useMemo)((()=>a.map((e=>({_id:e.value,org_name:e.label,name:e.label})))),[a]),g=(0,n.useMemo)((()=>(null===d||void 0===d?void 0:d.result)||[]),[d]),_=(0,n.useMemo)((()=>(0,h.HW)()),[]),A=(0,n.useMemo)((()=>{var e;return(null===_||void 0===_||null===(e=_.roleItems)||void 0===e?void 0:e.name)||(null===_||void 0===_?void 0:_.usertype)||(null===_||void 0===_?void 0:_.user_role)||""}),[_]),x=(0,n.useMemo)((()=>(null===m||void 0===m?void 0:m.map((e=>({label:e.name,value:e._id}))))||[]),[m]),I=(0,n.useMemo)((()=>(null===p||void 0===p?void 0:p.map((e=>({label:e.org_name||e.name,value:e._id}))))||[]),[p]),j=(0,n.useMemo)((()=>(null===g||void 0===g?void 0:g.map((e=>({label:e.branch_name||e.name,value:e._id,organisation_id:e.organisation_id||e.org_id}))))||[]),[g]);return(0,o.jsx)(r.r,{config:{title:"Users",columns:i,formItems:u({roles:x,organisation:I,branches:j,selectedOrganisationId:s,userItemRole:A}),entityName:"BillingUsers",formColumns:2},onValuesChange:(e,a)=>{var n;void 0!==e.organisation_id&&(n=e.organisation_id,t(void 0===n||""===n?null:n),l.setFieldsValue({branch_id:void 0}))},enableDynamicFields:!0,entityName:"users"})},g=(0,n.memo)(p)}}]);
//# sourceMappingURL=221.d5e00b1b.chunk.js.map