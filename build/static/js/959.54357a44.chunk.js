"use strict";(self.webpackChunkSUBRIVA_BILLING=self.webpackChunkSUBRIVA_BILLING||[]).push([[959],{4959:(e,n,i)=>{i.r(n),i.d(n,{default:()=>Re});var l=i(89379),s=i(65043),a=i(83833),t=i(26553),r=i(62305),o=i(16569),d=i(89073),c=i(47419),m=i(11645),u=i(98105),h=i(14524),x=i(85192),p=i(42177),_=i(36091),v=i(94834),j=i(46237),A=i(58502),g=i(47990),y=i(89266);const b="Settings_settingsContainer__kj-pI",f="Settings_pageHeader__H4a97",S="Settings_pageTitle__TlV+s",I="Settings_tabsCard__P-nek",k="Settings_sectionTitle__Vpoel",w="Settings_settingsForm__UU11S",C="Settings_formActions__hSL8G",N="Settings_infoBox__bNA9f",P="Settings_successBox__fy43A",T="Settings_warningBox__53Aae",R="Settings_printerTestButton__QyyS9",B="Settings_defaultsGrid__qu3mL",F="Settings_notificationItem__YwxfM",E="Settings_notificationLabel__eRv69",q="Settings_notificationTitle__xzsIM",D="Settings_notificationDesc__JAi46";var U=i(98350),z=i(89472),L=i(66507),O=i(36621),Q=i(8354),M=i(12624),G=i(95206),V=i(51175),W=i(42156),H=i(10454),Y=i(88143),J=i(70579);const{Option:K}=t.A,{TextArea:X}=O.A,Z=[{name:"Supermarket / Grocery Store"},{name:"Medical / Pharmacy"},{name:"Hardware Store"},{name:"Hardware and Electronics Store"},{name:"Electronics Store"},{name:"Stationery / Book Store"},{name:"Clothing / Textile Store"},{name:"Footwear Store"},{name:"Bakery / Sweet Shop"},{name:"Fruits & Vegetables Shop"},{name:"Furniture Store"},{name:"Automobile / Spare Parts"},{name:"Mobile Accessories Store"},{name:"Cosmetics / Beauty Store"},{name:"Jewellery / Fancy Store"},{name:"Pet Store"},{name:"General Store"},{name:"Wholesale Business"},{name:"Computer & Laptop Store"},{name:"Mobile And Laptop Store"},{name:"Electrical Store"},{name:"Restaurant / Caf\xe9"}],$=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(x.A,{}),"Business Information"]}),(0,J.jsx)("div",{className:N,children:"Configure your business details, GST information, and address. This information will be displayed on invoices and bills."}),(0,J.jsx)(Q.A,{children:"Basic Information"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Organization Name",name:"org_name",rules:[{required:!0,message:"Please enter organization name!"}],children:(0,J.jsx)(O.A,{placeholder:"Enter organization name"})})}),(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Business Type",name:"business_type",rules:[{required:!0,message:"Please select business type!"}],children:(0,J.jsx)(t.A,{placeholder:"Select business type",showSearch:!0,filterOption:(e,n)=>{var i;return(null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:"").toLowerCase().includes(e.toLowerCase())},options:Z.map((e=>({value:e.name,label:e.name})))})})})]}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please enter email!"},{type:"email",message:"Please enter a valid email!"}],children:(0,J.jsx)(O.A,{placeholder:"Enter email"})})}),(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Phone",name:"phone",rules:[{required:!0,message:"Please enter phone number!"}],children:(0,J.jsx)(O.A,{placeholder:"Enter phone number"})})})]}),(0,J.jsxs)(Q.A,{children:[(0,J.jsx)(V.A,{})," Tax & Legal Information"]}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"GST Number",name:"gst_number",extra:"15-digit GST identification number",children:(0,J.jsx)(O.A,{placeholder:"e.g., 27AAPFU0939F1ZV",maxLength:15})})}),(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"PAN Number",name:"pan_number",extra:"10-character PAN",children:(0,J.jsx)(O.A,{placeholder:"e.g., AAPFU0939F",maxLength:10,style:{textTransform:"uppercase"}})})})]}),(0,J.jsxs)(Q.A,{children:[(0,J.jsx)(W.A,{})," Address Information"]}),(0,J.jsx)(r.A.Item,{label:"Address",name:"address1",children:(0,J.jsx)(X,{placeholder:"Enter complete address",rows:3})}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{xs:24,md:8,children:(0,J.jsx)(r.A.Item,{label:"City",name:"city",children:(0,J.jsx)(O.A,{placeholder:"Enter city"})})}),(0,J.jsx)(m.A,{xs:24,md:8,children:(0,J.jsx)(r.A.Item,{label:"State",name:"state",children:(0,J.jsx)(O.A,{placeholder:"Enter state"})})}),(0,J.jsx)(m.A,{xs:24,md:8,children:(0,J.jsx)(r.A.Item,{label:"Pincode",name:"pincode",children:(0,J.jsx)(O.A,{placeholder:"Enter pincode",maxLength:6})})})]}),(0,J.jsxs)(Q.A,{children:[(0,J.jsx)(H.A,{})," Additional Settings"]}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Currency",name:"currency",extra:"e.g., INR, USD, EUR",children:(0,J.jsx)(O.A,{placeholder:"INR"})})}),(0,J.jsx)(m.A,{xs:24,md:12,children:(0,J.jsx)(r.A.Item,{label:"Timezone",name:"timezone",extra:"e.g., Asia/Kolkata",children:(0,J.jsx)(O.A,{placeholder:"Asia/Kolkata"})})})]}),(0,J.jsx)(r.A.Item,{label:"Organisation Status",name:"status",valuePropName:"checked",extra:"Enable or disable this organisation",children:(0,J.jsx)(M.A,{checkedChildren:"Active",unCheckedChildren:"Inactive"})}),(0,J.jsxs)("div",{className:P,children:["\u2705 ",(0,J.jsx)("strong",{children:"Note:"})," This information is stored in your organisation profile and will be used across all invoices and reports."]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Business Information"})]})]})};var ee=i(6051),ne=i(1045);const{Option:ie}=t.A,le=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;const a=(0,ne.Zp)();return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(p.A,{}),"Tax Configuration"]}),(0,J.jsx)("div",{className:N,children:"Global tax settings. Tax rates are configured per category, and tax inclusion is handled at billing level."}),(0,J.jsx)(r.A.Item,{label:"Enable Tax/GST",name:"tax_enabled",valuePropName:"checked",extra:"Enable or disable tax calculation across the entire application",children:(0,J.jsx)(M.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,J.jsx)(r.A.Item,{label:"Tax Type",name:"tax_type",extra:"Select the type of tax applicable to your business",children:(0,J.jsxs)(t.A,{children:[(0,J.jsx)(ie,{value:"GST",children:"GST (India)"}),(0,J.jsx)(ie,{value:"VAT",children:"VAT"}),(0,J.jsx)(ie,{value:"Sales Tax",children:"Sales Tax"})]})}),(0,J.jsx)(Q.A,{children:"Tax Rate Configuration"}),(0,J.jsxs)("div",{className:T,children:["\u26a0\ufe0f ",(0,J.jsx)("strong",{children:"Tax Rates:"})," Configured individually for each product category.",(0,J.jsx)("br",{}),"Go to ",(0,J.jsx)("strong",{children:"Products \u2192 Category"})," to set specific tax rates (e.g., Food: 5%, Electronics: 18%)."]}),(0,J.jsx)(ee.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,J.jsx)(G.Ay,{type:"dashed",icon:(0,J.jsx)(p.A,{}),onClick:()=>a("/category_crud"),block:!0,children:"Go to Category Management"})}),(0,J.jsx)(Q.A,{children:"Tax Inclusion"}),(0,J.jsxs)("div",{className:T,children:["\u26a0\ufe0f ",(0,J.jsx)("strong",{children:"Tax Inclusive/Exclusive:"})," Handled at the billing level.",(0,J.jsx)("br",{}),"You can choose tax inclusion per bill in the ",(0,J.jsx)("strong",{children:"Billing Page"}),"."]}),(0,J.jsx)(ee.A,{direction:"vertical",size:"middle",style:{width:"100%",marginTop:16},children:(0,J.jsx)(G.Ay,{type:"dashed",icon:(0,J.jsx)(_.A,{}),onClick:()=>a("/retaill_billing"),block:!0,children:"Go to Billing Page"})}),(0,J.jsx)(Q.A,{}),(0,J.jsxs)("div",{className:P,children:["\u2705 ",(0,J.jsx)("strong",{children:"Your Tax System Architecture:"}),(0,J.jsx)("br",{}),"\u2022 ",(0,J.jsx)("strong",{children:"Global (Here):"})," Enable/Disable tax & Tax type (GST/VAT)",(0,J.jsx)("br",{}),"\u2022 ",(0,J.jsx)("strong",{children:"Category Level:"})," Tax rates per product category",(0,J.jsx)("br",{}),"\u2022 ",(0,J.jsx)("strong",{children:"Billing Level:"})," Tax inclusive/exclusive per bill"]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Tax Settings"})]})]})};var se=i(7866);const{TextArea:ae}=O.A,te=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(_.A,{}),"Invoice Settings"]}),(0,J.jsx)("div",{className:N,children:"Customize how your invoices are generated and displayed"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Invoice Prefix",name:"invoice_prefix",rules:[{required:!0}],extra:"e.g., INV, BILL, REC",children:(0,J.jsx)(O.A,{placeholder:"INV"})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Starting Invoice Number",name:"invoice_starting_number",rules:[{required:!0}],children:(0,J.jsx)(se.A,{min:1,style:{width:"100%"}})})})]}),(0,J.jsx)(r.A.Item,{label:"Invoice Footer Text",name:"invoice_footer",extra:"This text will appear at the bottom of invoices",children:(0,J.jsx)(ae,{rows:3,placeholder:"Thank you for your business!"})}),(0,J.jsx)(r.A.Item,{label:"Terms & Conditions",name:"invoice_terms",children:(0,J.jsx)(ae,{rows:4,placeholder:"Enter terms and conditions..."})}),(0,J.jsx)(Q.A,{children:"Display Options"}),(0,J.jsxs)(ee.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,J.jsx)(r.A.Item,{label:"Show Logo on Invoice",name:"show_logo_on_invoice",valuePropName:"checked",children:(0,J.jsx)(M.A,{})}),(0,J.jsx)(r.A.Item,{label:"Show Terms & Conditions on Invoice",name:"show_terms_on_invoice",valuePropName:"checked",children:(0,J.jsx)(M.A,{})})]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Invoice Settings"})]})]})},{Option:re}=t.A,oe=e=>{let{form:n,loading:i,onSave:l,onReset:s,onTestPrinter:a}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(v.A,{}),"Thermal Printer Configuration"]}),(0,J.jsx)("div",{className:T,children:"\u26a0\ufe0f Make sure your thermal printer is connected before testing"}),(0,J.jsx)(r.A.Item,{label:"Enable Thermal Printer",name:"thermal_printer_enabled",valuePropName:"checked",children:(0,J.jsx)(M.A,{})}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Printer Port",name:"printer_port",children:(0,J.jsxs)(t.A,{children:[(0,J.jsx)(re,{value:"COM1",children:"COM1"}),(0,J.jsx)(re,{value:"COM2",children:"COM2"}),(0,J.jsx)(re,{value:"COM3",children:"COM3"}),(0,J.jsx)(re,{value:"USB",children:"USB"}),(0,J.jsx)(re,{value:"Bluetooth",children:"Bluetooth"})]})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Baud Rate",name:"printer_baud_rate",children:(0,J.jsxs)(t.A,{children:[(0,J.jsx)(re,{value:9600,children:"9600"}),(0,J.jsx)(re,{value:19200,children:"19200"}),(0,J.jsx)(re,{value:38400,children:"38400"}),(0,J.jsx)(re,{value:115200,children:"115200"})]})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Paper Width (mm)",name:"paper_width",children:(0,J.jsxs)(t.A,{children:[(0,J.jsx)(re,{value:58,children:"58mm (2 inch)"}),(0,J.jsx)(re,{value:80,children:"80mm (3 inch)"})]})})})]}),(0,J.jsx)(r.A.Item,{label:"Auto Print After Bill",name:"auto_print",valuePropName:"checked",children:(0,J.jsx)(M.A,{})}),(0,J.jsx)(G.Ay,{type:"dashed",icon:(0,J.jsx)(v.A,{}),onClick:a,className:R,children:"Test Printer"}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Printer Settings"})]})]})},{Option:de}=t.A,ce=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(j.A,{}),"Default Values"]}),(0,J.jsx)("div",{className:N,children:"These values will be pre-selected when creating new records"}),(0,J.jsxs)("div",{className:B,children:[(0,J.jsx)(r.A.Item,{label:"Default Payment Mode",name:"default_payment_mode",extra:"Pre-selected payment method for new bills",children:(0,J.jsxs)(t.A,{placeholder:"Select default payment mode",children:[(0,J.jsx)(de,{value:"cash",children:"\ud83d\udcb5 Cash"}),(0,J.jsx)(de,{value:"upi",children:"\ud83d\udcf1 UPI"}),(0,J.jsx)(de,{value:"card",children:"\ud83d\udcb3 Card"}),(0,J.jsx)(de,{value:"credit",children:"\ud83d\udcdd Credit"})]})}),(0,J.jsx)(r.A.Item,{label:"Default Document Print Type",name:"default_document_type",extra:"Default print format when creating new bills",children:(0,J.jsxs)(t.A,{placeholder:"Select default document type",children:[(0,J.jsx)(de,{value:"bill",children:"\ud83e\uddfe Bill (Retail / Quick)"}),(0,J.jsx)(de,{value:"invoice",children:"\ud83d\udccb Invoice (Formal / Detailed)"})]})})]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Default Values"})]})]})},me=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(A.A,{}),"Notification Preferences"]}),(0,J.jsx)("div",{className:N,children:"Control how and when you receive notifications"}),(0,J.jsxs)("div",{className:F,children:[(0,J.jsxs)("div",{className:E,children:[(0,J.jsx)("div",{className:q,children:"Email Notifications"}),(0,J.jsx)("div",{className:D,children:"Receive notifications via email"})]}),(0,J.jsx)(r.A.Item,{name:"email_notifications",valuePropName:"checked",noStyle:!0,children:(0,J.jsx)(M.A,{})})]}),(0,J.jsxs)("div",{className:F,children:[(0,J.jsxs)("div",{className:E,children:[(0,J.jsx)("div",{className:q,children:"SMS Notifications"}),(0,J.jsx)("div",{className:D,children:"Receive notifications via SMS"})]}),(0,J.jsx)(r.A.Item,{name:"sms_notifications",valuePropName:"checked",noStyle:!0,children:(0,J.jsx)(M.A,{})})]}),(0,J.jsx)(Q.A,{}),(0,J.jsxs)("div",{className:F,children:[(0,J.jsxs)("div",{className:E,children:[(0,J.jsx)("div",{className:q,children:"Low Stock Alerts"}),(0,J.jsx)("div",{className:D,children:"Get notified when product stock is low"})]}),(0,J.jsx)(r.A.Item,{name:"low_stock_alert",valuePropName:"checked",noStyle:!0,children:(0,J.jsx)(M.A,{})})]}),(0,J.jsx)(r.A.Item,{label:"Low Stock Threshold",name:"low_stock_threshold",extra:"Notify when stock goes below this quantity",children:(0,J.jsx)(se.A,{min:0,style:{width:200}})}),(0,J.jsx)(Q.A,{}),(0,J.jsxs)("div",{className:F,children:[(0,J.jsxs)("div",{className:E,children:[(0,J.jsx)("div",{className:q,children:"Payment Reminders"}),(0,J.jsx)("div",{className:D,children:"Send reminders for pending payments"})]}),(0,J.jsx)(r.A.Item,{name:"payment_reminder",valuePropName:"checked",noStyle:!0,children:(0,J.jsx)(M.A,{})})]}),(0,J.jsxs)("div",{className:F,children:[(0,J.jsxs)("div",{className:E,children:[(0,J.jsx)("div",{className:q,children:"Daily Report Email"}),(0,J.jsx)("div",{className:D,children:"Receive daily sales report via email"})]}),(0,J.jsx)(r.A.Item,{name:"daily_report_email",valuePropName:"checked",noStyle:!0,children:(0,J.jsx)(M.A,{})})]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Notification Settings"})]})]})};var ue=i(62751),he=i(61118),xe=i(82271),pe=i(22115);const _e=e=>{var n,i;let{form:l,loading:a,onSave:t,onReset:o}=e;(0,pe.J)();const[u,h]=(0,s.useState)(null),[x,p]=(0,s.useState)("bill"),[v,j]=(0,s.useState)(!1),A=r.A.useWatch("bill_template",l),g=r.A.useWatch("invoice_template",l),y=()=>({customerName:"Sample Customer",customerAddress:"Sample Address, City",customerPhone:"+91 9999999999",customerEmail:"customer@example.com",date:(new Date).toISOString(),invoice_no:"PREVIEW-001",payment_mode:"Cash",items:[{name:"Sample Product 1",product_name:"Sample Product 1",qty:2,price:100,amount:200,tax_percentage:18,hsn_code:"1234",mrp:120,unit:"Pcs"},{name:"Sample Product 2",product_name:"Sample Product 2",qty:1,price:150,amount:150,tax_percentage:18,hsn_code:"5678",mrp:180,unit:"Pcs"}],total:350,total_gst:63,cgst:31.5,sgst:31.5,discount:0,discount_type:"percentage"}),b=()=>{j(!1),h(null)},f=(e,n,i)=>{const s="bill"===e?xe.XA:xe.tL;return(0,J.jsx)(c.A,{gutter:[16,16],children:Object.entries(s).map((s=>{let[a,t]=s;const r=n===a;return(0,J.jsx)(m.A,{xs:24,sm:12,md:8,lg:6,children:(0,J.jsxs)(d.A,{hoverable:!0,style:{border:r?"2px solid #4e54c8":"1px solid #eee",borderRadius:12,boxShadow:r?"0 4px 16px #4e54c855":"0 2px 8px rgba(0,0,0,0.06)",background:r?"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)":"#fff",textAlign:"center",transition:"all 0.3s"},onClick:()=>l.setFieldValue(i,a),bodyStyle:{padding:16},children:[(0,J.jsx)("div",{style:{width:"100%",height:120,overflow:"hidden",borderRadius:8,boxShadow:"0 1px 4px rgba(0,0,0,0.07)",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e0e0e0",marginBottom:12},children:(0,J.jsx)("div",{style:{width:750,height:400,display:"flex",alignItems:"center",justifyContent:"center",transform:"scale(0.22)",transformOrigin:"center center",pointerEvents:"none"},children:(0,J.jsx)(t.component,{billData:y()})})}),(0,J.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:4,color:r?"#4e54c8":"#333"},children:t.label}),(0,J.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:8},children:t.description}),r&&(0,J.jsx)("div",{style:{color:"#4e54c8",fontWeight:500,fontSize:12,marginBottom:8},children:"\u2713 Selected"}),(0,J.jsx)(G.Ay,{type:"primary",ghost:!0,size:"small",icon:(0,J.jsx)(he.A,{}),onClick:n=>{n.stopPropagation(),((e,n)=>{h(e),p(n),j(!0)})(a,e)},children:"Preview"})]})},a)}))})};return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(r.A,{form:l,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(_.A,{}),"Template Settings"]}),(0,J.jsx)("div",{className:N,children:"Select your preferred templates for bills and invoices. These templates will be used when printing or generating PDFs."}),(0,J.jsx)(Q.A,{children:"Bill Template (For Quick Sales / Retail)"}),(0,J.jsxs)("div",{className:P,children:["\ud83d\udcc4 ",(0,J.jsx)("strong",{children:"Bill Template:"})," Used for quick retail sales and POS billing"]}),(0,J.jsx)(r.A.Item,{name:"bill_template",children:f("bill",A,"bill_template")}),(0,J.jsx)(Q.A,{children:"Invoice Template (For Formal Invoices)"}),(0,J.jsxs)("div",{className:P,children:["\ud83d\udccb ",(0,J.jsx)("strong",{children:"Invoice Template:"})," Used for formal invoices with detailed information"]}),(0,J.jsx)(r.A.Item,{name:"invoice_template",children:f("invoice",g,"invoice_template")}),(0,J.jsxs)("div",{className:T,children:["\ud83d\udca1 ",(0,J.jsx)("strong",{children:"Tip:"}),' You can preview each template before selecting. Click the template card to select it, or click "Preview" for a full-size view.']}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:o,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:t,loading:a,children:"Save Template Settings"})]})]}),(0,J.jsx)(ue.A,{open:v,onCancel:b,footer:[(0,J.jsx)(G.Ay,{type:"primary",onClick:()=>{u&&("bill"===x?l.setFieldValue("bill_template",u):l.setFieldValue("invoice_template",u),b())},children:"Use this template"},"use"),(0,J.jsx)(G.Ay,{onClick:b,children:"Close"},"close")],width:800,title:u?"".concat("bill"===x?null===(n=xe.XA[u])||void 0===n?void 0:n.label:null===(i=xe.tL[u])||void 0===i?void 0:i.label," Preview"):"",centered:!0,destroyOnClose:!0,children:u&&(0,J.jsx)("div",{style:{background:"#fafafa",borderRadius:12,padding:16,minHeight:300},children:s.createElement("bill"===x?xe.XA[u].component:xe.tL[u].component,{billData:y()})})})]})},{Option:ve}=t.A,je=e=>{let{form:n,loading:i,onSave:l,onReset:s}=e;return(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(g.A,{}),"Bank Account Details"]}),(0,J.jsx)("div",{className:N,children:"Add your bank account details to display on invoices and bills"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Bank Name",name:"bank_name",extra:"e.g., State Bank of India, HDFC Bank",children:(0,J.jsx)(O.A,{placeholder:"Enter bank name"})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Account Holder Name",name:"account_holder_name",extra:"Name as per bank records",children:(0,J.jsx)(O.A,{placeholder:"Enter account holder name"})})})]}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Account Number",name:"account_number",children:(0,J.jsx)(O.A,{placeholder:"Enter account number"})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Account Type",name:"account_type",children:(0,J.jsxs)(t.A,{placeholder:"Select account type",children:[(0,J.jsx)(ve,{value:"savings",children:"Savings Account"}),(0,J.jsx)(ve,{value:"current",children:"Current Account"}),(0,J.jsx)(ve,{value:"overdraft",children:"Overdraft Account"})]})})})]}),(0,J.jsx)(Q.A,{children:"Bank Branch Information"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"IFSC Code",name:"ifsc_code",extra:"11-digit code for bank branch",children:(0,J.jsx)(O.A,{placeholder:"e.g., SBIN0001234",maxLength:11,style:{textTransform:"uppercase"}})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Branch Name",name:"branch_name",children:(0,J.jsx)(O.A,{placeholder:"Enter branch name"})})})]}),(0,J.jsx)(Q.A,{children:"Digital Payment Details"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"UPI ID",name:"upi_id",extra:"For digital payments (e.g., yourname@upi)",children:(0,J.jsx)(O.A,{placeholder:"Enter UPI ID"})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"SWIFT Code",name:"swift_code",extra:"For international transactions (optional)",children:(0,J.jsx)(O.A,{placeholder:"e.g., SBININBB123",maxLength:11,style:{textTransform:"uppercase"}})})})]}),(0,J.jsxs)("div",{className:T,children:["\ud83d\udca1 ",(0,J.jsx)("strong",{children:"Note:"})," Bank details will be displayed on printed invoices and bills. Ensure all information is accurate."]}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:s,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save Bank Details"})]})]})};var Ae=i(42261),ge=i(25558),ye=i(94786),be=i(356);const{Option:fe}=t.A,{Text:Se,Title:Ie,Paragraph:ke}=a.A,we=e=>{let{form:n,loading:i,onSave:l,onReset:a}=e;const[o,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1),[p,_]=(0,s.useState)(null),v=r.A.useWatch("upi_id",n),A=r.A.useWatch("enable_payment_qr",n),g=r.A.useWatch("qr_size",n)||200;return(0,s.useEffect)((()=>{(async()=>{if(!v||!(0,be.kU)(v))return u(""),x(!1),void _(null);x(!0),_((0,be.sd)(v));try{const e=n.getFieldValue("org_name")||"Your Business",i=await(0,be.generateUPIQRCode)({upiId:v,payeeName:e,transactionNote:"Payment for Invoice"},{width:g});u(i)}catch(e){console.error("Error generating QR preview:",e),u("")}})()}),[v,g,n]),(0,J.jsxs)(r.A,{form:n,layout:"vertical",className:w,children:[(0,J.jsxs)("div",{className:k,children:[(0,J.jsx)(y.A,{}),"Payment QR Code Settings"]}),(0,J.jsx)("div",{className:N,children:(0,J.jsxs)(ee.A,{direction:"vertical",size:"small",children:[(0,J.jsxs)(Se,{children:[(0,J.jsx)(ye.A,{})," Enable UPI QR codes on your invoices and bills for instant digital payments"]}),(0,J.jsx)(Se,{type:"secondary",style:{fontSize:"12px"},children:"Customers can scan the QR code with Google Pay, PhonePe, Paytm, or any UPI app"})]})}),(0,J.jsx)(r.A.Item,{label:"Enable Payment QR Code",name:"enable_payment_qr",valuePropName:"checked",extra:"Show UPI payment QR code on invoices and bills",children:(0,J.jsx)(M.A,{checkedChildren:"Enabled",unCheckedChildren:"Disabled"})}),(0,J.jsx)(c.A,{gutter:16,children:(0,J.jsxs)(m.A,{span:24,children:[(0,J.jsx)(r.A.Item,{label:"UPI ID",name:"upi_id",rules:[{validator:(e,n)=>n?(0,be.kU)(n)?Promise.resolve():Promise.reject("Invalid UPI ID format (e.g., 1234567890@ybl)"):Promise.reject("Please enter your UPI ID")}],extra:"Your UPI ID for receiving payments (e.g., 1234567890@ybl)",children:(0,J.jsx)(O.A,{placeholder:"yourname@upi or phonenumber@ybl",suffix:h?(0,J.jsx)(j.A,{style:{color:"#52c41a"}}):null})}),p&&(0,J.jsx)(Ae.A,{message:"UPI Provider: ".concat(p.provider),description:"Compatible with: ".concat(p.appName),type:"info",showIcon:!0,style:{marginBottom:16}})]})}),(0,J.jsx)(Q.A,{children:"QR Code Display Options"}),(0,J.jsxs)(c.A,{gutter:16,children:[(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Show on Invoices",name:"qr_on_invoice",valuePropName:"checked",extra:"Display QR code on formal invoices",children:(0,J.jsx)(M.A,{checkedChildren:"Yes",unCheckedChildren:"No",disabled:!A})})}),(0,J.jsx)(m.A,{span:12,children:(0,J.jsx)(r.A.Item,{label:"Show on Bills",name:"qr_on_bill",valuePropName:"checked",extra:"Display QR code on retail bills",children:(0,J.jsx)(M.A,{checkedChildren:"Yes",unCheckedChildren:"No",disabled:!A})})})]}),(0,J.jsx)(r.A.Item,{label:"QR Code Size: ".concat(g,"px"),name:"qr_size",extra:"Size of the QR code on printed documents",children:(0,J.jsx)(ge.A,{min:100,max:300,step:10,marks:{100:"100px",150:"150px",200:"200px",250:"250px",300:"300px"},disabled:!A})}),(0,J.jsx)(r.A.Item,{label:"QR Code Position",name:"qr_position",extra:"Where to place the QR code on the document",children:(0,J.jsxs)(t.A,{disabled:!A,children:[(0,J.jsx)(fe,{value:"bottom-right",children:"Bottom Right"}),(0,J.jsx)(fe,{value:"bottom-left",children:"Bottom Left"}),(0,J.jsx)(fe,{value:"top-right",children:"Top Right (Header)"}),(0,J.jsx)(fe,{value:"footer",children:"Footer Center"})]})}),(0,J.jsx)(r.A.Item,{label:"Show UPI ID Text",name:"show_upi_id_text",valuePropName:"checked",extra:"Display UPI ID below the QR code for manual entry",children:(0,J.jsx)(M.A,{checkedChildren:"Show",unCheckedChildren:"Hide",disabled:!A})}),(0,J.jsx)(Q.A,{children:"QR Code Preview"}),(0,J.jsx)(d.A,{title:"Live Preview",bordered:!1,style:{background:"#fafafa",marginBottom:24},children:o?(0,J.jsxs)("div",{style:{textAlign:"center"},children:[(0,J.jsx)("img",{src:o,alt:"UPI QR Code Preview",style:{maxWidth:"100%",border:"2px solid #d9d9d9",padding:8,background:"#fff",borderRadius:8}}),n.getFieldValue("show_upi_id_text")&&(0,J.jsxs)("div",{style:{marginTop:12},children:[(0,J.jsx)(Se,{strong:!0,children:"UPI ID: "}),(0,J.jsx)(Se,{code:!0,children:v})]}),(0,J.jsx)(ke,{type:"secondary",style:{marginTop:12,fontSize:"12px"},children:"Scan this QR code with any UPI app to make payment"})]}):(0,J.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,J.jsx)(y.A,{style:{fontSize:64,color:"#d9d9d9"}}),(0,J.jsx)(ke,{type:"secondary",style:{marginTop:12},children:v?"Generating QR code...":"Enter a valid UPI ID to see preview"})]})}),(0,J.jsxs)("div",{className:T,children:[(0,J.jsx)(Ie,{level:5,style:{marginTop:0},children:"\ud83d\udcf1 How Customers Will Pay:"}),(0,J.jsxs)("ol",{style:{marginBottom:0,paddingLeft:20},children:[(0,J.jsx)("li",{children:"Customer opens Google Pay, PhonePe, Paytm, or any UPI app"}),(0,J.jsx)("li",{children:'Taps on "Scan QR Code" or "Pay by QR"'}),(0,J.jsx)("li",{children:"Scans the QR code printed on your invoice/bill"}),(0,J.jsx)("li",{children:"Verifies amount and completes payment"}),(0,J.jsx)("li",{children:"Payment instantly credited to your account"})]})]}),(0,J.jsx)(Ae.A,{message:"Pro Tip",description:"For best results, ensure your QR code is at least 150px in size and printed with high contrast (black on white background).",type:"info",showIcon:!0,style:{marginTop:16}}),(0,J.jsxs)("div",{className:C,children:[(0,J.jsx)(G.Ay,{onClick:a,children:"Reset"}),(0,J.jsx)(G.Ay,{type:"primary",icon:(0,J.jsx)(Y.A,{}),onClick:l,loading:i,children:"Save QR Settings"})]})]})},{Title:Ce,Text:Ne}=a.A,{Option:Pe}=t.A,Te=(e,n)=>{n&&e.setFieldsValue({org_name:n.org_name||n.organization_name||n.name,business_type:n.business_type,email:n.email,phone:n.phone,gst_number:n.gst_number,pan_number:n.pan_number,address1:n.address1||n.address,city:n.city,state:n.state,pincode:n.pincode,currency:n.currency,timezone:n.timezone,status:!1!==n.status})},Re=()=>{const[e]=r.A.useForm(),[n]=r.A.useForm(),[i,a]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),[C,N]=(0,s.useState)("business"),[P,T]=(0,s.useState)("all"),[R,B]=(0,s.useState)("all"),F=(0,s.useMemo)((()=>(0,z.HW)()),[]),{userRole:E,isSuperAdmin:q,isTenant:D,isOrganisationUser:O,isBranchUser:Q}=(0,s.useMemo)((()=>{const e=L.A.getItem("scope"),n=(null===e||void 0===e?void 0:e.userType)||(null===F||void 0===F?void 0:F.user_type)||(null===F||void 0===F?void 0:F.usertype)||(null===F||void 0===F?void 0:F.user_role)||"";return{userRole:n,isSuperAdmin:"superadmin"===n.toLowerCase(),isTenant:"tenant"===n.toLowerCase(),isOrganisationUser:"organisationuser"===n.toLowerCase(),isBranchUser:"branchuser"===n.toLowerCase()}}),[F]),{data:M}=U.lh.useGetTenantAccountsQuery({},{skip:!q}),G=(0,s.useMemo)((()=>{if(q&&P&&"all"!==P)return{tenant_id:P};if(O||Q){var e;const n=(null===F||void 0===F?void 0:F.organisation_id)||(null===F||void 0===F||null===(e=F.organisationItems)||void 0===e?void 0:e._id);if(n)return{organisation_id:n}}return{}}),[q,P,O,Q,F]),{data:V}=U.lh.useGetOrganisationsQuery(G,{skip:!D&&!q&&!O&&!Q}),[W,H]=(0,s.useState)(null),Y=(0,s.useMemo)((()=>!W||"all"===W||!O&&!Q&&(q?!P||"all"===P:!D)),[W,q,D,O,Q,P]),{data:K,refetch:X}=U.lh.useGetSettingsQuery({organisation_id:W,page:1,limit:10},{skip:Y||!W,refetchOnMountOrArgChange:!0}),[Z]=U.lh.useUpdateSettingsMutation(),[ee]=U.lh.useCreateSettingsMutation(),[ne]=U.lh.useUpdateOrganisationsMutation(),ie=(null===M||void 0===M?void 0:M.result)||[],se=(null===V||void 0===V?void 0:V.result)||[],ae=(0,s.useMemo)((()=>W&&"all"!==W&&(null===se||void 0===se?void 0:se.find((e=>e._id===W)))||null),[W,se]);(0,s.useEffect)((()=>{if((O||Q)&&!W){var e;const i=(null===F||void 0===F?void 0:F.organisation_id)||(null===F||void 0===F||null===(e=F.organisationItems)||void 0===e?void 0:e._id);i&&(H(i),Te(n,null===F||void 0===F?void 0:F.organisationItems))}}),[]);const re=(0,s.useCallback)((i=>{T(i||"all"),B("all"),H(null),e.resetFields(),n.resetFields()}),[e,n]),de=(0,s.useCallback)((n=>{B(n||"all"),n&&"all"!==n&&(!q||P&&"all"!==P)?H(n):(H(null),e.resetFields())}),[e,q,P]);(0,s.useEffect)((()=>{ae?Te(n,ae):W&&"all"!==W&&n.resetFields()}),[ae,W,n]),(0,s.useEffect)((()=>{const n=(null===K||void 0===K?void 0:K.result)||K||{},i=Array.isArray(n)?n[0]:n,l=i&&"object"===typeof i&&(i._id||i.id);var s,a,t,r,o,d,c,m,u,h,x,p,_,v,j,A,g,y,b,f,S,I,k,w,C,N,P,T,B,F,E,U,z,L,O;W?l?e.setFieldsValue({tax_enabled:null!==(s=i.tax_enabled)&&void 0!==s?s:null,tax_type:null!==(a=i.tax_type)&&void 0!==a?a:null,invoice_prefix:null!==(t=i.invoice_prefix)&&void 0!==t?t:null,invoice_starting_number:null!==(r=i.invoice_starting_number)&&void 0!==r?r:null,invoice_footer:null!==(o=i.invoice_footer)&&void 0!==o?o:null,show_logo_on_invoice:null!==(d=i.show_logo_on_invoice)&&void 0!==d?d:null,show_terms_on_invoice:null!==(c=i.show_terms_on_invoice)&&void 0!==c?c:null,invoice_terms:null!==(m=i.invoice_terms)&&void 0!==m?m:null,thermal_printer_enabled:null!==(u=i.thermal_printer_enabled)&&void 0!==u?u:null,printer_port:null!==(h=i.printer_port)&&void 0!==h?h:null,printer_baud_rate:null!==(x=i.printer_baud_rate)&&void 0!==x?x:null,paper_width:null!==(p=i.paper_width)&&void 0!==p?p:null,auto_print:null!==(_=i.auto_print)&&void 0!==_?_:null,default_payment_mode:null!==(v=i.default_payment_mode)&&void 0!==v?v:null,default_document_type:null!==(j=i.default_document_type)&&void 0!==j?j:null,email_notifications:null!==(A=i.email_notifications)&&void 0!==A?A:null,sms_notifications:null!==(g=i.sms_notifications)&&void 0!==g?g:null,low_stock_alert:null!==(y=i.low_stock_alert)&&void 0!==y?y:null,low_stock_threshold:null!==(b=i.low_stock_threshold)&&void 0!==b?b:null,payment_reminder:null!==(f=i.payment_reminder)&&void 0!==f?f:null,daily_report_email:null!==(S=i.daily_report_email)&&void 0!==S?S:null,bill_template:i.bill_template,invoice_template:i.invoice_template,bank_name:null!==(I=i.bank_name)&&void 0!==I?I:null,account_holder_name:null!==(k=i.account_holder_name)&&void 0!==k?k:null,account_number:null!==(w=i.account_number)&&void 0!==w?w:null,ifsc_code:null!==(C=i.ifsc_code)&&void 0!==C?C:null,branch_name:null!==(N=i.branch_name)&&void 0!==N?N:null,account_type:null!==(P=i.account_type)&&void 0!==P?P:null,upi_id:null!==(T=i.upi_id)&&void 0!==T?T:null,swift_code:null!==(B=i.swift_code)&&void 0!==B?B:null,enable_payment_qr:null!==(F=i.enable_payment_qr)&&void 0!==F&&F,qr_on_invoice:null===(E=i.qr_on_invoice)||void 0===E||E,qr_on_bill:null===(U=i.qr_on_bill)||void 0===U||U,qr_size:null!==(z=i.qr_size)&&void 0!==z?z:200,qr_position:null!==(L=i.qr_position)&&void 0!==L?L:"bottom-right",show_upi_id_text:null===(O=i.show_upi_id_text)||void 0===O||O}):e.setFieldsValue({tax_enabled:null,tax_type:null,invoice_prefix:null,invoice_starting_number:null,invoice_footer:null,show_logo_on_invoice:null,show_terms_on_invoice:null,invoice_terms:null,thermal_printer_enabled:null,printer_port:null,printer_baud_rate:null,paper_width:null,auto_print:null,default_payment_mode:null,default_document_type:null,email_notifications:null,sms_notifications:null,low_stock_alert:null,low_stock_threshold:null,payment_reminder:null,daily_report_email:null,bill_template:null,invoice_template:null,bank_name:null,account_holder_name:null,account_number:null,ifsc_code:null,branch_name:null,account_type:null,upi_id:null,swift_code:null,enable_payment_qr:!1,qr_on_invoice:!0,qr_on_bill:!0,qr_size:200,qr_position:"bottom-right",show_upi_id_text:!0}):"all"===R&&(q||D)&&e.resetFields()}),[K,W,R,q,D,e]);const ue=(0,s.useCallback)((async()=>{try{if((q||D)&&"all"===R)return void o.Ay.error("Please select an organisation before updating settings");const m=await e.validateFields();a(!0);let u="all"!==R?R:null;var n;if(!u)u=(null===F||void 0===F?void 0:F.organisation_id)||(null===F||void 0===F||null===(n=F.organisationItems)||void 0===n?void 0:n._id);if((q||D)&&!u)return void o.Ay.error("Please select an organisation before updating settings");let h={};if("tax"===C)h={tax_enabled:m.tax_enabled,tax_type:m.tax_type};else if("invoice"===C)h={invoice_prefix:m.invoice_prefix,invoice_starting_number:m.invoice_starting_number,invoice_footer:m.invoice_footer,invoice_terms:m.invoice_terms,show_logo_on_invoice:m.show_logo_on_invoice,show_terms_on_invoice:m.show_terms_on_invoice};else if("printer"===C)h={thermal_printer_enabled:m.thermal_printer_enabled,printer_port:m.printer_port,printer_baud_rate:m.printer_baud_rate,paper_width:m.paper_width,auto_print:m.auto_print};else if("defaults"===C)h={default_payment_mode:m.default_payment_mode,default_document_type:m.default_document_type};else if("notifications"===C)h={email_notifications:m.email_notifications,sms_notifications:m.sms_notifications,low_stock_alert:m.low_stock_alert,low_stock_threshold:m.low_stock_threshold,payment_reminder:m.payment_reminder,daily_report_email:m.daily_report_email};else if("templates"===C)h={bill_template:m.bill_template,invoice_template:m.invoice_template};else if("bank"===C)h={bank_name:m.bank_name,account_holder_name:m.account_holder_name,account_number:m.account_number,ifsc_code:m.ifsc_code,branch_name:m.branch_name,account_type:m.account_type,upi_id:m.upi_id,swift_code:m.swift_code};else if("payment-qr"===C){var i,s,t,r,d,c;h={upi_id:m.upi_id,enable_payment_qr:null!==(i=m.enable_payment_qr)&&void 0!==i&&i,qr_on_invoice:null===(s=m.qr_on_invoice)||void 0===s||s,qr_on_bill:null===(t=m.qr_on_bill)||void 0===t||t,qr_size:null!==(r=m.qr_size)&&void 0!==r?r:200,qr_position:null!==(d=m.qr_position)&&void 0!==d?d:"bottom-right",show_upi_id_text:null===(c=m.show_upi_id_text)||void 0===c||c}}const x=(null===K||void 0===K?void 0:K.result)||K||[],p=Array.isArray(x)?x[0]:x,_=p&&(p._id||p.id),v=u||(null===F||void 0===F?void 0:F._id);if(_){const e=p._id||p.id;await Z({id:e,data:(0,l.A)((0,l.A)({},h),{},{organisation_id:v})}).unwrap(),o.Ay.success("Settings updated successfully! \ud83c\udf89")}else await ee((0,l.A)((0,l.A)({},h),{},{organisation_id:v})).unwrap(),o.Ay.success("Settings created successfully! \ud83c\udf89");v&&await X()}catch(u){var m;console.error("\u274c Error saving settings:",u),o.Ay.error(u.message||(null===(m=u.data)||void 0===m?void 0:m.message)||"Failed to save settings")}finally{a(!1)}}),[q,D,R,F,C,Z,ee,X,K,e,O,Q]),he=(0,s.useCallback)((async()=>{try{if((q||D)&&"all"===R)return void o.Ay.error("Please select an organisation before updating business information");const i=await n.validateFields();w(!0);let l="all"!==R?R:null;var e;if(!l)l=(null===F||void 0===F?void 0:F.organisation_id)||(null===F||void 0===F||null===(e=F.organisationItems)||void 0===e?void 0:e._id);if(!l)return void o.Ay.error("Organisation ID not found. Please select an organisation.");await ne({id:l,data:{org_name:i.org_name,business_type:i.business_type,email:i.email,phone:i.phone,gst_number:i.gst_number,pan_number:i.pan_number,address1:i.address1,city:i.city,state:i.state,pincode:i.pincode,currency:i.currency,timezone:i.timezone,status:i.status}}).unwrap(),o.Ay.success("Business information updated successfully! \ud83c\udf89")}catch(l){var i;console.error("\u274c Error saving business information:",l),o.Ay.error(l.message||(null===(i=l.data)||void 0===i?void 0:i.message)||"Failed to save business information")}finally{w(!1)}}),[q,D,R,F,n,ne]),xe=(0,s.useCallback)((()=>{e.resetFields(),o.Ay.info("Form reset to last saved values")}),[e]),pe=(0,s.useCallback)((()=>{n.resetFields(),o.Ay.info("Form reset to last saved values")}),[n]),ve=(0,s.useCallback)((()=>{o.Ay.info("Printing test page... Check your thermal printer")}),[]),Ae=(0,s.useMemo)((()=>(null===ie||void 0===ie?void 0:ie.map((e=>({label:e.organization_name||e.tenant_name,value:e._id}))))||[]),[ie]),ge=(0,s.useMemo)((()=>(null===se||void 0===se?void 0:se.map((e=>({label:e.org_name||e.organization_name||e.name,value:e._id}))))||[]),[se]);return(0,J.jsxs)("div",{className:b,children:[(0,J.jsx)("div",{className:f,children:(0,J.jsxs)(Ce,{level:2,className:S,children:[(0,J.jsx)(h.A,{}),"Settings"]})}),(q||D)&&(0,J.jsx)(d.A,{style:{marginBottom:16},children:(0,J.jsxs)(c.A,{gutter:16,children:[q&&(0,J.jsxs)(m.A,{xs:24,sm:12,md:8,children:[(0,J.jsx)("div",{style:{marginBottom:8},children:(0,J.jsx)(Ne,{strong:!0,children:"Tenant"})}),(0,J.jsxs)(t.A,{style:{width:"100%"},placeholder:"Select Tenant",value:P,onChange:re,showSearch:!0,optionFilterProp:"children",allowClear:!0,children:[(0,J.jsx)(Pe,{value:"all",children:"All Tenants"}),Ae.map((e=>(0,J.jsx)(Pe,{value:e.value,children:e.label},e.value)))]})]}),(q||D)&&(0,J.jsxs)(m.A,{xs:24,sm:12,md:8,children:[(0,J.jsx)("div",{style:{marginBottom:8},children:(0,J.jsx)(Ne,{strong:!0,children:"Organisation"})}),(0,J.jsxs)(t.A,{style:{width:"100%"},placeholder:"Select Organisation",value:R,onChange:de,showSearch:!0,optionFilterProp:"children",allowClear:!0,disabled:q&&("all"===P||!P),children:[(0,J.jsx)(Pe,{value:"all",children:"All Organisations"}),ge.map((e=>(0,J.jsx)(Pe,{value:e.value,children:e.label},e.value)))]})]})]})}),(0,J.jsx)(d.A,{className:I,children:(0,J.jsx)(u.A,{activeKey:C,onChange:N,type:"card",items:[{key:"business",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(x.A,{})," Business Info"]}),children:(0,J.jsx)($,{form:n,loading:k,onSave:he,onReset:pe})},{key:"tax",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(p.A,{})," Tax & GST"]}),children:(0,J.jsx)(le,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"invoice",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(_.A,{})," Invoice"]}),children:(0,J.jsx)(te,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"printer",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(v.A,{})," Printer"]}),children:(0,J.jsx)(oe,{form:e,loading:i,onSave:ue,onReset:xe,onTestPrinter:ve})},{key:"defaults",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(j.A,{})," Defaults"]}),children:(0,J.jsx)(ce,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"notifications",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(A.A,{})," Notifications"]}),children:(0,J.jsx)(me,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"templates",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(_.A,{})," Templates"]}),children:(0,J.jsx)(_e,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"bank",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(g.A,{})," Bank Details"]}),children:(0,J.jsx)(je,{form:e,loading:i,onSave:ue,onReset:xe})},{key:"payment-qr",label:(0,J.jsxs)("span",{children:[(0,J.jsx)(y.A,{})," Payment QR"]}),children:(0,J.jsx)(we,{form:e,loading:i,onSave:ue,onReset:xe})}]})})]})}}}]);
//# sourceMappingURL=959.54357a44.chunk.js.map